var requirejs,require,define;!function(e){function t(e,t){return v.call(e,t)}function r(e,t){var r,n,o,a,i,s,u,l,c,p,d,f=t&&t.split("/"),m=g.map,h=m&&m["*"]||{};if(e&&"."===e.charAt(0))if(t){for(f=f.slice(0,f.length-1),e=e.split("/"),i=e.length-1,g.nodeIdCompat&&k.test(e[i])&&(e[i]=e[i].replace(k,"")),e=f.concat(e),c=0;c<e.length;c+=1)if(d=e[c],"."===d)e.splice(c,1),c-=1;else if(".."===d){if(1===c&&(".."===e[2]||".."===e[0]))break;c>0&&(e.splice(c-1,2),c-=2)}e=e.join("/")}else 0===e.indexOf("./")&&(e=e.substring(2));if((f||h)&&m){for(r=e.split("/"),c=r.length;c>0;c-=1){if(n=r.slice(0,c).join("/"),f)for(p=f.length;p>0;p-=1)if(o=m[f.slice(0,p).join("/")],o&&(o=o[n])){a=o,s=c;break}if(a)break;!u&&h&&h[n]&&(u=h[n],l=c)}!a&&u&&(a=u,s=l),a&&(r.splice(0,s,a),e=r.join("/"))}return e}function n(t,r){return function(){return c.apply(e,b.call(arguments,0).concat([t,r]))}}function o(e){return function(t){return r(t,e)}}function a(e){return function(t){f[e]=t}}function i(r){if(t(m,r)){var n=m[r];delete m[r],h[r]=!0,l.apply(e,n)}if(!t(f,r)&&!t(h,r))throw new Error("No "+r);return f[r]}function s(e){var t,r=e?e.indexOf("!"):-1;return r>-1&&(t=e.substring(0,r),e=e.substring(r+1,e.length)),[t,e]}function u(e){return function(){return g&&g.config&&g.config[e]||{}}}var l,c,p,d,f={},m={},g={},h={},v=Object.prototype.hasOwnProperty,b=[].slice,k=/\.js$/;p=function(e,t){var n,a=s(e),u=a[0];return e=a[1],u&&(u=r(u,t),n=i(u)),u?e=n&&n.normalize?n.normalize(e,o(t)):r(e,t):(e=r(e,t),a=s(e),u=a[0],e=a[1],u&&(n=i(u))),{f:u?u+"!"+e:e,n:e,pr:u,p:n}},d={require:function(e){return n(e)},exports:function(e){var t=f[e];return"undefined"!=typeof t?t:f[e]={}},module:function(e){return{id:e,uri:"",exports:f[e],config:u(e)}}},l=function(r,o,s,u){var l,c,g,v,b,k,y=[],_=typeof s;if(u=u||r,"undefined"===_||"function"===_){for(o=!o.length&&s.length?["require","exports","module"]:o,b=0;b<o.length;b+=1)if(v=p(o[b],u),c=v.f,"require"===c)y[b]=d.require(r);else if("exports"===c)y[b]=d.exports(r),k=!0;else if("module"===c)l=y[b]=d.module(r);else if(t(f,c)||t(m,c)||t(h,c))y[b]=i(c);else{if(!v.p)throw new Error(r+" missing "+c);v.p.load(v.n,n(u,!0),a(c),{}),y[b]=f[c]}g=s?s.apply(f[r],y):void 0,r&&(l&&l.exports!==e&&l.exports!==f[r]?f[r]=l.exports:g===e&&k||(f[r]=g))}else r&&(f[r]=s)},requirejs=require=c=function(t,r,n,o,a){if("string"==typeof t)return d[t]?d[t](r):i(p(t,r).f);if(!t.splice){if(g=t,g.deps&&c(g.deps,g.callback),!r)return;r.splice?(t=r,r=n,n=null):t=e}return r=r||function(){},"function"==typeof n&&(n=o,o=a),o?l(e,t,r,n):setTimeout(function(){l(e,t,r,n)},4),c},c.config=function(e){return c(e)},requirejs._defined=f,define=function(e,r,n){r.splice||(n=r,r=[]),t(f,e)||t(m,e)||(m[e]=[e,r,n])},define.amd={jQuery:!0}}(),define("lib/almond",function(){}),function(e){define("underscore",[],function(){return function(){return function(){var e=this,t=e._,r={},n=Array.prototype,o=Object.prototype,a=Function.prototype,i=n.push,s=n.slice,u=n.concat,l=o.toString,c=o.hasOwnProperty,p=n.forEach,d=n.map,f=n.reduce,m=n.reduceRight,g=n.filter,h=n.every,v=n.some,b=n.indexOf,k=n.lastIndexOf,y=Array.isArray,_=Object.keys,w=a.bind,x=function(e){return e instanceof x?e:this instanceof x?void(this._wrapped=e):new x(e)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=x),exports._=x):e._=x,x.VERSION="1.4.4";var L=x.each=x.forEach=function(e,t,n){if(null!=e)if(p&&e.forEach===p)e.forEach(t,n);else if(e.length===+e.length){for(var o=0,a=e.length;a>o;o++)if(t.call(n,e[o],o,e)===r)return}else for(var i in e)if(x.has(e,i)&&t.call(n,e[i],i,e)===r)return};x.map=x.collect=function(e,t,r){var n=[];return null==e?n:d&&e.map===d?e.map(t,r):(L(e,function(e,o,a){n[n.length]=t.call(r,e,o,a)}),n)};var O="Reduce of empty array with no initial value";x.reduce=x.foldl=x.inject=function(e,t,r,n){var o=arguments.length>2;if(null==e&&(e=[]),f&&e.reduce===f)return n&&(t=x.bind(t,n)),o?e.reduce(t,r):e.reduce(t);if(L(e,function(e,a,i){o?r=t.call(n,r,e,a,i):(r=e,o=!0)}),!o)throw new TypeError(O);return r},x.reduceRight=x.foldr=function(e,t,r,n){var o=arguments.length>2;if(null==e&&(e=[]),m&&e.reduceRight===m)return n&&(t=x.bind(t,n)),o?e.reduceRight(t,r):e.reduceRight(t);var a=e.length;if(a!==+a){var i=x.keys(e);a=i.length}if(L(e,function(s,u,l){u=i?i[--a]:--a,o?r=t.call(n,r,e[u],u,l):(r=e[u],o=!0)}),!o)throw new TypeError(O);return r},x.find=x.detect=function(e,t,r){var n;return E(e,function(e,o,a){return t.call(r,e,o,a)?(n=e,!0):void 0}),n},x.filter=x.select=function(e,t,r){var n=[];return null==e?n:g&&e.filter===g?e.filter(t,r):(L(e,function(e,o,a){t.call(r,e,o,a)&&(n[n.length]=e)}),n)},x.reject=function(e,t,r){return x.filter(e,function(e,n,o){return!t.call(r,e,n,o)},r)},x.every=x.all=function(e,t,n){t||(t=x.identity);var o=!0;return null==e?o:h&&e.every===h?e.every(t,n):(L(e,function(e,a,i){return(o=o&&t.call(n,e,a,i))?void 0:r}),!!o)};var E=x.some=x.any=function(e,t,n){t||(t=x.identity);var o=!1;return null==e?o:v&&e.some===v?e.some(t,n):(L(e,function(e,a,i){return o||(o=t.call(n,e,a,i))?r:void 0}),!!o)};x.contains=x.include=function(e,t){return null==e?!1:b&&e.indexOf===b?-1!=e.indexOf(t):E(e,function(e){return e===t})},x.invoke=function(e,t){var r=s.call(arguments,2),n=x.isFunction(t);return x.map(e,function(e){return(n?t:e[t]).apply(e,r)})},x.pluck=function(e,t){return x.map(e,function(e){return e[t]})},x.where=function(e,t,r){return x.isEmpty(t)?r?null:[]:x[r?"find":"filter"](e,function(e){for(var r in t)if(t[r]!==e[r])return!1;return!0})},x.findWhere=function(e,t){return x.where(e,t,!0)},x.max=function(e,t,r){if(!t&&x.isArray(e)&&e[0]===+e[0]&&e.length<65535)return Math.max.apply(Math,e);if(!t&&x.isEmpty(e))return-1/0;var n={computed:-1/0,value:-1/0};return L(e,function(e,o,a){var i=t?t.call(r,e,o,a):e;i>=n.computed&&(n={value:e,computed:i})}),n.value},x.min=function(e,t,r){if(!t&&x.isArray(e)&&e[0]===+e[0]&&e.length<65535)return Math.min.apply(Math,e);if(!t&&x.isEmpty(e))return 1/0;var n={computed:1/0,value:1/0};return L(e,function(e,o,a){var i=t?t.call(r,e,o,a):e;i<n.computed&&(n={value:e,computed:i})}),n.value},x.shuffle=function(e){var t,r=0,n=[];return L(e,function(e){t=x.random(r++),n[r-1]=n[t],n[t]=e}),n};var A=function(e){return x.isFunction(e)?e:function(t){return t[e]}};x.sortBy=function(e,t,r){var n=A(t);return x.pluck(x.map(e,function(e,t,o){return{value:e,index:t,criteria:n.call(r,e,t,o)}}).sort(function(e,t){var r=e.criteria,n=t.criteria;if(r!==n){if(r>n||void 0===r)return 1;if(n>r||void 0===n)return-1}return e.index<t.index?-1:1}),"value")};var F=function(e,t,r,n){var o={},a=A(t||x.identity);return L(e,function(t,i){var s=a.call(r,t,i,e);n(o,s,t)}),o};x.groupBy=function(e,t,r){return F(e,t,r,function(e,t,r){(x.has(e,t)?e[t]:e[t]=[]).push(r)})},x.countBy=function(e,t,r){return F(e,t,r,function(e,t){x.has(e,t)||(e[t]=0),e[t]++})},x.sortedIndex=function(e,t,r,n){r=null==r?x.identity:A(r);for(var o=r.call(n,t),a=0,i=e.length;i>a;){var s=a+i>>>1;r.call(n,e[s])<o?a=s+1:i=s}return a},x.toArray=function(e){return e?x.isArray(e)?s.call(e):e.length===+e.length?x.map(e,x.identity):x.values(e):[]},x.size=function(e){return null==e?0:e.length===+e.length?e.length:x.keys(e).length},x.first=x.head=x.take=function(e,t,r){return null==e?void 0:null==t||r?e[0]:s.call(e,0,t)},x.initial=function(e,t,r){return s.call(e,0,e.length-(null==t||r?1:t))},x.last=function(e,t,r){return null==e?void 0:null==t||r?e[e.length-1]:s.call(e,Math.max(e.length-t,0))},x.rest=x.tail=x.drop=function(e,t,r){return s.call(e,null==t||r?1:t)},x.compact=function(e){return x.filter(e,x.identity)};var S=function(e,t,r){return L(e,function(e){x.isArray(e)?t?i.apply(r,e):S(e,t,r):r.push(e)}),r};x.flatten=function(e,t){return S(e,t,[])},x.without=function(e){return x.difference(e,s.call(arguments,1))},x.uniq=x.unique=function(e,t,r,n){x.isFunction(t)&&(n=r,r=t,t=!1);var o=r?x.map(e,r,n):e,a=[],i=[];return L(o,function(r,n){(t?n&&i[i.length-1]===r:x.contains(i,r))||(i.push(r),a.push(e[n]))}),a},x.union=function(){return x.uniq(u.apply(n,arguments))},x.intersection=function(e){var t=s.call(arguments,1);return x.filter(x.uniq(e),function(e){return x.every(t,function(t){return x.indexOf(t,e)>=0})})},x.difference=function(e){var t=u.apply(n,s.call(arguments,1));return x.filter(e,function(e){return!x.contains(t,e)})},x.zip=function(){for(var e=s.call(arguments),t=x.max(x.pluck(e,"length")),r=new Array(t),n=0;t>n;n++)r[n]=x.pluck(e,""+n);return r},x.object=function(e,t){if(null==e)return{};for(var r={},n=0,o=e.length;o>n;n++)t?r[e[n]]=t[n]:r[e[n][0]]=e[n][1];return r},x.indexOf=function(e,t,r){if(null==e)return-1;var n=0,o=e.length;if(r){if("number"!=typeof r)return n=x.sortedIndex(e,t),e[n]===t?n:-1;n=0>r?Math.max(0,o+r):r}if(b&&e.indexOf===b)return e.indexOf(t,r);for(;o>n;n++)if(e[n]===t)return n;return-1},x.lastIndexOf=function(e,t,r){if(null==e)return-1;var n=null!=r;if(k&&e.lastIndexOf===k)return n?e.lastIndexOf(t,r):e.lastIndexOf(t);for(var o=n?r:e.length;o--;)if(e[o]===t)return o;return-1},x.range=function(e,t,r){arguments.length<=1&&(t=e||0,e=0),r=arguments[2]||1;for(var n=Math.max(Math.ceil((t-e)/r),0),o=0,a=new Array(n);n>o;)a[o++]=e,e+=r;return a},x.bind=function(e,t){if(e.bind===w&&w)return w.apply(e,s.call(arguments,1));var r=s.call(arguments,2);return function(){return e.apply(t,r.concat(s.call(arguments)))}},x.partial=function(e){var t=s.call(arguments,1);return function(){return e.apply(this,t.concat(s.call(arguments)))}},x.bindAll=function(e){var t=s.call(arguments,1);return 0===t.length&&(t=x.functions(e)),L(t,function(t){e[t]=x.bind(e[t],e)}),e},x.memoize=function(e,t){var r={};return t||(t=x.identity),function(){var n=t.apply(this,arguments);return x.has(r,n)?r[n]:r[n]=e.apply(this,arguments)}},x.delay=function(e,t){var r=s.call(arguments,2);return setTimeout(function(){return e.apply(null,r)},t)},x.defer=function(e){return x.delay.apply(x,[e,1].concat(s.call(arguments,1)))},x.throttle=function(e,t){var r,n,o,a,i=0,s=function(){i=new Date,o=null,a=e.apply(r,n)};return function(){var u=new Date,l=t-(u-i);return r=this,n=arguments,0>=l?(clearTimeout(o),o=null,i=u,a=e.apply(r,n)):o||(o=setTimeout(s,l)),a}},x.debounce=function(e,t,r){var n,o;return function(){var a=this,i=arguments,s=function(){n=null,r||(o=e.apply(a,i))},u=r&&!n;return clearTimeout(n),n=setTimeout(s,t),u&&(o=e.apply(a,i)),o}},x.once=function(e){var t,r=!1;return function(){return r?t:(r=!0,t=e.apply(this,arguments),e=null,t)}},x.wrap=function(e,t){return function(){var r=[e];return i.apply(r,arguments),t.apply(this,r)}},x.compose=function(){var e=arguments;return function(){for(var t=arguments,r=e.length-1;r>=0;r--)t=[e[r].apply(this,t)];return t[0]}},x.after=function(e,t){return 0>=e?t():function(){return--e<1?t.apply(this,arguments):void 0}},x.keys=_||function(e){if(e!==Object(e))throw new TypeError("Invalid object");var t=[];for(var r in e)x.has(e,r)&&(t[t.length]=r);return t},x.values=function(e){var t=[];for(var r in e)x.has(e,r)&&t.push(e[r]);return t},x.pairs=function(e){var t=[];for(var r in e)x.has(e,r)&&t.push([r,e[r]]);return t},x.invert=function(e){var t={};for(var r in e)x.has(e,r)&&(t[e[r]]=r);return t},x.functions=x.methods=function(e){var t=[];for(var r in e)x.isFunction(e[r])&&t.push(r);return t.sort()},x.extend=function(e){return L(s.call(arguments,1),function(t){if(t)for(var r in t)e[r]=t[r]}),e},x.pick=function(e){var t={},r=u.apply(n,s.call(arguments,1));return L(r,function(r){r in e&&(t[r]=e[r])}),t},x.omit=function(e){var t={},r=u.apply(n,s.call(arguments,1));for(var o in e)x.contains(r,o)||(t[o]=e[o]);return t},x.defaults=function(e){return L(s.call(arguments,1),function(t){if(t)for(var r in t)null==e[r]&&(e[r]=t[r])}),e},x.clone=function(e){return x.isObject(e)?x.isArray(e)?e.slice():x.extend({},e):e},x.tap=function(e,t){return t(e),e};var C=function(e,t,r,n){if(e===t)return 0!==e||1/e==1/t;if(null==e||null==t)return e===t;e instanceof x&&(e=e._wrapped),t instanceof x&&(t=t._wrapped);var o=l.call(e);if(o!=l.call(t))return!1;switch(o){case"[object String]":return e==String(t);case"[object Number]":return e!=+e?t!=+t:0==e?1/e==1/t:e==+t;case"[object Date]":case"[object Boolean]":return+e==+t;case"[object RegExp]":return e.source==t.source&&e.global==t.global&&e.multiline==t.multiline&&e.ignoreCase==t.ignoreCase}if("object"!=typeof e||"object"!=typeof t)return!1;for(var a=r.length;a--;)if(r[a]==e)return n[a]==t;r.push(e),n.push(t);var i=0,s=!0;if("[object Array]"==o){if(i=e.length,s=i==t.length)for(;i--&&(s=C(e[i],t[i],r,n)););}else{var u=e.constructor,c=t.constructor;if(u!==c&&!(x.isFunction(u)&&u instanceof u&&x.isFunction(c)&&c instanceof c))return!1;for(var p in e)if(x.has(e,p)&&(i++,!(s=x.has(t,p)&&C(e[p],t[p],r,n))))break;if(s){for(p in t)if(x.has(t,p)&&!i--)break;s=!i}}return r.pop(),n.pop(),s};x.isEqual=function(e,t){return C(e,t,[],[])},x.isEmpty=function(e){if(null==e)return!0;if(x.isArray(e)||x.isString(e))return 0===e.length;for(var t in e)if(x.has(e,t))return!1;return!0},x.isElement=function(e){return!(!e||1!==e.nodeType)},x.isArray=y||function(e){return"[object Array]"==l.call(e)},x.isObject=function(e){return e===Object(e)},L(["Arguments","Function","String","Number","Date","RegExp"],function(e){x["is"+e]=function(t){return l.call(t)=="[object "+e+"]"}}),x.isArguments(arguments)||(x.isArguments=function(e){return!(!e||!x.has(e,"callee"))}),"function"!=typeof/./&&(x.isFunction=function(e){return"function"==typeof e}),x.isFinite=function(e){return isFinite(e)&&!isNaN(parseFloat(e))},x.isNaN=function(e){return x.isNumber(e)&&e!=+e},x.isBoolean=function(e){return e===!0||e===!1||"[object Boolean]"==l.call(e)},x.isNull=function(e){return null===e},x.isUndefined=function(e){return void 0===e},x.has=function(e,t){return c.call(e,t)},x.noConflict=function(){return e._=t,this},x.identity=function(e){return e},x.times=function(e,t,r){for(var n=Array(e),o=0;e>o;o++)n[o]=t.call(r,o);return n},x.random=function(e,t){return null==t&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))};var V={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"}};V.unescape=x.invert(V.escape);var T={escape:new RegExp("["+x.keys(V.escape).join("")+"]","g"),unescape:new RegExp("("+x.keys(V.unescape).join("|")+")","g")};x.each(["escape","unescape"],function(e){x[e]=function(t){return null==t?"":(""+t).replace(T[e],function(t){return V[e][t]})}}),x.result=function(e,t){if(null==e)return null;var r=e[t];return x.isFunction(r)?r.call(e):r},x.mixin=function(e){L(x.functions(e),function(t){var r=x[t]=e[t];x.prototype[t]=function(){var e=[this._wrapped];return i.apply(e,arguments),M.call(this,r.apply(x,e))}})};var I=0;x.uniqueId=function(e){var t=++I+"";return e?e+t:t},x.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var P=/(.)^/,N={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},R=/\\|'|\r|\n|\t|\u2028|\u2029/g;x.template=function(e,t,r){var n;r=x.defaults({},r,x.templateSettings);var o=new RegExp([(r.escape||P).source,(r.interpolate||P).source,(r.evaluate||P).source].join("|")+"|$","g"),a=0,i="__p+='";e.replace(o,function(t,r,n,o,s){return i+=e.slice(a,s).replace(R,function(e){return"\\"+N[e]}),r&&(i+="'+\n((__t=("+r+"))==null?'':_.escape(__t))+\n'"),n&&(i+="'+\n((__t=("+n+"))==null?'':__t)+\n'"),o&&(i+="';\n"+o+"\n__p+='"),a=s+t.length,t}),i+="';\n",r.variable||(i="with(obj||{}){\n"+i+"}\n"),i="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+i+"return __p;\n";try{n=new Function(r.variable||"obj","_",i)}catch(s){throw s.source=i,s}if(t)return n(t,x);var u=function(e){return n.call(this,e,x)};return u.source="function("+(r.variable||"obj")+"){\n"+i+"}",u},x.chain=function(e){return x(e).chain()};var M=function(e){return this._chain?x(e).chain():e};x.mixin(x),L(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=n[e];x.prototype[e]=function(){var r=this._wrapped;return t.apply(r,arguments),"shift"!=e&&"splice"!=e||0!==r.length||delete r[0],M.call(this,r)}}),L(["concat","join","slice"],function(e){var t=n[e];x.prototype[e]=function(){return M.call(this,t.apply(this._wrapped,arguments))}}),x.extend(x.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}})}.call(this),e._=_}.apply(e,arguments)})}(this),define("core/settings",["underscore"],function(e){var t={_extend:function(r){e.extend(t,r)},switches:[]};return t}),define("core/capabilities",["core/settings"],function(e){function t(e){var t=window.matchMedia(e);return!!t&&t.matches}function r(e){e=e||window.navigator;for(var t,r,n=0;n<i.length;n++)if(r=i[n],t=r.regex.exec(e.userAgent))return{name:r.name,slug:r.slug,type:r.type,version:t[1]&&parseInt(t[1],10)};return{}}function n(){return s.phantom||e.mockWebApps}function o(){return n()||!(!navigator.mozApps||!navigator.mozApps.install)}function a(){return n()||!(!navigator.mozApps||!navigator.mozApps.installPackage)}var i=[{name:"Android",regex:/Android/,slug:"android",type:"mobile"},{name:"Windows",regex:/Windows NT/,slug:"windows",type:"desktop"},{name:"Mac OS X",regex:/Mac OS X 10[_\.](\d+)/,slug:"mac",type:"desktop"},{name:"Linux",regex:/Linux/,slug:"linux",type:"desktop"}],s={JSON:window.JSON&&"function"==typeof JSON.parse,debug:document.location.href.indexOf("dbg")>=0,debug_in_page:document.location.href.indexOf("dbginpage")>=0,console:window.console&&"function"==typeof window.console.log,packaged:"app:"===window.location.protocol,iframed:window.top!==window.self,replaceState:"function"==typeof history.replaceState,chromeless:!(!window.locationbar||window.locationbar.visible),userAgent:navigator.userAgent,widescreen:function(){return t("(min-width: 710px)")},firefoxAndroid:-1!==navigator.userAgent.indexOf("Firefox")&&-1!==navigator.userAgent.indexOf("Android"),touch:!!("ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch),performance:!!(window.performance||window.msPerformance||window.webkitPerformance||window.mozPerformance),navPay:!!navigator.mozPay,webactivities:!(!navigator.setMessageHandler&&!navigator.mozSetMessageHandler),firefoxOS:navigator.mozApps&&navigator.mozApps.installPackage&&-1===navigator.userAgent.indexOf("Android")&&(-1!==navigator.userAgent.indexOf("Mobile")||-1!==navigator.userAgent.indexOf("Tablet")),phantom:!!navigator.userAgent.match(/(Phantom|Slimer)/),detectOS:r,os:r()};return Object.defineProperty?(Object.defineProperty(s,"webApps",{get:o}),Object.defineProperty(s,"packagedWebApps",{get:a})):(s.webApps=o(),s.packagedWebApps=a()),s.nativeFxA=function(){return s.firefoxOS&&"app:"===window.location.protocol&&navigator.userAgent.match(/rv:(\d{2})/)[1]>=34},s.yulelogFxA=function(){return s.firefoxOS&&window.top!==window.self&&-1!==e.switches.indexOf("native-firefox-accounts")&&navigator.userAgent.match(/rv:(\d{2})/)[1]>=34},s.fallbackFxA=function(){return!(s.nativeFxA()||s.yulelogFxA())},s.device_platform=function(e){return e=e||s,e.firefoxOS?"firefoxos":"desktop"===e.os.type?"desktop":"android"},s.device_formfactor=function(e){return e=e||s,e.firefoxOS||"desktop"===e.os.type?"":e.widescreen()?"tablet":"mobile"},s.device_type=function(e){var t=s.device_platform(e),r=s.device_formfactor(e);return t&&r?t+"-"+r:t},s.osXInstallIssues="mac"===s.os.slug&&s.os.version>=9,s}),define("core/format",[],function(){function e(e,t){if(!e)throw"Format string is empty!";if(t){t instanceof Array||t instanceof Object||(t=Array.prototype.slice.call(arguments,1));var n=function(e){return e.replace(r,function(e,r){return t[r]})};return"string"==typeof e?n(e):{toString:function(){return n(e.toString())}}}}function t(t){if(!t)throw"Template string is empty!";return function(r){return e(t,r)}}var r=/\{([^}]+)\}/g;return{format:e,template:t}}),define("core/l10n",["core/format"],function(e){function t(t,r,n){n=n||navigator;var o;return n.l10n&&n.l10n.strings?(o=n.l10n.strings[t]||t,r&&(o=e.format(o,r)),o):t}function r(e,r,n){return{toString:function(){return t(e,r,n)}}}function n(t,r,n,o){if(o=o||navigator,!(n&&"n"in n))throw new Error("`n` not passed to ngettext");var a,i,s=n.n,u=1===s?t:r;if(o.l10n&&o.l10n.strings&&t in(i=o.l10n.strings))if(i[t].constructor===Array&&i[t].length){var l=+o.l10n.pluralize(s);a=i[t][l]||u}else a=i[t]||u;else a=u;return e.format(a,n)}var o=["ar","he","fa","ps","rtl","ur"];return window.gettext=t,window.ngettext=n,{getDirection:function(e){var t;return t=e?e.language:window.navigator.l10n?window.navigator.l10n.language:"en-US",t.indexOf("-")>-1&&(t=t.split("-")[0]),o.indexOf(t)>=0?"rtl":"ltr"},gettext:t,gettext_lazy:r,ngettext:n}}),function(){var e={};!function(){function t(e,r,n){var o=function(){};o.prototype=e.prototype;var a=new o,i=/xyz/.test(function(){})?/\bparent\b/:/.*/;n=n||{};for(var s in n){var u=n[s],l=a[s];a[s]="function"==typeof l&&"function"==typeof u&&i.test(u)?function(e,t){return function(){var r=this.parent;this.parent=t;var n=e.apply(this,arguments);return this.parent=r,n}}(u,l):u}a.typename=r;var c=function(){a.init&&a.init.apply(this,arguments)};return c.prototype=a,c.prototype.constructor=c,c.extend=function(e,r){return"object"==typeof e&&(r=e,e="anonymous"),t(c,e,r)},c}e.object=t(Object,"Object",{})}(),function(){var t=Array.prototype,r=Object.prototype,n={"&":"&amp;",'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;"},o=function(e){return n[e]},a=e.lib={};a.withPrettyErrors=function(e,t,r){return r()},a.TemplateError=function(e,t,r){var n=this;return e instanceof Error?(n=e,e=e.name+": "+e.message):Error.captureStackTrace&&Error.captureStackTrace(n),n.name="Template render error",n.message=e,n.lineno=t,n.colno=r,n.firstUpdate=!0,n.Update=function(e){var t="("+(e||"unknown path")+")";return this.firstUpdate&&(this.lineno&&this.colno?t+=" [Line "+this.lineno+", Column "+this.colno+"]":this.lineno&&(t+=" [Line "+this.lineno+"]")),t+="\n ",this.firstUpdate&&(t+=" "),this.message=t+(this.message||""),this.firstUpdate=!1,this},n},a.TemplateError.prototype=Error.prototype,a.escape=function(e){return e.replace(/[&"'<>]/g,o)},a.isFunction=function(e){return"[object Function]"==r.toString.call(e)},a.isArray=Array.isArray||function(e){return"[object Array]"==r.toString.call(e)},a.isString=function(e){return"[object String]"==r.toString.call(e)},a.isObject=function(e){return e===Object(e)},a.groupBy=function(e,t){for(var r={},n=a.isFunction(t)?t:function(e){return e[t]},o=0;o<e.length;o++){var i=e[o],s=n(i,o);(r[s]||(r[s]=[])).push(i)}return r},a.toArray=function(e){return Array.prototype.slice.call(e)},a.without=function(e){var t=[];if(!e)return t;for(var r=-1,n=e.length,o=a.toArray(arguments).slice(1);++r<n;)-1===o.indexOf(e[r])&&t.push(e[r]);return t},a.extend=function(e,t){for(var r in t)e[r]=t[r];return e},a.repeat=function(e,t){for(var r="",n=0;t>n;n++)r+=e;return r},a.each=function(e,r,n){if(null!==e)if(t.each&&e.each==t.each)e.forEach(r,n);else if(e.length===+e.length)for(var o=0,a=e.length;a>o;o++)r.call(n,e[o],o,e)},a.map=function(e,r){var n=[];if(null===e)return n;if(t.map&&e.map===t.map)return e.map(r);for(var o=0;o<e.length;o++)n[n.length]=r(e[o],o);return e.length===+e.length&&(n.length=e.length),n},a.asyncParallel=function(e,t){for(var r=e.length,n=new Array(r),o=0,a=function(e){return function(a){n[e]=a,o+=1,o===r&&t(n)}},i=0;r>i;i++)e[i](a(i))},a.asyncIter=function(e,t,r){function n(){o++,o<e.length?t(e[o],o,n,r):r()}var o=-1;n()},a.asyncFor=function(e,t,r){function n(){s++;var a=o[s];i>s?t(a,e[a],s,i,n):r()}var o=a.keys(e),i=o.length,s=-1;n()},Array.prototype.indexOf||(Array.prototype.indexOf=function(e,t){if(null===e)throw new TypeError;var r=Object(e),n=r.length>>>0;if(0===n)return-1;var o=0;if(arguments.length>2&&(o=Number(arguments[2]),o!=o?o=0:0!==o&&1/0!==o&&o!==-1/0&&(o=(o>0||-1)*Math.floor(Math.abs(o)))),o>=n)return-1;for(var a=o>=0?o:Math.max(n-Math.abs(o),0);n>a;a++)if(a in r&&r[a]===t)return a;return-1}),Array.prototype.map||(Array.prototype.map=function(){throw new Error("map is unimplemented for this js engine")}),a.keys=function(e){if(Object.prototype.keys)return e.keys();var t=[];for(var r in e)e.hasOwnProperty(r)&&t.push(r);return t}}(),function(){function t(e,t,r){return function(){var a,i,s=o(arguments),u=n(arguments);if(s>e.length){a=Array.prototype.slice.call(arguments,0,e.length);var l=Array.prototype.slice.call(arguments,a.length,s);for(i=0;i<l.length;i++)i<t.length&&(u[t[i]]=l[i]);a.push(u)}else if(s<e.length){for(a=Array.prototype.slice.call(arguments,0,s),i=s;i<e.length;i++){var c=e[i];a.push(u[c]),delete u[c]}a.push(u)}else a=arguments;return r.apply(this,a)}}function r(e){return e.__keywords=!0,e}function n(e){var t=e.length;if(t){var r=e[t-1];if(r&&r.hasOwnProperty("__keywords"))return r}return{}}function o(e){var t=e.length;if(0===t)return 0;var r=e[t-1];return r&&r.hasOwnProperty("__keywords")?t-1:t}function a(e){if("string"!=typeof e)return e;this.toString=function(){return e},this.length=e.length;for(var t=["charAt","charCodeAt","concat","contains","endsWith","fromCharCode","indexOf","lastIndexOf","length","localeCompare","match","quote","replace","search","slice","split","startsWith","substr","substring","toLocaleLowerCase","toLocaleUpperCase","toLowerCase","toUpperCase","trim","trimLeft","trimRight"],r=0;r<t.length;r++)this[t[r]]=s(e[t[r]])}function i(e,t){return e instanceof a?new a(t):t.toString()}function s(e){var t=typeof e;return"string"===t?new a(e):"function"!==t?e:function(){var t=e.apply(this,arguments);return"string"==typeof t?new a(t):t}}function u(e,t){return e=void 0!==e&&null!==e?e:"",t&&"string"==typeof e&&(e=g.escape(e)),e}function l(e,t){return e=e||{},"function"==typeof e[t]?function(){return e[t].apply(e,arguments)}:e[t]}function c(e,t,r){if(!e)throw new Error("Unable to call `"+t+"`, which is undefined or falsey");if("function"!=typeof e)throw new Error("Unable to call `"+t+"`, which is not a function");return e.apply(this,r)}function p(e,t,r){var n=t.lookup(r);return void 0!==n&&null!==n?n:e.lookup(r)}function d(e,t,r){return e.lineno?e:new g.TemplateError(e,t,r)}function f(e,t,r,n){if(g.isArray(e)){var o=e.length;g.asyncIter(e,function(e,n,a){switch(t){case 1:r(e,n,o,a);break;case 2:r(e[0],e[1],n,o,a);break;case 3:r(e[0],e[1],e[2],n,o,a);break;default:e.push(n,a),r.apply(this,e)}},n)}else g.asyncFor(e,function(e,t,n,o,a){r(e,t,n,o,a)},n)}function m(e,t,r,n){function o(e,t){s++,i[e]=t,s==a&&n(null,i.join(""))}var a,i,s=0;if(g.isArray(e))if(a=e.length,i=new Array(a),0===a)n(null,"");else for(var u=0;u<e.length;u++){var l=e[u];switch(t){case 1:r(l,u,a,o);break;case 2:r(l[0],l[1],u,a,o);break;case 3:r(l[0],l[1],l[2],u,a,o);break;default:l.push(u,o),r.apply(this,l)}}else{var c=g.keys(e);if(a=c.length,i=new Array(a),0===a)n(null,"");else for(var u=0;u<c.length;u++){var p=c[u];r(p,e[p],u,a,o)}}}var g=e.lib,h=e.object,v=h.extend({init:function(e){this.variables={},this.parent=e},set:function(e,t){for(var r=e.split("."),n=this.variables,o=0;o<r.length-1;o++){var a=r[o];n[a]||(n[a]={}),n=n[a]}n[r[r.length-1]]=t},get:function(e){var t=this.variables[e];return void 0!==t&&null!==t?t:null},lookup:function(e){var t=this.parent,r=this.variables[e];return void 0!==r&&null!==r?r:t&&t.lookup(e)},push:function(){return new v(this)},pop:function(){return this.parent}});e.runtime={Frame:v,makeMacro:t,makeKeywordArgs:r,numArgs:o,suppressValue:u,memberLookup:l,contextOrFrameLookup:p,callWrap:c,handleError:d,isArray:g.isArray,keys:g.keys,SafeString:a,copySafeness:i,markSafe:s,asyncEach:f,asyncAll:m}}(),function(){var t=e.lib,r=e.runtime,n={abs:function(e){return Math.abs(e)},batch:function(e,t,r){for(var n=[],o=[],a=0;a<e.length;a++)a%t===0&&o.length&&(n.push(o),o=[]),o.push(e[a]);if(o.length){if(r)for(a=o.length;t>a;a++)o.push(r);n.push(o)}return n},capitalize:function(e){var t=e.toLowerCase();return r.copySafeness(e,t.charAt(0).toUpperCase()+t.slice(1))},center:function(e,n){if(n=n||80,e.length>=n)return e;var o=n-e.length,a=t.repeat(" ",o/2-o%2),i=t.repeat(" ",o/2);return r.copySafeness(e,a+e+i)},"default":function(e,t){return e?e:t},dictsort:function(e,r,n){if(!t.isObject(e))throw new t.TemplateError("dictsort filter: val must be an object");var o=[];for(var a in e)o.push([a,e[a]]);var i;if(void 0===n||"key"===n)i=0;else{if("value"!==n)throw new t.TemplateError("dictsort filter: You can only sort by either key or value");i=1}return o.sort(function(e,n){var o=e[i],a=n[i];return r||(t.isString(o)&&(o=o.toUpperCase()),t.isString(a)&&(a=a.toUpperCase())),o>a?1:o==a?0:-1}),o},escape:function(e){return"string"==typeof e||e instanceof r.SafeString?t.escape(e):e},safe:r.markSafe,first:function(e){return e[0]},groupby:function(e,r){return t.groupBy(e,r)},indent:function(e,n,o){n=n||4;for(var a="",i=e.split("\n"),s=t.repeat(" ",n),u=0;u<i.length;u++)a+=0!==u||o?s+i[u]+"\n":i[u]+"\n";return r.copySafeness(e,a)},join:function(e,r,n){return r=r||"",n&&(e=t.map(e,function(e){return e[n]})),e.join(r)},last:function(e){return e[e.length-1]},length:function(e){return e.length},list:function(e){if(t.isString(e))return e.split("");if(t.isObject(e)){var r=[];if(Object.keys)r=Object.keys(e);else for(var n in e)r.push(n);return t.map(r,function(t){return{key:t,value:e[t]}})}throw new t.TemplateError("list filter: type not iterable")},lower:function(e){return e.toLowerCase()},random:function(e){return e[Math.floor(Math.random()*e.length)]},replace:function(e,t,n,o){var a=e,i=a,s=1;for(a=a.replace(t,n);i!=a&&!(s>=o);)i=a,a=a.replace(t,n),s++;return r.copySafeness(e,a)},reverse:function(e){var o;return o=t.isString(e)?n.list(e):t.map(e,function(e){return e}),o.reverse(),t.isString(e)?r.copySafeness(e,o.join("")):o},round:function(e,t,r){t=t||0;var n,o=Math.pow(10,t);return n="ceil"==r?Math.ceil:"floor"==r?Math.floor:Math.round,n(e*o)/o},slice:function(e,t,r){for(var n=Math.floor(e.length/t),o=e.length%t,a=0,i=[],s=0;t>s;s++){var u=a+s*n;o>s&&a++;var l=a+(s+1)*n,c=e.slice(u,l);r&&s>=o&&c.push(r),i.push(c)}return i},sort:function(e,r,n,o){return e=t.map(e,function(e){return e}),e.sort(function(e,a){var i,s;return o?(i=e[o],s=a[o]):(i=e,s=a),!n&&t.isString(i)&&t.isString(s)&&(i=i.toLowerCase(),s=s.toLowerCase()),s>i?r?1:-1:i>s?r?-1:1:0}),e},string:function(e){return r.copySafeness(e,e)},title:function(e){for(var t=e.split(" "),o=0;o<t.length;o++)t[o]=n.capitalize(t[o]);return r.copySafeness(e,t.join(" "))},trim:function(e){return r.copySafeness(e,e.replace(/^\s*|\s*$/g,""))},truncate:function(e,t,n,o){var a=e;if(t=t||255,e.length<=t)return e;if(n)e=e.substring(0,t);else{var i=e.lastIndexOf(" ",t);-1===i&&(i=t),e=e.substring(0,i)}return e+=void 0!==o&&null!==o?o:"...",r.copySafeness(a,e)},upper:function(e){return e.toUpperCase()},urlize:function(e,t,r){isNaN(t)&&(t=1/0);var n=r===!0?' rel="nofollow"':"",o=/^(?:\(|<|&lt;)?(.*?)(?:\.|,|\)|\n|&gt;)?$/,a=/^[\w.!#$%&'*+\-\/=?\^`{|}~]+@[a-z\d\-]+(\.[a-z\d\-]+)+$/i,i=/^https?:\/\/.*$/,s=/^www\./,u=/\.(?:org|net|com)(?:\:|\/|$)/,l=e.split(/\s+/).filter(function(e){return e&&e.length}).map(function(e){var r=e.match(o),l=r&&r[1]||e;return i.test(l)?'<a href="'+l+'"'+n+">"+l.substr(0,t)+"</a>":s.test(l)?'<a href="http://'+l+'"'+n+">"+l.substr(0,t)+"</a>":a.test(l)?'<a href="mailto:'+l+'">'+l+"</a>":u.test(l)?'<a href="http://'+l+'"'+n+">"+l.substr(0,t)+"</a>":l});return l.join(" ")},wordcount:function(e){return e.match(/\w+/g).length},"float":function(e,t){var r=parseFloat(e);return isNaN(r)?t:r},"int":function(e,t){var r=parseInt(e,10);return isNaN(r)?t:r}};n.d=n["default"],n.e=n.escape,e.filters=n}(),function(){function t(e){var t=-1,r=null;return{reset:function(){t=-1,r=null},next:function(){return t++,t>=e.length&&(t=0),r=e[t]}}}function r(e){e=e||",";var t=!0;return function(){var r=t?"":e;return t=!1,r}}var n={range:function(e,t,r){t?r||(r=1):(t=e,e=0,r=1);for(var n=[],o=e;t>o;o+=r)n.push(o);return n},cycler:function(){return t(Array.prototype.slice.call(arguments))},joiner:function(e){return r(e)}};e.globals=n}(),function(){var t=e.lib,r=e.object,n=e.filters,o=e.runtime,a=e.globals,i=o.Frame,s=r.extend({init:function(e,t){t=t||{},this.dev=!!t.dev,this.autoesc=!!t.autoescape,this.filters={},this.asyncFilters=[],this.extensions={},this.extensionsList=[];
for(var r in n)this.addFilter(r,n[r])},addExtension:function(e,t){t._name=e,this.extensions[e]=t,this.extensionsList.push(t)},getExtension:function(e){return this.extensions[e]},addFilter:function(e,t,r){var n=t;r&&this.asyncFilters.push(e),this.filters[e]=n},getFilter:function(e){if(!this.filters[e])throw new Error("filter not found: "+e);return this.filters[e]},getTemplate:function(e,t){if(e&&e.raw&&(e=e.raw),"string"!=typeof e)throw new Error("template names must be a string: "+e);var r=this.cache[e],n=this;if(r.render=function(e,t,r){return this.root(n,new u(e),t,o,r)},r.getExported=function(e){var t=new u({});this.root(n,t,new i,o,function(){e(null,t.getExported())})},!r)throw new Error('Template not available: "'+e+'"');return t?void t.call(this,null,r):r},render:function(e,r,n){t.isFunction(r)&&(n=r,r=null);var a=null;return this.getTemplate(e,function(e,t){if(e&&n)n(e);else{if(e)throw e;t.root(this,new u(r||{}),new i,o,n||function(e,t){if(e)throw e;a=t})}}),a}}),u=r.extend({init:function(e,t){this.ctx=e,this.blocks={},this.exported=[];for(var r in t)this.addBlock(r,t[r])},lookup:function(e){return e in a&&!(e in this.ctx)?a[e]:this.ctx[e]},setVariable:function(e,t){this.ctx[e]=t},getVariables:function(){return this.ctx},addBlock:function(e,t){this.blocks[e]=this.blocks[e]||[],this.blocks[e].push(t)},getBlock:function(e){if(!this.blocks[e])throw new Error('unknown block "'+e+'"');return this.blocks[e][0]},getSuper:function(e,t,r,n,o,a){var i=(this.blocks[t]||[]).indexOf(r),s=this.blocks[t][i+1],u=this;if(-1==i||!s)throw new Error('no super block available for "'+t+'"');s(e,u,n,o,a)},addExport:function(e){this.exported.push(e)},getExported:function(){for(var e={},t=0;t<this.exported.length;t++){var r=this.exported[t];e[r]=this.ctx[r]}return e}});e.environment={Environment:s}}();var t,r=e.lib,n=e.environment,o=e.runtime;t={},t.Environment=n.Environment,t.runtime=o;var a;t.configure=function(e,t){t=t||{},r.isObject(e)&&(t=e,e=null);"watch"in t?!t.watch:!1;return a=new n.Environment(null,t)},t.render=function(e,r,n){return a||t.configure(),a.render(e,r,n)},t.require=function(t){return e[t]},define("core/nunjucks",[],function(){return t})}(),define("core/storage",[],function(){function e(e){return"0::"+e}return{clear:function(){localStorage.clear()},getItem:function(t){var r=localStorage.getItem(e(t));try{return JSON.parse(r)}catch(n){return r}},removeItem:function(t){localStorage.removeItem(e(t))},setItem:function(t,r){try{localStorage.setItem(e(t),JSON.stringify(r))}catch(n){("QuotaExceededError"==n.name||"NS_ERROR_DOM_QUOTA_REACHED"==n.name)&&(require("core/log")("storage").log("LS full, clearing"),localStorage.clear(),require("core/z").doc.trigger("storage--full-cleared"),require("core/views").reload())}}}}),function(e,t){function r(e){var t=e.length,r=Z.type(e);return Z.isWindow(e)?!1:1===e.nodeType&&t?!0:"array"===r||"function"!==r&&(0===t||"number"==typeof t&&t>0&&t-1 in e)}function n(e){var t=ut[e]={};return Z.each(e.match(tt)||[],function(e,r){t[r]=!0}),t}function o(){Object.defineProperty(this.cache={},0,{get:function(){return{}}}),this.expando=Z.expando+Math.random()}function a(e,r,n){var o;if(n===t&&1===e.nodeType)if(o="data-"+r.replace(dt,"-$1").toLowerCase(),n=e.getAttribute(o),"string"==typeof n){try{n="true"===n?!0:"false"===n?!1:"null"===n?null:+n+""===n?+n:pt.test(n)?JSON.parse(n):n}catch(a){}lt.set(e,r,n)}else n=t;return n}function i(){return!0}function s(){return!1}function u(){try{return D.activeElement}catch(e){}}function l(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}function c(e,t,r){if(Z.isFunction(t))return Z.grep(e,function(e,n){return!!t.call(e,n,e)!==r});if(t.nodeType)return Z.grep(e,function(e){return e===t!==r});if("string"==typeof t){if(wt.test(t))return Z.filter(t,e,r);t=Z.filter(t,e)}return Z.grep(e,function(e){return J.call(t,e)>=0!==r})}function p(e,t){return Z.nodeName(e,"table")&&Z.nodeName(1===t.nodeType?t:t.firstChild,"tr")?e.getElementsByTagName("tbody")[0]||e.appendChild(e.ownerDocument.createElement("tbody")):e}function d(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function f(e){var t=It.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function m(e,t){for(var r=e.length,n=0;r>n;n++)ct.set(e[n],"globalEval",!t||ct.get(t[n],"globalEval"))}function g(e,t){var r,n,o,a,i,s,u,l;if(1===t.nodeType){if(ct.hasData(e)&&(a=ct.access(e),i=ct.set(t,a),l=a.events)){delete i.handle,i.events={};for(o in l)for(r=0,n=l[o].length;n>r;r++)Z.event.add(t,o,l[o][r])}lt.hasData(e)&&(s=lt.access(e),u=Z.extend({},s),lt.set(t,u))}}function h(e,r){var n=e.getElementsByTagName?e.getElementsByTagName(r||"*"):e.querySelectorAll?e.querySelectorAll(r||"*"):[];return r===t||r&&Z.nodeName(e,r)?Z.merge([e],n):n}function v(e,t){var r=t.nodeName.toLowerCase();"input"===r&&Ct.test(e.type)?t.checked=e.checked:("input"===r||"textarea"===r)&&(t.defaultValue=e.defaultValue)}function b(e,t){if(t in e)return t;for(var r=t.charAt(0).toUpperCase()+t.slice(1),n=t,o=Kt.length;o--;)if(t=Kt[o]+r,t in e)return t;return n}function k(e,t){return e=t||e,"none"===Z.css(e,"display")||!Z.contains(e.ownerDocument,e)}function y(t){return e.getComputedStyle(t,null)}function _(e,t){for(var r,n,o,a=[],i=0,s=e.length;s>i;i++)n=e[i],n.style&&(a[i]=ct.get(n,"olddisplay"),r=n.style.display,t?(a[i]||"none"!==r||(n.style.display=""),""===n.style.display&&k(n)&&(a[i]=ct.access(n,"olddisplay",O(n.nodeName)))):a[i]||(o=k(n),(r&&"none"!==r||!o)&&ct.set(n,"olddisplay",o?r:Z.css(n,"display"))));for(i=0;s>i;i++)n=e[i],n.style&&(t&&"none"!==n.style.display&&""!==n.style.display||(n.style.display=t?a[i]||"":"none"));return e}function w(e,t,r){var n=jt.exec(t);return n?Math.max(0,n[1]-(r||0))+(n[2]||"px"):t}function x(e,t,r,n,o){for(var a=r===(n?"border":"content")?4:"width"===t?1:0,i=0;4>a;a+=2)"margin"===r&&(i+=Z.css(e,r+$t[a],!0,o)),n?("content"===r&&(i-=Z.css(e,"padding"+$t[a],!0,o)),"margin"!==r&&(i-=Z.css(e,"border"+$t[a]+"Width",!0,o))):(i+=Z.css(e,"padding"+$t[a],!0,o),"padding"!==r&&(i+=Z.css(e,"border"+$t[a]+"Width",!0,o)));return i}function L(e,t,r){var n=!0,o="width"===t?e.offsetWidth:e.offsetHeight,a=y(e),i=Z.support.boxSizing&&"border-box"===Z.css(e,"boxSizing",!1,a);if(0>=o||null==o){if(o=Rt(e,t,a),(0>o||null==o)&&(o=e.style[t]),qt.test(o))return o;n=i&&(Z.support.boxSizingReliable||o===e.style[t]),o=parseFloat(o)||0}return o+x(e,t,r||(i?"border":"content"),n,a)+"px"}function O(e){var t=D,r=Ht[e];return r||(r=E(e,t),"none"!==r&&r||(Mt=(Mt||Z("<iframe frameborder='0' width='0' height='0'/>").css("cssText","display:block !important")).appendTo(t.documentElement),t=(Mt[0].contentWindow||Mt[0].contentDocument).document,t.write("<!doctype html><html><body>"),t.close(),r=E(e,t),Mt.detach()),Ht[e]=r),r}function E(e,t){var r=Z(t.createElement(e)).appendTo(t.body),n=Z.css(r[0],"display");return r.remove(),n}function A(e,t,r,n){var o;if(Z.isArray(t))Z.each(t,function(t,o){r||Jt.test(e)?n(e,o):A(e+"["+("object"==typeof o?t:"")+"]",o,r,n)});else if(r||"object"!==Z.type(t))n(e,t);else for(o in t)A(e+"["+o+"]",t[o],r,n)}function F(){return setTimeout(function(){Zt=t}),Zt=Z.now()}function S(e,t,r){for(var n,o=(ar[t]||[]).concat(ar["*"]),a=0,i=o.length;i>a;a++)if(n=o[a].call(r,t,e))return n}function C(e,t,r){var n,o,a=0,i=or.length,s=Z.Deferred().always(function(){delete u.elem}),u=function(){if(o)return!1;for(var t=Zt||F(),r=Math.max(0,l.startTime+l.duration-t),n=r/l.duration||0,a=1-n,i=0,u=l.tweens.length;u>i;i++)l.tweens[i].run(a);return s.notifyWith(e,[l,a,r]),1>a&&u?r:(s.resolveWith(e,[l]),!1)},l=s.promise({elem:e,props:Z.extend({},t),opts:Z.extend(!0,{specialEasing:{}},r),originalProperties:t,originalOptions:r,startTime:Zt||F(),duration:r.duration,tweens:[],createTween:function(t,r){var n=Z.Tween(e,l.opts,t,r,l.opts.specialEasing[t]||l.opts.easing);return l.tweens.push(n),n},stop:function(t){var r=0,n=t?l.tweens.length:0;if(o)return this;for(o=!0;n>r;r++)l.tweens[r].run(1);return t?s.resolveWith(e,[l,t]):s.rejectWith(e,[l,t]),this}}),c=l.props;for(V(c,l.opts.specialEasing);i>a;a++)if(n=or[a].call(l,e,c,l.opts))return n;return Z.map(c,S,l),Z.isFunction(l.opts.start)&&l.opts.start.call(e,l),Z.fx.timer(Z.extend(u,{elem:e,anim:l,queue:l.opts.queue})),l.progress(l.opts.progress).done(l.opts.done,l.opts.complete).fail(l.opts.fail).always(l.opts.always)}function V(e,t){var r,n,o,a,i;for(r in e)if(n=Z.camelCase(r),o=t[n],a=e[r],Z.isArray(a)&&(o=a[1],a=e[r]=a[0]),r!==n&&(e[n]=a,delete e[r]),i=Z.cssHooks[n],i&&"expand"in i){a=i.expand(a),delete e[n];for(r in a)r in e||(e[r]=a[r],t[r]=o)}else t[n]=o}function T(e,r,n){var o,a,i,s,u,l,c=this,p={},d=e.style,f=e.nodeType&&k(e),m=ct.get(e,"fxshow");n.queue||(u=Z._queueHooks(e,"fx"),null==u.unqueued&&(u.unqueued=0,l=u.empty.fire,u.empty.fire=function(){u.unqueued||l()}),u.unqueued++,c.always(function(){c.always(function(){u.unqueued--,Z.queue(e,"fx").length||u.empty.fire()})})),1===e.nodeType&&("height"in r||"width"in r)&&(n.overflow=[d.overflow,d.overflowX,d.overflowY],"inline"===Z.css(e,"display")&&"none"===Z.css(e,"float")&&(d.display="inline-block")),n.overflow&&(d.overflow="hidden",c.always(function(){d.overflow=n.overflow[0],d.overflowX=n.overflow[1],d.overflowY=n.overflow[2]}));for(o in r)if(a=r[o],tr.exec(a)){if(delete r[o],i=i||"toggle"===a,a===(f?"hide":"show")){if("show"!==a||!m||m[o]===t)continue;f=!0}p[o]=m&&m[o]||Z.style(e,o)}if(!Z.isEmptyObject(p)){m?"hidden"in m&&(f=m.hidden):m=ct.access(e,"fxshow",{}),i&&(m.hidden=!f),f?Z(e).show():c.done(function(){Z(e).hide()}),c.done(function(){var t;ct.remove(e,"fxshow");for(t in p)Z.style(e,t,p[t])});for(o in p)s=S(f?m[o]:0,o,c),o in m||(m[o]=s.start,f&&(s.end=s.start,s.start="width"===o||"height"===o?1:0))}}function I(e,t,r,n,o){return new I.prototype.init(e,t,r,n,o)}function P(e,t){var r,n={height:e},o=0;for(t=t?1:0;4>o;o+=2-t)r=$t[o],n["margin"+r]=n["padding"+r]=e;return t&&(n.opacity=n.width=e),n}function N(e){return Z.isWindow(e)?e:9===e.nodeType&&e.defaultView}var R,M,z=typeof t,D=(e.location,e.document),j=D.documentElement,q=e.jQuery,U=e.$,H={},B=[],W="2.0.2 -ajax,-ajax/script,-ajax/jsonp,-ajax/xhr",$=B.concat,K=B.push,G=B.slice,J=B.indexOf,X=H.toString,Y=H.hasOwnProperty,Q=W.trim,Z=function(e,t){return new Z.fn.init(e,t,R)},et=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,tt=/\S+/g,rt=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,nt=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,ot=/^-ms-/,at=/-([\da-z])/gi,it=function(e,t){return t.toUpperCase()},st=function(){D.removeEventListener("DOMContentLoaded",st,!1),e.removeEventListener("load",st,!1),Z.ready()};Z.fn=Z.prototype={jquery:W,constructor:Z,init:function(e,r,n){var o,a;if(!e)return this;if("string"==typeof e){if(o="<"===e.charAt(0)&&">"===e.charAt(e.length-1)&&e.length>=3?[null,e,null]:rt.exec(e),!o||!o[1]&&r)return!r||r.jquery?(r||n).find(e):this.constructor(r).find(e);if(o[1]){if(r=r instanceof Z?r[0]:r,Z.merge(this,Z.parseHTML(o[1],r&&r.nodeType?r.ownerDocument||r:D,!0)),nt.test(o[1])&&Z.isPlainObject(r))for(o in r)Z.isFunction(this[o])?this[o](r[o]):this.attr(o,r[o]);return this}return a=D.getElementById(o[2]),a&&a.parentNode&&(this.length=1,this[0]=a),this.context=D,this.selector=e,this}return e.nodeType?(this.context=this[0]=e,this.length=1,this):Z.isFunction(e)?n.ready(e):(e.selector!==t&&(this.selector=e.selector,this.context=e.context),Z.makeArray(e,this))},selector:"",length:0,toArray:function(){return G.call(this)},get:function(e){return null==e?this.toArray():0>e?this[this.length+e]:this[e]},pushStack:function(e){var t=Z.merge(this.constructor(),e);return t.prevObject=this,t.context=this.context,t},each:function(e,t){return Z.each(this,e,t)},ready:function(e){return Z.ready.promise().done(e),this},slice:function(){return this.pushStack(G.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,r=+e+(0>e?t:0);return this.pushStack(r>=0&&t>r?[this[r]]:[])},map:function(e){return this.pushStack(Z.map(this,function(t,r){return e.call(t,r,t)}))},end:function(){return this.prevObject||this.constructor(null)},push:K,sort:[].sort,splice:[].splice},Z.fn.init.prototype=Z.fn,Z.extend=Z.fn.extend=function(){var e,r,n,o,a,i,s=arguments[0]||{},u=1,l=arguments.length,c=!1;for("boolean"==typeof s&&(c=s,s=arguments[1]||{},u=2),"object"==typeof s||Z.isFunction(s)||(s={}),l===u&&(s=this,--u);l>u;u++)if(null!=(e=arguments[u]))for(r in e)n=s[r],o=e[r],s!==o&&(c&&o&&(Z.isPlainObject(o)||(a=Z.isArray(o)))?(a?(a=!1,i=n&&Z.isArray(n)?n:[]):i=n&&Z.isPlainObject(n)?n:{},s[r]=Z.extend(c,i,o)):o!==t&&(s[r]=o));return s},Z.extend({expando:"jQuery"+(W+Math.random()).replace(/\D/g,""),noConflict:function(t){return e.$===Z&&(e.$=U),t&&e.jQuery===Z&&(e.jQuery=q),Z},isReady:!1,readyWait:1,holdReady:function(e){e?Z.readyWait++:Z.ready(!0)},ready:function(e){(e===!0?--Z.readyWait:Z.isReady)||(Z.isReady=!0,e!==!0&&--Z.readyWait>0||(M.resolveWith(D,[Z]),Z.fn.trigger&&Z(D).trigger("ready").off("ready")))},isFunction:function(e){return"function"===Z.type(e)},isArray:Array.isArray,isWindow:function(e){return null!=e&&e===e.window},isNumeric:function(e){return!isNaN(parseFloat(e))&&isFinite(e)},type:function(e){return null==e?String(e):"object"==typeof e||"function"==typeof e?H[X.call(e)]||"object":typeof e},isPlainObject:function(e){if("object"!==Z.type(e)||e.nodeType||Z.isWindow(e))return!1;try{if(e.constructor&&!Y.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(t){return!1}return!0},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},error:function(e){throw new Error(e)},parseHTML:function(e,t,r){if(!e||"string"!=typeof e)return null;"boolean"==typeof t&&(r=t,t=!1),t=t||D;var n=nt.exec(e),o=!r&&[];return n?[t.createElement(n[1])]:(n=Z.buildFragment([e],t,o),o&&Z(o).remove(),Z.merge([],n.childNodes))},parseJSON:JSON.parse,parseXML:function(e){var r,n;if(!e||"string"!=typeof e)return null;try{n=new DOMParser,r=n.parseFromString(e,"text/xml")}catch(o){r=t}return(!r||r.getElementsByTagName("parsererror").length)&&Z.error("Invalid XML: "+e),r},noop:function(){},globalEval:function(e){var t,r=eval;e=Z.trim(e),e&&(1===e.indexOf("use strict")?(t=D.createElement("script"),t.text=e,D.head.appendChild(t).parentNode.removeChild(t)):r(e))},camelCase:function(e){return e.replace(ot,"ms-").replace(at,it)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t,n){var o,a=0,i=e.length,s=r(e);if(n){if(s)for(;i>a&&(o=t.apply(e[a],n),o!==!1);a++);else for(a in e)if(o=t.apply(e[a],n),o===!1)break}else if(s)for(;i>a&&(o=t.call(e[a],a,e[a]),o!==!1);a++);else for(a in e)if(o=t.call(e[a],a,e[a]),o===!1)break;return e},trim:function(e){return null==e?"":Q.call(e)},makeArray:function(e,t){var n=t||[];return null!=e&&(r(Object(e))?Z.merge(n,"string"==typeof e?[e]:e):K.call(n,e)),n},inArray:function(e,t,r){return null==t?-1:J.call(t,e,r)},merge:function(e,r){var n=r.length,o=e.length,a=0;if("number"==typeof n)for(;n>a;a++)e[o++]=r[a];else for(;r[a]!==t;)e[o++]=r[a++];return e.length=o,e},grep:function(e,t,r){var n,o=[],a=0,i=e.length;for(r=!!r;i>a;a++)n=!!t(e[a],a),r!==n&&o.push(e[a]);return o},map:function(e,t,n){var o,a=0,i=e.length,s=r(e),u=[];if(s)for(;i>a;a++)o=t(e[a],a,n),null!=o&&(u[u.length]=o);else for(a in e)o=t(e[a],a,n),null!=o&&(u[u.length]=o);return $.apply([],u)},guid:1,proxy:function(e,r){var n,o,a;return"string"==typeof r&&(n=e[r],r=e,e=n),Z.isFunction(e)?(o=G.call(arguments,2),a=function(){return e.apply(r||this,o.concat(G.call(arguments)))},a.guid=e.guid=e.guid||Z.guid++,a):t},access:function(e,r,n,o,a,i,s){var u=0,l=e.length,c=null==n;if("object"===Z.type(n)){a=!0;for(u in n)Z.access(e,r,u,n[u],!0,i,s)}else if(o!==t&&(a=!0,Z.isFunction(o)||(s=!0),c&&(s?(r.call(e,o),r=null):(c=r,r=function(e,t,r){return c.call(Z(e),r)})),r))for(;l>u;u++)r(e[u],n,s?o:o.call(e[u],u,r(e[u],n)));return a?e:c?r.call(e):l?r(e[0],n):i},now:Date.now,swap:function(e,t,r,n){var o,a,i={};for(a in t)i[a]=e.style[a],e.style[a]=t[a];o=r.apply(e,n||[]);for(a in t)e.style[a]=i[a];return o}}),Z.ready.promise=function(t){return M||(M=Z.Deferred(),"complete"===D.readyState?setTimeout(Z.ready):(D.addEventListener("DOMContentLoaded",st,!1),e.addEventListener("load",st,!1))),M.promise(t)},Z.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(e,t){H["[object "+t+"]"]=t.toLowerCase()}),R=Z(D),function(e,t){function r(e,t,r,n){var o,a,i,s,u,l,c,p,d,f;if((t?t.ownerDocument||t:B)!==R&&N(t),t=t||R,r=r||[],!e||"string"!=typeof e)return r;if(1!==(s=t.nodeType)&&9!==s)return[];if(z&&!n){if(o=xt.exec(e))if(i=o[1]){if(9===s){if(a=t.getElementById(i),!a||!a.parentNode)return r;if(a.id===i)return r.push(a),r}else if(t.ownerDocument&&(a=t.ownerDocument.getElementById(i))&&U(t,a)&&a.id===i)return r.push(a),r}else{if(o[2])return at.apply(r,t.getElementsByTagName(e)),r;if((i=o[3])&&A.getElementsByClassName&&t.getElementsByClassName)return at.apply(r,t.getElementsByClassName(i)),r}if(A.qsa&&(!D||!D.test(e))){if(p=c=H,d=t,f=9===s&&e,1===s&&"object"!==t.nodeName.toLowerCase()){for(l=g(e),(c=t.getAttribute("id"))?p=c.replace(Et,"\\$&"):t.setAttribute("id",p),p="[id='"+p+"'] ",u=l.length;u--;)l[u]=p+h(l[u]);d=vt.test(e)&&t.parentNode||t,f=l.join(",")}if(f)try{return at.apply(r,d.querySelectorAll(f)),r}catch(m){}finally{c||t.removeAttribute("id")}}}return L(e.replace(mt,"$1"),t,r,n)}function n(e){return wt.test(e+"")}function o(){function e(r,n){return t.push(r+=" ")>S.cacheLength&&delete e[t.shift()],e[r]=n}var t=[];return e}function a(e){return e[H]=!0,e}function i(e){var t=R.createElement("div");try{return!!e(t)}catch(r){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function s(e,t,r){e=e.split("|");for(var n,o=e.length,a=r?null:t;o--;)(n=S.attrHandle[e[o]])&&n!==t||(S.attrHandle[e[o]]=a)}function u(e,t){var r=e.getAttributeNode(t);return r&&r.specified?r.value:e[t]===!0?t.toLowerCase():null}function l(e,t){return e.getAttribute(t,"type"===t.toLowerCase()?1:2)}function c(e){return"input"===e.nodeName.toLowerCase()?e.defaultValue:void 0}function p(e,t){var r=t&&e,n=r&&1===e.nodeType&&1===t.nodeType&&(~t.sourceIndex||et)-(~e.sourceIndex||et);if(n)return n;if(r)for(;r=r.nextSibling;)if(r===t)return-1;return e?1:-1}function d(e){return function(t){var r=t.nodeName.toLowerCase();return"input"===r&&t.type===e}}function f(e){return function(t){var r=t.nodeName.toLowerCase();return("input"===r||"button"===r)&&t.type===e}}function m(e){return a(function(t){return t=+t,a(function(r,n){for(var o,a=e([],r.length,t),i=a.length;i--;)r[o=a[i]]&&(r[o]=!(n[o]=r[o]))})})}function g(e,t){var n,o,a,i,s,u,l,c=G[e+" "];if(c)return t?0:c.slice(0);for(s=e,u=[],l=S.preFilter;s;){(!n||(o=gt.exec(s)))&&(o&&(s=s.slice(o[0].length)||s),u.push(a=[])),n=!1,(o=ht.exec(s))&&(n=o.shift(),a.push({value:n,type:o[0].replace(mt," ")}),s=s.slice(n.length));for(i in S.filter)!(o=_t[i].exec(s))||l[i]&&!(o=l[i](o))||(n=o.shift(),a.push({value:n,type:i,matches:o}),s=s.slice(n.length));if(!n)break}return t?s.length:s?r.error(e):G(e,u).slice(0)}function h(e){for(var t=0,r=e.length,n="";r>t;t++)n+=e[t].value;return n}function v(e,t,r){var n=t.dir,o=r&&"parentNode"===n,a=$++;return t.first?function(t,r,a){for(;t=t[n];)if(1===t.nodeType||o)return e(t,r,a)}:function(t,r,i){var s,u,l,c=W+" "+a;if(i){for(;t=t[n];)if((1===t.nodeType||o)&&e(t,r,i))return!0}else for(;t=t[n];)if(1===t.nodeType||o)if(l=t[H]||(t[H]={}),(u=l[n])&&u[0]===c){if((s=u[1])===!0||s===F)return s===!0}else if(u=l[n]=[c],u[1]=e(t,r,i)||F,u[1]===!0)return!0}}function b(e){return e.length>1?function(t,r,n){for(var o=e.length;o--;)if(!e[o](t,r,n))return!1;return!0}:e[0]}function k(e,t,r,n,o){for(var a,i=[],s=0,u=e.length,l=null!=t;u>s;s++)(a=e[s])&&(!r||r(a,n,o))&&(i.push(a),l&&t.push(s));return i}function y(e,t,r,n,o,i){return n&&!n[H]&&(n=y(n)),o&&!o[H]&&(o=y(o,i)),a(function(a,i,s,u){var l,c,p,d=[],f=[],m=i.length,g=a||x(t||"*",s.nodeType?[s]:s,[]),h=!e||!a&&t?g:k(g,d,e,s,u),v=r?o||(a?e:m||n)?[]:i:h;if(r&&r(h,v,s,u),n)for(l=k(v,f),n(l,[],s,u),c=l.length;c--;)(p=l[c])&&(v[f[c]]=!(h[f[c]]=p));if(a){if(o||e){if(o){for(l=[],c=v.length;c--;)(p=v[c])&&l.push(h[c]=p);o(null,v=[],l,u)}for(c=v.length;c--;)(p=v[c])&&(l=o?st.call(a,p):d[c])>-1&&(a[l]=!(i[l]=p))}}else v=k(v===i?v.splice(m,v.length):v),o?o(null,i,v,u):at.apply(i,v)})}function _(e){for(var t,r,n,o=e.length,a=S.relative[e[0].type],i=a||S.relative[" "],s=a?1:0,u=v(function(e){return e===t},i,!0),l=v(function(e){return st.call(t,e)>-1},i,!0),c=[function(e,r,n){return!a&&(n||r!==I)||((t=r).nodeType?u(e,r,n):l(e,r,n))}];o>s;s++)if(r=S.relative[e[s].type])c=[v(b(c),r)];else{if(r=S.filter[e[s].type].apply(null,e[s].matches),r[H]){for(n=++s;o>n&&!S.relative[e[n].type];n++);return y(s>1&&b(c),s>1&&h(e.slice(0,s-1).concat({value:" "===e[s-2].type?"*":""})).replace(mt,"$1"),r,n>s&&_(e.slice(s,n)),o>n&&_(e=e.slice(n)),o>n&&h(e))}c.push(r)}return b(c)}function w(e,t){var n=0,o=t.length>0,i=e.length>0,s=function(a,s,u,l,c){var p,d,f,m=[],g=0,h="0",v=a&&[],b=null!=c,y=I,_=a||i&&S.find.TAG("*",c&&s.parentNode||s),w=W+=null==y?1:Math.random()||.1;for(b&&(I=s!==R&&s,F=n);null!=(p=_[h]);h++){if(i&&p){for(d=0;f=e[d++];)if(f(p,s,u)){l.push(p);break}b&&(W=w,F=++n)}o&&((p=!f&&p)&&g--,a&&v.push(p))}if(g+=h,o&&h!==g){for(d=0;f=t[d++];)f(v,m,s,u);if(a){if(g>0)for(;h--;)v[h]||m[h]||(m[h]=nt.call(l));m=k(m)}at.apply(l,m),b&&!a&&m.length>0&&g+t.length>1&&r.uniqueSort(l)}return b&&(W=w,I=y),v};return o?a(s):s}function x(e,t,n){for(var o=0,a=t.length;a>o;o++)r(e,t[o],n);return n}function L(e,t,r,n){var o,a,i,s,u,l=g(e);if(!n&&1===l.length){if(a=l[0]=l[0].slice(0),a.length>2&&"ID"===(i=a[0]).type&&A.getById&&9===t.nodeType&&z&&S.relative[a[1].type]){if(t=(S.find.ID(i.matches[0].replace(At,Ft),t)||[])[0],!t)return r;e=e.slice(a.shift().value.length)}for(o=_t.needsContext.test(e)?0:a.length;o--&&(i=a[o],!S.relative[s=i.type]);)if((u=S.find[s])&&(n=u(i.matches[0].replace(At,Ft),vt.test(a[0].type)&&t.parentNode||t))){if(a.splice(o,1),e=n.length&&h(a),!e)return at.apply(r,n),r;break}}return T(e,l)(n,t,!z,r,vt.test(e)),r}function O(){}var E,A,F,S,C,V,T,I,P,N,R,M,z,D,j,q,U,H="sizzle"+-new Date,B=e.document,W=0,$=0,K=o(),G=o(),J=o(),X=!1,Y=function(){return 0},Q=typeof t,et=1<<31,tt={}.hasOwnProperty,rt=[],nt=rt.pop,ot=rt.push,at=rt.push,it=rt.slice,st=rt.indexOf||function(e){for(var t=0,r=this.length;r>t;t++)if(this[t]===e)return t;return-1},ut="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",lt="[\\x20\\t\\r\\n\\f]",ct="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",pt=ct.replace("w","w#"),dt="\\["+lt+"*("+ct+")"+lt+"*(?:([*^$|!~]?=)"+lt+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+pt+")|)|)"+lt+"*\\]",ft=":("+ct+")(?:\\(((['\"])((?:\\\\.|[^\\\\])*?)\\3|((?:\\\\.|[^\\\\()[\\]]|"+dt.replace(3,8)+")*)|.*)\\)|)",mt=new RegExp("^"+lt+"+|((?:^|[^\\\\])(?:\\\\.)*)"+lt+"+$","g"),gt=new RegExp("^"+lt+"*,"+lt+"*"),ht=new RegExp("^"+lt+"*([>+~]|"+lt+")"+lt+"*"),vt=new RegExp(lt+"*[+~]"),bt=new RegExp("="+lt+"*([^\\]'\"]*)"+lt+"*\\]","g"),kt=new RegExp(ft),yt=new RegExp("^"+pt+"$"),_t={ID:new RegExp("^#("+ct+")"),CLASS:new RegExp("^\\.("+ct+")"),TAG:new RegExp("^("+ct.replace("w","w*")+")"),ATTR:new RegExp("^"+dt),PSEUDO:new RegExp("^"+ft),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+lt+"*(even|odd|(([+-]|)(\\d*)n|)"+lt+"*(?:([+-]|)"+lt+"*(\\d+)|))"+lt+"*\\)|)","i"),bool:new RegExp("^(?:"+ut+")$","i"),needsContext:new RegExp("^"+lt+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+lt+"*((?:-\\d)?\\d*)"+lt+"*\\)|)(?=[^-]|$)","i")},wt=/^[^{]+\{\s*\[native \w/,xt=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,Lt=/^(?:input|select|textarea|button)$/i,Ot=/^h\d$/i,Et=/'|\\/g,At=new RegExp("\\\\([\\da-f]{1,6}"+lt+"?|("+lt+")|.)","ig"),Ft=function(e,t,r){var n="0x"+t-65536;return n!==n||r?t:0>n?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,1023&n|56320)};try{at.apply(rt=it.call(B.childNodes),B.childNodes),rt[B.childNodes.length].nodeType}catch(St){at={apply:rt.length?function(e,t){ot.apply(e,it.call(t))}:function(e,t){for(var r=e.length,n=0;e[r++]=t[n++];);e.length=r-1}}}V=r.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return t?"HTML"!==t.nodeName:!1},A=r.support={},N=r.setDocument=function(e){var t=e?e.ownerDocument||e:B,r=t.parentWindow;return t!==R&&9===t.nodeType&&t.documentElement?(R=t,M=t.documentElement,z=!V(t),r&&r.frameElement&&r.attachEvent("onbeforeunload",function(){N()}),A.attributes=i(function(e){return e.innerHTML="<a href='#'></a>",s("type|href|height|width",l,"#"===e.firstChild.getAttribute("href")),s(ut,u,null==e.getAttribute("disabled")),e.className="i",!e.getAttribute("className")}),A.input=i(function(e){return e.innerHTML="<input>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")}),s("value",c,A.attributes&&A.input),A.getElementsByTagName=i(function(e){return e.appendChild(t.createComment("")),!e.getElementsByTagName("*").length}),A.getElementsByClassName=i(function(e){return e.innerHTML="<div class='a'></div><div class='a i'></div>",e.firstChild.className="i",2===e.getElementsByClassName("i").length}),A.getById=i(function(e){return M.appendChild(e).id=H,!t.getElementsByName||!t.getElementsByName(H).length}),A.getById?(S.find.ID=function(e,t){if(typeof t.getElementById!==Q&&z){var r=t.getElementById(e);return r&&r.parentNode?[r]:[]}},S.filter.ID=function(e){var t=e.replace(At,Ft);return function(e){return e.getAttribute("id")===t}}):(delete S.find.ID,S.filter.ID=function(e){var t=e.replace(At,Ft);return function(e){var r=typeof e.getAttributeNode!==Q&&e.getAttributeNode("id");return r&&r.value===t}}),S.find.TAG=A.getElementsByTagName?function(e,t){return typeof t.getElementsByTagName!==Q?t.getElementsByTagName(e):void 0}:function(e,t){var r,n=[],o=0,a=t.getElementsByTagName(e);if("*"===e){for(;r=a[o++];)1===r.nodeType&&n.push(r);return n}return a},S.find.CLASS=A.getElementsByClassName&&function(e,t){return typeof t.getElementsByClassName!==Q&&z?t.getElementsByClassName(e):void 0},j=[],D=[],(A.qsa=n(t.querySelectorAll))&&(i(function(e){e.innerHTML="<select><option selected=''></option></select>",e.querySelectorAll("[selected]").length||D.push("\\["+lt+"*(?:value|"+ut+")"),e.querySelectorAll(":checked").length||D.push(":checked")}),i(function(e){var r=t.createElement("input");r.setAttribute("type","hidden"),e.appendChild(r).setAttribute("t",""),e.querySelectorAll("[t^='']").length&&D.push("[*^$]="+lt+"*(?:''|\"\")"),e.querySelectorAll(":enabled").length||D.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),D.push(",.*:")})),(A.matchesSelector=n(q=M.webkitMatchesSelector||M.mozMatchesSelector||M.oMatchesSelector||M.msMatchesSelector))&&i(function(e){A.disconnectedMatch=q.call(e,"div"),q.call(e,"[s!='']:x"),j.push("!=",ft)}),D=D.length&&new RegExp(D.join("|")),j=j.length&&new RegExp(j.join("|")),U=n(M.contains)||M.compareDocumentPosition?function(e,t){var r=9===e.nodeType?e.documentElement:e,n=t&&t.parentNode;return e===n||!(!n||1!==n.nodeType||!(r.contains?r.contains(n):e.compareDocumentPosition&&16&e.compareDocumentPosition(n)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},A.sortDetached=i(function(e){return 1&e.compareDocumentPosition(t.createElement("div"))}),Y=M.compareDocumentPosition?function(e,r){if(e===r)return X=!0,0;var n=r.compareDocumentPosition&&e.compareDocumentPosition&&e.compareDocumentPosition(r);return n?1&n||!A.sortDetached&&r.compareDocumentPosition(e)===n?e===t||U(B,e)?-1:r===t||U(B,r)?1:P?st.call(P,e)-st.call(P,r):0:4&n?-1:1:e.compareDocumentPosition?-1:1}:function(e,r){var n,o=0,a=e.parentNode,i=r.parentNode,s=[e],u=[r];if(e===r)return X=!0,0;if(!a||!i)return e===t?-1:r===t?1:a?-1:i?1:P?st.call(P,e)-st.call(P,r):0;if(a===i)return p(e,r);for(n=e;n=n.parentNode;)s.unshift(n);for(n=r;n=n.parentNode;)u.unshift(n);for(;s[o]===u[o];)o++;return o?p(s[o],u[o]):s[o]===B?-1:u[o]===B?1:0},t):R},r.matches=function(e,t){return r(e,null,null,t)},r.matchesSelector=function(e,t){if((e.ownerDocument||e)!==R&&N(e),t=t.replace(bt,"='$1']"),!(!A.matchesSelector||!z||j&&j.test(t)||D&&D.test(t)))try{var n=q.call(e,t);if(n||A.disconnectedMatch||e.document&&11!==e.document.nodeType)return n}catch(o){}return r(t,R,null,[e]).length>0},r.contains=function(e,t){return(e.ownerDocument||e)!==R&&N(e),U(e,t)},r.attr=function(e,r){(e.ownerDocument||e)!==R&&N(e);var n=S.attrHandle[r.toLowerCase()],o=n&&tt.call(S.attrHandle,r.toLowerCase())?n(e,r,!z):t;return o===t?A.attributes||!z?e.getAttribute(r):(o=e.getAttributeNode(r))&&o.specified?o.value:null:o},r.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},r.uniqueSort=function(e){var t,r=[],n=0,o=0;if(X=!A.detectDuplicates,P=!A.sortStable&&e.slice(0),e.sort(Y),X){for(;t=e[o++];)t===e[o]&&(n=r.push(o));for(;n--;)e.splice(r[n],1)}return e},C=r.getText=function(e){var t,r="",n=0,o=e.nodeType;if(o){if(1===o||9===o||11===o){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)r+=C(e)}else if(3===o||4===o)return e.nodeValue}else for(;t=e[n];n++)r+=C(t);return r},S=r.selectors={cacheLength:50,createPseudo:a,match:_t,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(At,Ft),e[3]=(e[4]||e[5]||"").replace(At,Ft),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||r.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&r.error(e[0]),e},PSEUDO:function(e){var r,n=!e[5]&&e[2];return _t.CHILD.test(e[0])?null:(e[3]&&e[4]!==t?e[2]=e[4]:n&&kt.test(n)&&(r=g(n,!0))&&(r=n.indexOf(")",n.length-r)-n.length)&&(e[0]=e[0].slice(0,r),e[2]=n.slice(0,r)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(At,Ft).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=K[e+" "];return t||(t=new RegExp("(^|"+lt+")"+e+"("+lt+"|$)"))&&K(e,function(e){return t.test("string"==typeof e.className&&e.className||typeof e.getAttribute!==Q&&e.getAttribute("class")||"")})},ATTR:function(e,t,n){return function(o){var a=r.attr(o,e);return null==a?"!="===t:t?(a+="","="===t?a===n:"!="===t?a!==n:"^="===t?n&&0===a.indexOf(n):"*="===t?n&&a.indexOf(n)>-1:"$="===t?n&&a.slice(-n.length)===n:"~="===t?(" "+a+" ").indexOf(n)>-1:"|="===t?a===n||a.slice(0,n.length+1)===n+"-":!1):!0}},CHILD:function(e,t,r,n,o){var a="nth"!==e.slice(0,3),i="last"!==e.slice(-4),s="of-type"===t;return 1===n&&0===o?function(e){return!!e.parentNode}:function(t,r,u){var l,c,p,d,f,m,g=a!==i?"nextSibling":"previousSibling",h=t.parentNode,v=s&&t.nodeName.toLowerCase(),b=!u&&!s;if(h){if(a){for(;g;){for(p=t;p=p[g];)if(s?p.nodeName.toLowerCase()===v:1===p.nodeType)return!1;m=g="only"===e&&!m&&"nextSibling"}return!0}if(m=[i?h.firstChild:h.lastChild],i&&b){for(c=h[H]||(h[H]={}),l=c[e]||[],f=l[0]===W&&l[1],d=l[0]===W&&l[2],p=f&&h.childNodes[f];p=++f&&p&&p[g]||(d=f=0)||m.pop();)if(1===p.nodeType&&++d&&p===t){c[e]=[W,f,d];break}}else if(b&&(l=(t[H]||(t[H]={}))[e])&&l[0]===W)d=l[1];else for(;(p=++f&&p&&p[g]||(d=f=0)||m.pop())&&((s?p.nodeName.toLowerCase()!==v:1!==p.nodeType)||!++d||(b&&((p[H]||(p[H]={}))[e]=[W,d]),p!==t)););return d-=o,d===n||d%n===0&&d/n>=0}}},PSEUDO:function(e,t){var n,o=S.pseudos[e]||S.setFilters[e.toLowerCase()]||r.error("unsupported pseudo: "+e);return o[H]?o(t):o.length>1?(n=[e,e,"",t],S.setFilters.hasOwnProperty(e.toLowerCase())?a(function(e,r){for(var n,a=o(e,t),i=a.length;i--;)n=st.call(e,a[i]),e[n]=!(r[n]=a[i])}):function(e){return o(e,0,n)}):o}},pseudos:{not:a(function(e){var t=[],r=[],n=T(e.replace(mt,"$1"));return n[H]?a(function(e,t,r,o){for(var a,i=n(e,null,o,[]),s=e.length;s--;)(a=i[s])&&(e[s]=!(t[s]=a))}):function(e,o,a){return t[0]=e,n(t,null,a,r),!r.pop()}}),has:a(function(e){return function(t){return r(e,t).length>0}}),contains:a(function(e){return function(t){return(t.textContent||t.innerText||C(t)).indexOf(e)>-1
}}),lang:a(function(e){return yt.test(e||"")||r.error("unsupported lang: "+e),e=e.replace(At,Ft).toLowerCase(),function(t){var r;do if(r=z?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return r=r.toLowerCase(),r===e||0===r.indexOf(e+"-");while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var r=e.location&&e.location.hash;return r&&r.slice(1)===t.id},root:function(e){return e===M},focus:function(e){return e===R.activeElement&&(!R.hasFocus||R.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return e.disabled===!1},disabled:function(e){return e.disabled===!0},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeName>"@"||3===e.nodeType||4===e.nodeType)return!1;return!0},parent:function(e){return!S.pseudos.empty(e)},header:function(e){return Ot.test(e.nodeName)},input:function(e){return Lt.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||t.toLowerCase()===e.type)},first:m(function(){return[0]}),last:m(function(e,t){return[t-1]}),eq:m(function(e,t,r){return[0>r?r+t:r]}),even:m(function(e,t){for(var r=0;t>r;r+=2)e.push(r);return e}),odd:m(function(e,t){for(var r=1;t>r;r+=2)e.push(r);return e}),lt:m(function(e,t,r){for(var n=0>r?r+t:r;--n>=0;)e.push(n);return e}),gt:m(function(e,t,r){for(var n=0>r?r+t:r;++n<t;)e.push(n);return e})}};for(E in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})S.pseudos[E]=d(E);for(E in{submit:!0,reset:!0})S.pseudos[E]=f(E);T=r.compile=function(e,t){var r,n=[],o=[],a=J[e+" "];if(!a){for(t||(t=g(e)),r=t.length;r--;)a=_(t[r]),a[H]?n.push(a):o.push(a);a=J(e,w(o,n))}return a},S.pseudos.nth=S.pseudos.eq,O.prototype=S.filters=S.pseudos,S.setFilters=new O,A.sortStable=H.split("").sort(Y).join("")===H,N(),[0,0].sort(Y),A.detectDuplicates=X,Z.find=r,Z.expr=r.selectors,Z.expr[":"]=Z.expr.pseudos,Z.unique=r.uniqueSort,Z.text=r.getText,Z.isXMLDoc=r.isXML,Z.contains=r.contains}(e);var ut={};Z.Callbacks=function(e){e="string"==typeof e?ut[e]||n(e):Z.extend({},e);var r,o,a,i,s,u,l=[],c=!e.once&&[],p=function(t){for(r=e.memory&&t,o=!0,u=i||0,i=0,s=l.length,a=!0;l&&s>u;u++)if(l[u].apply(t[0],t[1])===!1&&e.stopOnFalse){r=!1;break}a=!1,l&&(c?c.length&&p(c.shift()):r?l=[]:d.disable())},d={add:function(){if(l){var t=l.length;!function n(t){Z.each(t,function(t,r){var o=Z.type(r);"function"===o?e.unique&&d.has(r)||l.push(r):r&&r.length&&"string"!==o&&n(r)})}(arguments),a?s=l.length:r&&(i=t,p(r))}return this},remove:function(){return l&&Z.each(arguments,function(e,t){for(var r;(r=Z.inArray(t,l,r))>-1;)l.splice(r,1),a&&(s>=r&&s--,u>=r&&u--)}),this},has:function(e){return e?Z.inArray(e,l)>-1:!(!l||!l.length)},empty:function(){return l=[],s=0,this},disable:function(){return l=c=r=t,this},disabled:function(){return!l},lock:function(){return c=t,r||d.disable(),this},locked:function(){return!c},fireWith:function(e,t){return t=t||[],t=[e,t.slice?t.slice():t],!l||o&&!c||(a?c.push(t):p(t)),this},fire:function(){return d.fireWith(this,arguments),this},fired:function(){return!!o}};return d},Z.extend({Deferred:function(e){var t=[["resolve","done",Z.Callbacks("once memory"),"resolved"],["reject","fail",Z.Callbacks("once memory"),"rejected"],["notify","progress",Z.Callbacks("memory")]],r="pending",n={state:function(){return r},always:function(){return o.done(arguments).fail(arguments),this},then:function(){var e=arguments;return Z.Deferred(function(r){Z.each(t,function(t,a){var i=a[0],s=Z.isFunction(e[t])&&e[t];o[a[1]](function(){var e=s&&s.apply(this,arguments);e&&Z.isFunction(e.promise)?e.promise().done(r.resolve).fail(r.reject).progress(r.notify):r[i+"With"](this===n?r.promise():this,s?[e]:arguments)})}),e=null}).promise()},promise:function(e){return null!=e?Z.extend(e,n):n}},o={};return n.pipe=n.then,Z.each(t,function(e,a){var i=a[2],s=a[3];n[a[1]]=i.add,s&&i.add(function(){r=s},t[1^e][2].disable,t[2][2].lock),o[a[0]]=function(){return o[a[0]+"With"](this===o?n:this,arguments),this},o[a[0]+"With"]=i.fireWith}),n.promise(o),e&&e.call(o,o),o},when:function(e){var t,r,n,o=0,a=G.call(arguments),i=a.length,s=1!==i||e&&Z.isFunction(e.promise)?i:0,u=1===s?e:Z.Deferred(),l=function(e,r,n){return function(o){r[e]=this,n[e]=arguments.length>1?G.call(arguments):o,n===t?u.notifyWith(r,n):--s||u.resolveWith(r,n)}};if(i>1)for(t=new Array(i),r=new Array(i),n=new Array(i);i>o;o++)a[o]&&Z.isFunction(a[o].promise)?a[o].promise().done(l(o,n,a)).fail(u.reject).progress(l(o,r,t)):--s;return s||u.resolveWith(n,a),u.promise()}}),Z.support=function(t){var r=D.createElement("input"),n=D.createDocumentFragment(),o=D.createElement("div"),a=D.createElement("select"),i=a.appendChild(D.createElement("option"));return r.type?(r.type="checkbox",t.checkOn=""!==r.value,t.optSelected=i.selected,t.reliableMarginRight=!0,t.boxSizingReliable=!0,t.pixelPosition=!1,r.checked=!0,t.noCloneChecked=r.cloneNode(!0).checked,a.disabled=!0,t.optDisabled=!i.disabled,r=D.createElement("input"),r.value="t",r.type="radio",t.radioValue="t"===r.value,r.setAttribute("checked","t"),r.setAttribute("name","t"),n.appendChild(r),t.checkClone=n.cloneNode(!0).cloneNode(!0).lastChild.checked,t.focusinBubbles="onfocusin"in e,o.style.backgroundClip="content-box",o.cloneNode(!0).style.backgroundClip="",t.clearCloneStyle="content-box"===o.style.backgroundClip,Z(function(){var r,n,a="padding:0;margin:0;border:0;display:block;-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box",i=D.getElementsByTagName("body")[0];i&&(r=D.createElement("div"),r.style.cssText="border:0;width:0;height:0;position:absolute;top:0;left:-9999px;margin-top:1px",i.appendChild(r).appendChild(o),o.innerHTML="",o.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%",Z.swap(i,null!=i.style.zoom?{zoom:1}:{},function(){t.boxSizing=4===o.offsetWidth}),e.getComputedStyle&&(t.pixelPosition="1%"!==(e.getComputedStyle(o,null)||{}).top,t.boxSizingReliable="4px"===(e.getComputedStyle(o,null)||{width:"4px"}).width,n=o.appendChild(D.createElement("div")),n.style.cssText=o.style.cssText=a,n.style.marginRight=n.style.width="0",o.style.width="1px",t.reliableMarginRight=!parseFloat((e.getComputedStyle(n,null)||{}).marginRight)),i.removeChild(r))}),t):t}({});var lt,ct,pt=/(?:\{[\s\S]*\}|\[[\s\S]*\])$/,dt=/([A-Z])/g;o.uid=1,o.accepts=function(e){return e.nodeType?1===e.nodeType||9===e.nodeType:!0},o.prototype={key:function(e){if(!o.accepts(e))return 0;var t={},r=e[this.expando];if(!r){r=o.uid++;try{t[this.expando]={value:r},Object.defineProperties(e,t)}catch(n){t[this.expando]=r,Z.extend(e,t)}}return this.cache[r]||(this.cache[r]={}),r},set:function(e,t,r){var n,o=this.key(e),a=this.cache[o];if("string"==typeof t)a[t]=r;else if(Z.isEmptyObject(a))Z.extend(this.cache[o],t);else for(n in t)a[n]=t[n];return a},get:function(e,r){var n=this.cache[this.key(e)];return r===t?n:n[r]},access:function(e,r,n){return r===t||r&&"string"==typeof r&&n===t?this.get(e,r):(this.set(e,r,n),n!==t?n:r)},remove:function(e,r){var n,o,a,i=this.key(e),s=this.cache[i];if(r===t)this.cache[i]={};else{Z.isArray(r)?o=r.concat(r.map(Z.camelCase)):(a=Z.camelCase(r),r in s?o=[r,a]:(o=a,o=o in s?[o]:o.match(tt)||[])),n=o.length;for(;n--;)delete s[o[n]]}},hasData:function(e){return!Z.isEmptyObject(this.cache[e[this.expando]]||{})},discard:function(e){e[this.expando]&&delete this.cache[e[this.expando]]}},lt=new o,ct=new o,Z.extend({acceptData:o.accepts,hasData:function(e){return lt.hasData(e)||ct.hasData(e)},data:function(e,t,r){return lt.access(e,t,r)},removeData:function(e,t){lt.remove(e,t)},_data:function(e,t,r){return ct.access(e,t,r)},_removeData:function(e,t){ct.remove(e,t)}}),Z.fn.extend({data:function(e,r){var n,o,i=this[0],s=0,u=null;if(e===t){if(this.length&&(u=lt.get(i),1===i.nodeType&&!ct.get(i,"hasDataAttrs"))){for(n=i.attributes;s<n.length;s++)o=n[s].name,0===o.indexOf("data-")&&(o=Z.camelCase(o.slice(5)),a(i,o,u[o]));ct.set(i,"hasDataAttrs",!0)}return u}return"object"==typeof e?this.each(function(){lt.set(this,e)}):Z.access(this,function(r){var n,o=Z.camelCase(e);if(i&&r===t){if(n=lt.get(i,e),n!==t)return n;if(n=lt.get(i,o),n!==t)return n;if(n=a(i,o,t),n!==t)return n}else this.each(function(){var n=lt.get(this,o);lt.set(this,o,r),-1!==e.indexOf("-")&&n!==t&&lt.set(this,e,r)})},null,r,arguments.length>1,null,!0)},removeData:function(e){return this.each(function(){lt.remove(this,e)})}}),Z.extend({queue:function(e,t,r){var n;return e?(t=(t||"fx")+"queue",n=ct.get(e,t),r&&(!n||Z.isArray(r)?n=ct.access(e,t,Z.makeArray(r)):n.push(r)),n||[]):void 0},dequeue:function(e,t){t=t||"fx";var r=Z.queue(e,t),n=r.length,o=r.shift(),a=Z._queueHooks(e,t),i=function(){Z.dequeue(e,t)};"inprogress"===o&&(o=r.shift(),n--),o&&("fx"===t&&r.unshift("inprogress"),delete a.stop,o.call(e,i,a)),!n&&a&&a.empty.fire()},_queueHooks:function(e,t){var r=t+"queueHooks";return ct.get(e,r)||ct.access(e,r,{empty:Z.Callbacks("once memory").add(function(){ct.remove(e,[t+"queue",r])})})}}),Z.fn.extend({queue:function(e,r){var n=2;return"string"!=typeof e&&(r=e,e="fx",n--),arguments.length<n?Z.queue(this[0],e):r===t?this:this.each(function(){var t=Z.queue(this,e,r);Z._queueHooks(this,e),"fx"===e&&"inprogress"!==t[0]&&Z.dequeue(this,e)})},dequeue:function(e){return this.each(function(){Z.dequeue(this,e)})},delay:function(e,t){return e=Z.fx?Z.fx.speeds[e]||e:e,t=t||"fx",this.queue(t,function(t,r){var n=setTimeout(t,e);r.stop=function(){clearTimeout(n)}})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,r){var n,o=1,a=Z.Deferred(),i=this,s=this.length,u=function(){--o||a.resolveWith(i,[i])};for("string"!=typeof e&&(r=e,e=t),e=e||"fx";s--;)n=ct.get(i[s],e+"queueHooks"),n&&n.empty&&(o++,n.empty.add(u));return u(),a.promise(r)}});var ft,mt,gt=/[\t\r\n\f]/g,ht=/\r/g,vt=/^(?:input|select|textarea|button)$/i;Z.fn.extend({attr:function(e,t){return Z.access(this,Z.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){Z.removeAttr(this,e)})},prop:function(e,t){return Z.access(this,Z.prop,e,t,arguments.length>1)},removeProp:function(e){return this.each(function(){delete this[Z.propFix[e]||e]})},addClass:function(e){var t,r,n,o,a,i=0,s=this.length,u="string"==typeof e&&e;if(Z.isFunction(e))return this.each(function(t){Z(this).addClass(e.call(this,t,this.className))});if(u)for(t=(e||"").match(tt)||[];s>i;i++)if(r=this[i],n=1===r.nodeType&&(r.className?(" "+r.className+" ").replace(gt," "):" ")){for(a=0;o=t[a++];)n.indexOf(" "+o+" ")<0&&(n+=o+" ");r.className=Z.trim(n)}return this},removeClass:function(e){var t,r,n,o,a,i=0,s=this.length,u=0===arguments.length||"string"==typeof e&&e;if(Z.isFunction(e))return this.each(function(t){Z(this).removeClass(e.call(this,t,this.className))});if(u)for(t=(e||"").match(tt)||[];s>i;i++)if(r=this[i],n=1===r.nodeType&&(r.className?(" "+r.className+" ").replace(gt," "):"")){for(a=0;o=t[a++];)for(;n.indexOf(" "+o+" ")>=0;)n=n.replace(" "+o+" "," ");r.className=e?Z.trim(n):""}return this},toggleClass:function(e,t){var r=typeof e,n="boolean"==typeof t;return this.each(Z.isFunction(e)?function(r){Z(this).toggleClass(e.call(this,r,this.className,t),t)}:function(){if("string"===r)for(var o,a=0,i=Z(this),s=t,u=e.match(tt)||[];o=u[a++];)s=n?s:!i.hasClass(o),i[s?"addClass":"removeClass"](o);else(r===z||"boolean"===r)&&(this.className&&ct.set(this,"__className__",this.className),this.className=this.className||e===!1?"":ct.get(this,"__className__")||"")})},hasClass:function(e){for(var t=" "+e+" ",r=0,n=this.length;n>r;r++)if(1===this[r].nodeType&&(" "+this[r].className+" ").replace(gt," ").indexOf(t)>=0)return!0;return!1},val:function(e){var r,n,o,a=this[0];{if(arguments.length)return o=Z.isFunction(e),this.each(function(n){var a;1===this.nodeType&&(a=o?e.call(this,n,Z(this).val()):e,null==a?a="":"number"==typeof a?a+="":Z.isArray(a)&&(a=Z.map(a,function(e){return null==e?"":e+""})),r=Z.valHooks[this.type]||Z.valHooks[this.nodeName.toLowerCase()],r&&"set"in r&&r.set(this,a,"value")!==t||(this.value=a))});if(a)return r=Z.valHooks[a.type]||Z.valHooks[a.nodeName.toLowerCase()],r&&"get"in r&&(n=r.get(a,"value"))!==t?n:(n=a.value,"string"==typeof n?n.replace(ht,""):null==n?"":n)}}}),Z.extend({valHooks:{option:{get:function(e){var t=e.attributes.value;return!t||t.specified?e.value:e.text}},select:{get:function(e){for(var t,r,n=e.options,o=e.selectedIndex,a="select-one"===e.type||0>o,i=a?null:[],s=a?o+1:n.length,u=0>o?s:a?o:0;s>u;u++)if(r=n[u],!(!r.selected&&u!==o||(Z.support.optDisabled?r.disabled:null!==r.getAttribute("disabled"))||r.parentNode.disabled&&Z.nodeName(r.parentNode,"optgroup"))){if(t=Z(r).val(),a)return t;i.push(t)}return i},set:function(e,t){for(var r,n,o=e.options,a=Z.makeArray(t),i=o.length;i--;)n=o[i],(n.selected=Z.inArray(Z(n).val(),a)>=0)&&(r=!0);return r||(e.selectedIndex=-1),a}}},attr:function(e,r,n){var o,a,i=e.nodeType;if(e&&3!==i&&8!==i&&2!==i)return typeof e.getAttribute===z?Z.prop(e,r,n):(1===i&&Z.isXMLDoc(e)||(r=r.toLowerCase(),o=Z.attrHooks[r]||(Z.expr.match.bool.test(r)?mt:ft)),n===t?o&&"get"in o&&null!==(a=o.get(e,r))?a:(a=Z.find.attr(e,r),null==a?t:a):null!==n?o&&"set"in o&&(a=o.set(e,n,r))!==t?a:(e.setAttribute(r,n+""),n):void Z.removeAttr(e,r))},removeAttr:function(e,t){var r,n,o=0,a=t&&t.match(tt);if(a&&1===e.nodeType)for(;r=a[o++];)n=Z.propFix[r]||r,Z.expr.match.bool.test(r)&&(e[n]=!1),e.removeAttribute(r)},attrHooks:{type:{set:function(e,t){if(!Z.support.radioValue&&"radio"===t&&Z.nodeName(e,"input")){var r=e.value;return e.setAttribute("type",t),r&&(e.value=r),t}}}},propFix:{"for":"htmlFor","class":"className"},prop:function(e,r,n){var o,a,i,s=e.nodeType;if(e&&3!==s&&8!==s&&2!==s)return i=1!==s||!Z.isXMLDoc(e),i&&(r=Z.propFix[r]||r,a=Z.propHooks[r]),n!==t?a&&"set"in a&&(o=a.set(e,n,r))!==t?o:e[r]=n:a&&"get"in a&&null!==(o=a.get(e,r))?o:e[r]},propHooks:{tabIndex:{get:function(e){return e.hasAttribute("tabindex")||vt.test(e.nodeName)||e.href?e.tabIndex:-1}}}}),mt={set:function(e,t,r){return t===!1?Z.removeAttr(e,r):e.setAttribute(r,r),r}},Z.each(Z.expr.match.bool.source.match(/\w+/g),function(e,r){var n=Z.expr.attrHandle[r]||Z.find.attr;Z.expr.attrHandle[r]=function(e,r,o){var a=Z.expr.attrHandle[r],i=o?t:(Z.expr.attrHandle[r]=t)!=n(e,r,o)?r.toLowerCase():null;return Z.expr.attrHandle[r]=a,i}}),Z.support.optSelected||(Z.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null}}),Z.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){Z.propFix[this.toLowerCase()]=this}),Z.each(["radio","checkbox"],function(){Z.valHooks[this]={set:function(e,t){return Z.isArray(t)?e.checked=Z.inArray(Z(e).val(),t)>=0:void 0}},Z.support.checkOn||(Z.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})});var bt=/^key/,kt=/^(?:mouse|contextmenu)|click/,yt=/^(?:focusinfocus|focusoutblur)$/,_t=/^([^.]*)(?:\.(.+)|)$/;Z.event={global:{},add:function(e,r,n,o,a){var i,s,u,l,c,p,d,f,m,g,h,v=ct.get(e);if(v){for(n.handler&&(i=n,n=i.handler,a=i.selector),n.guid||(n.guid=Z.guid++),(l=v.events)||(l=v.events={}),(s=v.handle)||(s=v.handle=function(e){return typeof Z===z||e&&Z.event.triggered===e.type?t:Z.event.dispatch.apply(s.elem,arguments)},s.elem=e),r=(r||"").match(tt)||[""],c=r.length;c--;)u=_t.exec(r[c])||[],m=h=u[1],g=(u[2]||"").split(".").sort(),m&&(d=Z.event.special[m]||{},m=(a?d.delegateType:d.bindType)||m,d=Z.event.special[m]||{},p=Z.extend({type:m,origType:h,data:o,handler:n,guid:n.guid,selector:a,needsContext:a&&Z.expr.match.needsContext.test(a),namespace:g.join(".")},i),(f=l[m])||(f=l[m]=[],f.delegateCount=0,d.setup&&d.setup.call(e,o,g,s)!==!1||e.addEventListener&&e.addEventListener(m,s,!1)),d.add&&(d.add.call(e,p),p.handler.guid||(p.handler.guid=n.guid)),a?f.splice(f.delegateCount++,0,p):f.push(p),Z.event.global[m]=!0);e=null}},remove:function(e,t,r,n,o){var a,i,s,u,l,c,p,d,f,m,g,h=ct.hasData(e)&&ct.get(e);if(h&&(u=h.events)){for(t=(t||"").match(tt)||[""],l=t.length;l--;)if(s=_t.exec(t[l])||[],f=g=s[1],m=(s[2]||"").split(".").sort(),f){for(p=Z.event.special[f]||{},f=(n?p.delegateType:p.bindType)||f,d=u[f]||[],s=s[2]&&new RegExp("(^|\\.)"+m.join("\\.(?:.*\\.|)")+"(\\.|$)"),i=a=d.length;a--;)c=d[a],!o&&g!==c.origType||r&&r.guid!==c.guid||s&&!s.test(c.namespace)||n&&n!==c.selector&&("**"!==n||!c.selector)||(d.splice(a,1),c.selector&&d.delegateCount--,p.remove&&p.remove.call(e,c));i&&!d.length&&(p.teardown&&p.teardown.call(e,m,h.handle)!==!1||Z.removeEvent(e,f,h.handle),delete u[f])}else for(f in u)Z.event.remove(e,f+t[l],r,n,!0);Z.isEmptyObject(u)&&(delete h.handle,ct.remove(e,"events"))}},trigger:function(r,n,o,a){var i,s,u,l,c,p,d,f=[o||D],m=Y.call(r,"type")?r.type:r,g=Y.call(r,"namespace")?r.namespace.split("."):[];if(s=u=o=o||D,3!==o.nodeType&&8!==o.nodeType&&!yt.test(m+Z.event.triggered)&&(m.indexOf(".")>=0&&(g=m.split("."),m=g.shift(),g.sort()),c=m.indexOf(":")<0&&"on"+m,r=r[Z.expando]?r:new Z.Event(m,"object"==typeof r&&r),r.isTrigger=a?2:3,r.namespace=g.join("."),r.namespace_re=r.namespace?new RegExp("(^|\\.)"+g.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,r.result=t,r.target||(r.target=o),n=null==n?[r]:Z.makeArray(n,[r]),d=Z.event.special[m]||{},a||!d.trigger||d.trigger.apply(o,n)!==!1)){if(!a&&!d.noBubble&&!Z.isWindow(o)){for(l=d.delegateType||m,yt.test(l+m)||(s=s.parentNode);s;s=s.parentNode)f.push(s),u=s;u===(o.ownerDocument||D)&&f.push(u.defaultView||u.parentWindow||e)}for(i=0;(s=f[i++])&&!r.isPropagationStopped();)r.type=i>1?l:d.bindType||m,p=(ct.get(s,"events")||{})[r.type]&&ct.get(s,"handle"),p&&p.apply(s,n),p=c&&s[c],p&&Z.acceptData(s)&&p.apply&&p.apply(s,n)===!1&&r.preventDefault();return r.type=m,a||r.isDefaultPrevented()||d._default&&d._default.apply(f.pop(),n)!==!1||!Z.acceptData(o)||c&&Z.isFunction(o[m])&&!Z.isWindow(o)&&(u=o[c],u&&(o[c]=null),Z.event.triggered=m,o[m](),Z.event.triggered=t,u&&(o[c]=u)),r.result}},dispatch:function(e){e=Z.event.fix(e);var r,n,o,a,i,s=[],u=G.call(arguments),l=(ct.get(this,"events")||{})[e.type]||[],c=Z.event.special[e.type]||{};if(u[0]=e,e.delegateTarget=this,!c.preDispatch||c.preDispatch.call(this,e)!==!1){for(s=Z.event.handlers.call(this,e,l),r=0;(a=s[r++])&&!e.isPropagationStopped();)for(e.currentTarget=a.elem,n=0;(i=a.handlers[n++])&&!e.isImmediatePropagationStopped();)(!e.namespace_re||e.namespace_re.test(i.namespace))&&(e.handleObj=i,e.data=i.data,o=((Z.event.special[i.origType]||{}).handle||i.handler).apply(a.elem,u),o!==t&&(e.result=o)===!1&&(e.preventDefault(),e.stopPropagation()));return c.postDispatch&&c.postDispatch.call(this,e),e.result}},handlers:function(e,r){var n,o,a,i,s=[],u=r.delegateCount,l=e.target;if(u&&l.nodeType&&(!e.button||"click"!==e.type))for(;l!==this;l=l.parentNode||this)if(l.disabled!==!0||"click"!==e.type){for(o=[],n=0;u>n;n++)i=r[n],a=i.selector+" ",o[a]===t&&(o[a]=i.needsContext?Z(a,this).index(l)>=0:Z.find(a,this,null,[l]).length),o[a]&&o.push(i);o.length&&s.push({elem:l,handlers:o})}return u<r.length&&s.push({elem:this,handlers:r.slice(u)}),s},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return null==e.which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,r){var n,o,a,i=r.button;return null==e.pageX&&null!=r.clientX&&(n=e.target.ownerDocument||D,o=n.documentElement,a=n.body,e.pageX=r.clientX+(o&&o.scrollLeft||a&&a.scrollLeft||0)-(o&&o.clientLeft||a&&a.clientLeft||0),e.pageY=r.clientY+(o&&o.scrollTop||a&&a.scrollTop||0)-(o&&o.clientTop||a&&a.clientTop||0)),e.which||i===t||(e.which=1&i?1:2&i?3:4&i?2:0),e}},fix:function(e){if(e[Z.expando])return e;var t,r,n,o=e.type,a=e,i=this.fixHooks[o];for(i||(this.fixHooks[o]=i=kt.test(o)?this.mouseHooks:bt.test(o)?this.keyHooks:{}),n=i.props?this.props.concat(i.props):this.props,e=new Z.Event(a),t=n.length;t--;)r=n[t],e[r]=a[r];return e.target||(e.target=D),3===e.target.nodeType&&(e.target=e.target.parentNode),i.filter?i.filter(e,a):e},special:{load:{noBubble:!0},focus:{trigger:function(){return this!==u()&&this.focus?(this.focus(),!1):void 0},delegateType:"focusin"},blur:{trigger:function(){return this===u()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return"checkbox"===this.type&&this.click&&Z.nodeName(this,"input")?(this.click(),!1):void 0},_default:function(e){return Z.nodeName(e.target,"a")}},beforeunload:{postDispatch:function(e){e.result!==t&&(e.originalEvent.returnValue=e.result)}}},simulate:function(e,t,r,n){var o=Z.extend(new Z.Event,r,{type:e,isSimulated:!0,originalEvent:{}});n?Z.event.trigger(o,null,t):Z.event.dispatch.call(t,o),o.isDefaultPrevented()&&r.preventDefault()}},Z.removeEvent=function(e,t,r){e.removeEventListener&&e.removeEventListener(t,r,!1)},Z.Event=function(e,t){return this instanceof Z.Event?(e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||e.getPreventDefault&&e.getPreventDefault()?i:s):this.type=e,t&&Z.extend(this,t),this.timeStamp=e&&e.timeStamp||Z.now(),void(this[Z.expando]=!0)):new Z.Event(e,t)},Z.Event.prototype={isDefaultPrevented:s,isPropagationStopped:s,isImmediatePropagationStopped:s,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=i,e&&e.preventDefault&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=i,e&&e.stopPropagation&&e.stopPropagation()},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=i,this.stopPropagation()}},Z.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(e,t){Z.event.special[e]={delegateType:t,bindType:t,handle:function(e){var r,n=this,o=e.relatedTarget,a=e.handleObj;return(!o||o!==n&&!Z.contains(n,o))&&(e.type=a.origType,r=a.handler.apply(this,arguments),e.type=t),r}}}),Z.support.focusinBubbles||Z.each({focus:"focusin",blur:"focusout"},function(e,t){var r=0,n=function(e){Z.event.simulate(t,e.target,Z.event.fix(e),!0)};Z.event.special[t]={setup:function(){0===r++&&D.addEventListener(e,n,!0)},teardown:function(){0===--r&&D.removeEventListener(e,n,!0)}}}),Z.fn.extend({on:function(e,r,n,o,a){var i,u;if("object"==typeof e){"string"!=typeof r&&(n=n||r,r=t);for(u in e)this.on(u,r,n,e[u],a);return this}if(null==n&&null==o?(o=r,n=r=t):null==o&&("string"==typeof r?(o=n,n=t):(o=n,n=r,r=t)),o===!1)o=s;else if(!o)return this;return 1===a&&(i=o,o=function(e){return Z().off(e),i.apply(this,arguments)},o.guid=i.guid||(i.guid=Z.guid++)),this.each(function(){Z.event.add(this,e,o,n,r)})},one:function(e,t,r,n){return this.on(e,t,r,n,1)},off:function(e,r,n){var o,a;if(e&&e.preventDefault&&e.handleObj)return o=e.handleObj,Z(e.delegateTarget).off(o.namespace?o.origType+"."+o.namespace:o.origType,o.selector,o.handler),this;if("object"==typeof e){for(a in e)this.off(a,r,e[a]);return this}return(r===!1||"function"==typeof r)&&(n=r,r=t),n===!1&&(n=s),this.each(function(){Z.event.remove(this,e,n,r)})},trigger:function(e,t){return this.each(function(){Z.event.trigger(e,t,this)})},triggerHandler:function(e,t){var r=this[0];return r?Z.event.trigger(e,t,r,!0):void 0}});var wt=/^.[^:#\[\.,]*$/,xt=/^(?:parents|prev(?:Until|All))/,Lt=Z.expr.match.needsContext,Ot={children:!0,contents:!0,next:!0,prev:!0};Z.fn.extend({find:function(e){var t,r=[],n=this,o=n.length;if("string"!=typeof e)return this.pushStack(Z(e).filter(function(){for(t=0;o>t;t++)if(Z.contains(n[t],this))return!0}));for(t=0;o>t;t++)Z.find(e,n[t],r);return r=this.pushStack(o>1?Z.unique(r):r),r.selector=this.selector?this.selector+" "+e:e,r},has:function(e){var t=Z(e,this),r=t.length;return this.filter(function(){for(var e=0;r>e;e++)if(Z.contains(this,t[e]))return!0})},not:function(e){return this.pushStack(c(this,e||[],!0))},filter:function(e){return this.pushStack(c(this,e||[],!1))},is:function(e){return!!c(this,"string"==typeof e&&Lt.test(e)?Z(e):e||[],!1).length},closest:function(e,t){for(var r,n=0,o=this.length,a=[],i=Lt.test(e)||"string"!=typeof e?Z(e,t||this.context):0;o>n;n++)for(r=this[n];r&&r!==t;r=r.parentNode)if(r.nodeType<11&&(i?i.index(r)>-1:1===r.nodeType&&Z.find.matchesSelector(r,e))){r=a.push(r);break}return this.pushStack(a.length>1?Z.unique(a):a)},index:function(e){return e?"string"==typeof e?J.call(Z(e),this[0]):J.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){var r="string"==typeof e?Z(e,t):Z.makeArray(e&&e.nodeType?[e]:e),n=Z.merge(this.get(),r);return this.pushStack(Z.unique(n))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),Z.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return Z.dir(e,"parentNode")},parentsUntil:function(e,t,r){return Z.dir(e,"parentNode",r)},next:function(e){return l(e,"nextSibling")},prev:function(e){return l(e,"previousSibling")},nextAll:function(e){return Z.dir(e,"nextSibling")},prevAll:function(e){return Z.dir(e,"previousSibling")},nextUntil:function(e,t,r){return Z.dir(e,"nextSibling",r)},prevUntil:function(e,t,r){return Z.dir(e,"previousSibling",r)},siblings:function(e){return Z.sibling((e.parentNode||{}).firstChild,e)},children:function(e){return Z.sibling(e.firstChild)},contents:function(e){return e.contentDocument||Z.merge([],e.childNodes)}},function(e,t){Z.fn[e]=function(r,n){var o=Z.map(this,t,r);return"Until"!==e.slice(-5)&&(n=r),n&&"string"==typeof n&&(o=Z.filter(n,o)),this.length>1&&(Ot[e]||Z.unique(o),xt.test(e)&&o.reverse()),this.pushStack(o)}}),Z.extend({filter:function(e,t,r){var n=t[0];return r&&(e=":not("+e+")"),1===t.length&&1===n.nodeType?Z.find.matchesSelector(n,e)?[n]:[]:Z.find.matches(e,Z.grep(t,function(e){return 1===e.nodeType}))},dir:function(e,r,n){for(var o=[],a=n!==t;(e=e[r])&&9!==e.nodeType;)if(1===e.nodeType){if(a&&Z(e).is(n))break;o.push(e)}return o},sibling:function(e,t){for(var r=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&r.push(e);return r}});var Et=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,At=/<([\w:]+)/,Ft=/<|&#?\w+;/,St=/<(?:script|style|link)/i,Ct=/^(?:checkbox|radio)$/i,Vt=/checked\s*(?:[^=]|=\s*.checked.)/i,Tt=/^$|\/(?:java|ecma)script/i,It=/^true\/(.*)/,Pt=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,Nt={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};Nt.optgroup=Nt.option,Nt.tbody=Nt.tfoot=Nt.colgroup=Nt.caption=Nt.thead,Nt.th=Nt.td,Z.fn.extend({text:function(e){return Z.access(this,function(e){return e===t?Z.text(this):this.empty().append((this[0]&&this[0].ownerDocument||D).createTextNode(e))},null,e,arguments.length)},append:function(){return this.domManip(arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=p(this,e);t.appendChild(e)}})},prepend:function(){return this.domManip(arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=p(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},remove:function(e,t){for(var r,n=e?Z.filter(e,this):this,o=0;null!=(r=n[o]);o++)t||1!==r.nodeType||Z.cleanData(h(r)),r.parentNode&&(t&&Z.contains(r.ownerDocument,r)&&m(h(r,"script")),r.parentNode.removeChild(r));return this},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(Z.cleanData(h(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null==e?!1:e,t=null==t?e:t,this.map(function(){return Z.clone(this,e,t)})},html:function(e){return Z.access(this,function(e){var r=this[0]||{},n=0,o=this.length;if(e===t&&1===r.nodeType)return r.innerHTML;if("string"==typeof e&&!St.test(e)&&!Nt[(At.exec(e)||["",""])[1].toLowerCase()]){e=e.replace(Et,"<$1></$2>");try{for(;o>n;n++)r=this[n]||{},1===r.nodeType&&(Z.cleanData(h(r,!1)),r.innerHTML=e);r=0}catch(a){}}r&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=Z.map(this,function(e){return[e.nextSibling,e.parentNode]}),t=0;return this.domManip(arguments,function(r){var n=e[t++],o=e[t++];o&&(n&&n.parentNode!==o&&(n=this.nextSibling),Z(this).remove(),o.insertBefore(r,n))},!0),t?this:this.remove()},detach:function(e){return this.remove(e,!0)},domManip:function(e,t,r){e=$.apply([],e);var n,o,a,i,s,u,l=0,c=this.length,p=this,m=c-1,g=e[0],v=Z.isFunction(g);if(v||!(1>=c||"string"!=typeof g||Z.support.checkClone)&&Vt.test(g))return this.each(function(n){var o=p.eq(n);v&&(e[0]=g.call(this,n,o.html())),o.domManip(e,t,r)});if(c&&(n=Z.buildFragment(e,this[0].ownerDocument,!1,!r&&this),o=n.firstChild,1===n.childNodes.length&&(n=o),o)){for(a=Z.map(h(n,"script"),d),i=a.length;c>l;l++)s=n,l!==m&&(s=Z.clone(s,!0,!0),i&&Z.merge(a,h(s,"script"))),t.call(this[l],s,l);if(i)for(u=a[a.length-1].ownerDocument,Z.map(a,f),l=0;i>l;l++)s=a[l],Tt.test(s.type||"")&&!ct.access(s,"globalEval")&&Z.contains(u,s)&&(s.src?Z._evalUrl(s.src):Z.globalEval(s.textContent.replace(Pt,"")))}return this}}),Z.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){Z.fn[e]=function(e){for(var r,n=[],o=Z(e),a=o.length-1,i=0;a>=i;i++)r=i===a?this:this.clone(!0),Z(o[i])[t](r),K.apply(n,r.get());return this.pushStack(n)}}),Z.extend({clone:function(e,t,r){var n,o,a,i,s=e.cloneNode(!0),u=Z.contains(e.ownerDocument,e);if(!(Z.support.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||Z.isXMLDoc(e)))for(i=h(s),a=h(e),n=0,o=a.length;o>n;n++)v(a[n],i[n]);if(t)if(r)for(a=a||h(e),i=i||h(s),n=0,o=a.length;o>n;n++)g(a[n],i[n]);else g(e,s);return i=h(s,"script"),i.length>0&&m(i,!u&&h(e,"script")),s},buildFragment:function(e,t,r,n){for(var o,a,i,s,u,l,c=0,p=e.length,d=t.createDocumentFragment(),f=[];p>c;c++)if(o=e[c],o||0===o)if("object"===Z.type(o))Z.merge(f,o.nodeType?[o]:o);else if(Ft.test(o)){for(a=a||d.appendChild(t.createElement("div")),i=(At.exec(o)||["",""])[1].toLowerCase(),s=Nt[i]||Nt._default,a.innerHTML=s[1]+o.replace(Et,"<$1></$2>")+s[2],l=s[0];l--;)a=a.firstChild;Z.merge(f,a.childNodes),a=d.firstChild,a.textContent=""}else f.push(t.createTextNode(o));for(d.textContent="",c=0;o=f[c++];)if((!n||-1===Z.inArray(o,n))&&(u=Z.contains(o.ownerDocument,o),a=h(d.appendChild(o),"script"),u&&m(a),r))for(l=0;o=a[l++];)Tt.test(o.type||"")&&r.push(o);return d},cleanData:function(e){for(var r,n,a,i,s,u,l=Z.event.special,c=0;(n=e[c])!==t;c++){if(o.accepts(n)&&(s=n[ct.expando],s&&(r=ct.cache[s]))){if(a=Object.keys(r.events||{}),a.length)for(u=0;(i=a[u])!==t;u++)l[i]?Z.event.remove(n,i):Z.removeEvent(n,i,r.handle);ct.cache[s]&&delete ct.cache[s]}delete lt.cache[n[lt.expando]]}},_evalUrl:function(e){return Z.ajax({url:e,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})}}),Z.fn.extend({wrapAll:function(e){var t;return Z.isFunction(e)?this.each(function(t){Z(this).wrapAll(e.call(this,t))}):(this[0]&&(t=Z(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e}).append(this)),this)},wrapInner:function(e){return this.each(Z.isFunction(e)?function(t){Z(this).wrapInner(e.call(this,t))
}:function(){var t=Z(this),r=t.contents();r.length?r.wrapAll(e):t.append(e)})},wrap:function(e){var t=Z.isFunction(e);return this.each(function(r){Z(this).wrapAll(t?e.call(this,r):e)})},unwrap:function(){return this.parent().each(function(){Z.nodeName(this,"body")||Z(this).replaceWith(this.childNodes)}).end()}});var Rt,Mt,zt=/^(none|table(?!-c[ea]).+)/,Dt=/^margin/,jt=new RegExp("^("+et+")(.*)$","i"),qt=new RegExp("^("+et+")(?!px)[a-z%]+$","i"),Ut=new RegExp("^([+-])=("+et+")","i"),Ht={BODY:"block"},Bt={position:"absolute",visibility:"hidden",display:"block"},Wt={letterSpacing:0,fontWeight:400},$t=["Top","Right","Bottom","Left"],Kt=["Webkit","O","Moz","ms"];Z.fn.extend({css:function(e,r){return Z.access(this,function(e,r,n){var o,a,i={},s=0;if(Z.isArray(r)){for(o=y(e),a=r.length;a>s;s++)i[r[s]]=Z.css(e,r[s],!1,o);return i}return n!==t?Z.style(e,r,n):Z.css(e,r)},e,r,arguments.length>1)},show:function(){return _(this,!0)},hide:function(){return _(this)},toggle:function(e){var t="boolean"==typeof e;return this.each(function(){(t?e:k(this))?Z(this).show():Z(this).hide()})}}),Z.extend({cssHooks:{opacity:{get:function(e,t){if(t){var r=Rt(e,"opacity");return""===r?"1":r}}}},cssNumber:{columnCount:!0,fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":"cssFloat"},style:function(e,r,n,o){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var a,i,s,u=Z.camelCase(r),l=e.style;return r=Z.cssProps[u]||(Z.cssProps[u]=b(l,u)),s=Z.cssHooks[r]||Z.cssHooks[u],n===t?s&&"get"in s&&(a=s.get(e,!1,o))!==t?a:l[r]:(i=typeof n,"string"===i&&(a=Ut.exec(n))&&(n=(a[1]+1)*a[2]+parseFloat(Z.css(e,r)),i="number"),null==n||"number"===i&&isNaN(n)||("number"!==i||Z.cssNumber[u]||(n+="px"),Z.support.clearCloneStyle||""!==n||0!==r.indexOf("background")||(l[r]="inherit"),s&&"set"in s&&(n=s.set(e,n,o))===t||(l[r]=n)),void 0)}},css:function(e,r,n,o){var a,i,s,u=Z.camelCase(r);return r=Z.cssProps[u]||(Z.cssProps[u]=b(e.style,u)),s=Z.cssHooks[r]||Z.cssHooks[u],s&&"get"in s&&(a=s.get(e,!0,n)),a===t&&(a=Rt(e,r,o)),"normal"===a&&r in Wt&&(a=Wt[r]),""===n||n?(i=parseFloat(a),n===!0||Z.isNumeric(i)?i||0:a):a}}),Rt=function(e,r,n){var o,a,i,s=n||y(e),u=s?s.getPropertyValue(r)||s[r]:t,l=e.style;return s&&(""!==u||Z.contains(e.ownerDocument,e)||(u=Z.style(e,r)),qt.test(u)&&Dt.test(r)&&(o=l.width,a=l.minWidth,i=l.maxWidth,l.minWidth=l.maxWidth=l.width=u,u=s.width,l.width=o,l.minWidth=a,l.maxWidth=i)),u},Z.each(["height","width"],function(e,t){Z.cssHooks[t]={get:function(e,r,n){return r?0===e.offsetWidth&&zt.test(Z.css(e,"display"))?Z.swap(e,Bt,function(){return L(e,t,n)}):L(e,t,n):void 0},set:function(e,r,n){var o=n&&y(e);return w(e,r,n?x(e,t,n,Z.support.boxSizing&&"border-box"===Z.css(e,"boxSizing",!1,o),o):0)}}}),Z(function(){Z.support.reliableMarginRight||(Z.cssHooks.marginRight={get:function(e,t){return t?Z.swap(e,{display:"inline-block"},Rt,[e,"marginRight"]):void 0}}),!Z.support.pixelPosition&&Z.fn.position&&Z.each(["top","left"],function(e,t){Z.cssHooks[t]={get:function(e,r){return r?(r=Rt(e,t),qt.test(r)?Z(e).position()[t]+"px":r):void 0}}})}),Z.expr&&Z.expr.filters&&(Z.expr.filters.hidden=function(e){return e.offsetWidth<=0&&e.offsetHeight<=0},Z.expr.filters.visible=function(e){return!Z.expr.filters.hidden(e)}),Z.each({margin:"",padding:"",border:"Width"},function(e,t){Z.cssHooks[e+t]={expand:function(r){for(var n=0,o={},a="string"==typeof r?r.split(" "):[r];4>n;n++)o[e+$t[n]+t]=a[n]||a[n-2]||a[0];return o}},Dt.test(e)||(Z.cssHooks[e+t].set=w)});var Gt=/%20/g,Jt=/\[\]$/,Xt=/\r?\n/g,Yt=/^(?:submit|button|image|reset|file)$/i,Qt=/^(?:input|select|textarea|keygen)/i;Z.fn.extend({serialize:function(){return Z.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=Z.prop(this,"elements");return e?Z.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!Z(this).is(":disabled")&&Qt.test(this.nodeName)&&!Yt.test(e)&&(this.checked||!Ct.test(e))}).map(function(e,t){var r=Z(this).val();return null==r?null:Z.isArray(r)?Z.map(r,function(e){return{name:t.name,value:e.replace(Xt,"\r\n")}}):{name:t.name,value:r.replace(Xt,"\r\n")}}).get()}}),Z.param=function(e,r){var n,o=[],a=function(e,t){t=Z.isFunction(t)?t():null==t?"":t,o[o.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};if(r===t&&(r=Z.ajaxSettings&&Z.ajaxSettings.traditional),Z.isArray(e)||e.jquery&&!Z.isPlainObject(e))Z.each(e,function(){a(this.name,this.value)});else for(n in e)A(n,e[n],r,a);return o.join("&").replace(Gt,"+")},Z.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,t){Z.fn[t]=function(e,r){return arguments.length>0?this.on(t,null,e,r):this.trigger(t)}}),Z.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)},bind:function(e,t,r){return this.on(e,null,t,r)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,r,n){return this.on(t,e,r,n)},undelegate:function(e,t,r){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",r)}});var Zt,er,tr=/^(?:toggle|show|hide)$/,rr=new RegExp("^(?:([+-])=|)("+et+")([a-z%]*)$","i"),nr=/queueHooks$/,or=[T],ar={"*":[function(e,t){var r=this.createTween(e,t),n=r.cur(),o=rr.exec(t),a=o&&o[3]||(Z.cssNumber[e]?"":"px"),i=(Z.cssNumber[e]||"px"!==a&&+n)&&rr.exec(Z.css(r.elem,e)),s=1,u=20;if(i&&i[3]!==a){a=a||i[3],o=o||[],i=+n||1;do s=s||".5",i/=s,Z.style(r.elem,e,i+a);while(s!==(s=r.cur()/n)&&1!==s&&--u)}return o&&(i=r.start=+i||+n||0,r.unit=a,r.end=o[1]?i+(o[1]+1)*o[2]:+o[2]),r}]};Z.Animation=Z.extend(C,{tweener:function(e,t){Z.isFunction(e)?(t=e,e=["*"]):e=e.split(" ");for(var r,n=0,o=e.length;o>n;n++)r=e[n],ar[r]=ar[r]||[],ar[r].unshift(t)},prefilter:function(e,t){t?or.unshift(e):or.push(e)}}),Z.Tween=I,I.prototype={constructor:I,init:function(e,t,r,n,o,a){this.elem=e,this.prop=r,this.easing=o||"swing",this.options=t,this.start=this.now=this.cur(),this.end=n,this.unit=a||(Z.cssNumber[r]?"":"px")},cur:function(){var e=I.propHooks[this.prop];return e&&e.get?e.get(this):I.propHooks._default.get(this)},run:function(e){var t,r=I.propHooks[this.prop];return this.pos=t=this.options.duration?Z.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),r&&r.set?r.set(this):I.propHooks._default.set(this),this}},I.prototype.init.prototype=I.prototype,I.propHooks={_default:{get:function(e){var t;return null==e.elem[e.prop]||e.elem.style&&null!=e.elem.style[e.prop]?(t=Z.css(e.elem,e.prop,""),t&&"auto"!==t?t:0):e.elem[e.prop]},set:function(e){Z.fx.step[e.prop]?Z.fx.step[e.prop](e):e.elem.style&&(null!=e.elem.style[Z.cssProps[e.prop]]||Z.cssHooks[e.prop])?Z.style(e.elem,e.prop,e.now+e.unit):e.elem[e.prop]=e.now}}},I.propHooks.scrollTop=I.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},Z.each(["toggle","show","hide"],function(e,t){var r=Z.fn[t];Z.fn[t]=function(e,n,o){return null==e||"boolean"==typeof e?r.apply(this,arguments):this.animate(P(t,!0),e,n,o)}}),Z.fn.extend({fadeTo:function(e,t,r,n){return this.filter(k).css("opacity",0).show().end().animate({opacity:t},e,r,n)},animate:function(e,t,r,n){var o=Z.isEmptyObject(e),a=Z.speed(t,r,n),i=function(){var t=C(this,Z.extend({},e),a);(o||ct.get(this,"finish"))&&t.stop(!0)};return i.finish=i,o||a.queue===!1?this.each(i):this.queue(a.queue,i)},stop:function(e,r,n){var o=function(e){var t=e.stop;delete e.stop,t(n)};return"string"!=typeof e&&(n=r,r=e,e=t),r&&e!==!1&&this.queue(e||"fx",[]),this.each(function(){var t=!0,r=null!=e&&e+"queueHooks",a=Z.timers,i=ct.get(this);if(r)i[r]&&i[r].stop&&o(i[r]);else for(r in i)i[r]&&i[r].stop&&nr.test(r)&&o(i[r]);for(r=a.length;r--;)a[r].elem!==this||null!=e&&a[r].queue!==e||(a[r].anim.stop(n),t=!1,a.splice(r,1));(t||!n)&&Z.dequeue(this,e)})},finish:function(e){return e!==!1&&(e=e||"fx"),this.each(function(){var t,r=ct.get(this),n=r[e+"queue"],o=r[e+"queueHooks"],a=Z.timers,i=n?n.length:0;for(r.finish=!0,Z.queue(this,e,[]),o&&o.stop&&o.stop.call(this,!0),t=a.length;t--;)a[t].elem===this&&a[t].queue===e&&(a[t].anim.stop(!0),a.splice(t,1));for(t=0;i>t;t++)n[t]&&n[t].finish&&n[t].finish.call(this);delete r.finish})}}),Z.each({slideDown:P("show"),slideUp:P("hide"),slideToggle:P("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){Z.fn[e]=function(e,r,n){return this.animate(t,e,r,n)}}),Z.speed=function(e,t,r){var n=e&&"object"==typeof e?Z.extend({},e):{complete:r||!r&&t||Z.isFunction(e)&&e,duration:e,easing:r&&t||t&&!Z.isFunction(t)&&t};return n.duration=Z.fx.off?0:"number"==typeof n.duration?n.duration:n.duration in Z.fx.speeds?Z.fx.speeds[n.duration]:Z.fx.speeds._default,(null==n.queue||n.queue===!0)&&(n.queue="fx"),n.old=n.complete,n.complete=function(){Z.isFunction(n.old)&&n.old.call(this),n.queue&&Z.dequeue(this,n.queue)},n},Z.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2}},Z.timers=[],Z.fx=I.prototype.init,Z.fx.tick=function(){var e,r=Z.timers,n=0;for(Zt=Z.now();n<r.length;n++)e=r[n],e()||r[n]!==e||r.splice(n--,1);r.length||Z.fx.stop(),Zt=t},Z.fx.timer=function(e){e()&&Z.timers.push(e)&&Z.fx.start()},Z.fx.interval=13,Z.fx.start=function(){er||(er=setInterval(Z.fx.tick,Z.fx.interval))},Z.fx.stop=function(){clearInterval(er),er=null},Z.fx.speeds={slow:600,fast:200,_default:400},Z.fx.step={},Z.expr&&Z.expr.filters&&(Z.expr.filters.animated=function(e){return Z.grep(Z.timers,function(t){return e===t.elem}).length}),Z.fn.offset=function(e){if(arguments.length)return e===t?this:this.each(function(t){Z.offset.setOffset(this,e,t)});var r,n,o=this[0],a={top:0,left:0},i=o&&o.ownerDocument;if(i)return r=i.documentElement,Z.contains(r,o)?(typeof o.getBoundingClientRect!==z&&(a=o.getBoundingClientRect()),n=N(i),{top:a.top+n.pageYOffset-r.clientTop,left:a.left+n.pageXOffset-r.clientLeft}):a},Z.offset={setOffset:function(e,t,r){var n,o,a,i,s,u,l,c=Z.css(e,"position"),p=Z(e),d={};"static"===c&&(e.style.position="relative"),s=p.offset(),a=Z.css(e,"top"),u=Z.css(e,"left"),l=("absolute"===c||"fixed"===c)&&(a+u).indexOf("auto")>-1,l?(n=p.position(),i=n.top,o=n.left):(i=parseFloat(a)||0,o=parseFloat(u)||0),Z.isFunction(t)&&(t=t.call(e,r,s)),null!=t.top&&(d.top=t.top-s.top+i),null!=t.left&&(d.left=t.left-s.left+o),"using"in t?t.using.call(e,d):p.css(d)}},Z.fn.extend({position:function(){if(this[0]){var e,t,r=this[0],n={top:0,left:0};return"fixed"===Z.css(r,"position")?t=r.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),Z.nodeName(e[0],"html")||(n=e.offset()),n.top+=Z.css(e[0],"borderTopWidth",!0),n.left+=Z.css(e[0],"borderLeftWidth",!0)),{top:t.top-n.top-Z.css(r,"marginTop",!0),left:t.left-n.left-Z.css(r,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent||j;e&&!Z.nodeName(e,"html")&&"static"===Z.css(e,"position");)e=e.offsetParent;return e||j})}}),Z.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(r,n){var o="pageYOffset"===n;Z.fn[r]=function(a){return Z.access(this,function(r,a,i){var s=N(r);return i===t?s?s[n]:r[a]:void(s?s.scrollTo(o?e.pageXOffset:i,o?i:e.pageYOffset):r[a]=i)},r,a,arguments.length,null)}}),Z.each({Height:"height",Width:"width"},function(e,r){Z.each({padding:"inner"+e,content:r,"":"outer"+e},function(n,o){Z.fn[o]=function(o,a){var i=arguments.length&&(n||"boolean"!=typeof o),s=n||(o===!0||a===!0?"margin":"border");return Z.access(this,function(r,n,o){var a;return Z.isWindow(r)?r.document.documentElement["client"+e]:9===r.nodeType?(a=r.documentElement,Math.max(r.body["scroll"+e],a["scroll"+e],r.body["offset"+e],a["offset"+e],a["client"+e])):o===t?Z.css(r,n,s):Z.style(r,n,o,s)},r,i?o:t,i,null)}})}),Z.fn.size=function(){return this.length},Z.fn.andSelf=Z.fn.addBack,"object"==typeof module&&module&&"object"==typeof module.exports?module.exports=Z:"function"==typeof define&&define.amd&&define("jquery",[],function(){return Z}),"object"==typeof e&&"object"==typeof e.document&&(e.jQuery=e.$=Z)}(window),define("core/utils",["core/l10n","jquery","underscore"],function(e,t,r){function n(e){require("core/log")("utils").log(e)}function o(e){return function(t){t.preventDefault(),e&&e.apply(this,arguments)}}function a(){var e=function(e,r){var n=t(e),o=parseInt(n.attr("maxlength"),10),a=o-n.val().length;r.html(x("<b>{n}</b> character left.","<b>{n}</b> characters left.",{n:a})).toggleClass("error",0>a)};t(".char-count").each(function(){var n=t(this);n.closest("form").find("#"+n.data("for")).on("input blur",r.throttle(function(){e(this,n)},250)).trigger("blur")})}function i(e,t){if("string"!=typeof e)return e;var r=e.toLowerCase().trim().replace(/[ _]/g,"-").replace(/[^-\w]/g,"").replace(/-+/g,"-");return t&&(r=r.substr(0,t)),r}function s(e){return L.test(e.target.nodeName)}function u(e){var t=e.indexOf("?");return-1===t?{}:h(e.substr(t+1))}function l(e){return e.split("?")[0]}function c(e){return"url("+JSON.stringify(e)+")"}function p(e){return window.encodeURIComponent(e).replace(/%20/g,"+")}function d(e){return window.decodeURIComponent(e.replace(/\+/g," "))}function f(e){if("string"==typeof e)return p(e);var t=[];"__keywords"in e&&delete e.__keywords;for(var n=r.keys(e).sort(),o=0;o<n.length;o++){var a=n[o],i=e[a];t.push(void 0===i?p(a):p(a)+"="+p(i))}return t.join("&")}function m(e,t){return l(e)+"?"+f(r.defaults(t,u(e)))}function g(e,t){for(var n=u(e),o=0;o<t.length;o++){var a=t[o];a in n&&delete n[a]}var i=l(e);return r.isEmpty(n)?i:i+"?"+f(n)}function h(e,t){return e||(e=location.search),e&&"?"!==e?(e&&"?"==e[0]&&(e=e.substr(1)),r.chain(e.split("&")).map(function(e){return e.split("=").map(d)}).filter(function(e){return!(!e[0]||t&&r.isUndefined(e[1]))}).object().value()):{}}function v(e,t,r){if(!e)return"";if("string"==typeof e)return e;if(t=t||"en-US",r=r||(window.navigator.l10n?window.navigator.l10n.language:"en-US"),r in e)return e[r];var n=r.split("-")[0];if(n in e)return e[n];if("string"==typeof t)return e[t];if("object"==typeof t&&"default_language"in t&&t.default_language in e)return e[t.default_language];for(var o in e)return e[o];return""}function b(e){return O.href=e,O}function k(e,t){var r=window.screenX+Math.max(0,Math.floor((window.innerWidth-e)/2)),n=window.screenY+Math.max(0,Math.floor((window.innerHeight-t)/2));return[r,n]}function y(e){e=e||{};var t=e.url||"",r=e.title||"fxa",n=e.width||320,o=e.height||600,a=k(n,o);return window.open(t,r,"scrollbars=yes,width="+n+",height="+o+",left="+a[0]+",top="+a[1])}function _(){var e=(new Date).getFullYear()>=2010;return e||n("System date appears to be incorrect!"),e}function w(){return navigator.l10n&&navigator.l10n.language||navigator.language||navigator.userLanguage}var x=e.ngettext;r.extend(String.prototype,{strip:function(){return this.replace(/\s/g,"")}});var L=/input|keygen|meter|option|output|progress|select|textarea/i,O=document.createElement("a");return{_pd:o,baseurl:l,bgurl:c,encodeURIComponent:p,decodeURIComponent:d,escape_:r.escape,fieldFocused:s,getVars:h,initCharCount:a,isSystemDateRecent:_,lang:w,openWindow:y,querystring:u,slugify:i,urlencode:f,urlparams:m,urlparse:b,urlunparam:g,translate:v}}),define("core/log",["core/storage","core/utils"],function(e,t){void 0===window.console.groupCollapsed&&(window.console.groupCollapsed=window.console.log,window.console.group=window.console.log,window.console.groupEnd=function(){});var r,n,o=Array.prototype.slice,a=[],i=e.getItem("persistent_logs")||{},s=function(e,t,i){function u(e){return function(){var t=o.call(arguments,0);t.length&&(t[0]=l+t[0],t=t.map(r),c.push(t),a.push(t),i&&i(t)),void 0===window.console[e]&&(window.console[e]=window.console.log),window.console[e].apply(window.console,t)}}var l="["+e+"]";t&&(l+="["+t+"]"),l+=" ",e in n||(n[e]=[]);var c=n[e];return{log:u("log"),warn:u("warn"),error:u("error"),group:u("group"),groupCollapsed:u("groupCollapsed"),groupEnd:u("groupEnd"),tagged:function(r){return s(e,t+"]["+r,i)}}};return s.unmentionables=[],s.unmention=function(e){s.unmentionables.push(e),s.unmentionables.push(t.encodeURIComponent(e))},n=s.logs={},s.all=a,s.get_recent=function(e,t){var r=t?n[t]:a,o=r.length;return r.slice(Math.max(o-e,0),o)},r=s.filter=function(e){if("string"!=typeof e)return e;for(var t=0;t<s.unmentionables.length;t++)e=e.replace(s.unmentionables[t],"---");return e},s.persistent=function(t){var r=o.call(arguments);return r[2]=function(r){t in i||(i[t]=[]),i[t].push(r),e.setItem("persistent_logs",i)},s.apply(this,r)},s.persistent.all=i,s}),define("core/defer",["jquery"],function(e){return{Deferred:e.Deferred,when:e.when}}),define("core/router",["core/defer","core/utils","underscore"],function(e,t,r){var n=[],o=/^core\//,a={addRoute:function(t){var r,n=!1,i=e.Deferred();r=o.test(t.view_name)?t.view_name.replace(o,"core/views/"):"views/"+t.view_name,t.view=function(){return n||(n=!0,require([r],function(e){i.resolve(e)})),i.promise()},t.regexp=new RegExp(t.pattern),a.routes.push(t)},addRoutes:function(e){for(var t=0;t<e.length;t++)a.addRoute(e[t])},clearRoutes:function(){a.routes=[]},routes:[],api:{addProcessor:function(e){n.push(e)},clearProcessors:function(){n=[]},args:function(e){return r.reduce(n,function(t,n){return r.extend(t,n(e))},{})},addRoutes:function(e){r.extend(a.api.routes,e)},clearRoutes:function(){a.api.routes={}},routes:{}}};return a}),define("core/user",["core/capabilities","core/log","core/storage","core/utils"],function(e,t,r){function n(){L={}}function o(){x.log("Clearing token"),r.removeItem("user"),"email"in L&&(delete L.email,f(),O={},g(),E={installed:[],purchased:[],developed:[]},y()),w=null}function a(e,t){return L.hasOwnProperty(e)?L[e]:t}function i(e){return O[e]||!1}function s(){return L}function u(){return E}function l(e){return-1!==E.developed.indexOf(e)}function c(e){return-1!==E.installed.indexOf(e)}function p(e){return-1!==E.purchased.indexOf(e)}function d(e,n){x.log("Setting new token"),e&&(w=e,t.unmention(e),r.setItem("user",w),m(n))}function f(){x.log("Saving settings"),r.setItem("settings",L)}function m(e){e&&(x.log("Updating settings",e),_.extend(L,e),f())}function g(){x.log("Saving perms"),r.setItem("permissions",O)}function h(e){e&&(x.log("Updating perms",e),O=e,g())}function v(e){e&&(x.log("Updating apps",e),E=e,y())}function b(e){x.log("Adding to apps.installed",e),E.installed.push(e),y()}function k(e){x.log("Adding to apps.purchased",e),E.purchased.push(e),y()}function y(){x.log("Saving apps"),r.setItem("user_apps",E)}var w,x=t("user"),L={},O={},E={installed:[],purchased:[],developed:[]};w=r.getItem("user"),L=r.getItem("settings")||{},O=r.getItem("permissions")||{};var A=r.getItem("user_apps");return A&&(E=A),t.unmention(w),f(),{clear_settings:n,clear_token:o,get_apps:u,get_permission:i,get_setting:a,get_settings:s,get_token:function(){return w},has_developed:l,has_installed:c,has_purchased:p,logged_in:function(){return!!w},set_token:d,update_apps:v,update_install:b,update_permissions:h,update_purchased:k,update_settings:m}}),define("core/urls",["core/format","core/log","core/router","core/settings","core/user","core/utils"],function(e,t,r,n,o,a){function i(){if("media_url"in n){var e=document.createElement("a");return e.href=n.media_url,e.protocol+"//"+e.host}return n.api_url}function s(e){return function(){var t=e.apply(this,arguments),n=r.api.args(arguments[0]);return o.logged_in()&&(n._user=o.get_token()),l(n),a.urlparams(t,n)}}function u(e){return function(){var t=e.apply(this,arguments),n=r.api.args(arguments[0]);return l(n),a.urlparams(t,n)}}function l(e){var t=n.api_param_blacklist||[];for(var r in e)e[r]&&-1===t.indexOf(r)||delete e[r]}function c(t,n,o){if(!(t in r.api.routes))return m.error("Invalid API endpoint: "+t),"";var i=e.format(r.api.routes[t],n||[]),s=d(i)+i;return o?a.urlparams(s,o):s}function p(e,t){return c(e,[],t)}function d(e){var t=n.api_url;return n.api_cdn_whitelist&&a.baseurl(e)in n.api_cdn_whitelist&&(t=i()),t}function f(e){var t=n.media_url;return"/"!==t.substr(-1)&&(t+="/"),"/"===e[0]&&(e=e.substr(1)),t+e}var m=t("urls"),g=/\([^\)]+\)/,h=/(\(.*\)|\[.*\]|.)\?/g,v=function(t,n){n=n||[];for(var o in r.routes){var a=r.routes[o];if(a.view_name==t){var i=a.pattern.substring(1,a.pattern.length-1);-1!==i.indexOf("?")&&(i=i.replace(h,""));for(var s=0;g.test(i);)i=i.replace(g,"{"+s++ +"}");if(n.length!==s)throw m.error("Expected "+s+" args, got "+n.length),new Error('Wrong number of arguments passed to reverse(). View: "'+t+'", Argument "'+n+'"');return e.format(i,n)}}m.error('Could not find the view "'+t+'".')};return{reverse:v,api:{url:s(c),host:d,params:s(p),sign:s(function(e){return e}),unsign:u(function(e){return e}),unsigned:{url:u(c),params:u(p)},base:{url:c,host:d,params:p}},cdn_url:i,media:f}}),define("core/helpers",["core/capabilities","core/format","core/l10n","core/nunjucks","core/settings","core/urls","core/user","core/utils","underscore"],function(e,t,r,n,o,a,i,s,u){function l(e){return function(){return new p(e.apply(this,arguments))}}function c(e,t){d[e]=l(t)}var p=n.require("runtime").SafeString,d=n.require("filters");d.extend=function(e,t){return delete t.__keywords,u.extend(e,t)},d.bgurl=s.bgurl,d.urlparams=s.urlparams,d.urlunparam=s.urlunparam,c("nl2br",function(e){return"string"!=typeof e?e:e.replace(/\n/g,"<br>")}),c("make_data_attrs",function(e){return u.pairs(e).map(function(e){return"data-"+s.escape_(e[0])+'="'+s.escape_(e[1])+'"'}).join(" ")}),c("external_href",function(e){return'href="'+s.escape_(e)+'" target="_blank"'}),d.translate=s.translate,d.numberfmt=function(e){return"number"==typeof e&&e.toLocaleString?e.toLocaleString():e},d.datetime=function(e){if(!e)return"";var t=e;e instanceof Date||(e=new Date(e));var r=e.toLocaleString();return"Invalid Date"===r?(console.warn("Invalid date: ",t),""):r},d.filter=function(e,t){var r=[];e:for(var n=0;n<e.length;n++){var o=e[n];for(var a in t)if(t.hasOwnProperty(a)&&"__keywords"!==a){if(!(a in o))continue e;if(Array.isArray(t[a])?-1===t[a].indexOf(o[a]):o[a]!==t[a])continue e}r.push(o)}return r},d.hex2rgba=function(e,t){return e=parseInt(e.substring("#"==e[0]?1:0),16),"rgba("+(e>>16)+","+((65280&e)>>8)+","+(255&e)+","+t+")"},c("stringify",JSON.stringify),d.format=t.format,d.sum=function(e){return e.reduce(function(e,t){return e+t},0)};var f={get_setting:i.get_setting,get_settings:function(){return u.clone(i.get_settings())},get_permission:i.get_permission,has_developed:i.has_developed,has_installed:i.has_installed,has_purchased:i.has_purchased,logged_in:i.logged_in},m={api:a.api.url,apiHost:a.api.host,apiParams:a.api.params,anonApi:a.api.unsigned.url,anonApiParams:a.api.unsigned.params,url:a.reverse,media:a.media,_:l(r.gettext),_plural:l(r.ngettext),format:t.format,settings:o,capabilities:e,user:f,escape:s.escape_,len:function(e){return e.length},max:Math.max,min:Math.min,range:u.range,identity:function(e){return"__keywords"in e&&delete e.__keywords,e},navigator:window.navigator,screen:window.screen,language:window.navigator.l10n?window.navigator.l10n.language:"en-US"},g=n.require("globals");for(var h in m)m.hasOwnProperty(h)&&(g[h]=m[h]);return m}),define("core/z",["jquery"],function(e){return{win:e(window),doc:e(document),body:e(document.body),container:e("main"),page:e("#page"),apps:[],context:{},spaceheater:!!document.body.getAttribute("data-spaceheater")}}),define("core/l10n_init",["core/defer","core/l10n","core/z"],function(e,t){function r(n,i){n=n||e.Deferred(),i=i||o();var s=document.createElement("script");return s.src=a(i),s.onload=function(){document.documentElement.setAttribute("dir",t.getDirection()),document.documentElement.setAttribute("lang",i),n.resolve(i,s)},s.onerror=function(){"en-US"==i?(window.navigator.l10n={language:"en-US"},n.resolve("en-US",s)):r(n,"en-US")},document.body.appendChild(s),n}function n(e){if(e=e||"en-US",-1!==i.indexOf(e))return e;if(e=e.split("-")[0],-1!==i.indexOf(e))return e;var t={en:"en-US",ga:"ga-IE",pt:"pt-BR",sv:"sv-SE",zh:"zh-CN",sr:"sr-Latn"};return e in t&&(e=t[e],-1!==i.indexOf(e))?e:"en-US"}function o(e){var t=/[\?&]lang=([\w\-]+)/i.exec(window.location.search),r=n(e||t&&t[1]||window.navigator.language||window.navigator.userLanguage);return"en-US"===r&&(window.navigator.l10n={language:"en-US"}),r}function a(e,t){var r=t||window.document,n=r.body.getAttribute("data-media"),o=r.body.getAttribute("data-build-id-js"),a=r.body.getAttribute("data-repo");return[n||"/media/",a?a+"/":"","locales/"+e+".js",o?"?b="+o:""].join("")}var i,s=document.body.getAttribute("data-languages");return i=s?JSON.parse(s):["ar","bg","bn-BD","ca","cs","da","de","el","en-US","es","eu","fr","ga-IE","hr","hu","it","ja","ko","mk","nb-NO","nl","pa","pl","pt-BR","ro","rtl","ru","sk","sq","sr","sr-Latn","ta","tr","xh","zh-CN","zh-TW","zu","dbg"],{getLocale:o,getLocaleSrc:a,injectLocaleScript:r,languages:i}}),define("core/notification",["core/defer","core/helpers","core/nunjucks","core/z","jquery"],function(e,t,r,n,o){function a(e){return e?e.replace(g,function(e,t){return"<b>"+t+"</b>"}):void 0}function i(){d&&window.clearTimeout(d),f.removeClass("hidden"),p=window.setTimeout(function(){f.addClass("show")},700)}function s(){p&&window.clearTimeout(p),f.removeClass("show"),d=window.setTimeout(function(){f.addClass("hidden")},400)}function u(t){var r=[];c=e.Deferred(),c.always(s),f.attr("class",""),m.text("");var n=t.message;if(n){"classes"in t&&(r=t.classes.split(/\s+/)),t.closable&&r.push("closable"),setTimeout(function(){c.reject()},t.timeout||5e3),f.addClass(r.join(" "));var o=a(n);return o==n?m.text(n):m.html(o),i(),c.promise()}}function l(t){var i=o('<div class="modal confirmation show">');i.html(r.env.render("confirmation.html")),n.body.append(i),h.addClass("show light");var s=e.Deferred();i.on("touchend click",".confirmation-yes",function(e){e.preventDefault(),s.resolve()}).on("touchend click",".confirmation-no, .close",function(e){e.preventDefault(),s.reject()}),s.always(function(){i.remove(),o(".modal.confirmation").length||h.removeClass("show light")});var u=i.find(".content");u.text("");var l=t.message;if(l){var c=[];"classes"in t&&(c=t.classes.split(/\s+/)),t.closable&&c.push("closable"),i.addClass(c.join(" "));var p=a(l);return p===l?u.text(l):u.html(p),s.promise()}}var c,p,d,f=o('<div id="notification" class="hidden">'),m=o('<div id="notification-content">'),g=/\*([^\*]+)\*/g;f.append(m).on("touchend click",function(){c.resolve()}),n.body.append(f);var h=o(".cloak");return n.win.on("notification",function(e){u({message:e})}),{notification:u,confirmation:l}}),define("core/scroll_state",["core/log","core/z"],function(e,t){var r=e("scroll_state");t.page.on("navigation--pre-navigate",function(e,n){r.log("Navigating to new page, setting scroll to 0");var o=window.pageYOffset;o!==n.scrollTop&&(r.log("Preserving scroll state",o),n.scrollTop=o,n.docHeight=t.doc.height(),history.replaceState(n,!1,n.path)),t.page.one("builder--post-render",function(){setTimeout(function(){window.scrollTo(0,0)})})}),t.page.on("navigation--pop-state",function(e,n){n.scrollTop&&(r.log("Popping and resetting scroll to",n.scrollTop),t.page.one("loaded",function(){n.docHeight&&(t.body.css("min-height",n.docHeight),t.page.one("loaded",function(){t.body.css("min-height","")})),setTimeout(function(){window.scrollTo(0,n.scrollTop)})}))})}),define("core/cache",["core/log","core/settings","core/storage","core/user","core/utils","core/z","underscore"],function(e,t,r,n,o,a,i){function s(e){var r=o.urlparse(e).pathname;return t.offline_cache_whitelist&&r in t.offline_cache_whitelist?1e3*t.offline_cache_whitelist[r]:null}function u(){if(!t.offline_cache_enabled||t.offline_cache_enabled()){var e={};Object.keys(y).forEach(function(t){null!==s(t)&&(e[t]=y[t])}),a.doc.trigger("save_cache",_),i.isEqual(r.getItem(_),e)||(r.setItem(_,e),k.log("Persisting request cache"))}}function l(){y={}}function c(){Object.keys(y).forEach(function(e){-1!==e.indexOf("_user="+n.get_token())&&(k.log("Removing signed URL",e),delete y[e])}),u()}function p(){var e,t=+new Date,r=null;Object.keys(y).forEach(function(n){return e=y[n].__time,r=s(n),!e||t>=e+r?(k.log("Removing expired URL",n),delete y[n]):void 0}),u()}function d(e){return e in y}function f(e){return y[e]}function m(e){return Object.keys(y).filter(function(t){var r=e.split("?");if(-1!==t.indexOf(r[0])){var n=r[1],a=t.split("?")[1];return i.isEqual(o.getVars(n),o.getVars(a))}})[0]}function g(e){for(var t in y)if(y.hasOwnProperty(t)){if(e&&!e(t))continue;delete y[t]}}function h(e,t){for(var r=0;r<w.length;r++){var n=w[r](e,t,y);if(null===n)return;n&&(t=n)}y[e]=t}function v(e){k.log("Busting cache for ",e),e in y&&delete y[e]}function b(e,t,r){var n=0;k.log("Attempting cache rewrite");for(var o in y)if(e(o)){k.log("Matched cache rewrite pattern for key ",o);var a=t(y[o],o);if(y[o]=a,L.has(o)&&L.set(o,a),r&&++n>=r)return void k.log("Cache rewrite limit hit, exiting")}}var k=e("cache"),y={},_="request_cache",w=[];t.offline_cache_enabled&&t.offline_cache_enabled()&&(y=r.getItem(_)||{},p()),window.addEventListener("beforeunload",u,!1);var x="cache.persist::",L={get:function(e){if(d(e))return f(e);var t=JSON.parse(r.getItem(x+e));return h(e,t),t},set:function(e,t){r.setItem(x+e,JSON.stringify(t)),h(e,t)},bust:function(e){r.removeItem(x+e),v(e)},has:function(e){return!!r.getItem(x+e)},purge:function(){for(var e=0;e<r.length;e++){var t=r.key(e);0===t.indexOf(x)&&(r.removeItem(x+t),v(t.replace(x,"")))}}};return{addRewriter:function(e){w.push(e)},attemptRewrite:b,bust:v,cache:y,clearRewriters:function(){w=[]},flush:l,flush_expired:p,flush_signed:c,get:f,get_ttl:s,searchUrl:m,has:d,persist:L,purge:g,raw:y,set:h}}),define("core/requests",["core/cache","core/defer","core/log","core/settings","core/utils"],function(e,t,r,n,o){function a(e,t){if(e in _)for(var r=0;r<_[e].length;r++){var n=_[e][r];n.apply(n,t)}}function i(e){return e&&e.constructor===Object||Array.isArray(e)}function s(e){for(var t in e)if(e.hasOwnProperty(t)&&i(e[t]))return!0}function u(e,r,n){function u(e){var t=e.responseText;if("application/json"===(e.getResponseHeader("Content-Type")||"").split(";",1)[0])try{return JSON.parse(t)}catch(r){return{}}return t||null}function l(){p.reject(c,c.statusText,c.status,u(c))}var c=new XMLHttpRequest,p=t.Deferred();c.addEventListener("load",function(){try{"Deprecated"===c.getResponseHeader("API-Status")&&a("deprecated",[c])}catch(e){}var t=c.status/100|0;return 2>t||t>3?l():void p.resolve(u(c),c)},!1),c.addEventListener("error",l,!1),c.open(e,r,!0);var d="application/x-www-form-urlencoded";return n&&(i(n)&&!s(n)?n=o.urlencode(n):n instanceof b?(n=n.toString(),d="text/plain"):(n=JSON.stringify(n),d="application/json"),c.setRequestHeader("Content-Type",d)),c.send(n||void 0),p.promise(c)}function l(e,t,r){var n=y.ajax(e,t,r);return n.then(function(n,o){a("success",[n,o,e,t,r])},function(n,o,i,s){a("failure",[n,o,i,s,e,t,r]),p(n,e,i)}),n}function c(r,o){var a,i=n.offline_cache_enabled&&n.offline_cache_enabled();e.has(r)&&!o&&(k.log("GETing from cache",r),a=e.get(r));var s;if(a&&(s=t.Deferred().resolve(a).promise({__cached:!0}),!i||r in w))return s;k.log("GETing",r),w[r]=null;var u=l("GET",r).done(function(t){k.log("GOT",r),o||(t.__time=+new Date,e.set(r,t)),a&&i&&k.log("Updating request cache",r)});return a&&i?s:u}function p(e,t,r){if(k.log("Request failed:",t,r),e.responseText)try{var n=JSON.parse(e.responseText);"error_message"in n?k.log("Error message: ",n.error_message):k.log("Response data: ",e.responseText)}catch(o){}}function d(e,t){return k.log("DELETing",e),l("DELETE",e,t).done(function(){k.log("DELETEd",e)})}function f(e,t){return k.log("PATCHing",e),l("PATCH",e,t).done(function(){k.log("PATCHed",e)})}function m(e,t){return k.log("POSTing",e),l("POST",e,t).done(function(){k.log("POSTed",e)})}function g(e,t){return k.log("PUTing",e),l("PUT",e,t).done(function(){k.log("PUT",e)})}function h(){function e(){u||!i&&s&&(k.log("Closing pool"),u=!0,setTimeout(l?a.reject:a.resolve,0))
}function r(t,r){var o=t.apply(this,r);return i++,n.push(o),o.fail(function(){l=!0}),o.always(function(){i--,e()}),o}k.log("Opening pool");var n=[],o={},a=t.Deferred(),i=0,s=!1,u=!1,l=!1;this.finish=function(){s=!0,e()},this.get=function(e){if(e in o)return o[e];var t=r(c,arguments);return o[e]=t,t},this.del=function(){return r(d,arguments)},this.patch=function(){return r(f,arguments)},this.post=function(){return r(m,arguments)},this.put=function(){return r(g,arguments)},this.abort=function(){for(var e=0;e<n.length;e++){var t=n[e];void 0!==t.abort&&4!==t.readyState&&t.abort()}a.reject()},a.promise(this)}function v(e,t){return(_[e]=_[e]||[]).push(t),{on:v}}function b(e){this.data=e,this.toString=function(){return this.data}}var k=r("req"),y={ajax:u},_={},w={};return{get:c,post:m,del:d,put:g,patch:f,pool:function(){return new h},on:v,RawData:b,helpers:y,clearHooks:function(){_={}}}}),define("core/models",["core/cache","core/defer","core/log","core/requests","core/settings","core/storage","core/z","underscore"],function(e,t,r,n,o,a,i,s){function u(){d={}}function l(){i.doc.trigger("save_cache",p),s.isEqual(a.getItem(p),d)||(a.setItem(p,d),c.log("Persisting model cache"))}var c=r("model"),p="model_cache",d={};return o.offline_cache_enabled&&o.offline_cache_enabled()&&(d=a.getItem(p)||{}),window.addEventListener("beforeunload",l,!1),i.doc.on("saving_offline_cache",function(t,r){var n={request_cache:e.cache,model_cache:d},i=JSON.stringify(n.request_cache).length+JSON.stringify(n.model_cache).length;if(i>=o.offline_cache_limit)c.warn("Quota exceeded for request/model offline cache; flushing cache"),e.flush(),u(),a.setItem(r,d);else{var l=n[r];s.isEqual(a.getItem(r),l)||(a.setItem(r,l),c.log("Persisting model cache"))}}),function(e){function r(t,r){function n(t){var r=t[g];d[e][r]=t,c.log("Stored "+r+" as "+e)}if(s.isArray(t))return s.each(t,n),r?null:t;var o=n(t);return r?null:[o,t]}function a(t){function r(t){return d[e][t[g]]}return s.isArray(t)?t.map(r):r(t)}function i(r,o,a){if(a=a||n.get,o){if(o in d[e])return c.log("Found "+e+" with key "+o),t.Deferred().resolve(d[e][o]).promise({__cached:!0});c.log(e+" cache miss for key "+o)}return a(r)}function l(t,r){if(!r)return t in d[e]?(c.log("Found "+e+" with lookup key "+t),d[e][t]):void c.log(e+" cache miss for key "+t);for(var n in d[e]){var o=d[e][n];if(r in o&&o[r]===t)return o}}function p(){d[e]=[]}function f(t,r){if(r){var n=l(t,r);if(!n)return void c.error("Could not find model cache entry to delete.");t=n[g]}delete d[e][t]}var m=o.model_prototypes;if(!(e in m))throw new Error('Unknown model "'+e+'"');e in d||(d[e]={});var g=m[e];return{cast:r,data_store:d,del:f,flush:u,get:i,lookup:l,purge:p,uncast:a}}}),define("core/nunjucks.compat",["core/nunjucks"],function(e){console.log("Loading nunjucks compat...");var t=e.require("runtime"),r=e.require("lib"),n=t.contextOrFrameLookup;t.contextOrFrameLookup=function(e,t,r){var o=n.apply(this,arguments);if(void 0===o)switch(r){case"True":return!0;case"False":return!1;case"None":return null}return o};var o=t.memberLookup,a={pop:function(e){if(void 0===e)return this.pop();if(e>=this.length||0>e)throw new Error("KeyError");return this.splice(e,1)},remove:function(e){for(var t=0;t<this.length;t++)if(this[t]==e)return this.splice(t,1);throw new Error("ValueError")},count:function(e){for(var t=0,r=0;r<this.length;r++)this[r]==e&&t++;return t},index:function(e){var t;if(-1==(t=this.indexOf(e)))throw new Error("ValueError");return t},find:function(e){return this.indexOf(e)},insert:function(e,t){return this.splice(e,0,t)}},i={items:function(){var e=[];for(var t in this)e.push([t,this[t]]);return e},values:function(){var e=[];for(var t in this)e.push(this[t]);return e},keys:function(){var e=[];for(var t in this)e.push(t);return e},get:function(e,t){var r=this[e];return void 0===r&&(r=t),r},has_key:function(e){return this.hasOwnProperty(e)},pop:function(e,t){var r=this[e];if(void 0===r&&void 0!==t)r=t;else{if(void 0===r)throw new Error("KeyError");delete this[e]}return r},popitem:function(){for(var e in this){var t=this[e];return delete this[e],[e,t]}throw new Error("KeyError")},setdefault:function(e,t){return e in this||(void 0===t&&(t=null),this[e]=t),this[e]},update:function(e){for(var t in e)this[t]=e[t];return null}};i.iteritems=i.items,i.itervalues=i.values,i.iterkeys=i.keys,t.memberLookup=function(e,t){return e=e||{},r.isArray(e)&&a.hasOwnProperty(t)?function(){return a[t].apply(e,arguments)}:r.isObject(e)&&i.hasOwnProperty(t)?function(){return i[t].apply(e,arguments)}:o.apply(this,arguments)}}),define("core/builder",["core/log","core/nunjucks","core/models","core/requests","core/settings","core/z","core/nunjucks.compat","jquery"],function(e,t,r,n,o,a,i,s){function u(e,r,n){a.page.trigger("builder--pre-render");var o=(n||t.env).render(e,r||{});return a.page.trigger("builder--post-render"),o}function l(e,t){var r=document.implementation.createHTMLDocument("");return r.body.innerHTML=e,r.body.querySelector(t)}function c(e,t){var r=document.implementation.createHTMLDocument("");r.body.innerHTML=e;for(var n=t.parentNode;r.body.childNodes.length;){var o=r.body.childNodes[0];r.body.removeChild(o),n.insertBefore(o,t)}n.removeChild(t)}function p(e,t,r){s(e).trigger(t,r)}function d(){function e(t,r,n){if(!r)return void f.log("No element to paginate");var a=r.querySelector(".loadmore button");a&&a.addEventListener("click",function(){a.parentNode.classList.add("loading"),a.parentNode.classList.remove("pagination-error");var i=a.getAttribute("data-url");t(i,a.parentNode,n).done(function(){f.log("Pagination completed"),p(h,"loaded_more")}).fail(function(){i+=(i.indexOf("?")+1?"&":"?")+"_bust="+(new Date).getTime(),c(u(o.pagination_error_template,{more_url:i}),a.parentNode),e(t,r,n),p(h,"builder-pagination-failed",{url:i})})},!1)}function i(e){p(h,"fragment_loaded",e)}function s(e){p(h,"fragment_load_failed",e)}function d(e,t){"function"==typeof t?e.forEach(function(e){r(t(e)).cast(e)}):r(t).cast(e)}var v=this.env=new t.Environment([],{autoescape:!0});v.dev=t.env.dev,v.cache=t.templates;var k=this.results={},y={},_=!1,w=n.pool();this.env.addExtension("defer",{run:function(t,n,o,a,u,p){var h,v="ph_"+g++,x=function(a,m,g){function L(e,r){"pluck"in n&&(e=e[n.pluck]),e&&!r&&"as"in n&&(f.groupCollapsed("Casting "+n.as+"s to model cache..."),d(e,n.as),f.groupEnd());var a="";if(u&&(!e||Array.isArray(e)&&0===e.length)?a=u():(t.ctx.this=e,a=o()),g)try{a=l(a,g).innerHTML}catch(i){f.error("Error extracting result from rendered response."),a=b}return a}var O;if(O="as"in n&&"key"in n?r(n.as).get(a,n.key,w.get):w.get(a,!!n.nocache),"id"in n&&(y[n.id]=O,O.done(function(e){k[n.id]=e})),O.__cached){_=!0;var E;return O.done(function(e){if(t.ctx.response=e,E=L(e,!0),e&&"as"in n){var o=e,a="pluck"in n,i=function(e){return"function"==typeof n.as?r(n.as(e)).uncast(e):r(n.as).uncast(e)};if(a&&(o=o[n.pluck]),!o)return;if(Array.isArray(o))for(var s=0;s<o.length;s++)o[s]=i(o[s]);else a&&(e[n.pluck]=i(o));d(o,n.as)}}),m?c(E,m):h=E,n.paginate&&w.done(function(){setTimeout(function(){e(x,document.getElementById(v),n.paginate)})}),O}return O.done(function(r){var o=document.getElementById(v);if(o){t.ctx.response=r;var a=L(r);m?c(a,m):o.innerHTML=a,n.paginate&&e(x,o,n.paginate),i({context:t,signature:n})}}).fail(function(e,r,o,a){if(!m){var i=document.getElementById(v);if(!i)return;t.ctx.response=a,t.ctx.error=o,i.innerHTML=p?p():b}s({context:t,signature:n})}),O};return x(n.url),h||(h='<div class="loading">'+(a?a():"")+"</div>"),new m('<div id="'+v+'" class="placeholder">'+h+"</div>")}}),this.env.addExtension("fetch",{run:function(e,t,r){var n=t.url,o=w.get(n),a="f_"+g++,i="";if(o.__cached)_=!0,o.done(function(e){i=e});else{var s=function(e){t.filters&&t.filters.forEach(function(t){e=v.filters[t](e)}),document.getElementById(a).innerHTML=e};o.done(s).fail(function(){var e=t.fallback;e&&e!==n&&(o=w.get(e).done(s).fail(function(){s(b)}))})}return i||(i=r()),new m('<div id="'+a+'" class="placeholder fetchblock">'+i+"</div>")}}),this.start=function(e,t){return p(h,"build_start"),h.innerHTML=u(e,t,v),_&&i(),this},this.onload=function(e,t){return y[e].done(t),this},w.promise(this),this.terminate=w.abort,this.finish=function(){w.always(function(){p(h,"loaded")}),w.finish()};var x=function(){var e;return function(){return e||(e=a.context={})}}();this.z=function(e,t){switch(x()[e]=t,e){case"title":t?t!==o.title_suffix&&(t+=" | "+o.title_suffix):t=o.title_suffix,document.title=t;break;case"type":document.body.setAttribute("data-page-type",t)}}}var f=e("builder"),m=t.require("runtime").SafeString,g=0,h=document.getElementById("page");if(!h)return void f.error("Could not start the builder; #page not found!");var v,b="<h1>error</h1>";return{getBuilder:function(){return v&&(p(h,"unloading"),v.terminate()),v=new d},getLastBuilder:function(){return v}}}),define("core/views/not_found",["core/l10n"],function(e){var t=e.gettext;return function(e){e.start("errors/404.html"),e.z("type","leaf"),e.z("title",t("Not Found"))}}),define("core/views",["core/builder","core/defer","core/log","core/router","core/utils","core/views/not_found","core/z","underscore"],function(e,t,r,n,o,a,i,s){function u(e){var t,r;(t=e.indexOf("#"))>=0&&(e=e.substr(0,t)),(r=e.indexOf("?"))>=0&&(e=e.substr(0,r)),"/"!=e[0]&&(e="/"+e),"/"!==e&&"/"===e[e.length-1]&&(e=e.substring(0,e.length-1)),d.log("Routing",e);for(var o in n.routes){var a=n.routes[o];if(void 0!==a){var i=a.regexp.exec(e);if(i)try{return[a.view(),s.rest(i)]}catch(u){return d.error("Route matched but view not initialized!",u),null}}}return d.warn("Failed to match route for "+e),[f,null]}function l(t,r,n){p=arguments;var a=e.getBuilder();return t(a,r,o.getVars(),n),a.finish(),a}function c(){return i.win.trigger("unloading"),d.log("Reloading current view"),l.apply(this,p)}var p,d=r("views"),f=t.Deferred().resolve(a);return{build:l,match:u,reload:c}}),define("core/navigation",["core/capabilities","core/l10n","core/log","core/notification","core/scroll_state","core/settings","core/utils","core/views","core/z","underscore"],function(e,t,r,n,o,a,i,s,u,l){function c(e,t,r){if(r){var n=s.match(e),o=n[0],a=n[1];if(null===o)return void b.warn("Unable to resolve route to a view");if(!a&&y)return void(window.location.href=e);b.log("Navigation started: ",e),o.done(function(n){p(n,a,e,t,r)})}}function p(e,t,r,n,o){n&&u.page.trigger("navigation--pop-state",[o]),y&&u.win.trigger("navigating",[n]),s.build(e,t,o.params),y=!0,o.type=u.context.type,o.title=u.context.title,o.path=f(o.path);for(var a=0;a<k.length;a++)if(k[a].path===o.path||"search"===o.type&&k[a].type===o.type){b.log("Navigation loop truncated:",k.slice(0,a)),k=k.slice(a+1);break}if(k.length||(k=[{path:"/",type:"root"}]),"root"===o.type)k=[o],$("#search-q").val("");else if(n&&k[0].path===o.path?(b.log("Shifting stack (used  or  button)"),k.shift()):(b.log("Pushed state onto stack: ",o.path),k.unshift(o)),u.context.parent){var i=l.indexOf(l.pluck(k,"path"),u.context.parent);i>1?(k.splice(1,i-1),b.log("Closing navigation loop to parent (1 to "+(i-1)+")")):-1===i&&(k.splice(1,0,{path:u.context.parent}),b.log("Injecting parent into nav stack at 1")),b.log("New stack size: "+k.length)}}function d(){k.length>1?(k.shift(),history.replaceState(k[0],!1,k[0].path),c(k[0].path,!0,k[0])):b.warn("Attempted to go back from root!")}function f(e){if(e.indexOf("?")<0)return e;var t=l.pick(i.querystring(e),a.param_whitelist),r=i.urlencode(t);return i.baseurl(e)+(r.length?"?"+r:"")}function m(e){var t=e.getAttribute("href")||e.getAttribute("action");return!t||"http"===t.substr(0,4)||"mailto:"===t.substr(0,7)||"javascript:"===t.substr(0,11)||"#"===t[0]||-1!==t.indexOf("?modified=")||e.getAttribute("target")||"external"===e.getAttribute("rel")}function g(e){b.log("Opening modal",e),k[0].closeModalName=e,history.replaceState(k[0],!1,k[0].path),history.pushState(null,e,"#"+e);var t=window.location.href+"#"+e;k.unshift({path:t,type:"modal",name:e})}function h(e){k.shift(),delete k[0].closeModalName,u.win.trigger("closeModal",e)}function v(e){"modal"===k[0].type&&k[0].name===e?(b.log("Closing modal",e),history.back()):b.log("Attempted to close modal",e,"that was not open")}var b=(t.gettext,r("navigation")),k=[{path:"/",type:"root"}],y=!1;return u.page.on("navigate divert",function(e,t,r){if(b.log("Received "+e.type+" event:",t),t){k.length||(k=[{path:"/",type:"root"}]),u.page.trigger("navigation--pre-navigate",[k[0]]);var n="divert"===e.type,o={params:r,path:t},a=history.pushState;(!y||n)&&(b.log("Using replaceState due to "+(y?"diversion":"fresh load")),a=history.replaceState),n&&k.shift(),a.apply(history,[o,!1,t]),c(t,!1,o)}}),u.body.on("click","a",function(e){var t=this.getAttribute("href"),r=$(this);e.metaKey||e.ctrlKey||0!==e.button||m(this)||(e.preventDefault(),e.stopPropagation(),u.page.trigger("navigate",[t,r.data("params")||{path:t}]))}),u.win.on("popstate",function(e){if(y){var t=e.originalEvent.state;t&&(t.closeModalName?(b.log("popstate closing modal"),h(t.closeModalName)):(b.log("popstate navigate"),c(t.path,!0,t)))}}).on("submit","form",function(){return console.error("Form submissions are not allowed."),!1}),{back:d,modal:g,closeModal:v,stack:function(){return k},navigationFilter:m,extract_nav_url:f}}),define("core/polyfill",[],function(){var e=window.location;e.origin||(e.origin=e.protocol+"//"+e.host),window.performance||(window.performance={}),window.performance.now||(window.performance.now=function(){return+new Date}),CustomEvent=function(e,t){t=t||{};var r=document.createEvent("CustomEvent");return r.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),r}}),define("core/init",["core/helpers","core/l10n_init","core/navigation","core/polyfill","core/router","core/utils"],function(e,t,r,n,o,a){return o.addRoutes([{pattern:"^/fxa-authorize$",view_name:"core/fxa_authorize"}]),o.api.addRoutes({"fxa-login":"/api/v2/account/fxa-login/",login:"/api/v2/account/login/",logout:"/api/v2/account/logout/","site-config":"/api/v2/services/config/site/?serializer=commonplace"}),o.api.addProcessor(function(){return{lang:a.lang()}}),{ready:t.injectLocaleScript()}}),define("settings_local",[],function(){return{api_url:"https://marketplace.firefox.com",body_classes:"package",iframe_installer_src:"https://marketplace.firefox.com/iframe-install.html",iframe_potatolytics_src:"https://marketplace.firefox.com/potatolytics.html",media_url:"https://marketplace.cdn.mozilla.net/media/",tracking_enabled:!0,potatolytics_enabled:!0,package_version:"20151013.03647"}}),define("settings_app",["core/capabilities","core/l10n","core/settings","settings_local"],function(e,t,r,n){function o(){return require("core/storage").getItem("offline_cache_disabled")||e.phantom?!1:-1===window.location.search.indexOf("cache=false")}var a=t.gettext,i=JSON.parse(document.body.getAttribute("data-settings")||"{}");r._extend(i);var s=(window.location.search||"").indexOf("preview=true")>0?["pro"]:null;r._extend({api_url:"http://"+window.location.hostname,package_version:null,storage_version:"0",param_whitelist:["q","sort","cat"],api_param_blacklist:s,api_cdn_whitelist:{"/api/v2/fireplace/search/":180,"/api/v2/feed/get/":21600,"/api/v2/services/config/site/":180},model_prototypes:{addon:"slug",app:"slug",collection:"slug","feed-app":"slug","feed-brand":"slug","feed-collection":"slug","feed-shelf":"slug",website:"id"},offline_cache_whitelist:{"/api/v2/feed/get/":604800,"/api/v2/fireplace/consumer-info/":604800,"/api/v2/services/config/site/":604800},offline_cache_enabled:o,offline_cache_limit:4194304,fragment_error_template:"errors/fragment.html",pagination_error_template:"errors/pagination.html",payments_enabled:!0,upsell_enabled:!0,cache_rewriting_enabled:!0,potatolytics_enabled:!1,homepageWebsitesEnabled:!0,switches:[],never_incompat:!1,ua_tracking_id:"UA-36116321-6",NEWSLETTER_LANGUAGES:{en:a("English"),fr:a("French"),de:a("German"),hu:a("Hungarian"),id:a("Indonesian"),pl:a("Polish"),"pt-BR":a("Portuguese"),ru:a("Russian"),es:a("Spanish")},title_suffix:"Firefox Marketplace",carrier:null,iframe_installer_src:"https://marketplace.firefox.com/iframe-install.html",iframe_potatolytics_src:"https://marketplace.firefox.com/potatolytics.html",offline_msg:a("Sorry, you are currently offline. Please try again later.")}),r._extend(n)}),define("routes",["core/router","core/settings","settings_app"],function(e,t){e.addRoutes([{pattern:"^/(app.html|index.html)?$",view_name:"homepage"},{pattern:"^/addon/([^/<>\"']+)/?$",view_name:"addon"},{pattern:"^/addons/?$",view_name:"addons"},{pattern:"^/app/([^/<>\"']+)/?$",view_name:"app"},{pattern:"^/app/([^/<>\"']+)/abuse$",view_name:"app/abuse"},{pattern:"^/app/([^/<>\"']+)/privacy$",view_name:"app/privacy"},{pattern:"^/app/([^/<>\"']+)/ratings$",view_name:"app/ratings"},{pattern:"^/app/([^/<>\"']+)/ratings/add$",view_name:"app/ratings/add"},{pattern:"^/app/([^/<>\"']+)/ratings/edit$",view_name:"app/ratings/edit"},{pattern:"^/app/([^/<>\"']+)/ratings/([^/<>\"']+)$",view_name:"app/ratings/rating"},{pattern:"^/app/([^/<>\"']+)/receipt$",view_name:"app/receipt"},{pattern:"^/category/([^/<>\"']+)$",view_name:"category"},{pattern:"^/carrier$",view_name:"carrier"},{pattern:"^/debug$",view_name:"debug"},{pattern:"^/debug/features$",view_name:"debug_features"},{pattern:"^/feed/(collection|editorial|shelf)/([^/<>\"']+)/?$",view_name:"feed_landing"},{pattern:"^/feedback$",view_name:"feedback"},{pattern:"^/games/([^/<>\"']+)$",view_name:"games/listing"},{pattern:"^/langpacks/([^/<>\"']+)$",view_name:"langpacks"},{pattern:"^/new$",view_name:"new"},{pattern:"^/newsletter-signup$",view_name:"newsletter_signup"},{pattern:"^/popular$",view_name:"popular"},{pattern:"^/privacy-policy$",view_name:"privacy"},{pattern:"^/purchases$",view_name:"purchases"},{pattern:"^/recommended$",view_name:"recommended"},{pattern:"^/search/?$",view_name:"search"},{pattern:"^/settings$",view_name:"settings"},{pattern:"^/terms-of-use$",view_name:"terms"},{pattern:"^/usage$",view_name:"usage"},{pattern:"^/website/([^/<>\"']+)/?$",view_name:"website"},{pattern:"^/website/([^/<>\"']+)/issue/?$",view_name:"website/issue"}]);var r="/api/v2/fireplace/search/?cache=1&vary=0";t.meowEnabled&&(r="/api/v2/fireplace/multi-search/?cache=1&vary=0"),e.api.addRoutes({account_info:"/api/v2/account/info/{0}",addon:"/api/v2/extensions/extension/{0}/?cache=1&vary=0",addon_list:"/api/v2/extensions/search/",app:"/api/v2/fireplace/app/{0}/?cache=1&vary=0","app/privacy":"/api/v2/apps/app/{0}/privacy/?cache=1&vary=0",app_abuse:"/api/v2/abuse/app/",category:r+"&cat={0}",consumer_info:"/api/v2/fireplace/consumer-info/?cache=1",features:"/api/v2/apps/features/",feed:"/api/v2/feed/get/?cache=21600&vary=0","feed-app":"/api/v2/fireplace/feed/apps/{0}/?cache=1&vary=0","feed-brand":"/api/v2/fireplace/feed/brands/{0}/?cache=1&vary=0","feed-collection":"/api/v2/fireplace/feed/collections/{0}/?cache=1&vary=0","feed-shelf":"/api/v2/fireplace/feed/shelves/{0}/?cache=1&vary=0",feedback:"/api/v2/account/feedback/","games-daily":"/api/v2/games/daily/?cache=1&vary=0","games-listing":r,installed:"/api/v2/account/installed/mine/",langpacks:"/api/v2/langpacks/?cache=1&vary=0","late-customization":"/api/v2/late-customization/?cache=1",login:"/api/v2/account/login/",logout:"/api/v2/account/logout/",newsletter:"/api/v2/account/newsletter/",payments_status:"/api/v2/webpay/status/{0}/",prepare_nav_pay:"/api/v2/webpay/prepare/",recommended:"/api/v2/apps/recommend/?cache=1",record_free:"/api/v2/installs/record/",record_paid:"/api/v2/receipts/install/",region:"/api/v2/services/region/{0}/?cache=86400&vary=0",regions:"/api/v2/services/region/",review:"/api/v2/apps/rating/{0}/",reviews:"/api/v2/apps/rating/",search:r,settings:"/api/v2/account/settings/mine/","site-config":"/api/v2/services/config/site/?cache=1&serializer=commonplace&vary=0",website:"/api/v2/websites/website/{0}/?cache=1&vary=0",website_issue:"/api/v2/abuse/website/"})}),function(){var e={};e["app_list.html"]=function(){function e(e,t,r,n,o){var a=null,i=null,s="";try{e.getTemplate("_macros/app_tile.html",function(a,i){return a?void o(a):void i.render(t.getVariables(),r.push(),function(a,i){return a?void o(a):(s+=i,s+=" ",void e.getTemplate("_macros/more_button.html",function(a,i){return a?void o(a):void i.render(t.getVariables(),r.push(),function(a,i){if(a)return void o(a);s+=i,s+='<section class="main">\n<div class="subheader">\n<h1>',s+=n.suppressValue(n.contextOrFrameLookup(t,r,"title"),e.autoesc),s+='<a class="app-list-filters-expand-toggle" title="',s+=t.lookup("_")("Expand"),s+='"></a>\n</h1>\n</div>\n</section>';var u;u=n.contextOrFrameLookup(t,r,"require_user")?n.contextOrFrameLookup(t,r,"api"):n.contextOrFrameLookup(t,r,"anonApi"),r.set("apiFn",u,!0),r.parent||(t.setVariable("apiFn",u),t.addExport("apiFn")),s+=" ";var l;l=n.contextOrFrameLookup(t,r,"sort")?e.getFilter("urlparams").call(t,n.contextOrFrameLookup(t,r,"apiFn")(n.contextOrFrameLookup(t,r,"endpoint_name")),n.makeKeywordArgs({sort:n.contextOrFrameLookup(t,r,"sort"),limit:24})):e.getFilter("urlparams").call(t,n.contextOrFrameLookup(t,r,"apiFn")(n.contextOrFrameLookup(t,r,"endpoint_name")),n.makeKeywordArgs({limit:24})),r.set("search_url",l,!0),r.parent||(t.setVariable("search_url",l),t.addExport("search_url")),s+='<section class="main full app-list-page c">',e.getTemplate("_includes/app_list_filters.html",function(a,i){return a?void o(a):void i.render(t.getVariables(),r.push(),function(a,i){return a?void o(a):(s+=i,s+=" ",s+=n.suppressValue(e.getExtension("defer").run(t,n.makeKeywordArgs({url:n.contextOrFrameLookup(t,r,"search_url"),pluck:"objects",as:n.contextOrFrameLookup(t,r,"appOrWebsite"),paginate:".app-list"}),function(o){o||(o=function(e){if(e)throw e});var a="";a+='<ul class="app-list ',a+=n.suppressValue(n.memberLookup(n.memberLookup(n.contextOrFrameLookup(t,r,"response"),"meta",e.autoesc),"next",e.autoesc)?"paginated":"",e.autoesc),a+='">',r=r.push();var i=n.contextOrFrameLookup(t,r,"this");if(i)for(var s=0;s<i.length;s++){var u=i[s];r.set("app",u),a+=" ",u=n.memberLookup(n.contextOrFrameLookup(t,r,"apps"),"transform",e.autoesc)(u),r.set("app",u,!0),r.parent||(t.setVariable("app",u),t.addExport("app")),a+='<li class="app-list-app ',a+=n.suppressValue(n.memberLookup(u,"isWebsite",e.autoesc)?"app-list-website":"",e.autoesc),a+='">',a+=n.suppressValue(n.contextOrFrameLookup(t,r,"app_tile")(u,n.makeKeywordArgs({tray:!0,src:n.memberLookup(n.memberLookup(n.contextOrFrameLookup(t,r,"trackingEvents"),"SRCS",e.autoesc),n.contextOrFrameLookup(t,r,"appListType"),e.autoesc)})),e.autoesc),a+="</li>"}return r=r.pop(),a+=" ",n.memberLookup(n.memberLookup(n.contextOrFrameLookup(t,r,"response"),"meta",e.autoesc),"next",e.autoesc)&&(a+=" ",a+=" ",a+=n.suppressValue(n.contextOrFrameLookup(t,r,"more_button")(n.memberLookup(n.memberLookup(n.contextOrFrameLookup(t,r,"response"),"meta",e.autoesc),"next",e.autoesc)),e.autoesc),a+=" "),a+="</ul>",o(null,a),a},function(e){e||(e=function(e){if(e)throw e});var t="";return t+='<p class="spinner padded alt"></p>',e(null,t),t},function(e){e||(e=function(e){if(e)throw e});var r="";return r+='<p class="no-results">',r+=t.lookup("_")("No apps found."),r+="</p>",e(null,r),r},function(e){e||(e=function(e){if(e)throw e});var o="";return o+='<p class="no-results">',400==n.contextOrFrameLookup(t,r,"error")||404==n.contextOrFrameLookup(t,r,"error")?(o+=" ",o+=t.lookup("_")("No apps found."),o+=" "):500==n.contextOrFrameLookup(t,r,"error")&&(o+=" ",o+=t.lookup("_")("An internal server error occurred. Please try again later."),o+=" "),o+="</p>",e(null,o),o}),!0&&e.autoesc),s+="</section>",void o(null,s))})})})}))})})}catch(u){o(n.handleError(u,a,i))}}return{root:e}}(),e["carrier.html"]=function(){function e(e,t,r,n,o){var a=null,i=null,s="";try{e.getTemplate("_macros/app_tile.html",function(a,i){return a?void o(a):void i.render(t.getVariables(),r.push(),function(a,i){return a?void o(a):(s+=i,s+=" ",void e.getTemplate("_macros/more_button.html",function(a,i){return a?void o(a):void i.render(t.getVariables(),r.push(),function(a,i){return a?void o(a):(s+=i,s+='<section class="main">\n<div class="subheader">\n<h1>',s+=t.lookup("_")("Free Carrier Apps"),s+="</h1>\n<p>",s+=t.lookup("_")("Your carrier offers these free apps. You can download them at no charge."),s+='</p>\n</div>\n</section>\n<section class="main full app-list-page c">',s+=n.suppressValue(e.getExtension("defer").run(t,n.makeKeywordArgs({url:n.contextOrFrameLookup(t,r,"carrier_url"),pluck:"objects",paginate:".app-list"}),function(o){o||(o=function(e){if(e)throw e});var a="";a+='<ul class="app-list ',a+=n.suppressValue(n.memberLookup(n.memberLookup(n.contextOrFrameLookup(t,r,"response"),"meta",e.autoesc),"next",e.autoesc)?"paginated":"",e.autoesc),a+='">',r=r.push();var i=n.contextOrFrameLookup(t,r,"this");if(i)for(var s=0;s<i.length;s++){var u=i[s];r.set("app",u),a+=" ",u=n.memberLookup(n.contextOrFrameLookup(t,r,"apps"),"transform",e.autoesc)(u),r.set("app",u,!0),r.parent||(t.setVariable("app",u),t.addExport("app")),a+='<li class="app-list-app ',a+=n.suppressValue(n.memberLookup(u,"isWebsite",e.autoesc)?"app-list-website":"",e.autoesc),a+='">',a+=n.suppressValue(n.contextOrFrameLookup(t,r,"app_tile")(u,n.makeKeywordArgs({tray:!0,src:n.memberLookup(n.memberLookup(n.contextOrFrameLookup(t,r,"trackingEvents"),"SRCS",e.autoesc),n.contextOrFrameLookup(t,r,"appListType"),e.autoesc)})),e.autoesc),a+="</li>"}return r=r.pop(),a+=" ",n.memberLookup(n.memberLookup(n.contextOrFrameLookup(t,r,"response"),"meta",e.autoesc),"next",e.autoesc)&&(a+=" ",a+=" ",a+=n.suppressValue(n.contextOrFrameLookup(t,r,"more_button")(n.memberLookup(n.memberLookup(n.contextOrFrameLookup(t,r,"response"),"meta",e.autoesc),"next",e.autoesc)),e.autoesc),a+=" "),a+="</ul>",o(null,a),a},function(e){e||(e=function(e){if(e)throw e});var t="";return t+='<p class="spinner padded alt"></p>',e(null,t),t},function(e){e||(e=function(e){if(e)throw e});var r="";return r+='<p class="no-results">',r+=t.lookup("_")("No apps found."),r+="</p>",e(null,r),r},function(e){e||(e=function(e){if(e)throw e});var o="";return o+='<p class="no-results">',400==n.contextOrFrameLookup(t,r,"error")||404==n.contextOrFrameLookup(t,r,"error")?(o+=" ",o+=t.lookup("_")("No apps found."),o+=" "):500==n.contextOrFrameLookup(t,r,"error")&&(o+=" ",o+=t.lookup("_")("An internal server error occurred. Please try again later."),o+=" "),o+="</p>",e(null,o),o}),!0&&e.autoesc),s+="</section>",void o(null,s))})}))})})}catch(u){o(n.handleError(u,a,i))}}return{root:e}}(),e["categories.html"]=function(){function e(e,t,r,n,o){var a=null,i=null,s="";try{s+='<section class="category-index main">',r=r.push();var u=n.contextOrFrameLookup(t,r,"categories");if(u)for(var l=0;l<u.length;l++){var c=u[l];r.set("cat",c),s+='<a href="',s+=t.lookup("url")("category",[n.memberLookup(c,"slug",e.autoesc)]),s+='">\n<div class="cat-',s+=n.suppressValue(n.memberLookup(c,"slug",e.autoesc),e.autoesc),s+=' cat-icon cat-idx" data-cat-slug="',s+=n.suppressValue(n.memberLookup(c,"slug",e.autoesc),e.autoesc),s+='">\n<p>',s+=n.suppressValue(n.memberLookup(c,"name",e.autoesc),e.autoesc),s+="</p>\n</div>\n</a>"}r=r.pop(),s+="</section>",o(null,s)}catch(p){o(n.handleError(p,a,i))}}return{root:e}}(),e["category.html"]=function(){function e(e,t,r,n,o){var a=null,i=null,s="";try{e.getTemplate("_macros/app_tile.html",function(a,i){return a?void o(a):void i.render(t.getVariables(),r.push(),function(a,i){return a?void o(a):(s+=i,s+=" ",void e.getTemplate("_macros/more_button.html",function(a,i){return a?void o(a):void i.render(t.getVariables(),r.push(),function(a,i){return a?void o(a):(s+=i,s+='<section class="main">\n<div class="subheader cat-header">\n<h1 class="category-header-icon cat-',s+=n.suppressValue(n.contextOrFrameLookup(t,r,"category"),e.autoesc),s+=' cat-icon">',s+=n.suppressValue(n.contextOrFrameLookup(t,r,"category_name"),e.autoesc),s+='<a class="app-list-filters-expand-toggle" title="',s+=t.lookup("_")("Expand"),s+='"></a>\n</h1>',n.contextOrFrameLookup(t,r,"showPersonalizationSubmenu")&&(s+=" ",e.getTemplate("_includes/personalization.html",function(e,n){return e?void o(e):void n.render(t.getVariables(),r.push(),function(e,t){return e?void o(e):(s+=t,void(s+=" "))})})),s+='</div>\n</section>\n<section class="category app-list-page main full">',s+=n.suppressValue(e.getExtension("defer").run(t,n.makeKeywordArgs({url:n.contextOrFrameLookup(t,r,"endpoint"),pluck:"objects",as:n.contextOrFrameLookup(t,r,"appOrWebsite"),paginate:".app-list"}),function(o){o||(o=function(e){if(e)throw e});var a="";return a+=" ",e.getTemplate("_includes/app_list_filters.html",function(i,s){return i?void o(i):void s.render(t.getVariables(),r.push(),function(i,s){if(i)return void o(i);a+=s,a+='<ul class="app-list ',a+=n.suppressValue(n.memberLookup(n.memberLookup(n.contextOrFrameLookup(t,r,"response"),"meta",e.autoesc),"next",e.autoesc)?"paginated":"",e.autoesc),a+='">',r=r.push();var u=n.contextOrFrameLookup(t,r,"this");if(u)for(var l=0;l<u.length;l++){var c=u[l];r.set("app",c),a+='<li class="item result app-list-app">',a+=n.suppressValue(n.contextOrFrameLookup(t,r,"app_tile")(c,n.makeKeywordArgs({tray:!0,src:n.contextOrFrameLookup(t,r,"source")})),e.autoesc),a+="</li>"}r=r.pop(),a+=" ",a+=" ",n.memberLookup(n.memberLookup(n.contextOrFrameLookup(t,r,"response"),"meta",e.autoesc),"next",e.autoesc)&&(a+=" ",a+=n.suppressValue(n.contextOrFrameLookup(t,r,"more_button")(n.memberLookup(n.memberLookup(n.contextOrFrameLookup(t,r,"response"),"meta",e.autoesc),"next",e.autoesc)),e.autoesc),a+=" "),a+="</ul>",o(null,a)})}),a},function(e){e||(e=function(e){if(e)throw e});var t="";return t+='<p class="spinner padded alt"></p>',e(null,t),t},function(e){e||(e=function(e){if(e)throw e});var r="";return r+='<h1 class="no-results">',r+=t.lookup("_")("No results found"),r+="</h1>",e(null,r),r},function(e){e||(e=function(e){if(e)throw e});var o="";return o+='<p class="no-results">',400==n.contextOrFrameLookup(t,r,"error")||404==n.contextOrFrameLookup(t,r,"error")?(o+=" ",o+=t.lookup("_")("The category you requested does not exist."),o+=" "):500==n.contextOrFrameLookup(t,r,"error")&&(o+=" ",o+=t.lookup("_")("An internal server error occurred. Please try again later."),o+=" "),o+="</p>",e(null,o),o}),!0&&e.autoesc),s+="</section>",void o(null,s))})}))})})}catch(u){o(n.handleError(u,a,i))}}return{root:e}}(),e["debug.html"]=function(){function e(e,t,r,n,o){var a=null,i=null,s="";try{s+='<section class="main">\n<div class="subheader">\n<h1>Debug</h1>\n</div>\n</section>\n<section class="main full debug">\n<div>\n<button class="button" id="submit-debug">Submit logs</button>\n<button class="button" id="enable-gametime">\nEnable Gametime\n</button>\n<button class="button" id="enable-addons">\nEnable Firefox OS Add-ons\n</button>\n<button class="button" id="clear-localstorage">\nClear localStorage\n</button>',s+=n.memberLookup(n.contextOrFrameLookup(t,r,"settings"),"offline_cache_enabled",e.autoesc)()?'<button class="button" id="disable-offline-cache">Disable offline cache</button>':'<button class="button" id="enable-offline-cache">Enable offline cache</button>',s+='<button class="button" id="clear-offline-cache">Clear offline cache</button>\n<button class="button" id="clear-cookies">Clear cookies</button>\n<a class="button" href="',s+=t.lookup("url")("debug_features"),s+='">\nView feature profile information</a>\n<label for="debug-region">Region Override</label>\n<select name="region" id="debug-region">';var u;u=n.memberLookup(n.contextOrFrameLookup(t,r,"user"),"get_setting",e.autoesc)("region_override"),r.set("user_region",u,!0),r.parent||(t.setVariable("user_region",u),t.addExport("user_region")),s+='<option value="" ',s+=n.suppressValue(n.contextOrFrameLookup(t,r,"user_region")?"":"selected",e.autoesc),s+=">---</option>",r=r.push();var l=n.contextOrFrameLookup(t,r,"regions");if(l){var c;if(n.isArray(l))for(c=0;c<l.length;c++){var p=l[c][0];r.set("code",l[c][0]);var d=l[c][1];r.set("region",l[c][1]),s+='<option value="',s+=n.suppressValue(p,e.autoesc),s+='" ',s+=n.suppressValue(p==n.contextOrFrameLookup(t,r,"user_region")?"selected":"",e.autoesc),s+=">",s+=n.suppressValue(d,e.autoesc),s+="</option>"
}else{c=-1;for(var f in l){c++;var m=l[f];r.set("code",f),r.set("region",m),s+='<option value="',s+=n.suppressValue(f,e.autoesc),s+='" ',s+=n.suppressValue(f==n.contextOrFrameLookup(t,r,"user_region")?"selected":"",e.autoesc),s+=">",s+=n.suppressValue(m,e.autoesc),s+="</option>"}}}r=r.pop(),s+='</select>\n<label for="debug-carrier">Carrier Override</label>\n<select name="carrier" id="debug-carrier">';var g;g=n.memberLookup(n.contextOrFrameLookup(t,r,"user"),"get_setting",e.autoesc)("carrier_override"),r.set("user_carrier",g,!0),r.parent||(t.setVariable("user_carrier",g),t.addExport("user_carrier")),s+='<option value="" ',s+=n.suppressValue(n.contextOrFrameLookup(t,r,"user_carrier")?"":"selected",e.autoesc),s+=">---</option>",r=r.push();var h=n.contextOrFrameLookup(t,r,"carriers");if(h)for(var v=0;v<h.length;v++){var b=h[v];r.set("carrier",b),s+="<option ",s+=n.suppressValue(b==n.contextOrFrameLookup(t,r,"user_carrier")?"selected":"",e.autoesc),s+=">",s+=n.suppressValue(b,e.autoesc),s+="</option>"}r=r.pop(),s+='</select>\n</div>\n</section>\n<section class="main full prose debug">\n<div>\n<h3>Site Settings</h3>\n<dl class="site-settings c">',r=r.push();var k=n.memberLookup(n.contextOrFrameLookup(t,r,"settings"),"items",e.autoesc)();if(k)for(var y=0;y<k.length;y++){var _=k[y];r.set("setting",_),s+="<dt>",s+=n.suppressValue(n.memberLookup(_,0,e.autoesc),e.autoesc),s+="</dt>\n<dd>",s+=n.suppressValue("persona_site_logo"==n.memberLookup(_,0,e.autoesc)?" truncated ":n.memberLookup(_,1,e.autoesc)||"",e.autoesc),s+="</dd>"}r=r.pop(),s+='</dl>\n</div>\n</section>\n<section class="main full prose debug">\n<div>\n<h3>User Settings</h3>\n<dl class="user-settings c">',r=r.push();var w=n.memberLookup(n.memberLookup(n.contextOrFrameLookup(t,r,"user"),"get_settings",e.autoesc)(),"items",e.autoesc)();if(w)for(var x=0;x<w.length;x++){var L=w[x];r.set("setting",L),s+="<dt>",s+=n.suppressValue(n.memberLookup(L,0,e.autoesc),e.autoesc),s+="</dt>\n<dd>",s+=n.suppressValue(n.memberLookup(L,1,e.autoesc)||"",e.autoesc),s+="</dd>"}r=r.pop(),s+='</dl>\n</div>\n</section>\n<section class="main full prose debug">\n<div>\n<h3>Capabilities</h3>\n<dl class="capabilities c">',r=r.push();var O=n.memberLookup(n.contextOrFrameLookup(t,r,"capabilities"),"items",e.autoesc)();if(O)for(var E=0;E<O.length;E++){var A=O[E];r.set("cap",A),s+="<dt>",s+=n.suppressValue(n.memberLookup(A,0,e.autoesc),e.autoesc),s+="</dt>\n<dd>",s+=n.suppressValue(n.contextOrFrameLookup(t,r,"callIfFunction")(n.memberLookup(A,1,e.autoesc)),e.autoesc),s+="</dd>"}r=r.pop(),s+=" ",r=r.push();var F=n.memberLookup(n.contextOrFrameLookup(t,r,"screen"),"items",e.autoesc)();if(F){var S;if(n.isArray(F))for(S=0;S<F.length;S++){var C=F[S][0];r.set("k",F[S][0]);var V=F[S][1];r.set("v",F[S][1]),s+="<dt>window.screen.",s+=n.suppressValue(C,e.autoesc),s+="</dt>\n<dd>",s+=n.suppressValue(V,e.autoesc),s+="</dd>"}else{S=-1;for(var T in F){S++;var I=F[T];r.set("k",T),r.set("v",I),s+="<dt>window.screen.",s+=n.suppressValue(T,e.autoesc),s+="</dt>\n<dd>",s+=n.suppressValue(I,e.autoesc),s+="</dd>"}}}r=r.pop(),s+="<dt>Feature Profile</dt>\n<dd>",s+=n.suppressValue(n.contextOrFrameLookup(t,r,"profile"),e.autoesc),s+='</dd>\n</dl>\n</div>\n</section>\n<section class="main full prose debug">\n<div>\n<h3>Cache</h3>\n<pre id="cache-inspector"></pre>\n<ul class="cache-menu">',r=r.push();var P=n.memberLookup(n.contextOrFrameLookup(t,r,"cache"),"keys",e.autoesc)();if(P)for(var N=0;N<P.length;N++){var R=P[N];r.set("k",R),s+='<li><a href="#" data-url="',s+=n.suppressValue(R,e.autoesc),s+='">',s+=n.suppressValue(n.contextOrFrameLookup(t,r,"filter")(R),e.autoesc),s+="</a></li>"}r=r.pop(),s+='</ul>\n</div>\n</section>\n<section class="main full prose debug">\n<div>\n<h3>Recent Logs</h3>\n<ol class="debug-log">',r=r.push();var M=n.contextOrFrameLookup(t,r,"recent_logs");if(M)for(var z=0;z<M.length;z++){var D=M[z];r.set("entry",D),s+="<li>",r=r.push();var j=D;if(j)for(var q=0;q<j.length;q++){var U=j[q];r.set("piece",U),s+=n.suppressValue(U,e.autoesc),s+=" "}r=r.pop(),s+="</li>"}r=r.pop(),s+='</ol>\n</div>\n</section>\n<section class="main full prose debug">\n<div>\n<h3>Persistent Logs</h3>',r=r.push();var H=n.memberLookup(n.contextOrFrameLookup(t,r,"persistent_logs"),"items",e.autoesc)();if(H){var B;if(n.isArray(H))for(B=0;B<H.length;B++){var W=H[B][0];r.set("log_type",H[B][0]);var $=H[B][1];r.set("logs",H[B][1]),s+="<h4>",s+=n.suppressValue(W,e.autoesc),s+='</h4>\n<ol class="debug-log">',r=r.push();var K=$;if(K)for(var G=0;G<K.length;G++){var J=K[G];r.set("entry",J),s+="<li>",r=r.push();var X=J;if(X)for(var Y=0;Y<X.length;Y++){var Q=X[Y];r.set("piece",Q),s+=n.suppressValue(Q,e.autoesc),s+=" "}r=r.pop(),s+="</li>"}r=r.pop(),s+="</ol>"}else{B=-1;for(var Z in H){B++;var et=H[Z];r.set("log_type",Z),r.set("logs",et),s+="<h4>",s+=n.suppressValue(Z,e.autoesc),s+='</h4>\n<ol class="debug-log">',r=r.push();var tt=et;if(tt)for(var rt=0;rt<tt.length;rt++){var nt=tt[rt];r.set("entry",nt),s+="<li>",r=r.push();var ot=nt;if(ot)for(var at=0;at<ot.length;at++){var it=ot[at];r.set("piece",it),s+=n.suppressValue(it,e.autoesc),s+=" "}r=r.pop(),s+="</li>"}r=r.pop(),s+="</ol>"}}}r=r.pop(),s+='</div>\n</section>\n<section class="main full prose debug">\n<div>\n<h3>Offline Cache</h3>\n<ol>',r=r.push();var st=n.memberLookup(n.contextOrFrameLookup(t,r,"request_cache"),"items",e.autoesc)();if(st){var ut;if(n.isArray(st))for(ut=0;ut<st.length;ut++){var lt=st[ut][0];r.set("url",st[ut][0]);{st[ut][1]}r.set("response",st[ut][1]),s+="<li>",s+=n.suppressValue(lt,e.autoesc),s+="</li>"}else{ut=-1;for(var ct in st){ut++;var pt=st[ct];r.set("url",ct),r.set("response",pt),s+="<li>",s+=n.suppressValue(ct,e.autoesc),s+="</li>"}}}r=r.pop(),s+="</ol>\n<pre>",s+=n.suppressValue(e.getFilter("stringify").call(t,n.contextOrFrameLookup(t,r,"request_cache"),n.contextOrFrameLookup(t,r,"null"),2),e.autoesc),s+="</pre>\n</div>\n</section>",o(null,s)}catch(dt){o(n.handleError(dt,a,i))}}return{root:e}}(),e["debug_features.html"]=function(){function e(e,t,r,n,o){var a=null,i=null,s="";try{s+='<section class="main">\n<div class="subheader">\n<h1>Feature Profile Information</h1>\n</div>\n</section>',s+=n.suppressValue(e.getExtension("defer").run(t,n.makeKeywordArgs({url:n.contextOrFrameLookup(t,r,"endpoint")}),function(o){o||(o=function(e){if(e)throw e});var a="";a+='<section class="debug-features main full">';var i;i=n.contextOrFrameLookup(t,r,"this"),r.set("features",i,!0),r.parent||(t.setVariable("features",i),t.addExport("features")),a+="<div>\n<h3>\nProfile string:\n<strong>",a+=n.suppressValue(n.contextOrFrameLookup(t,r,"profile"),e.autoesc),a+="</strong>\n</h3>\n<dl>",r=r.push();var s=n.contextOrFrameLookup(t,r,"features");if(s){var u;if(n.isArray(s))for(u=0;u<s.length;u++){var l=s[u][0];r.set("slug",s[u][0]);var c=s[u][1];if(r.set("feature",s[u][1]),a+=" ",a+=" ","__"!=n.memberLookup(l,"substr",e.autoesc)(0,2)){a+=" ";var p;p=n.memberLookup(c,"present",e.autoesc)?"present":"absent",r.set("klass",p,!0),r.parent||(t.setVariable("klass",p),t.addExport("klass")),a+='<dt class="',a+=n.suppressValue(n.contextOrFrameLookup(t,r,"klass"),e.autoesc),a+='">',a+=n.suppressValue(n.memberLookup(c,"position",e.autoesc),e.autoesc),a+=" - ",a+=n.suppressValue(n.memberLookup(c,"name",e.autoesc),e.autoesc),a+=" (",a+=n.suppressValue(l,e.autoesc),a+=")\n</dd>\n<dd>",a+=n.suppressValue(n.memberLookup(c,"description",e.autoesc),e.autoesc),a+="</dd>",""!=n.memberLookup(c,"apis",e.autoesc)&&(a+="<dd>APIs: ",a+=n.suppressValue(n.memberLookup(c,"apis",e.autoesc),e.autoesc),a+="</dd>"),a+=" "}a+=" "}else{u=-1;for(var d in s){u++;var f=s[d];if(r.set("slug",d),r.set("feature",f),a+=" ",a+=" ","__"!=n.memberLookup(d,"substr",e.autoesc)(0,2)){a+=" ";var m;m=n.memberLookup(f,"present",e.autoesc)?"present":"absent",r.set("klass",m,!0),r.parent||(t.setVariable("klass",m),t.addExport("klass")),a+='<dt class="',a+=n.suppressValue(n.contextOrFrameLookup(t,r,"klass"),e.autoesc),a+='">',a+=n.suppressValue(n.memberLookup(f,"position",e.autoesc),e.autoesc),a+=" - ",a+=n.suppressValue(n.memberLookup(f,"name",e.autoesc),e.autoesc),a+=" (",a+=n.suppressValue(d,e.autoesc),a+=")\n</dd>\n<dd>",a+=n.suppressValue(n.memberLookup(f,"description",e.autoesc),e.autoesc),a+="</dd>",""!=n.memberLookup(f,"apis",e.autoesc)&&(a+="<dd>APIs: ",a+=n.suppressValue(n.memberLookup(f,"apis",e.autoesc),e.autoesc),a+="</dd>"),a+=" "}a+=" "}}}return r=r.pop(),a+="</dl>\n</div>\n</section>",o(null,a),a},null,null,null),!0&&e.autoesc),s+=" ",o(null,s)}catch(u){o(n.handleError(u,a,i))}}return{root:e}}(),e["desktop-promo.html"]=function(){function e(e,t,r,n,o){var a=null,i=null,s="";try{s+='<div class="desktop-promo">\n<div class="desktop-promo-nav-left arrow-btn arrow-btn-prev"\ndata-navigate="',s+=n.suppressValue("ltr"==n.contextOrFrameLookup(t,r,"htmldir")()?"prev":"next",e.autoesc),s+='">',s+=t.lookup("_")("Previous"),s+='</div>\n<div class="desktop-promo-items" data-action="start">',r=r.push();var u=n.contextOrFrameLookup(t,r,"promoItems");if(u)for(var l=0;l<u.length;l++){var c=u[l];r.set("promo",c),s+='<a class="desktop-promo-item" href="',s+=n.suppressValue(n.memberLookup(c,"url",e.autoesc),e.autoesc),s+='"\ndata-promo="',s+=n.suppressValue(n.memberLookup(c,"name",e.autoesc),e.autoesc),s+='"\ndata-promo-image="',s+=n.suppressValue(n.memberLookup(c,"imageName",e.autoesc)||n.memberLookup(c,"name",e.autoesc),e.autoesc),s+='"\ndata-tracking="',s+=n.suppressValue(n.memberLookup(c,"name",e.autoesc),e.autoesc),s+='">\n<span class="desktop-promo-item-text">',s+=n.suppressValue(n.memberLookup(c,"text",e.autoesc),e.autoesc),s+="</span>\n</a>"}r=r.pop(),s+='</div>\n<div class="desktop-promo-nav-right arrow-btn arrow-btn-next"\ndata-navigate="',s+=n.suppressValue("ltr"==n.contextOrFrameLookup(t,r,"htmldir")()?"next":"prev",e.autoesc),s+='">',s+=t.lookup("_")("Next"),s+="</div>\n</div>",o(null,s)}catch(p){o(n.handleError(p,a,i))}}return{root:e}}(),e["feedback.html"]=function(){function e(e,t,r,n,o){var a=null,i=null,s="";try{e.getTemplate("_macros/forms.html",function(a,i){return a?void o(a):void i.getExported(function(a,i){if(a)return void o(a);if(!i.hasOwnProperty("potato_captcha"))return void o(new Error("cannot import 'potato_captcha'"));var u=i.potato_captcha;t.setVariable("potato_captcha",u),s+=" ";var l=n.makeMacro(["isModal"],[],function(o,a){r=r.push(),a=a||{},r.set("isModal",o);var i="";return i+="<mkt-prompt ",o&&(i+='data-modal="feedback"'),i+='>\n<form class="feedback-form">\n<h3>',i+=t.lookup("_")("We want to hear from you!"),i+="</h3>\n<p>",i+=t.lookup("_")("Give us your feedback. Let us know whether we are awesome or buggy."),i+='</p>\n<textarea name="feedback" placeholder="',i+=t.lookup("_")("Let us know..."),i+='"\nrequired></textarea>',i+=n.suppressValue(u(),e.autoesc),i+="<div>\n<button>",i+=t.lookup("_")("Cancel"),i+="</button>\n<button>",i+=t.lookup("_")("Submit Feedback"),i+="</button>\n</div>\n</form>\n</mkt-prompt>",r=r.pop(),new n.SafeString(i)});t.addExport("feedback_prompt"),t.setVariable("feedback_prompt",l),s+='<div class="main feedback">\n<header class="subheader">\n<h1 class="linefit"><span class="linefitted">',s+=t.lookup("_")("Feedback"),s+="</span></h1>\n</header>\n<div>",s+=n.suppressValue(l(),e.autoesc),s+='<ul class="support-list">\n<li>',n.memberLookup(n.contextOrFrameLookup(t,r,"capabilities"),"firefoxOS",e.autoesc)?(s+='<a href="https://support.mozilla.org/products/firefox-os/marketplace"\nclass="button" target="_blank">',s+=t.lookup("_")("Get Help"),s+="</a>"):n.memberLookup(n.contextOrFrameLookup(t,r,"capabilities"),"firefoxAndroid",e.autoesc)&&(s+='<a href="https://support.mozilla.org/kb/install-android-apps-using-marketplace"\nclass="button" target="_blank">',s+=t.lookup("_")("Get Help"),s+="</a>"),s+="</li>\n</ul>\n</div>\n</div>",o(null,s)})})}catch(u){o(n.handleError(u,a,i))}}return{root:e}}(),e["footer.html"]=function(){function e(e,t,r,n,o){var a=null,i=null,s="";try{s+='<div id="newsletter-footer" class="newsletter-footer c">',e.getTemplate("newsletter.html",function(a,i){return a?void o(a):void i.render(t.getVariables(),r.push(),function(a,i){return a?void o(a):(s+=i,s+='</div>\n<div id="footer" class="footer">\n<ul class="footer-support-navigation">\n<li><a href="#" class="submit-feedback">',s+=t.lookup("_")("Feedback"),s+="</a></li>","desktop"==n.memberLookup(n.contextOrFrameLookup(t,r,"capabilities"),"device_type",e.autoesc)()?(s+='<li>\n<a href="https://support.mozilla.org/kb/marketplace-apps-firefox-desktop" target="_blank">',s+=t.lookup("_")("Support"),s+="</a>\n</li>"):n.memberLookup(n.contextOrFrameLookup(t,r,"capabilities"),"firefoxOS",e.autoesc)?(s+='<li>\n<a href="https://support.mozilla.org/products/firefox-os/marketplace" target="_blank">',s+=t.lookup("_")("Support"),s+="</a>\n</li>"):n.memberLookup(n.contextOrFrameLookup(t,r,"capabilities"),"firefoxAndroid",e.autoesc)&&(s+='<li>\n<a href="https://support.mozilla.org/kb/install-android-apps-using-marketplace" target="_blank">',s+=t.lookup("_")("Support"),s+="</a>\n</li>"),s+='<li><a href="/developers/">',s+=t.lookup("_")("Develop Apps"),s+="</a></li>",n.memberLookup(n.contextOrFrameLookup(t,r,"user"),"get_permission",e.autoesc)("developer")&&(s+='<li><a href="/developers/submissions" rel="external">',s+=t.lookup("_")("My Submissions"),s+="</a></li>"),s+=" ",n.memberLookup(n.contextOrFrameLookup(t,r,"user"),"get_permission",e.autoesc)("reviewer")&&(s+='<li><a href="/reviewers/apps/queue/" rel="external" class="only-logged-in">',s+=t.lookup("_")("Reviewer Tools"),s+="</a></li>"),s+=" ",n.memberLookup(n.contextOrFrameLookup(t,r,"user"),"get_permission",e.autoesc)("lookup")&&(s+='<li><a href="/lookup/" rel="external" class="only-logged-in">',s+=t.lookup("_")("Lookup Tool"),s+="</a></li>"),s+='</ul>\n<div class="footer-content">\n<h1 class="footzilla"><a href="https://www.mozilla.org/" target="_blank">mozilla</a></h1>\n<p>',s+=t.lookup("_")('Except where otherwise <a href="{legal_url}" target="_blank">noted</a>, content on this site is licensed under the <a href="{cc_url}" target="_blank">Creative Commons Attribution Share-Alike License v3.0</a> or any later version.',n.makeKeywordArgs({legal_url:"http://www.mozilla.org/about/legal.html#site",cc_url:"http://creativecommons.org/licenses/by-sa/3.0/"})),s+='</p>\n<ul class="footer-extras">\n<li><a href="',s+=t.lookup("url")("privacy"),s+='">',s+=t.lookup("_")("Privacy Policy"),s+='</a></li>\n<li><a href="',s+=t.lookup("url")("terms"),s+='">',s+=t.lookup("_")("Terms of Use"),s+='</a></li>\n<li><a href="https://www.mozilla.org/legal/fraud-report/index.html" target="_blank">',s+=t.lookup("_")("Report Trademark Abuse"),s+="</a></li>\n</ul>\n</div>\n</div>",void o(null,s))})})}catch(u){o(n.handleError(u,a,i))}}return{root:e}}(),e["header.html"]=function(){function e(e,t,r,n,o){var a=null,i=null,s="";try{var u=n.makeMacro(["href","title","slug","toggle","link_classes"],[],function(t,o,a,i,s,u){r=r.push(),u=u||{},r.set("href",t),r.set("title",o),r.set("slug",a),r.set("toggle",i),r.set("link_classes",s);var l="";return l+='<li class="mkt-header-nav--item" data-mkt-header-nav--item="',l+=n.suppressValue(a,e.autoesc),l+='">',i&&(l+='<mkt-header-child-toggle class="header--',l+=n.suppressValue(a,e.autoesc),l+='-toggle"\nfor="header--',l+=n.suppressValue(a,e.autoesc),l+='">'),l+='<a class="mkt-header-nav--link ',l+=n.suppressValue(s||"",e.autoesc),l+='"\nhref="',l+=n.suppressValue(t,e.autoesc),l+='" title="',l+=n.suppressValue(o,e.autoesc),l+='">',l+=n.suppressValue(o,e.autoesc),l+="</a>",i&&(l+="</mkt-header-child-toggle>"),l+="</li>",r=r.pop(),new n.SafeString(l)});t.addExport("mkt_header_nav_item"),t.setVariable("mkt_header_nav_item",u),s+=" ";var l=n.makeMacro(["href","title","slug","link_classes"],[],function(t,o,a,i,s){r=r.push(),s=s||{},r.set("href",t),r.set("title",o),r.set("slug",a),r.set("link_classes",i);var u="";return u+='<li class="mkt-header-child--item" data-mkt-header-child--item="',u+=n.suppressValue(a,e.autoesc),u+='">\n<a class="mkt-header-child--link ',u+=n.suppressValue(i||"",e.autoesc),u+='" href="',u+=n.suppressValue(t,e.autoesc),u+='"\ntitle="',u+=n.suppressValue(o,e.autoesc),u+='">',u+=n.suppressValue(o,e.autoesc),u+="</a>\n</li>",r=r.pop(),new n.SafeString(u)});t.addExport("mkt_header_child_item"),t.setVariable("mkt_header_child_item",l),s+='<mkt-header id="site-header" class="header site-header">',s+='<mkt-nav-toggle for="nav">\n<button class="hamburger" title="',s+=t.lookup("_")("Toggle Menu"),s+='">\n<b/><b/><b/>\n</button>\n</mkt-nav-toggle>\n<h1 class="site">\n<a href="',s+=t.lookup("url")("homepage"),s+='" class="wordmark"><span>Firefox Marketplace</span></a>\n<a href="',s+=t.lookup("url")("homepage"),s+='" class="site-name">Marketplace</a>\n</h1>\n<h1 class="mkt-header--title"></h1>\n<mkt-header-nav>',s+=n.suppressValue(u(n.contextOrFrameLookup(t,r,"url")("homepage"),t.lookup("_")("Home"),"homepage"),e.autoesc),s+=" ",s+=n.suppressValue(u(n.contextOrFrameLookup(t,r,"url")("popular"),t.lookup("_")("Popular"),"popular"),e.autoesc),s+=" ",s+=n.suppressValue(u(n.contextOrFrameLookup(t,r,"url")("new"),t.lookup("_")("New"),"new"),e.autoesc),s+=" ",s+=n.suppressValue(u(n.contextOrFrameLookup(t,r,"url")("recommended"),t.lookup("_")("Recommended"),"recommended"),e.autoesc),s+=" ",s+=n.suppressValue(u("#",t.lookup("_")("Categories"),"categories","categories"),e.autoesc),s+='</mkt-header-nav>\n<mkt-header-child-toggle class="header--search-toggle" for="header--search"\ntitle="',s+=t.lookup("_")("Toggle Search"),s+='">\n</mkt-header-child-toggle>\n<mkt-header-child-toggle class="header--settings-toggle header--settings--logged-in"\nfor="header--settings"\ntitle="',s+=t.lookup("_")("Toggle Settings Menu"),s+='">\n</mkt-header-child-toggle>\n<a href="#" class="mkt-header--actions-link mkt-header--register persona register">',s+=t.lookup("_")("Register"),s+='</a>\n<a href="#" class="mkt-header--actions-link mkt-header--login persona">',s+=t.lookup("_")("Sign In"),s+='</a>\n<!--Categories menu.-->\n<mkt-header-child id="header--categories">\n<mkt-category-list></mkt-category-list>\n</mkt-header-child>\n<!--Search form.-->\n<mkt-header-child id="header--search" class="header--search"\ndata-header-child--input>\n<form id="search" class="header--search-form" action="',s+=t.lookup("url")("search"),s+='"\nnovalidate>\n<input id="search-q" class="query-input header--search-input"\ntype="search" name="q" title="" x-inputmode="verbatim"\nautocapitalize="off" autocomplete="off" autocorrect="off"\nrequired value="">\n<label class="header-child--input-placeholder" for="search-q">',s+=n.suppressValue(e.getFilter("safe").call(t,t.lookup("_")("Search Marketplace&hellip;")),e.autoesc),s+='</label>\n</form>\n</mkt-header-child>\n<!--User settings menu.-->\n<mkt-header-child id="header--settings" class="header--settings\nmkt-header-child--link-list">\n<ul>',s+=n.suppressValue(l(n.contextOrFrameLookup(t,r,"url")("settings"),t.lookup("_")("Settings"),"settings"),e.autoesc),s+=" ",s+=n.suppressValue(l(n.contextOrFrameLookup(t,r,"url")("purchases"),t.lookup("_")("My Apps"),"purchases"),e.autoesc),s+=" ",s+=n.suppressValue(l(n.contextOrFrameLookup(t,r,"url")("feedback"),t.lookup("_")("Feedback"),"feedback"),e.autoesc),s+=" ",s+=n.suppressValue(l("#",t.lookup("_")("Sign Out"),"logout","logout"),e.autoesc),s+="</ul>\n</mkt-header-child>\n</mkt-header>",o(null,s)}catch(c){o(n.handleError(c,a,i))}}return{root:e}}(),e["homepage.html"]=function(){function e(e,t,r,n,o){var a=null,i=null,s="";try{e.getTemplate("_macros/feed_item.html",function(a,i){return a?void o(a):void i.render(t.getVariables(),r.push(),function(a,i){return a?void o(a):(s+=i,s+=" ",void e.getTemplate("_macros/feed_websites.html",function(a,i){return a?void o(a):void i.render(t.getVariables(),r.push(),function(a,i){return a?void o(a):(s+=i,s+=" ",void e.getTemplate("_macros/more_button.html",function(a,i){return a?void o(a):void i.render(t.getVariables(),r.push(),function(a,i){return a?void o(a):(s+=i,s+=" ",n.contextOrFrameLookup(t,r,"showPromo")&&(s+=" ",e.getTemplate("desktop-promo.html",function(e,n){return e?void o(e):void n.render(t.getVariables(),r.push(),function(e,r){return e?void o(e):(s+=r,s+='<div class="desktop-promo-separator"></div>\n<p class="desktop-promo-separator-text">',s+=t.lookup("_")("More to Explore"),void(s+="</p>"))})})),s+=" ",s+=n.suppressValue(e.getExtension("defer").run(t,n.makeKeywordArgs({url:e.getFilter("urlparams").call(t,n.contextOrFrameLookup(t,r,"anonApi")("feed"),n.makeKeywordArgs({limit:10})),id:"feed-items"}),function(o){o||(o=function(e){if(e)throw e});var a="";a+='<div class="feed feed-items feed-home c" data-columns>',n.memberLookup(n.contextOrFrameLookup(t,r,"settings"),"meowEnabled",e.autoesc)&&n.memberLookup(n.contextOrFrameLookup(t,r,"settings"),"homepageWebsitesEnabled",e.autoesc)&&(a+=" ",a+=" ",n.memberLookup(n.memberLookup(n.contextOrFrameLookup(t,r,"this"),"websites",e.autoesc),"length",e.autoesc)>=3&&(a+=" ",a+=n.suppressValue(n.contextOrFrameLookup(t,r,"website_tabs")(e.getFilter("sliceArray").call(t,n.memberLookup(n.contextOrFrameLookup(t,r,"this"),"websites",e.autoesc),0,3)),e.autoesc),a+=" "),a+=" ",a+=" ",n.memberLookup(n.memberLookup(n.contextOrFrameLookup(t,r,"this"),"websites",e.autoesc),"length",e.autoesc)>=6&&(a+=" ",a+=n.suppressValue(n.contextOrFrameLookup(t,r,"website_carousel")(e.getFilter("sliceArray").call(t,n.memberLookup(n.contextOrFrameLookup(t,r,"this"),"websites",e.autoesc),3,12)),e.autoesc),a+=" "),a+=" "),a+=" ",r=r.push();var i=n.memberLookup(n.contextOrFrameLookup(t,r,"this"),"objects",e.autoesc);if(i)for(var s=0;s<i.length;s++){var u=i[s];r.set("item",u),a+='<div class="feed-item-item">',a+=n.suppressValue(n.contextOrFrameLookup(t,r,"feed_item")(u),e.autoesc),a+="</div>"}return r=r.pop(),a+="</div>",n.memberLookup(n.memberLookup(n.contextOrFrameLookup(t,r,"response"),"meta",e.autoesc),"next",e.autoesc)&&(a+=" ",a+=n.suppressValue(n.contextOrFrameLookup(t,r,"more_button")(n.memberLookup(n.memberLookup(n.contextOrFrameLookup(t,r,"response"),"meta",e.autoesc),"next",e.autoesc),["feed-item-item"]),e.autoesc),a+=" "),a+=" ",o(null,a),a},function(e){e||(e=function(e){if(e)throw e});var t="";return t+='<p class="spinner padded alt"></p>',e(null,t),t},null,function(e){e||(e=function(e){if(e)throw e});var o="";return o+='<p class="no-results">',400==n.contextOrFrameLookup(t,r,"error")||404==n.contextOrFrameLookup(t,r,"error")?(o+=" ",o+=t.lookup("_")("The feed is currently empty. Come back later!"),o+=" "):500==n.contextOrFrameLookup(t,r,"error")&&(o+=" ",o+=t.lookup("_")("An internal server error occurred. Please try again later."),o+=" "),o+="</p>",e(null,o),o}),!0&&e.autoesc),s+=" ",void o(null,s))})}))})}))})})}catch(u){o(n.handleError(u,a,i))}}return{root:e}}(),e["incompatible.html"]=function(){function e(e,t,r,n,o){var a=null,i=null,s="";try{s+='<mkt-banner id="incompatibility-banner" dismiss="remember" theme="firefox">\n<span>',s+=t.lookup("_")("You must use Firefox to install Firefox apps."),s+='</span>\n<a href="http://www.mozilla.org/firefox/" target="_blank" class="firefox-download">',s+=t.lookup("_")("Download"),s+="</a>\n</mkt-banner>",o(null,s)}catch(u){o(n.handleError(u,a,i))}}return{root:e}}(),e["langpacks.html"]=function(){function e(e,t,r,n,o){var a=null,i=null,s="";try{e.getTemplate("_macros/market_button.html",function(a,i){return a?void o(a):void i.getExported(function(a,i){if(a)return void o(a);if(!i.hasOwnProperty("market_button"))return void o(new Error("cannot import 'market_button'"));var u=i.market_button;t.setVariable("market_button",u),s+=" ",e.getTemplate("_macros/more_button.html",function(a,i){return a?void o(a):void i.render(t.getVariables(),r.push(),function(a,i){return a?void o(a):(s+=i,s+='<section class="main">\n<div class="subheader">\n<h1>',s+=n.suppressValue(n.contextOrFrameLookup(t,r,"title"),e.autoesc),s+='</h1>\n</div>\n</section>\n<section class="main full app-list-page c langpacks">\n<header class="secondary-header">\n<h2>',s+=n.suppressValue(n.contextOrFrameLookup(t,r,"subtitle"),e.autoesc),s+="</h2>\n</header>",s+=n.suppressValue(e.getExtension("defer").run(t,n.makeKeywordArgs({url:n.contextOrFrameLookup(t,r,"anonApiParams")("langpacks",n.contextOrFrameLookup(t,r,"params")),pluck:"objects",paginate:".app-list"}),function(o){o||(o=function(e){if(e)throw e});var a="";a+='<ul class="app-list ',a+=n.suppressValue(n.memberLookup(n.memberLookup(n.contextOrFrameLookup(t,r,"response"),"meta",e.autoesc),"next",e.autoesc)?"paginated":"",e.autoesc),a+='">',r=r.push();var i=n.contextOrFrameLookup(t,r,"this");if(i)for(var s=0;s<i.length;s++){var l=i[s];r.set("langpack",l),a+=" ";var c;c=n.contextOrFrameLookup(t,r,"transform_to_app")(l),r.set("app",c,!0),r.parent||(t.setVariable("app",c),t.addExport("app")),a+='<li class="app-list-app">\n<div class="product mkt-tile langpack" data-id="',a+=n.suppressValue(n.memberLookup(n.contextOrFrameLookup(t,r,"app"),"pk",e.autoesc),e.autoesc),a+='">\n<h3>',a+=n.suppressValue(n.memberLookup(n.contextOrFrameLookup(t,r,"app"),"language_display",e.autoesc),e.autoesc),a+="</h3>",a+=n.suppressValue(u(n.contextOrFrameLookup(t,r,"app"),n.makeKeywordArgs({data_attrs:{manifest_url:n.memberLookup(n.contextOrFrameLookup(t,r,"app"),"manifest_url",e.autoesc),slug:n.memberLookup(n.contextOrFrameLookup(t,r,"app"),"slug",e.autoesc)}})),e.autoesc),a+="</div>\n</li>"}return r=r.pop(),a+=" ",n.memberLookup(n.memberLookup(n.contextOrFrameLookup(t,r,"response"),"meta",e.autoesc),"next",e.autoesc)&&(a+=" ",a+=" ",a+=n.suppressValue(n.contextOrFrameLookup(t,r,"more_button")(n.memberLookup(n.memberLookup(n.contextOrFrameLookup(t,r,"response"),"meta",e.autoesc),"next",e.autoesc)),e.autoesc),a+=" "),a+="</ul>",o(null,a),a},function(e){e||(e=function(e){if(e)throw e});var t="";return t+='<p class="spinner padded alt"></p>',e(null,t),t},function(e){e||(e=function(e){if(e)throw e});var r="";return r+='<p class="no-results">',r+=t.lookup("_")("No language packs found."),r+="</p>",e(null,r),r},function(e){e||(e=function(e){if(e)throw e});var o="";return o+='<p class="no-results">',400==n.contextOrFrameLookup(t,r,"error")||404==n.contextOrFrameLookup(t,r,"error")?(o+=" ",o+=t.lookup("_")("No language packs found."),o+=" "):500==n.contextOrFrameLookup(t,r,"error")&&(o+=" ",o+=t.lookup("_")("An internal server error occurred. Please try again later."),o+=" "),o+="</p>",e(null,o),o}),!0&&e.autoesc),s+="</section>",void o(null,s))})})})})}catch(u){o(n.handleError(u,a,i))}}return{root:e}}(),e["marketplace-update.html"]=function(){function e(e,t,r,n,o){var a=null,i=null,s="";try{s+='<mkt-banner id="marketplace-update-banner" dismiss="remember">\n<span>',s+=t.lookup("_")("An update to Marketplace is available."),s+='</span>\n<a href="#" class="download-button">',s+=t.lookup("_")("Download"),s+="</a>\n</mkt-banner>",o(null,s)}catch(u){o(n.handleError(u,a,i))}}return{root:e}}(),e["nav.html"]=function(){function e(e,t,r,n,o){var a=null,i=null,s="";try{var u=n.makeMacro(["href","title","slug","toggle"],[],function(t,o,a,i,s){r=r.push(),s=s||{},r.set("href",t),r.set("title",o),r.set("slug",a),r.set("toggle",i);var u="";return u+='<li class="mkt-nav--item" data-mkt-nav--item="',u+=n.suppressValue(a,e.autoesc),u+='">',i&&(u+='<mkt-nav-child-toggle for="',u+=n.suppressValue(i,e.autoesc),u+='">'),u+='<a class="mkt-nav--link" href="',u+=n.suppressValue(t,e.autoesc),u+='" title="',u+=n.suppressValue(o,e.autoesc),u+='">',u+=n.suppressValue(o,e.autoesc),u+="</a>",i&&(u+="</mkt-nav-child-toggle>"),u+="</li>",r=r.pop(),new n.SafeString(u)});t.addExport("nav_item"),t.setVariable("nav_item",u),s+=" ";var l=n.makeMacro(["href","title","slug","item_classes","link_classes"],[],function(t,o,a,i,s,u){r=r.push(),u=u||{},r.set("href",t),r.set("title",o),r.set("slug",a),r.set("item_classes",i),r.set("link_classes",s);var l="";return l+='<li class="mkt-nav--item mkt-nav--item--settings ',l+=n.suppressValue(i||"",e.autoesc),l+='"\ndata-mkt-nav--item="',l+=n.suppressValue(a,e.autoesc),l+='">\n<a class="mkt-nav--link ',l+=n.suppressValue(s||"",e.autoesc),l+='" href="',l+=n.suppressValue(t,e.autoesc),l+='"\ntitle="',l+=n.suppressValue(o,e.autoesc),l+='">',l+=n.suppressValue(o,e.autoesc),l+="</a>\n</li>",r=r.pop(),new n.SafeString(l)});t.addExport("nav_item_settings"),t.setVariable("nav_item_settings",l),s+='<mkt-nav role="navigation" id="nav">\n<mkt-nav-root>',s+=n.suppressValue(u(n.contextOrFrameLookup(t,r,"url")("homepage"),t.lookup("_")("Home"),"homepage"),e.autoesc),s+=" ",s+=n.suppressValue(u(n.contextOrFrameLookup(t,r,"url")("popular"),t.lookup("_")("Popular"),"popular"),e.autoesc),s+=" ",s+=n.suppressValue(u(n.contextOrFrameLookup(t,r,"url")("new"),t.lookup("_")("New"),"new"),e.autoesc),s+=" ",s+=n.suppressValue(u(n.contextOrFrameLookup(t,r,"url")("recommended"),t.lookup("_")("Recommended"),"recommended"),e.autoesc),s+=" ",s+=n.suppressValue(u("#",t.lookup("_")("Categories"),"categories","categories"),e.autoesc),s+='<li class="mkt-nav-root--divider"></li>',s+=n.suppressValue(l("#",t.lookup("_")("Register"),"register","nav--settings--logged-out","persona register"),e.autoesc),s+=" ",s+=n.suppressValue(l("#",t.lookup("_")("Sign In"),"login","nav--settings--logged-out","persona"),e.autoesc),s+=" ",s+=n.suppressValue(l(n.contextOrFrameLookup(t,r,"url")("settings"),t.lookup("_")("Settings"),"settings","nav--settings--logged-in"),e.autoesc),s+=" ",s+=n.suppressValue(l(n.contextOrFrameLookup(t,r,"url")("purchases"),t.lookup("_")("My Apps"),"purchases","nav--settings--logged-in"),e.autoesc),s+=" ",s+=n.suppressValue(l(n.contextOrFrameLookup(t,r,"url")("feedback"),t.lookup("_")("Feedback"),"feedback"),e.autoesc),s+=" ",s+=n.suppressValue(l("#",t.lookup("_")("Sign Out"),"logout","nav--settings--logged-in","logout"),e.autoesc),s+='</mkt-nav-root>\n<mkt-nav-child id="categories">\n<mkt-category-list></mkt-category-list>\n</mkt-nav-child>\n<mkt-nav-child-toggle>\n<button class="mkt-nav--back">\n<b/><b/><b/>\n</button>\n</mkt-nav-child-toggle>\n</mkt-nav>',o(null,s)}catch(c){o(n.handleError(c,a,i))}}return{root:e}}(),e["newsletter.html"]=function(){function e(e,t,r,n,o){var a=null,i=null,s="";try{s+='<div class="newsletter',s+=n.suppressValue(n.contextOrFrameLookup(t,r,"standalone_newsletter_signup")?" newsletter-signup-page":"",e.autoesc),s+='">\n<form class="c" method="post" novalidate>',n.contextOrFrameLookup(t,r,"standalone_newsletter_signup")?(s+="<h3>",s+=t.lookup("_")("Sign up for our newsletter"),s+="</h3>"):(s+="<h3>",s+=t.lookup("_")("Get Firefox news! Sign up for our newsletter"),s+="</h3>"),s+='<input type="email" class="email newsletter-email-field" name="email" placeholder="',s+=t.lookup("_")("Email"),s+='" value="',s+=n.suppressValue(n.contextOrFrameLookup(t,r,"user_email"),e.autoesc),s+='" required>\n<button class="button s newsletter-signup-button action newsletter-desktop">',s+=t.lookup("_")("Sign me up"),s+='</button>\n<div class="newsletter-details collapsed">\n<select name="lang" class="newsletter-select">',r=r.push();var u=n.memberLookup(n.contextOrFrameLookup(t,r,"NEWSLETTER_LANGUAGES"),"items",e.autoesc)();if(u){var l;if(n.isArray(u))for(l=0;l<u.length;l++){var c=u[l][0];r.set("code",u[l][0]);var p=u[l][1];r.set("language",u[l][1]),s+=" ","None"!=c&&(s+=" ",s+='<option value="',s+=n.suppressValue(c,e.autoesc),s+='"',s+=n.suppressValue(c==n.contextOrFrameLookup(t,r,"user_lang")||c==n.memberLookup(n.memberLookup(n.contextOrFrameLookup(t,r,"user_lang"),"split",e.autoesc)("-"),0,e.autoesc)?" selected":"",e.autoesc),s+=">",s+=n.suppressValue(p,e.autoesc),s+="</option>"),s+=" "}else{l=-1;for(var d in u){l++;var f=u[d];r.set("code",d),r.set("language",f),s+=" ","None"!=d&&(s+=" ",s+='<option value="',s+=n.suppressValue(d,e.autoesc),s+='"',s+=n.suppressValue(d==n.contextOrFrameLookup(t,r,"user_lang")||d==n.memberLookup(n.memberLookup(n.contextOrFrameLookup(t,r,"user_lang"),"split",e.autoesc)("-"),0,e.autoesc)?" selected":"",e.autoesc),s+=">",s+=n.suppressValue(f,e.autoesc),s+="</option>"),s+=" "}}}r=r.pop(),s+='</select>\n<div class="privacy">\n<input type="checkbox" name="privacy" id="id_newsletter_privacy',n.contextOrFrameLookup(t,r,"standalone_newsletter_signup")&&(s+="_standalone"),s+='" required>\n<label for="id_newsletter_privacy',n.contextOrFrameLookup(t,r,"standalone_newsletter_signup")&&(s+="_standalone"),s+='">',s+=t.lookup("_")('I\'m okay with Mozilla handling my info as explained in <a href="{privacy_policy_url}" target="_blank">this Privacy Policy</a>.',n.makeKeywordArgs({privacy_policy_url:"https://www.mozilla.org/privacy/"})),s+='</label>\n</div>\n</div>\n<button class="button newsletter-signup-button action newsletter-mobile',s+=n.suppressValue(n.contextOrFrameLookup(t,r,"standalone_newsletter_signup")?"":" s",e.autoesc),s+='">',s+=t.lookup("_")("Sign me up"),s+='</button>\n<a href="/settings" class="button support newsletter-cancel-button hide-on-desktop',s+=n.suppressValue(n.contextOrFrameLookup(t,r,"standalone_newsletter_signup")?"":" s",e.autoesc),s+='">',s+=t.lookup("_")("Cancel"),s+='</a>\n</form>\n<div class="processing">\n<span class="spinner alt"></span>\n</div>\n<div class="success">\n<h3>',s+=t.lookup("_")("Thanks for signing up!"),s+="</h3>\n<p>",s+=t.lookup("_")("You'll receive an email from mozilla@e.mozilla.org, please check your inbox for your first email from us. If you dont see it, check your spam filter."),s+="</p>\n</div>\n</div>",o(null,s)
}catch(m){o(n.handleError(m,a,i))}}return{root:e}}(),e["privacy.html"]=function(){function e(e,t,r,n,o){var a=null,i=null,s="";try{s+='<section class="main">\n<div class="subheader">\n<h1>',s+=t.lookup("_")("Privacy Policy"),s+='</h1>\n</div>\n</section>\n<section class="site-privacy-policy main full prose">';var u;u="/docs/privacy/"+n.contextOrFrameLookup(t,r,"language")+".html?20151009",r.set("url",u,!0),r.parent||(t.setVariable("url",u),t.addExport("url")),s+=" ";var l;l="/docs/privacy/"+n.memberLookup(n.contextOrFrameLookup(t,r,"settings"),"default_locale",e.autoesc)+".html?20151009",r.set("fallback",l,!0),r.parent||(t.setVariable("fallback",l),t.addExport("fallback")),s+=" ",s+=n.suppressValue(e.getExtension("fetch").run(t,n.makeKeywordArgs({url:n.contextOrFrameLookup(t,r,"media")(n.contextOrFrameLookup(t,r,"url")),fallback:n.contextOrFrameLookup(t,r,"media")(n.contextOrFrameLookup(t,r,"fallback")),filters:["rewriteCdnUrls"]}),function(e){e||(e=function(e){if(e)throw e});var t="";return t+='<p class="spinner spaced alt"></p>',e(null,t),t}),!0&&e.autoesc),s+="</section>",o(null,s)}catch(c){o(n.handleError(c,a,i))}}return{root:e}}(),e["purchases.html"]=function(){function e(e,t,r,n,o){var a=null,i=null,s="";try{e.getTemplate("_macros/app_tile.html",function(a,i){return a?void o(a):void i.render(t.getVariables(),r.push(),function(a,i){return a?void o(a):(s+=i,s+=" ",void e.getTemplate("_macros/more_button.html",function(a,i){return a?void o(a):void i.render(t.getVariables(),r.push(),function(a,i){return a?void o(a):(s+=i,s+='<section class="main">\n<div class="subheader">\n<h1>',s+=t.lookup("_")("My Apps"),s+='<a class="app-list-filters-expand-toggle" title="',s+=t.lookup("_")("Expand"),s+='"></a>\n</h1>\n</div>\n</section>\n<section class="main full account purchases c" id="account-settings">',n.memberLookup(n.contextOrFrameLookup(t,r,"user"),"logged_in",e.autoesc)()?(s+=" ",s+=n.suppressValue(e.getExtension("defer").run(t,n.makeKeywordArgs({url:n.contextOrFrameLookup(t,r,"api")("installed"),pluck:"objects",as:"app",paginate:".app-list"}),function(o){o||(o=function(e){if(e)throw e});var a="";return a+=" ",e.getTemplate("_includes/app_list_filters.html",function(i,s){return i?void o(i):void s.render(t.getVariables(),r.push(),function(i,s){if(i)return void o(i);a+=s,a+='<ul class="app-list only-logged-in ',a+=n.suppressValue(n.memberLookup(n.memberLookup(n.contextOrFrameLookup(t,r,"response"),"meta",e.autoesc),"next",e.autoesc)?"paginated":"",e.autoesc),a+='">',r=r.push();var u=n.contextOrFrameLookup(t,r,"this");if(u)for(var l=0;l<u.length;l++){var c=u[l];r.set("app",c),a+='<li class="item result app-list-app">',a+=n.suppressValue(n.contextOrFrameLookup(t,r,"app_tile")(c,n.makeKeywordArgs({tray:!0,src:n.memberLookup(n.memberLookup(n.contextOrFrameLookup(t,r,"trackingEvents"),"SRCS",e.autoesc),"purchases",e.autoesc)})),e.autoesc),a+="</li>"}r=r.pop(),a+=" ",n.memberLookup(n.memberLookup(n.contextOrFrameLookup(t,r,"response"),"meta",e.autoesc),"next",e.autoesc)&&(a+=" ",a+=n.suppressValue(n.contextOrFrameLookup(t,r,"more_button")(n.memberLookup(n.memberLookup(n.contextOrFrameLookup(t,r,"response"),"meta",e.autoesc),"next",e.autoesc)),e.autoesc),a+=" "),a+="</ul>",o(null,a)})}),a},function(e){e||(e=function(e){if(e)throw e});var t="";return t+='<p class="spinner alt spaced"></p>',e(null,t),t},function(e){e||(e=function(e){if(e)throw e});var r="";return r+='<p class="no-results only-logged-in">',r+=t.lookup("_")("You have no apps"),r+="</p>",e(null,r),r},function(e){e||(e=function(e){if(e)throw e});var r="";return r+='<div class="detailed-error">\n<h2>',r+=t.lookup("_")("Oh no!"),r+="</h2>\n<p>",r+=t.lookup("_")("An internal server error occurred. Please try again later."),r+="</p>\n</div>",e(null,r),r}),!0&&e.autoesc),s+=" "):(s+='<section class="main full account-settings-save">\n<div>\n<p>',s+=t.lookup("_")("You must be signed in to view your apps."),s+='</p>\n<a class="button persona register" href="#">',s+=t.lookup("_")("Register"),s+='</a>\n<a class="button persona" href="#">',s+=t.lookup("_")("Sign In"),s+="</a>\n</div>\n</section>"),s+="</section>",void o(null,s))})}))})})}catch(u){o(n.handleError(u,a,i))}}return{root:e}}(),e["search.html"]=function(){function e(e,t,r,n,o){var a=null,i=null,s="";try{e.getTemplate("_macros/app_tile.html",function(a,i){return a?void o(a):void i.render(t.getVariables(),r.push(),function(a,i){return a?void o(a):(s+=i,s+=" ",void e.getTemplate("_macros/more_button.html",function(a,i){return a?void o(a):void i.render(t.getVariables(),r.push(),function(a,i){if(a)return void o(a);s+=i,s+=" ";var u=n.makeMacro(["query","count"],[],function(o,a,i){r=r.push(),i=i||{},r.set("query",o),r.set("count",a);var s="";return s+='<section class="main">\n<div class="subheader">\n<h1 class="search-results-header search-results-header-mobile">',s+=t.lookup("_plural")("<b>{n}</b> Result","<b>{n}</b> Results",n.makeKeywordArgs({n:a})),s+='<a class="app-list-filters-expand-toggle" title="',s+=t.lookup("_")("Expand"),s+='"></a>\n</h1>\n<h1 class="search-results-header search-results-header-desktop">',s+=t.lookup("_plural")('<b>"{search_query}"</b> returned {n} result','<b>"{search_query}"</b> returned {n} results',n.makeKeywordArgs({search_query:e.getFilter("escape").call(t,o),n:a})),s+="</h1>\n</div>\n</section>",r=r.pop(),new n.SafeString(s)});t.addExport("results_subheader"),t.setVariable("results_subheader",u),s+=" ";var l;if(l=n.contextOrFrameLookup(t,r,"anonApiParams")("search",n.contextOrFrameLookup(t,r,"params")),r.set("api_url",l,!0),r.parent||(t.setVariable("api_url",l),t.addExport("api_url")),s+=" ",n.memberLookup(n.contextOrFrameLookup(t,r,"params"),"region",e.autoesc)){s+=" ",s+=" ";var c;c=e.getFilter("urlparams").call(t,n.contextOrFrameLookup(t,r,"api_url"),n.makeKeywordArgs({region:n.memberLookup(n.contextOrFrameLookup(t,r,"params"),"region",e.autoesc)})),r.set("api_url",c,!0),r.parent||(t.setVariable("api_url",c),t.addExport("api_url")),s+=" "}if(s+=" ",n.memberLookup(n.contextOrFrameLookup(t,r,"params"),"sort",e.autoesc)){s+=" ";var p;p=e.getFilter("urlparams").call(t,n.contextOrFrameLookup(t,r,"api_url"),n.makeKeywordArgs({sort:n.memberLookup(n.contextOrFrameLookup(t,r,"params"),"sort",e.autoesc)})),r.set("api_url",p,!0),r.parent||(t.setVariable("api_url",p),t.addExport("api_url")),s+=" "}s+=" ",s+=n.suppressValue(e.getExtension("defer").run(t,n.makeKeywordArgs({url:n.contextOrFrameLookup(t,r,"api_url"),pluck:"objects",as:n.contextOrFrameLookup(t,r,"appOrWebsite"),paginate:".app-list",id:"searchresults"}),function(o){o||(o=function(e){if(e)throw e});var a="";return a+=" ",a+=n.suppressValue(u(n.contextOrFrameLookup(t,r,"raw_query"),n.memberLookup(n.memberLookup(n.contextOrFrameLookup(t,r,"response"),"meta",e.autoesc),"total_count",e.autoesc)),e.autoesc),a+='<section id="search-results" class="main full app-list-page search-results">\n<div>',e.getTemplate("_includes/app_list_filters.html",function(i,s){return i?void o(i):void s.render(t.getVariables(),r.push(),function(i,s){if(i)return void o(i);a+=s,a+='<ul class="app-list ',a+=n.suppressValue(n.memberLookup(n.memberLookup(n.contextOrFrameLookup(t,r,"response"),"meta",e.autoesc),"next",e.autoesc)?"paginated":"",e.autoesc),a+='">',r=r.push();var u=n.contextOrFrameLookup(t,r,"processor")(n.contextOrFrameLookup(t,r,"this"));if(u)for(var l=0;l<u.length;l++){var c=u[l];r.set("result",c),a+='<li class="item result app-list-app">',a+=n.suppressValue(n.contextOrFrameLookup(t,r,"app_tile")(c,n.makeKeywordArgs({tray:!0,src:n.memberLookup(n.memberLookup(n.contextOrFrameLookup(t,r,"trackingEvents"),"SRCS",e.autoesc),"search",e.autoesc)})),e.autoesc),a+="</li>"}r=r.pop(),a+=" ",a+=" ",n.memberLookup(n.memberLookup(n.contextOrFrameLookup(t,r,"response"),"meta",e.autoesc),"next",e.autoesc)&&(a+=" ",a+=n.suppressValue(n.contextOrFrameLookup(t,r,"more_button")(n.memberLookup(n.memberLookup(n.contextOrFrameLookup(t,r,"response"),"meta",e.autoesc),"next",e.autoesc)),e.autoesc),a+=" "),a+="</ul>\n</div>\n</section>",o(null,a)})}),a},function(e){e||(e=function(e){if(e)throw e});var t="";return t+='<section class="main">\n<p class="spinner spaced alt"></p>\n</section>',e(null,t),t},function(o){o||(o=function(e){if(e)throw e});var a="";return a+=" ",a+=n.suppressValue(u(n.contextOrFrameLookup(t,r,"raw_query"),0),e.autoesc),a+='<section class="main search-empty app-list-page full">',e.getTemplate("_includes/app_list_filters.html",function(e,n){return e?void o(e):void n.render(t.getVariables(),r.push(),function(e,r){return e?void o(e):(a+=r,a+='<h1 class="no-results">',a+=t.lookup("_")("No results found"),a+="</h1>\n</section>",void o(null,a))})}),a},function(e){e||(e=function(e){if(e)throw e});var r="";return r+='<section class="main">\n<div class="subheader">',r+="<h1>",r+=t.lookup("_")("No results found, try again later"),r+="</h1>\n</div>\n</section>",e(null,r),r}),!0&&e.autoesc),s+=" ",o(null,s)})}))})})}catch(u){o(n.handleError(u,a,i))}}return{root:e}}(),e["settings.html"]=function(){function e(e,t,r,n,o){var a=null,i=null,s="";try{s+='<section class="main hide-on-mobile">\n<div class="subheader">\n<h1>',s+=t.lookup("_")("Settings"),s+='</h1>\n</div>\n</section>\n<form class="form-grid account-settings" ',s+=n.suppressValue(n.memberLookup(n.contextOrFrameLookup(t,r,"user"),"logged_in",e.autoesc)()?"":"novalidate",e.autoesc),s+='>\n<section class="main full">\n<div>\n<h3>',s+=t.lookup("_")("General settings"),s+='</h3>\n<div class="settings-info-container">\n<div class="settings-email account-field hide-logged-out">\n<label>',s+=t.lookup("_")("Email Address"),s+="</label>\n<p>",s+=n.suppressValue(n.memberLookup(n.contextOrFrameLookup(t,r,"user"),"get_setting",e.autoesc)("email"),e.autoesc),s+='</p>\n</div>\n<div class="display-name account-field hide-logged-out">\n<label for="display_name">',s+=t.lookup("_")("Display Name"),s+='</label>\n<input name="display_name" id="display_name"\npattern="[^\\s].*|\\s+\\S.+" value="',s+=n.suppressValue(n.memberLookup(n.contextOrFrameLookup(t,r,"user"),"get_setting",e.autoesc)("display_name"),e.autoesc),s+='"\nmaxlength="50" type="text" required>\n</div>\n</div>\n<div class="recommendations account-field hide-logged-out">\n<label for="enable_recommendations">',s+=t.lookup("_")("Recommendations"),s+='</label>\n<input id="enable_recommendations" name="enable_recommendations"\ntype="checkbox" ',s+=n.suppressValue(n.memberLookup(n.contextOrFrameLookup(t,r,"user"),"get_setting",e.autoesc)("enable_recommendations",!0)?"checked":"",e.autoesc),s+='>\n<label for="enable_recommendations">',s+=n.suppressValue(e.getFilter("format").call(t,t.lookup("_")('Yes, show me recommendations based on my installed apps. <a href="{url}" target="_blank">Learn more</a>'),n.makeKeywordArgs({url:"https://support.mozilla.org/kb/recommendations-marketplace"})),e.autoesc),s+="</label>\n</div>",s+=n.suppressValue(e.getExtension("defer").run(t,n.makeKeywordArgs({url:n.contextOrFrameLookup(t,r,"anonApi")("region",[n.memberLookup(n.contextOrFrameLookup(t,r,"user_helpers"),"region",e.autoesc)()])}),function(o){o||(o=function(e){if(e)throw e});var a="";return a+='<div class="region account-field">\n<label>',a+=t.lookup("_")("Region"),a+='</label>\n<img src="',a+=t.lookup("media")("/fireplace/img/icons/regions/"+n.memberLookup(n.contextOrFrameLookup(t,r,"this"),"slug",e.autoesc)+".png"),a+='" alt=""><span>',a+=n.suppressValue(n.memberLookup(n.contextOrFrameLookup(t,r,"this"),"name",e.autoesc),e.autoesc),a+="</span>\n</div>",o(null,a),a},null,null,null),!0&&e.autoesc),s+='<div class="account-settings-save">\n<button class="button hide-logged-out" type="submit">',s+=t.lookup("_")("Save Changes"),s+='</button>\n<a href="#" class="button persona register hide-logged-in">',s+=t.lookup("_")("Register"),s+='</a>\n<a class="button action login persona hide-logged-in">',s+=t.lookup("_")("Sign In"),s+='</a>\n<a class="button action logout hide-logged-out">',s+=t.lookup("_")("Sign Out"),s+='</a>\n</div>\n</div>\n</section>\n<section class="main full hide-on-desktop">\n<div>\n<h3>',s+=t.lookup("_")("Newsletter"),s+='</h3>\n<div class="account-field newsletter-info">\n<p>',s+="<span>",s+=t.lookup("_")("Get Firefox News."),s+='</span>\n<a href="/newsletter-signup" class="newsletter-signup">',s+=t.lookup("_")("Sign up for our newsletter."),s+='</a>\n</p>\n</div>\n</div>\n</section>\n<section class="main full hide-on-tablet account-settings-links">\n<div>\n<a href="https://wiki.mozilla.org/Marketplace/Contributing/Apps"\ntarget="_blank" class="button">',s+=t.lookup("_")("Get Involved"),s+='</a>\n<a href="',s+=t.lookup("url")("privacy"),s+='" class="button">',s+=t.lookup("_")("Privacy Policy"),s+='</a>\n<a href="',s+=t.lookup("url")("terms"),s+='" class="button">',s+=t.lookup("_")("Terms of Use"),s+="</a>",n.memberLookup(n.contextOrFrameLookup(t,r,"user"),"get_permission",e.autoesc)("reviewer")&&(s+='<a href="/reviewers/apps/queue/" class="button action reviewer-tools hide-logged-out"\nrel="external">',s+=t.lookup("_")("Reviewer Tools"),s+="</a>"),s+="</div>\n</section>\n</form>",o(null,s)}catch(u){o(n.handleError(u,a,i))}}return{root:e}}(),e["terms.html"]=function(){function e(e,t,r,n,o){var a=null,i=null,s="";try{s+='<section class="main">\n<div class="subheader">\n<h1>',s+=t.lookup("_")("Terms of Use"),s+='</h1>\n</div>\n</section>\n<section class="site-terms-of-use main full prose">';var u;u="/docs/terms/"+n.contextOrFrameLookup(t,r,"language")+".html?20151009",r.set("url",u,!0),r.parent||(t.setVariable("url",u),t.addExport("url")),s+=" ";var l;l="/docs/terms/"+n.memberLookup(n.contextOrFrameLookup(t,r,"settings"),"default_locale",e.autoesc)+".html?20151009",r.set("fallback",l,!0),r.parent||(t.setVariable("fallback",l),t.addExport("fallback")),s+=" ",s+=n.suppressValue(e.getExtension("fetch").run(t,n.makeKeywordArgs({url:n.contextOrFrameLookup(t,r,"media")(n.contextOrFrameLookup(t,r,"url")),fallback:n.contextOrFrameLookup(t,r,"media")(n.contextOrFrameLookup(t,r,"fallback")),filters:["rewriteCdnUrls"]}),function(e){e||(e=function(e){if(e)throw e});var t="";return t+='<p class="spinner spaced alt"></p>',e(null,t),t}),!0&&e.autoesc),s+="</section>",o(null,s)}catch(c){o(n.handleError(c,a,i))}}return{root:e}}(),e["usage.html"]=function(){function e(e,t,r,n,o){var a=null,i=null,s="";try{s+='<section class="main">\n<div class="subheader">\n<h1>',s+=t.lookup("_")("App Statistics"),s+='</h1>\n</div>\n</section>\n<section class="standalone main full">\n<div>\n<h3>',s+=t.lookup("_")("App usage statistics"),s+="</h3>\n<p>",s+=t.lookup("_")("Not enough statistics to show."),s+="</p>\n</div>\n</section>",o(null,s)}catch(u){o(n.handleError(u,a,i))}}return{root:e}}(),e["_includes/abuse_modal.html"]=function(){function e(e,t,r,n,o){var a=null,i=null,s="";try{e.getTemplate("app/abuse.html",function(a,i){return a?void o(a):void i.getExported(function(a,i){if(a)return void o(a);if(!i.hasOwnProperty("abuse_prompt"))return void o(new Error("cannot import 'abuse_prompt'"));var u=i.abuse_prompt;t.setVariable("abuse_prompt",u),s+=" ",s+=n.suppressValue(u(n.contextOrFrameLookup(t,r,"slug"),!0),e.autoesc),s+=" ",o(null,s)})})}catch(u){o(n.handleError(u,a,i))}}return{root:e}}(),e["_includes/app_list_filters.html"]=function(){function e(e,t,r,n,o){var a=null,i=null,s="";try{if(n.memberLookup(n.contextOrFrameLookup(t,r,"contentFilter"),"enabled",e.autoesc)){s+='<div class="app-list-filters-content-wrapper">\n<div class="app-list-filters-content-select">\n<mkt-select class="content-filter" noalign>\n<mkt-selected><p>',s+=" ",s+=n.suppressValue(e.getFilter("safe").call(t,t.lookup("_")("Show <mkt-selected-text></mkt-selected-text>")),e.autoesc),s+="</p></mkt-selected>\n<optgroup>",r=r.push();var u=n.memberLookup(n.contextOrFrameLookup(t,r,"contentFilter"),"CONTENT_FILTER_CHOICES",e.autoesc);if(u)for(var l=0;l<u.length;l++){var c=u[l];r.set("content",c),s+='<option class="mkt-option--center" value="',s+=n.suppressValue(n.memberLookup(c,0,e.autoesc),e.autoesc),s+='" ',s+=n.suppressValue(n.memberLookup(c,0,e.autoesc)==n.memberLookup(n.contextOrFrameLookup(t,r,"contentFilter"),"getFilterContent",e.autoesc)()?"selected":"",e.autoesc),s+=">",s+=n.suppressValue(n.memberLookup(c,1,e.autoesc),e.autoesc),s+="</option>"}r=r.pop(),s+="</optgroup>\n</mkt-select>\n</div>\n</div>"}s+='<div class="app-list-filters">\n<div class="app-list-filters-content">\n<div class="app-list-filters-sort">\n<a ',n.contextOrFrameLookup(t,r,"sort")||(s+='class="active"'),s+=' href="',s+=n.suppressValue(n.contextOrFrameLookup(t,r,"popularUrl"),e.autoesc),s+='"\ndata-app-list-sort-popular data-preserve-scroll>',s+=t.lookup("_")("Popular"),s+="</a>",s+="<a ","reviewed"==n.contextOrFrameLookup(t,r,"sort")&&(s+='class="active"'),s+=' href="',s+=n.suppressValue(n.contextOrFrameLookup(t,r,"newUrl"),e.autoesc),s+='"\ndata-app-list-sort-new data-preserve-scroll>',s+=t.lookup("_")("New"),s+='</a>\n</div>\n<div class="app-list-filters-expand-wrapper">',s+=t.lookup("_")("Display as"),s+='<a class="app-list-filters-expand-toggle" title="',s+=t.lookup("_")("Toggle App Previews"),s+='"></a>\n</div>\n</div>\n</div>',o(null,s)}catch(p){o(n.handleError(p,a,i))}}return{root:e}}(),e["_includes/back_to_app.html"]=function(){function e(e,t,r,n,o){var a=null,i=null,s="";try{s+=" ",s+=n.suppressValue(e.getExtension("defer").run(t,n.makeKeywordArgs({url:n.contextOrFrameLookup(t,r,"app_endpoint"),as:"app",key:n.contextOrFrameLookup(t,r,"slug")}),function(o){o||(o=function(e){if(e)throw e});var a="";return a+='<section class="main">\n<div class="subheader">\n<a href="',a+=t.lookup("url")("app",[n.contextOrFrameLookup(t,r,"slug")]),a+='" class="back-to-app">',a+=n.suppressValue(e.getFilter("format").call(t,t.lookup("_")("Back to {app}"),n.makeKeywordArgs({app:n.memberLookup(n.contextOrFrameLookup(t,r,"this"),"name",e.autoesc)})),e.autoesc),a+="</a>\n</div>\n</section>",o(null,a),a},null,null,function(e){e||(e=function(e){if(e)throw e});var t="";return t+=" ",e(null,t),t}),!0&&e.autoesc),s+=" ",o(null,s)}catch(u){o(n.handleError(u,a,i))}}return{root:e}}(),e["_includes/carrier_apps_banner.html"]=function(){function e(e,t,r,n,o){var a=null,i=null,s="";try{s+='<mkt-banner dismiss="remember" name="carrier-apps-banner" theme="positive">\n<span>',s+=t.lookup("_")("Your carrier offers some free apps."),s+='</span>\n<a href="',s+=t.lookup("url")("carrier"),s+='">',s+=" ",s+=t.lookup("_")("Get them now!"),s+="</a>\n</mkt-banner>",o(null,s)}catch(u){o(n.handleError(u,a,i))}}return{root:e}}(),e["_includes/content_ratings.html"]=function(){function e(e,t,r,n,o){var a=null,i=null,s="";try{s+=n.suppressValue(e.getExtension("defer").run(t,n.makeKeywordArgs({url:n.contextOrFrameLookup(t,r,"endpoint"),pluck:"content_ratings"}),function(o){o||(o=function(e){if(e)throw e});var a="";if(a+=" ",n.memberLookup(n.contextOrFrameLookup(t,r,"this"),"rating",e.autoesc)){if(a+='<div class="content-ratings-wrapper ',a+=n.suppressValue(n.memberLookup(n.contextOrFrameLookup(t,r,"this"),"body",e.autoesc),e.autoesc),a+='">\n<div class="infobox-wrapper c">',a+='<h3 id="content-ratings-header">',a+=t.lookup("_")("Content Rating"),a+='</h3>\n<div class="content-ratings-left">\n<div class="content-rating c">',a+='<img data-src="',a+=n.suppressValue(n.memberLookup(n.memberLookup(n.memberLookup(n.contextOrFrameLookup(t,r,"iarc"),"rating_icons",e.autoesc),n.memberLookup(n.contextOrFrameLookup(t,r,"this"),"body",e.autoesc),e.autoesc),n.memberLookup(n.contextOrFrameLookup(t,r,"this"),"rating",e.autoesc),e.autoesc),e.autoesc),a+='"\nclass="icon icon-body-',a+=n.suppressValue(n.memberLookup(n.contextOrFrameLookup(t,r,"this"),"body",e.autoesc),e.autoesc),a+=' deferred"\nsrc="',a+=n.suppressValue(n.contextOrFrameLookup(t,r,"PLACEHOLDER_ICON"),e.autoesc),a+='"\ntitle="',a+=n.suppressValue(n.memberLookup(n.memberLookup(n.memberLookup(n.contextOrFrameLookup(t,r,"iarc_names"),"ratings",e.autoesc),n.memberLookup(n.contextOrFrameLookup(t,r,"this"),"body",e.autoesc),e.autoesc),n.memberLookup(n.contextOrFrameLookup(t,r,"this"),"rating",e.autoesc),e.autoesc),e.autoesc),a+='"\nalt="',a+=n.suppressValue(n.memberLookup(n.memberLookup(n.memberLookup(n.contextOrFrameLookup(t,r,"iarc_names"),"ratings",e.autoesc),n.memberLookup(n.contextOrFrameLookup(t,r,"this"),"body",e.autoesc),e.autoesc),n.memberLookup(n.contextOrFrameLookup(t,r,"this"),"rating",e.autoesc),e.autoesc),e.autoesc),a+='">\n</div>',a+=" ",n.memberLookup(n.contextOrFrameLookup(t,r,"this"),"descriptors_text",e.autoesc)&&!n.memberLookup(n.memberLookup(n.contextOrFrameLookup(t,r,"iarc"),"descriptor_icons",e.autoesc),n.memberLookup(n.contextOrFrameLookup(t,r,"this"),"body",e.autoesc),e.autoesc)){a+='<ul class="content-descriptors text">',r=r.push();var i=n.memberLookup(n.contextOrFrameLookup(t,r,"this"),"descriptors_text",e.autoesc);if(i)for(var s=0;s<i.length;s++){var u=i[s];r.set("descriptor_text",u),a+="<li>",a+=n.suppressValue(u,e.autoesc),a+="</li>"}r=r.pop(),a+="</ul>"}else a+=" ",a+='<span class="rating-description">',a+=n.suppressValue(n.memberLookup(n.memberLookup(n.memberLookup(n.contextOrFrameLookup(t,r,"iarc_names"),"ratings",e.autoesc),n.memberLookup(n.contextOrFrameLookup(t,r,"this"),"body",e.autoesc),e.autoesc),n.memberLookup(n.contextOrFrameLookup(t,r,"this"),"rating",e.autoesc),e.autoesc),e.autoesc),a+="</span>";a+='</div>\n<div class="content-ratings-right">';var l;if(l=n.memberLookup(n.memberLookup(n.contextOrFrameLookup(t,r,"iarc"),"descriptor_icons",e.autoesc),n.memberLookup(n.contextOrFrameLookup(t,r,"this"),"body",e.autoesc),e.autoesc),r.set("desc_icons",l,!0),r.parent||(t.setVariable("desc_icons",l),t.addExport("desc_icons")),a+=" ",n.contextOrFrameLookup(t,r,"desc_icons")){a+=" ",a+='<div class="content-descriptors icons">',r=r.push();var c=n.memberLookup(n.contextOrFrameLookup(t,r,"this"),"descriptors",e.autoesc);if(c)for(var p=0;p<c.length;p++){var d=c[p];r.set("descriptor_key",d),r.set("loop.index0",p),a+=" ";var f;f=n.memberLookup(n.contextOrFrameLookup(t,r,"desc_icons"),d,e.autoesc),r.set("icon_src",f,!0),r.parent||(t.setVariable("icon_src",f),t.addExport("icon_src")),a+=" ",n.contextOrFrameLookup(t,r,"icon_src")&&(a+='<img data-src="',a+=n.suppressValue(n.contextOrFrameLookup(t,r,"icon_src"),e.autoesc),a+='" class="icon deferred"\nsrc="',a+=n.suppressValue(n.contextOrFrameLookup(t,r,"PLACEHOLDER_ICON"),e.autoesc),a+='"\ntitle="',a+=n.suppressValue(n.memberLookup(n.memberLookup(n.contextOrFrameLookup(t,r,"this"),"descriptors_text",e.autoesc),n.memberLookup(n.contextOrFrameLookup(t,r,"loop"),"index0",e.autoesc),e.autoesc),e.autoesc),a+='"\nalt="',a+=n.suppressValue(n.memberLookup(n.memberLookup(n.contextOrFrameLookup(t,r,"this"),"descriptors_text",e.autoesc),n.memberLookup(n.contextOrFrameLookup(t,r,"loop"),"index0",e.autoesc),e.autoesc),e.autoesc),a+='">'),a+=" "}r=r.pop(),a+="</div>"}else if(n.memberLookup(n.contextOrFrameLookup(t,r,"this"),"interactives",e.autoesc)){a+='<div class="interactive-elements ',a+=n.suppressValue(n.contextOrFrameLookup(t,r,"interactive_icons")?"icons":"text",e.autoesc),a+='">';var m;if(m=n.memberLookup(n.memberLookup(n.contextOrFrameLookup(t,r,"iarc"),"interactive_icons",e.autoesc),n.memberLookup(n.contextOrFrameLookup(t,r,"this"),"body",e.autoesc),e.autoesc),r.set("interactive_icons",m,!0),r.parent||(t.setVariable("interactive_icons",m),t.addExport("interactive_icons")),a+=" ",n.contextOrFrameLookup(t,r,"interactive_icons")){a+=" ",r=r.push();var g=n.memberLookup(n.contextOrFrameLookup(t,r,"this"),"interactives",e.autoesc);if(g)for(var h=0;h<g.length;h++){var v=g[h];r.set("interactive_key",v),r.set("loop.index0",h),a+=" ",a+=" ";var b;b=n.memberLookup(n.contextOrFrameLookup(t,r,"interactive_icons"),v,e.autoesc),r.set("icon_src",b,!0),r.parent||(t.setVariable("icon_src",b),t.addExport("icon_src")),a+=" ",n.contextOrFrameLookup(t,r,"icon_src")&&(a+='<img data-src="',a+=n.suppressValue(n.contextOrFrameLookup(t,r,"icon_src"),e.autoesc),a+='" class="icon deferred"\nsrc="',a+=n.suppressValue(n.contextOrFrameLookup(t,r,"PLACEHOLDER_ICON"),e.autoesc),a+='"\ntitle="',a+=n.suppressValue(n.memberLookup(n.memberLookup(n.contextOrFrameLookup(t,r,"this"),"interactives_text",e.autoesc),n.memberLookup(n.contextOrFrameLookup(t,r,"loop"),"index0",e.autoesc),e.autoesc),e.autoesc),a+='"\nalt="',a+=n.suppressValue(n.memberLookup(n.memberLookup(n.contextOrFrameLookup(t,r,"this"),"interactives_text",e.autoesc),n.memberLookup(n.contextOrFrameLookup(t,r,"loop"),"index0",e.autoesc),e.autoesc),e.autoesc),a+='">'),a+=" "}r=r.pop(),a+=" "}else{a+=" ",r=r.push();var k=n.memberLookup(n.contextOrFrameLookup(t,r,"this"),"interactives_text",e.autoesc);if(k)for(var y=0;y<k.length;y++){var _=k[y];r.set("interactive_text",_),a+=" ",a+="<p>",a+=n.suppressValue(_,e.autoesc),a+="</p>"}r=r.pop(),a+=" "}a+="</div>"}a+='</div>\n</div>\n<div class="content-ratings-button-wrap">';var w;w=n.memberLookup(n.memberLookup(n.contextOrFrameLookup(t,r,"iarc"),"detail_links",e.autoesc),n.memberLookup(n.contextOrFrameLookup(t,r,"this"),"body",e.autoesc),e.autoesc),r.set("rating_detail_link",w,!0),r.parent||(t.setVariable("rating_detail_link",w),t.addExport("rating_detail_link")),a+=" ",n.contextOrFrameLookup(t,r,"rating_detail_link")&&(a+='<a href="',a+=n.suppressValue(n.contextOrFrameLookup(t,r,"rating_detail_link"),e.autoesc),a+='" class="button" target="_blank">',a+=" ",a+=t.lookup("_")("Rating Details"),a+="</a>"),a+="</div>\n</div>"}return a+=" ",o(null,a),a},null,null,function(e){e||(e=function(e){if(e)throw e});var t="";return t+=" ",e(null,t),t}),!0&&e.autoesc),s+=" ",o(null,s)}catch(u){o(n.handleError(u,a,i))}}return{root:e}}(),e["_includes/feedback_modal.html"]=function(){function e(e,t,r,n,o){var a=null,i=null,s="";try{e.getTemplate("feedback.html",function(r,a){return r?void o(r):void a.getExported(function(r,a){if(r)return void o(r);if(!a.hasOwnProperty("feedback_prompt"))return void o(new Error("cannot import 'feedback_prompt'"));var i=a.feedback_prompt;t.setVariable("feedback_prompt",i),s+=" ",s+=n.suppressValue(i(!0),e.autoesc),s+=" ",o(null,s)})})}catch(u){o(n.handleError(u,a,i))}}return{root:e}}(),e["_includes/flag_review_modal.html"]=function(){function e(e,t,r,n,o){var a=null,i=null,s="";try{e.getTemplate("ratings/flag.html",function(r,a){return r?void o(r):void a.getExported(function(r,a){if(r)return void o(r);if(!a.hasOwnProperty("flag_review_prompt"))return void o(new Error("cannot import 'flag_review_prompt'"));var i=a.flag_review_prompt;t.setVariable("flag_review_prompt",i),s+=" ",s+=n.suppressValue(i(!0),e.autoesc),s+=" ",o(null,s)})})}catch(u){o(n.handleError(u,a,i))}}return{root:e}}(),e["_includes/os_x_banner.html"]=function(){function e(e,t,r,n,o){var a=null,i=null,s="";try{s+='<mkt-banner dismiss="remember" name="mac-banner">\n<span>',s+=t.lookup("_")("Your Mac settings may prevent you from installing apps that do not come from the Mac App Store."),s+='</span>\n<a href="https://support.mozilla.org/kb/mac-security-settings-firefox-marketplace" target="_blank">',s+=t.lookup("_")("Learn how to change them."),s+="</a>\n</mkt-banner>",o(null,s)}catch(u){o(n.handleError(u,a,i))}}return{root:e}}(),e["_includes/personalization.html"]=function(){function e(e,t,r,n,o){var a=null,i=null,s="";try{s+='<nav class="personalization">\n<ul>\n<li><a href="',s+=t.lookup("url")("addons"),s+='">Addons</a></li>\n</ul>\n</nav>',o(null,s)}catch(u){o(n.handleError(u,a,i))}}return{root:e}}(),e["_includes/platform_selector.html"]=function(){function e(e,t,r,n,o){var a=null,i=null,s="";try{s+='<mkt-select class="compat-filter">\n<mkt-selected><p>',s+=n.suppressValue(e.getFilter("safe").call(t,t.lookup("_")("Show me everything for <mkt-selected-text></mkt-selected-text>")),e.autoesc),s+="</p></mkt-selected>\n<optgroup>",r=r.push();var u=n.memberLookup(n.contextOrFrameLookup(t,r,"compat_filter"),"DEVICE_FILTER_CHOICES",e.autoesc);if(u)for(var l=0;l<u.length;l++){var c=u[l];r.set("device",c),s+='<option value="',s+=n.suppressValue(n.memberLookup(c,0,e.autoesc),e.autoesc),s+='" ',n.memberLookup(n.contextOrFrameLookup(t,r,"compat_filter"),"isDeviceSelected",e.autoesc)(n.memberLookup(c,0,e.autoesc))&&(s+=" selected"),s+=">",s+=n.suppressValue(n.memberLookup(c,1,e.autoesc),e.autoesc),s+="</option>"}r=r.pop(),s+="</optgroup>\n</mkt-select>",o(null,s)}catch(p){o(n.handleError(p,a,i))}}return{root:e}}(),e["_includes/post_install_message.html"]=function(){function e(e,t,r,n,o){var a=null,i=null,s="";try{s+='<section class="post-install-message">\n<span class="post-install-message-installed">',s+=t.lookup("_")("Installed!"),s+='</span>\n<span class="post-install-message-how post-install-message-mac">',s+=t.lookup("_")("Launch this app from your <b>Applications</b> directory."),s+='</span>\n<span class="post-install-message-how post-install-message-windows">',s+=t.lookup("_")("Launch this app from your <b>Windows desktop</b> or <b>Start &#9658; All Programs</b>."),s+='</span>\n<span class="post-install-message-how post-install-message-linux">',s+=t.lookup("_")("Launch this app from your <b>dash</b>, <b>Application picker</b>, or <b>Applications menu</b>."),s+='</span>\n</section>\n<div id="purchased-message"></div>',o(null,s)}catch(u){o(n.handleError(u,a,i))}}return{root:e}}(),e["_includes/review_modal.html"]=function(){function e(e,t,r,n,o){var a=null,i=null,s="";try{e.getTemplate("ratings/add.html",function(a,i){return a?void o(a):void i.getExported(function(a,i){if(a)return void o(a);if(!i.hasOwnProperty("review_prompt"))return void o(new Error("cannot import 'review_prompt'"));var u=i.review_prompt;t.setVariable("review_prompt",u),s+=" ",s+=n.suppressValue(u(n.contextOrFrameLookup(t,r,"slug"),!0,n.contextOrFrameLookup(t,r,"existingReview")),e.autoesc),s+=" ",o(null,s)})})}catch(u){o(n.handleError(u,a,i))}}return{root:e}}(),e["_includes/reviews_sidebar.html"]=function(){function e(e,t,r,n,o){var a=null,i=null,s="";try{s+='<section class="review-buttons">\n<ul>',n.memberLookup(n.contextOrFrameLookup(t,r,"user"),"logged_in",e.autoesc)()&&n.memberLookup(n.memberLookup(n.contextOrFrameLookup(t,r,"response"),"user",e.autoesc),"has_rated",e.autoesc)?(s+='<li>\n<a class="button review-button" data-app="',s+=n.suppressValue(n.contextOrFrameLookup(t,r,"slug"),e.autoesc),s+='" data-edit-review\ndata-text="',s+=t.lookup("_")("Edit your Review"),s+='"\nhref="',s+=t.lookup("url")("app/ratings/edit",[n.contextOrFrameLookup(t,r,"slug")]),s+='">',s+=t.lookup("_")("Edit your review"),s+="</a>\n</li>"):(!n.memberLookup(n.contextOrFrameLookup(t,r,"user"),"logged_in",e.autoesc)()||n.memberLookup(n.memberLookup(n.contextOrFrameLookup(t,r,"response"),"user",e.autoesc),"can_rate",e.autoesc))&&(s+='<li>\n<a class="button review-button" data-app="',s+=n.suppressValue(n.contextOrFrameLookup(t,r,"slug"),e.autoesc),s+='"\nhref="',s+=t.lookup("url")("app/ratings/add",[n.contextOrFrameLookup(t,r,"slug")]),s+='">',s+=n.suppressValue(t.lookup("_")(n.memberLookup(n.contextOrFrameLookup(t,r,"user"),"logged_in",e.autoesc)()?"Write a review":"Sign in to review"),e.autoesc),s+="</a>\n</li>"),s+=" ",!n.contextOrFrameLookup(t,r,"is_review_listing")&&n.memberLookup(n.memberLookup(n.contextOrFrameLookup(t,r,"response"),"meta",e.autoesc),"total_count",e.autoesc)>0&&(s+='<li>\n<a class="button" data-app="',s+=n.suppressValue(n.contextOrFrameLookup(t,r,"slug"),e.autoesc),s+='"\nhref="',s+=t.lookup("url")("app/ratings",[n.contextOrFrameLookup(t,r,"slug")]),s+='">',s+=t.lookup("_")("Read all reviews"),s+="</a>\n</li>"),s+="</ul>\n</section>",o(null,s)}catch(u){o(n.handleError(u,a,i))}}return{root:e}}(),e["_includes/reviews_summary.html"]=function(){function e(e,t,r,n,o){var a=null,i=null,s="";try{s+=" ";var u;u=n.contextOrFrameLookup(t,r,"numberfmt")(n.memberLookup(n.memberLookup(n.contextOrFrameLookup(t,r,"response"),"meta",e.autoesc),"total_count",e.autoesc)),r.set("numReviews",u,!0),r.parent||(t.setVariable("numReviews",u),t.addExport("numReviews")),s+=" ",n.memberLookup(n.memberLookup(n.contextOrFrameLookup(t,r,"response"),"meta",e.autoesc),"total_count",e.autoesc)&&(s+='<div class="reviews-summary-large">\n<div class="stars-wrapper">',s+=n.suppressValue(n.contextOrFrameLookup(t,r,"stars")(n.memberLookup(n.memberLookup(n.contextOrFrameLookup(t,r,"response"),"info",e.autoesc),"average",e.autoesc),n.makeKeywordArgs({detailpage:!0})),e.autoesc),s+="</div>\n<p>",s+=t.lookup("_plural")("1 Review","{numReviews} Reviews",n.makeKeywordArgs({numReviews:n.contextOrFrameLookup(t,r,"numReviews"),n:n.memberLookup(n.memberLookup(n.contextOrFrameLookup(t,r,"response"),"meta",e.autoesc),"total_count",e.autoesc)})),s+="</p>\n</div>"),s+=" ",o(null,s)
}catch(l){o(n.handleError(l,a,i))}}return{root:e}}(),e["_macros/addon_tile.html"]=function(){function e(e,t,r,n,o){var a=null,i=null,s="";try{var u=n.makeMacro(["addon"],["is_detail"],function(o,a){r=r.push(),a=a||{},r.set("addon",o),r.set("is_detail",a.hasOwnProperty("is_detail")?a.is_detail:!1);var i="";i+=" ";var s;return s=n.contextOrFrameLookup(t,r,"is_detail")?"div":"a",r.set("tag",s,!0),r.parent||(t.setVariable("tag",s),t.addExport("tag")),i+="<",i+=n.suppressValue(n.contextOrFrameLookup(t,r,"tag"),e.autoesc),i+=' class="addon-tile"\ndata-content-type="addon" ',n.contextOrFrameLookup(t,r,"is_detail")||(i+=' href="',i+=t.lookup("url")("addon",[n.memberLookup(o,"slug",e.autoesc)]),i+='" '),i+=' data-slug="',i+=n.suppressValue(n.memberLookup(o,"slug",e.autoesc),e.autoesc),i+='">\n<div class="addon-tile-info">\n<h3 class="mkt-addon-name" title="',i+=n.suppressValue(n.memberLookup(o,"name",e.autoesc),e.autoesc),i+='" itemprop="name">',i+=n.suppressValue(n.memberLookup(o,"name",e.autoesc),e.autoesc),i+="</h3>",n.memberLookup(o,"author",e.autoesc)&&(i+='<div class="author mkt-product-author"\ntitle="',i+=n.suppressValue(n.memberLookup(o,"author",e.autoesc),e.autoesc),i+='" itemprop="creator">',i+=n.suppressValue(n.memberLookup(o,"author",e.autoesc),e.autoesc),i+="</div>"),i+='</div>\n<button class="button addon-install-btn">',i+=t.lookup("_")("Install add-on"),i+="</button>\n</",i+=n.suppressValue(n.contextOrFrameLookup(t,r,"tag"),e.autoesc),i+=">",r=r.pop(),new n.SafeString(i)});t.addExport("addon_tile"),t.setVariable("addon_tile",u),s+=" ",o(null,s)}catch(l){o(n.handleError(l,a,i))}}return{root:e}}(),e["_macros/app_tile.html"]=function(){function e(e,t,r,n,o){var a=null,i=null,s="";try{e.getTemplate("_macros/feed_app_tile.html",function(a,i){return a?void o(a):void i.getExported(function(a,i){if(a)return void o(a);if(!i.hasOwnProperty("feed_app_tile"))return void o(new Error("cannot import 'feed_app_tile'"));var u=i.feed_app_tile;t.setVariable("feed_app_tile",u),s+=" ",e.getTemplate("_macros/market_button.html",function(a,i){return a?void o(a):void i.getExported(function(a,i){if(a)return void o(a);if(!i.hasOwnProperty("market_button"))return void o(new Error("cannot import 'market_button'"));var l=i.market_button;t.setVariable("market_button",l),s+=" ",e.getTemplate("_macros/previews.html",function(a,i){return a?void o(a):void i.getExported(function(a,i){if(a)return void o(a);if(!i.hasOwnProperty("preview_tray"))return void o(new Error("cannot import 'preview_tray'"));var c=i.preview_tray;t.setVariable("preview_tray",c),s+=" ",e.getTemplate("_macros/stars.html",function(a,i){return a?void o(a):void i.getExported(function(a,i){if(a)return void o(a);if(!i.hasOwnProperty("stars"))return void o(new Error("cannot import 'stars'"));var p=i.stars;t.setVariable("stars",p),s+=" ";var d=n.makeMacro(["product"],["feed_app","is_detail","tray","src"],function(a,i){r=r.push(),i=i||{},r.set("product",a),r.set("feed_app",i.hasOwnProperty("feed_app")?i.feed_app:n.contextOrFrameLookup(t,r,"None")),r.set("is_detail",i.hasOwnProperty("is_detail")?i.is_detail:!1),r.set("tray",i.hasOwnProperty("tray")?i.tray:!1),r.set("src",i.hasOwnProperty("src")?i.src:n.contextOrFrameLookup(t,r,"None"));var s="";s+=" ",s+=" ",a=n.memberLookup(n.contextOrFrameLookup(t,r,"apps"),"transform",e.autoesc)(a),r.set("product",a,!0),r.parent||(t.setVariable("product",a),t.addExport("product")),s+=" ";var p;p=n.contextOrFrameLookup(t,r,"is_detail")?n.memberLookup(a,"name",e.autoesc):n.memberLookup(a,"short_name",e.autoesc)||n.memberLookup(a,"name",e.autoesc),r.set("name",p,!0),r.parent||(t.setVariable("name",p),t.addExport("name")),s+=" ";var d;if(d=n.contextOrFrameLookup(t,r,"is_detail")?"div":"a",r.set("tag",d,!0),r.parent||(t.setVariable("tag",d),t.addExport("tag")),s+="<",s+=n.suppressValue(n.contextOrFrameLookup(t,r,"tag"),e.autoesc),s+=' class="mkt-tile',s+=n.suppressValue(n.contextOrFrameLookup(t,r,"feed_app")?" feed-app c":"",e.autoesc),s+='"\ndata-slug="',s+=n.suppressValue(n.memberLookup(a,"slug",e.autoesc),e.autoesc),s+='" data-id="',s+=n.suppressValue(n.memberLookup(a,"id",e.autoesc),e.autoesc),s+='" ',n.contextOrFrameLookup(t,r,"is_detail")||(s+=' href="',s+=n.suppressValue(e.getFilter("urlparams").call(t,n.contextOrFrameLookup(t,r,"url")(n.memberLookup(a,"contentType",e.autoesc),[n.memberLookup(a,"key",e.autoesc)]),n.makeKeywordArgs({src:n.contextOrFrameLookup(t,r,"src")})),e.autoesc),s+='" '),s+=' data-content-type="',s+=n.suppressValue(n.memberLookup(a,"contentType",e.autoesc),e.autoesc),s+='" ',s+=n.suppressValue(n.contextOrFrameLookup(t,r,"is_detail")?"":'itemscope itemtype="http://schema.org/SoftwareApplication"',e.autoesc),s+='>\n<span class="mkt-product-heading">\n<h3 class="mkt-product-name" itemprop="name"\ntitle="',s+=n.suppressValue(e.getFilter("translate").call(t,n.contextOrFrameLookup(t,r,"name"),a),e.autoesc),s+='">',s+=n.suppressValue(e.getFilter("translate").call(t,n.contextOrFrameLookup(t,r,"name"),a),e.autoesc),s+='</h3>\n<span class="info mkt-tile-info">',n.memberLookup(a,"author",e.autoesc)&&n.contextOrFrameLookup(t,r,"is_detail")&&(s+=" ",s+='<div class="author mkt-product-author" itemprop="creator"\ntitle="',s+=n.suppressValue(n.memberLookup(a,"author",e.autoesc),e.autoesc),s+='">',n.contextOrFrameLookup(t,r,"is_detail")?(s+='<a href="',s+=n.suppressValue(e.getFilter("urlparams").call(t,n.contextOrFrameLookup(t,r,"url")("search"),n.makeKeywordArgs({author:n.memberLookup(a,"author",e.autoesc)})),e.autoesc),s+='">',s+=n.suppressValue(n.memberLookup(a,"author",e.autoesc),e.autoesc),s+="</a>"):(s+=" ",s+=n.suppressValue(n.memberLookup(a,"author",e.autoesc),e.autoesc),s+=" "),s+="</div>"),s+=" ",!n.contextOrFrameLookup(t,r,"is_detail")){s+='<ul class="app-tile-categories">',r=r.push();var f=n.memberLookup(a,"categories",e.autoesc);if(f)for(var m=0;m<f.length;m++){var g=f[m];r.set("cat",g),s+="<li>",s+=n.suppressValue(n.memberLookup(g,"name",e.autoesc),e.autoesc),s+="</li>"}r=r.pop(),s+="</ul>"}if(s+=" ",n.memberLookup(a,"isApp",e.autoesc)&&(s+=" ",s+=n.suppressValue(n.contextOrFrameLookup(t,r,"rating_link")(n.makeKeywordArgs({is_detail:n.contextOrFrameLookup(t,r,"is_detail")})),e.autoesc),s+=" "),s+=" ",s+=" ",n.memberLookup(a,"isWebsite",e.autoesc)&&n.contextOrFrameLookup(t,r,"is_detail")||(s+=" ",s+=n.suppressValue(l(a,n.makeKeywordArgs({data_attrs:{manifest_url:n.memberLookup(a,"manifest_url",e.autoesc),source:n.contextOrFrameLookup(t,r,"src"),slug:n.memberLookup(a,"slug",e.autoesc)}})),e.autoesc),s+=" "),s+="</span>",s+=n.suppressValue(n.contextOrFrameLookup(t,r,"deferred_icon")(n.memberLookup(n.memberLookup(a,"icons",e.autoesc),n.contextOrFrameLookup(t,r,"is_detail")&&"128"||"64",e.autoesc)||n.memberLookup(n.memberLookup(a,"icons",e.autoesc),"64",e.autoesc),e.getFilter("translate").call(t,n.contextOrFrameLookup(t,r,"name"),a)),e.autoesc),s+="</span>",s+=n.suppressValue(n.contextOrFrameLookup(t,r,"feed_app")?u(n.contextOrFrameLookup(t,r,"feed_app")):"",e.autoesc),s+="</",s+=n.suppressValue(n.contextOrFrameLookup(t,r,"tag"),e.autoesc),s+=">",n.contextOrFrameLookup(t,r,"is_detail")){s+=" ",n.memberLookup(a,"isWebsite",e.autoesc)&&(s+=" ",s+=n.suppressValue(l(a,n.makeKeywordArgs({data_attrs:{manifest_url:n.memberLookup(a,"manifest_url",e.autoesc),source:n.contextOrFrameLookup(t,r,"src"),slug:n.memberLookup(a,"slug",e.autoesc)}})),e.autoesc),s+=" "),s+=" ";var h;if(h=n.memberLookup(a,"loading",e.autoesc)?[]:n.contextOrFrameLookup(t,r,"app_notices")(a),r.set("notices",h,!0),r.parent||(t.setVariable("notices",h),t.addExport("notices")),s+=" ",n.memberLookup(n.contextOrFrameLookup(t,r,"notices"),"length",e.autoesc)){s+='<div class="app-notices full">',r=r.push();var v=n.contextOrFrameLookup(t,r,"notices");if(v)for(var b=0;b<v.length;b++){var k=v[b];r.set("notice",k),s+='<span class="',s+=n.suppressValue(n.memberLookup(k,1,e.autoesc),e.autoesc),s+='">',s+=n.suppressValue(n.memberLookup(k,0,e.autoesc),e.autoesc),s+="</span>"}r=r.pop(),s+="</div>"}s+=" "}return s+=" ",n.contextOrFrameLookup(t,r,"is_detail")&&(s+=" ",e.getTemplate("_includes/post_install_message.html",function(e,n){return e?void o(e):void n.render(t.getVariables(),r.push(),function(e,t){return e?void o(e):(s+=t,void(s+=" "))})})),s+=" ",n.contextOrFrameLookup(t,r,"tray")&&n.memberLookup(a,"previews",e.autoesc)&&n.contextOrFrameLookup(t,r,"len")(n.memberLookup(a,"previews",e.autoesc))&&(s+=" ",s+=n.suppressValue(c(a,n.contextOrFrameLookup(t,r,"src"),n.contextOrFrameLookup(t,r,"is_detail")),e.autoesc),s+=" "),s+=" ",r=r.pop(),new n.SafeString(s)});t.addExport("app_tile"),t.setVariable("app_tile",d),s+=" ";var f=n.makeMacro(["src","alt","width"],[],function(o,a,i,s){r=r.push(),s=s||{},r.set("src",o),r.set("alt",a),r.set("width",i);var u="";return u+=" ",n.contextOrFrameLookup(t,r,"imgAlreadyDeferred")(o)?(u+='<img class="icon" src="',u+=n.suppressValue(o,e.autoesc),u+='" title="',u+=n.suppressValue(a||"",e.autoesc),u+='" alt="',u+=n.suppressValue(a||"",e.autoesc),u+='"\nheight="',u+=n.suppressValue(i||64,e.autoesc),u+='" width="',u+=n.suppressValue(i||64,e.autoesc),u+='" itemprop="image">'):(u+=" ",u+='<img class="icon deferred" src="',u+=n.suppressValue(n.contextOrFrameLookup(t,r,"PLACEHOLDER_ICON"),e.autoesc),u+='"\ndata-src="',u+=n.suppressValue(o,e.autoesc),u+='" title="',u+=n.suppressValue(a||"",e.autoesc),u+='" alt="',u+=n.suppressValue(a||"",e.autoesc),u+='"\nheight="',u+=n.suppressValue(i||60,e.autoesc),u+='" width="',u+=n.suppressValue(i||60,e.autoesc),u+='" itemprop="image">'),u+=" ",r=r.pop(),new n.SafeString(u)});t.addExport("deferred_icon"),t.setVariable("deferred_icon",f),s+=" ";var m=n.makeMacro([],["is_detail"],function(o){r=r.push(),o=o||{},r.set("is_detail",o.hasOwnProperty("is_detail")?o.is_detail:!1);var a="";return a+='<span class="rating mkt-app-rating ',a+=n.suppressValue(n.memberLookup(n.memberLookup(n.contextOrFrameLookup(t,r,"app"),"ratings",e.autoesc),"count",e.autoesc)?"":"unrated",e.autoesc),a+='"\nitemscope itemprop="aggregateRating"\nitemtype="http://schema.org/AggregateRating">',a+=" ",n.contextOrFrameLookup(t,r,"is_detail")?(a+=" ",n.memberLookup(n.memberLookup(n.contextOrFrameLookup(t,r,"app"),"ratings",e.autoesc),"count",e.autoesc)?(a+='<a href="',a+=t.lookup("url")("app/ratings",[n.memberLookup(n.contextOrFrameLookup(t,r,"app"),"slug",e.autoesc)]),a+='" class="rating-link">',a+=n.suppressValue(p(n.memberLookup(n.memberLookup(n.contextOrFrameLookup(t,r,"app"),"ratings",e.autoesc),"average",e.autoesc)),e.autoesc),a+='<span class="cnt long">',a+=n.suppressValue(e.getFilter("numberfmt").call(t,n.memberLookup(n.memberLookup(n.contextOrFrameLookup(t,r,"app"),"ratings",e.autoesc),"count",e.autoesc)),e.autoesc),a+=" ",a+=t.lookup("_plural")("Review","Reviews",n.makeKeywordArgs({n:n.memberLookup(n.memberLookup(n.contextOrFrameLookup(t,r,"app"),"ratings",e.autoesc),"count",e.autoesc)})),a+="</span>\n</a>"):(a+='<span class="rating-link">\n<span class="cnt long">',a+=t.lookup("_")("Not yet reviewed"),a+="</span>\n</span>"),a+=" "):(a+=" ",a+=" ",a+=n.suppressValue(p(n.memberLookup(n.memberLookup(n.contextOrFrameLookup(t,r,"app"),"ratings",e.autoesc),"average",e.autoesc)),e.autoesc),a+=" "),a+="</span>",r=r.pop(),new n.SafeString(a)});t.addExport("rating_link"),t.setVariable("rating_link",m),s+=" ",o(null,s)})})})})})})})})}catch(u){o(n.handleError(u,a,i))}}return{root:e}}(),e["_macros/detail.html"]=function(){function e(e,t,r,n,o){var a=null,i=null,s="";try{e.getTemplate("_macros/app_tile.html",function(a,i){return a?void o(a):void i.getExported(function(a,i){if(a)return void o(a);if(!i.hasOwnProperty("app_tile"))return void o(new Error("cannot import 'app_tile'"));var u=i.app_tile;t.setVariable("app_tile",u),s+=" ";var l=n.makeMacro(["url","key","content_type"],["placeholder"],function(o,a,i,s){r=r.push(),s=s||{},r.set("url",o),r.set("key",a),r.set("content_type",i),r.set("placeholder",s.hasOwnProperty("placeholder")?s.placeholder:n.contextOrFrameLookup(t,r,"None"));var l="";return l+=" ",l+=n.suppressValue(e.getExtension("defer").run(t,n.makeKeywordArgs({url:o,key:a,id:i+"-data",as:i}),function(e){e||(e=function(e){if(e)throw e});var t="";return t+='<section class="main">\n<div class="subheader">\n<h1>&nbsp;</h1>\n</div>\n</section>',e(null,t),t},null,null,function(e){e||(e=function(e){if(e)throw e});var o="";return o+='<section class="main">\n<div class="subheader">\n<h1>',o+=t.lookup("_")("Oh no!"),o+='</h1>\n</div>\n</section>\n<section class="main full"><div>',403==n.contextOrFrameLookup(t,r,"error")?(o+="<p>",o+=t.lookup("_")("The requested content is not public."),o+="</p>"):404==n.contextOrFrameLookup(t,r,"error")?(o+="<p>",o+=t.lookup("_")("The requested content was not found."),o+="</p>"):451==n.contextOrFrameLookup(t,r,"error")?(o+="<p>",o+=t.lookup("_")("The requested content is not available for your region."),o+="</p>","app"==i&&(o+="<p>",o+=t.lookup("_")("You may wish to contact the developer if you would like to see a version of this app for your region."),o+="</p>"),o+=" "):(o+="<p>",o+=t.lookup("_")("A server error occurred. Please try again later."),o+="</p>"),o+="</div></section>",e(null,o),o}),!0&&e.autoesc),l+='<div class="detail" itemscope itemtype="http://schema.org/SoftwareApplication"\ndata-',l+=n.suppressValue(n.memberLookup(n.memberLookup(n.contextOrFrameLookup(t,r,"settings"),"model_prototypes",e.autoesc),i,e.autoesc),e.autoesc),l+='="',l+=n.suppressValue(a,e.autoesc),l+='">',l+=n.suppressValue(e.getExtension("defer").run(t,n.makeKeywordArgs({url:o,key:a,id:i+"-data",as:i}),function(o){o||(o=function(e){if(e)throw e});var a="";return a+='<section class="main full ',a+=n.suppressValue(i,e.autoesc),a+='-header product-header previews-expanded"><div>',a+=n.suppressValue(u(n.contextOrFrameLookup(t,r,"this"),n.makeKeywordArgs({is_detail:!0,tray:!0,src:n.memberLookup(n.memberLookup(n.contextOrFrameLookup(t,r,"trackingEvents"),"SRCS",e.autoesc),"detail",e.autoesc)})),e.autoesc),a+="</div></section>",o(null,a),a},function(o){o||(o=function(e){if(e)throw e});var a="";return a+='<section class="main full ',a+=n.suppressValue(i,e.autoesc),a+='-header product-header previews-expanded"><div>',n.contextOrFrameLookup(t,r,"placeholder")&&(a+=" ",a+=n.suppressValue(u(n.contextOrFrameLookup(t,r,"placeholder"),n.makeKeywordArgs({is_detail:!0,tray:!0})),e.autoesc),a+=" "),a+="</div></section>",o(null,a),a},null,function(e){e||(e=function(e){if(e)throw e});var t="";return t+=" ",e(null,t),t}),!0&&e.autoesc),l+=" ",r=r.pop(),new n.SafeString(l)});t.addExport("detail_header"),t.setVariable("detail_header",l),s+=" ",o(null,s)})})}catch(u){o(n.handleError(u,a,i))}}return{root:e}}(),e["_macros/emaillink.html"]=function(){function e(e,t,r,n,o){var a=null,i=null,s="";try{var u=n.makeMacro(["email"],["title","class"],function(o,a){r=r.push(),a=a||{},r.set("email",o),r.set("title",a.hasOwnProperty("title")?a.title:n.contextOrFrameLookup(t,r,"None")),r.set("class",a.hasOwnProperty("class")?a["class"]:n.contextOrFrameLookup(t,r,"None"));var i="";return i+="<a",n.contextOrFrameLookup(t,r,"class")&&(i+=' class="',i+=n.suppressValue(n.contextOrFrameLookup(t,r,"class"),e.autoesc),i+='"'),i+=' href="mailto:',i+=n.suppressValue(o,e.autoesc),i+='">',i+=n.suppressValue(n.contextOrFrameLookup(t,r,"title"),e.autoesc),i+="</a>",r=r.pop(),new n.SafeString(i)});t.addExport("emaillink"),t.setVariable("emaillink",u),s+=" ",o(null,s)}catch(l){o(n.handleError(l,a,i))}}return{root:e}}(),e["_macros/feed_app_tile.html"]=function(){function e(e,t,r,n,o){var a=null,i=null,s="";try{var u=n.makeMacro(["feed_app"],[],function(o,a){r=r.push(),a=a||{},r.set("feed_app",o);var i="";return i+='<div class="tile-footer ',i+=n.suppressValue(n.memberLookup(o,"type",e.autoesc),e.autoesc),i+='" ',n.memberLookup(o,"isQuote",e.autoesc)&&(i+='style="background: ',i+=n.suppressValue(n.memberLookup(o,"inline_color",e.autoesc),e.autoesc),i+=';"'),i+=">",n.memberLookup(o,"isDescription",e.autoesc)?(i+='<p class="desc">',i+=n.suppressValue(e.getFilter("safe").call(t,e.getFilter("translate").call(t,n.memberLookup(o,"description",e.autoesc),n.memberLookup(o,"description",e.autoesc))),e.autoesc),i+="</p>"):n.memberLookup(o,"isQuote",e.autoesc)?(i+=" ",n.memberLookup(o,"pullquote_rating",e.autoesc)&&(i+='<p class="stars large white stars-',i+=n.suppressValue(n.memberLookup(o,"pullquote_rating",e.autoesc),e.autoesc),i+='">',i+=n.suppressValue(n.memberLookup(o,"pullquote_rating",e.autoesc),e.autoesc),i+="</p>"),i+="<blockquote><p>",i+=n.suppressValue(e.getFilter("safe").call(t,e.getFilter("translate").call(t,n.memberLookup(o,"pullquote_text",e.autoesc),o)),e.autoesc),i+="</p></blockquote>",n.memberLookup(o,"pullquote_attribution",e.autoesc)&&(i+='<p class="quote-source">',i+=n.suppressValue(e.getFilter("format").call(t,t.lookup("_")("&mdash; {attribution}"),{attribution:e.getFilter("safe").call(t,n.memberLookup(o,"pullquote_attribution",e.autoesc))}),e.autoesc),i+="</p>"),i+=" "):n.memberLookup(o,"isPreview",e.autoesc)&&(i+='<p class="desc">',i+=n.suppressValue(e.getFilter("safe").call(t,e.getFilter("translate").call(t,n.memberLookup(o,"description",e.autoesc),o)),e.autoesc),i+='</p>\n<div class="preview-container ',i+=n.suppressValue(n.memberLookup(n.memberLookup(o,"preview",e.autoesc),"thumbnail_size",e.autoesc)&&n.memberLookup(n.memberLookup(n.memberLookup(o,"preview",e.autoesc),"thumbnail_size",e.autoesc),1,e.autoesc)>n.memberLookup(n.memberLookup(n.memberLookup(o,"preview",e.autoesc),"thumbnail_size",e.autoesc),0,e.autoesc)?"vertical":"",e.autoesc),i+='"\nstyle="background-color: ',i+=n.suppressValue(n.memberLookup(o,"inline_color",e.autoesc),e.autoesc),i+='">\n<div class="feed-app-preview deferred-background"\nstyle="background-image: url(',i+=n.suppressValue(n.contextOrFrameLookup(t,r,"PLACEHOLDER_ICON"),e.autoesc),i+=');"\ndata-src="',i+=n.suppressValue(n.memberLookup(n.memberLookup(o,"preview",e.autoesc),"thumbnail_url",e.autoesc),e.autoesc),i+='"></div>\n</div>'),i+="</div>",r=r.pop(),new n.SafeString(i)});t.addExport("feed_app_tile"),t.setVariable("feed_app_tile",u),s+=" ",o(null,s)}catch(l){o(n.handleError(l,a,i))}}return{root:e}}(),e["_macros/feed_item.html"]=function(){function e(e,t,r,n,o){var a=null,i=null,s="";try{e.getTemplate("_macros/app_tile.html",function(a,i){return a?void o(a):void i.getExported(function(a,i){if(a)return void o(a);if(!i.hasOwnProperty("app_tile"))return void o(new Error("cannot import 'app_tile'"));var u=i.app_tile;if(t.setVariable("app_tile",u),!i.hasOwnProperty("deferred_icon"))return void o(new Error("cannot import 'deferred_icon'"));var l=i.deferred_icon;t.setVariable("deferred_icon",l),s+=" ",e.getTemplate("_macros/stars.html",function(a,i){return a?void o(a):void i.getExported(function(a,i){if(a)return void o(a);if(!i.hasOwnProperty("stars"))return void o(new Error("cannot import 'stars'"));var c=i.stars;t.setVariable("stars",c),s+=" ";var p=n.makeMacro(["feed_app"],[],function(o,a){r=r.push(),a=a||{},r.set("feed_app",o);var i="";i+=" ",i+=" ",o=n.memberLookup(n.contextOrFrameLookup(t,r,"feed"),"transformer",e.autoesc)(o),r.set("feed_app",o,!0),r.parent||(t.setVariable("feed_app",o),t.addExport("feed_app")),i+=" ";var s;return s=e.getFilter("translate").call(t,n.memberLookup(o,"description",e.autoesc),o),r.set("desc",s,!0),r.parent||(t.setVariable("desc",s),t.addExport("desc")),i+='<a href="',i+=n.suppressValue(n.memberLookup(o,"landingUrl",e.autoesc),e.autoesc),i+='"\nclass="featured-app app-link" data-tracking="',i+=n.suppressValue(n.memberLookup(n.memberLookup(o,"app",e.autoesc),"slug",e.autoesc),e.autoesc),i+='">',n.memberLookup(o,"isIcon",e.autoesc)||n.memberLookup(o,"isImage",e.autoesc)?(i+='<section class="feed-item ',i+=n.suppressValue(n.memberLookup(o,"background_image",e.autoesc)?"deferred-background":"",e.autoesc),i+='" ',n.memberLookup(o,"isIcon",e.autoesc)&&(i+=" data-feed-app-type-icon "),i+=" ",n.contextOrFrameLookup(t,r,"desc")||n.memberLookup(o,"background_image",e.autoesc)?n.memberLookup(o,"background_image",e.autoesc)&&(i+=' data-feed-app-has-background\nstyle="background-image: url(',i+=n.suppressValue(n.contextOrFrameLookup(t,r,"PLACEHOLDER_ICON"),e.autoesc),i+=')"\ndata-src="',i+=n.suppressValue(n.memberLookup(o,"background_image",e.autoesc),e.autoesc),i+='" '):(i+=' style="background-color: ',i+=n.suppressValue(e.getFilter("hex2rgba").call(t,n.memberLookup(o,"inline_color",e.autoesc),".55"),e.autoesc),i+='" '),i+=">",n.memberLookup(o,"isIcon",e.autoesc)&&(i+='<ul class="app-icons single">\n<li>',i+=n.suppressValue(l(n.memberLookup(n.memberLookup(n.memberLookup(o,"app",e.autoesc),"icons",e.autoesc),64,e.autoesc),e.getFilter("translate").call(t,n.memberLookup(n.memberLookup(o,"app",e.autoesc),"name",e.autoesc),n.memberLookup(o,"app",e.autoesc))),e.autoesc),i+="</li>\n</ul>"),i+='<div class="feed-item-curve"\nstyle="background-color: ',i+=n.suppressValue(e.getFilter("hex2rgba").call(t,n.memberLookup(o,"inline_color",e.autoesc),".85"),e.autoesc),i+='">\n</div>\n<div class="feed-item-info" ',n.memberLookup(o,"isIcon",e.autoesc)&&(i+=' style="background-color: ',i+=n.suppressValue(e.getFilter("hex2rgba").call(t,n.memberLookup(o,"inline_color",e.autoesc),".85"),e.autoesc),i+='" '),i+='>\n<h1 class="feed-item-name">',i+=n.suppressValue(e.getFilter("translate").call(t,n.memberLookup(n.memberLookup(o,"app",e.autoesc),"name",e.autoesc),o),e.autoesc),i+='</h1>\n<p class="feed-item-author">',i+=n.suppressValue(n.memberLookup(n.memberLookup(o,"app",e.autoesc),"author",e.autoesc),e.autoesc),i+="</p>\n</div>\n</section>"):(i+=" ",i+=n.suppressValue(u(n.memberLookup(o,"app",e.autoesc),n.makeKeywordArgs({feed_app:o,src:n.memberLookup(o,"src",e.autoesc)})),e.autoesc),i+=" "),i+="</a>",r=r.pop(),new n.SafeString(i)});t.addExport("feed_app"),t.setVariable("feed_app",p),s+=" ";var d=n.makeMacro(["brand"],[],function(t,o){r=r.push(),o=o||{},r.set("brand",t);var a="";return a+='<a class="brand-header"\ndata-feed-color="',a+=n.suppressValue(n.memberLookup(t,"color",e.autoesc),e.autoesc),a+='" data-brand-type="',a+=n.suppressValue(n.memberLookup(t,"type",e.autoesc),e.autoesc),a+='"\nhref="',a+=n.suppressValue(n.memberLookup(t,"landingUrl",e.autoesc),e.autoesc),a+='">\n<h3>',a+=n.suppressValue(n.memberLookup(t,"name",e.autoesc),e.autoesc),a+="</h3>\n</a>",r=r.pop(),new n.SafeString(a)});t.addExport("brand_header"),t.setVariable("brand_header",d),s+=" ";var f=n.makeMacro(["brand"],[],function(o,a){r=r.push(),a=a||{},r.set("brand",o);var i="";i+=" ",o=n.memberLookup(n.contextOrFrameLookup(t,r,"feed"),"transformer",e.autoesc)(o),r.set("brand",o,!0),r.parent||(t.setVariable("brand",o),t.addExport("brand")),i+='<section class="feed-brand feed-layout-',i+=n.suppressValue(n.memberLookup(o,"layout",e.autoesc),e.autoesc),i+=' multi-app-tile c"\ndata-tracking="',i+=n.suppressValue(n.memberLookup(o,"slug",e.autoesc),e.autoesc),i+='">',i+=n.suppressValue(d(o),e.autoesc),i+="<ul ",n.memberLookup(o,"isGridLayout",e.autoesc)&&(i+='class="icon-app-grid"'),i+=">",r=r.push();var s=n.memberLookup(o,"apps",e.autoesc);if(s)for(var c=0;c<s.length;c++){var p=s[c];r.set("app",p),r.set("loop.index0",c),i+=" ",n.memberLookup(n.contextOrFrameLookup(t,r,"loop"),"index0",e.autoesc)<n.memberLookup(o,"maxApps",e.autoesc)&&(i+=" ",n.memberLookup(o,"isGridLayout",e.autoesc)?(i+='<li>\n<a class="icon-app-grid__app" href="',i+=n.suppressValue(e.getFilter("urlparams").call(t,n.contextOrFrameLookup(t,r,"url")("app",[n.memberLookup(p,"slug",e.autoesc)]),n.makeKeywordArgs({src:n.memberLookup(o,"src",e.autoesc)})),e.autoesc),i+='">',i+=n.suppressValue(l(n.memberLookup(n.memberLookup(p,"icons",e.autoesc),"64",e.autoesc)),e.autoesc),i+='<h3 class="icon-app-grid__name">',i+=n.suppressValue(n.memberLookup(p,"name",e.autoesc),e.autoesc),i+='</h3>\n<p class="icon-app-grid__price">',i+=n.suppressValue(n.memberLookup(p,"price",e.autoesc)&&"0.00"!=n.memberLookup(p,"price",e.autoesc)?n.memberLookup(p,"price_locale",e.autoesc):t.lookup("_")("Free"),e.autoesc),i+="</p>\n</a>\n</li>"):(i+=" ",i+=n.suppressValue(u(p,n.makeKeywordArgs({src:n.memberLookup(o,"src",e.autoesc)})),e.autoesc),i+=" "),i+=" "),i+=" "}return r=r.pop(),i+="</ul>",n.memberLookup(o,"app_count",e.autoesc)>n.memberLookup(o,"maxApps",e.autoesc)&&(i+='<a href="',i+=n.suppressValue(n.memberLookup(o,"landingUrl",e.autoesc),e.autoesc),i+='"\nclass="view-all-tab feed-view-all-tab">',i+=t.lookup("_")("View all"),i+="</a>"),i+="</section>",r=r.pop(),new n.SafeString(i)});t.addExport("brand"),t.setVariable("brand",f),s+=" ";var m=n.makeMacro(["coll"],[],function(o,a){r=r.push(),a=a||{},r.set("coll",o);var i="";return i+=" ",o=n.memberLookup(n.contextOrFrameLookup(t,r,"feed"),"transformer",e.autoesc)(o),r.set("coll",o,!0),r.parent||(t.setVariable("coll",o),t.addExport("coll")),i+=" ",n.memberLookup(o,"isCollPromo",e.autoesc)?(i+='<a href="',i+=n.suppressValue(n.memberLookup(o,"landingUrl",e.autoesc),e.autoesc),i+='">',i+=n.suppressValue(n.contextOrFrameLookup(t,r,"collection_promo")(o),e.autoesc),i+="</a>"):(i+=" ",i+=n.suppressValue(n.contextOrFrameLookup(t,r,"collection_listing")(o),e.autoesc),i+=" "),i+=" ",r=r.pop(),new n.SafeString(i)});t.addExport("collection"),t.setVariable("collection",m),s+=" ";var g=n.makeMacro(["coll"],[],function(o,a){r=r.push(),a=a||{},r.set("coll",o);var i="";i+=" ",o=n.memberLookup(n.contextOrFrameLookup(t,r,"feed"),"transformer",e.autoesc)(o),r.set("coll",o,!0),r.parent||(t.setVariable("coll",o),t.addExport("coll")),i+=" ";var s;if(s=e.getFilter("translate").call(t,n.memberLookup(o,"description",e.autoesc),o),r.set("desc",s,!0),r.parent||(t.setVariable("desc",s),t.addExport("desc")),i+='<section class="feed-item feed-collection ',i+=n.suppressValue(n.contextOrFrameLookup(t,r,"desc")?"has-desc":"",e.autoesc),i+=" ",i+=n.suppressValue(n.memberLookup(o,"background_image",e.autoesc)?"has-background deferred-background":"",e.autoesc),i+='"\ndata-tracking="',i+=n.suppressValue(n.memberLookup(o,"slug",e.autoesc),e.autoesc),i+='" ',n.memberLookup(o,"background_image",e.autoesc)?(i+=' style="background-image: url(',i+=n.suppressValue(n.contextOrFrameLookup(t,r,"PLACEHOLDER_ICON"),e.autoesc),i+=')"\ndata-src="',i+=n.suppressValue(n.memberLookup(o,"background_image",e.autoesc),e.autoesc),i+='" '):(i+=' style="background-color: ',i+=n.suppressValue(e.getFilter("hex2rgba").call(t,n.memberLookup(o,"inline_color",e.autoesc),".35"),e.autoesc),i+='" '),i+=">",!n.memberLookup(o,"background_image",e.autoesc)){i+='<ul class="app-icons ',i+=n.suppressValue(1==n.memberLookup(n.memberLookup(o,"apps",e.autoesc),"length",e.autoesc)?"single":"",e.autoesc),i+='">',r=r.push();var u=n.memberLookup(n.memberLookup(o,"apps",e.autoesc),"slice",e.autoesc)(0,3);if(u)for(var c=0;c<u.length;c++){var p=u[c];r.set("app",p),i+="<li>",i+=n.suppressValue(l(n.memberLookup(n.memberLookup(p,"icons",e.autoesc),64,e.autoesc),e.getFilter("translate").call(t,n.memberLookup(p,"name",e.autoesc),p)),e.autoesc),i+="</li>"}r=r.pop(),i+="</ul>"}return i+=" ",n.memberLookup(o,"background_image",e.autoesc)?(i+='<div class="feed-item-mask"\nstyle="background-color: ',i+=n.suppressValue(e.getFilter("hex2rgba").call(t,n.memberLookup(o,"inline_color",e.autoesc),".5"),e.autoesc),i+='"></div>\n<div class="feed-item-curve"\nstyle="background-color: ',i+=n.suppressValue(n.memberLookup(o,"inline_color",e.autoesc),e.autoesc),i+='">\n</div>'):(i+='<div class="feed-item-curve"\nstyle="background-color: ',i+=n.suppressValue(e.getFilter("hex2rgba").call(t,n.memberLookup(o,"inline_color",e.autoesc),".85"),e.autoesc),i+='">\n</div>'),i+='<div class="feed-item-info" ',n.memberLookup(o,"background_image",e.autoesc)&&n.contextOrFrameLookup(t,r,"desc")?(i+=' style="background-color: ',i+=n.suppressValue(n.memberLookup(o,"inline_color",e.autoesc),e.autoesc),i+='" '):(i+=' style="background-color: ',i+=n.suppressValue(e.getFilter("hex2rgba").call(t,n.memberLookup(o,"inline_color",e.autoesc),".85"),e.autoesc),i+='" '),i+='>\n<h1 class="feed-item-name">',i+=n.suppressValue(e.getFilter("safe").call(t,e.getFilter("translate").call(t,n.memberLookup(o,"name",e.autoesc),o)),e.autoesc),i+="</h1>",n.contextOrFrameLookup(t,r,"desc")&&(i+='<p class="feed-item-desc">',i+=n.suppressValue(n.contextOrFrameLookup(t,r,"desc"),e.autoesc),i+="</p>"),i+="</div>\n</section>",r=r.pop(),new n.SafeString(i)});t.addExport("collection_promo"),t.setVariable("collection_promo",g),s+=" ";var h=n.makeMacro(["coll"],[],function(o,a){r=r.push(),a=a||{},r.set("coll",o);var i="";return i+='<a class="collection-listing-header"\nhref="',i+=n.suppressValue(n.memberLookup(o,"landingUrl",e.autoesc),e.autoesc),i+='">\n<h3>',i+=n.suppressValue(e.getFilter("safe").call(t,e.getFilter("translate").call(t,n.memberLookup(o,"name",e.autoesc),o)),e.autoesc),i+="</h3>\n</a>",n.memberLookup(o,"description",e.autoesc)&&(i+='<p class="collection-listing-desc">',i+=n.suppressValue(e.getFilter("safe").call(t,e.getFilter("translate").call(t,n.memberLookup(o,"description",e.autoesc),o)),e.autoesc),i+="</p>"),i+=" ",r=r.pop(),new n.SafeString(i)});t.addExport("collection_listing_header"),t.setVariable("collection_listing_header",h),s+=" ";var v=n.makeMacro(["coll"],[],function(o,a){r=r.push(),a=a||{},r.set("coll",o);var i="";i+=" ",o=n.memberLookup(n.contextOrFrameLookup(t,r,"feed"),"transformer",e.autoesc)(o),r.set("coll",o,!0),r.parent||(t.setVariable("coll",o),t.addExport("coll")),i+='<section class="feed-collection feed-collection-listing feed-layout-list\nmulti-app-tile mkt-tile c"\ndata-tracking="',i+=n.suppressValue(n.memberLookup(o,"slug",e.autoesc),e.autoesc),i+='">',i+=n.suppressValue(h(o),e.autoesc),i+="<ul>",r=r.push();var s=n.memberLookup(o,"apps",e.autoesc);if(s)for(var l=0;l<s.length;l++){var c=s[l];r.set("app",c),r.set("loop.index0",l),i+=" ",n.memberLookup(n.contextOrFrameLookup(t,r,"loop"),"index0",e.autoesc)<n.memberLookup(o,"maxApps",e.autoesc)&&(i+=" ",i+=n.suppressValue(u(c,n.makeKeywordArgs({src:n.memberLookup(o,"src",e.autoesc)})),e.autoesc),i+=" "),i+=" "}return r=r.pop(),i+="</ul>",n.memberLookup(o,"app_count",e.autoesc)>n.memberLookup(o,"maxApps",e.autoesc)&&(i+='<a href="',i+=n.suppressValue(n.memberLookup(o,"landingUrl",e.autoesc),e.autoesc),i+='"\nclass="view-all-tab feed-view-all-tab">',i+=t.lookup("_")("View all"),i+="</a>"),i+="</section>",r=r.pop(),new n.SafeString(i)});t.addExport("collection_listing"),t.setVariable("collection_listing",v),s+=" ";var b=n.makeMacro(["feed_item"],[],function(o,a){r=r.push(),a=a||{},r.set("feed_item",o);var i="";if(i+=" ",i+=" ",o=n.memberLookup(n.contextOrFrameLookup(t,r,"feed"),"transformer",e.autoesc)(o),r.set("feed_item",o,!0),r.parent||(t.setVariable("feed_item",o),t.addExport("feed_item")),i+='<div class="feed-landing-wrapper" data-tracking="',i+=n.suppressValue(n.memberLookup(o,"slug",e.autoesc),e.autoesc),i+='" ',(n.memberLookup(o,"isBrand",e.autoesc)||n.memberLookup(o,"isCollPromo",e.autoesc))&&(i+=' data-feed-landing-color="',i+=n.suppressValue(n.memberLookup(o,"color",e.autoesc),e.autoesc),i+='" '),i+=" ",n.memberLookup(o,"background_image",e.autoesc)&&(i+="data-feed-landing-has-background-image"),i+=" ",n.memberLookup(o,"isCollPromo",e.autoesc)&&(i+="data-feed-landing-is-coll-promo"),i+=" ",n.memberLookup(o,"isCollListing",e.autoesc)&&(i+="data-feed-landing-is-coll-listing"),i+=" ",n.memberLookup(o,"isShelf",e.autoesc)&&(i+="data-shelf-landing"),i+=" ",n.memberLookup(o,"region",e.autoesc)&&(i+='data-shelf-landing-region="',i+=n.suppressValue(n.memberLookup(o,"region",e.autoesc),e.autoesc),i+='"'),i+=" ",n.memberLookup(o,"carrier",e.autoesc)&&(i+='data-shelf-landing-carrier="',i+=n.suppressValue(n.memberLookup(o,"carrier",e.autoesc),e.autoesc),i+='"'),i+=" ",n.memberLookup(o,"isBrand",e.autoesc)&&(i+="data-brand-landing"),i+='>\n<div class="feed-landing-header">\n<!--Mobile landing header.-->\n<div class="feed-landing-header-mobile">',i+=" ",n.memberLookup(o,"isShelf",e.autoesc)?(i+=" ",i+=n.suppressValue(n.contextOrFrameLookup(t,r,"shelf")(o,!0),e.autoesc),i+=" "):n.memberLookup(o,"isBrand",e.autoesc)?(i+=" ",i+=n.suppressValue(d(o),e.autoesc),i+=" "):(i+=" ",i+=n.suppressValue(n.memberLookup(o,"isCollPromo",e.autoesc)?g(o):h(o),e.autoesc),i+=" "),i+='</div>\n<!--Desktop landing header.-->\n<div class="feed-landing-header-desktop">',n.memberLookup(o,"isCollection",e.autoesc)&&!n.memberLookup(o,"background_image",e.autoesc)){i+='<ul class="feed-landing-app-icons">',r=r.push();
var s=n.memberLookup(o,"apps",e.autoesc);if(s)for(var c=0;c<s.length;c++){var f=s[c];r.set("app",f),r.set("loop.index0",c),i+=" ",n.memberLookup(n.contextOrFrameLookup(t,r,"loop"),"index0",e.autoesc)<3&&(i+="<li>",i+=n.suppressValue(l(n.memberLookup(n.memberLookup(f,"icons",e.autoesc),64,e.autoesc),e.getFilter("translate").call(t,n.memberLookup(f,"name",e.autoesc),n.memberLookup(p,"app",e.autoesc))),e.autoesc),i+="</li>"),i+=" "}r=r.pop(),i+="</ul>"}if(i+='<div class="feed-curve feed-landing-curve ',i+=n.suppressValue(n.memberLookup(o,"isBrand",e.autoesc)?"brand-landing-curve":"",e.autoesc),i+='">',n.memberLookup(o,"isBrand",e.autoesc)?(i+='<div class="brand-landing-header">\n<div class="brand-landing-icon" data-brand-type="',i+=n.suppressValue(n.memberLookup(o,"type",e.autoesc),e.autoesc),i+='">\n<h3></h3>\n</div>\n<h1>',i+=n.suppressValue(n.memberLookup(o,"name",e.autoesc),e.autoesc),i+="</h1>\n</div>"):(i+=" ",n.memberLookup(o,"background_image",e.autoesc)&&(i+='<img class="feed-landing-bg-image"\nsrc="',i+=n.suppressValue(n.memberLookup(o,"background_image_landing",e.autoesc)||n.memberLookup(o,"background_image",e.autoesc),e.autoesc),i+='"\nalt="" draggable="false" itemprop="contentURL">'),i+='<div class="feed-landing-header-inner">\n<h1>',i+=n.suppressValue(n.memberLookup(o,"name",e.autoesc),e.autoesc),i+="</h1>",n.memberLookup(o,"description",e.autoesc)&&(i+='<p class="feed-landing-description">',i+=n.suppressValue(e.getFilter("safe").call(t,e.getFilter("translate").call(t,n.memberLookup(o,"description",e.autoesc),o)),e.autoesc),i+="</p>"),i+="</div>"),i+="</div>\n</div>\n</div>\n<!--App list.-->",n.memberLookup(n.memberLookup(n.memberLookup(o,"apps",e.autoesc),0,e.autoesc),"group",e.autoesc)){i+=" ",i+=" ",r=r.push();var m=n.memberLookup(n.contextOrFrameLookup(t,r,"feed"),"group_apps",e.autoesc)(n.memberLookup(o,"apps",e.autoesc));if(m)for(var v=0;v<m.length;v++){var b=m[v];r.set("group",b),i+='<section class="main full feed-landing-apps">\n<div>\n<h3 class="collection-group-header">',i+=n.suppressValue(n.memberLookup(b,"name",e.autoesc),e.autoesc),i+='</h3>\n<ul class="app-list collection-group">',r=r.push();var k=n.memberLookup(b,"apps",e.autoesc);if(k)for(var y=0;y<k.length;y++){var _=k[y];r.set("app",_),i+='<li class="app-list-app">',i+=n.suppressValue(u(_,n.makeKeywordArgs({src:n.memberLookup(o,"src",e.autoesc)})),e.autoesc),i+="</li>"}r=r.pop(),i+="</ul>\n</div>\n</section>"}r=r.pop(),i+=" "}else{i+='<section class="main full feed-landing-apps">\n<div>\n<ul class="app-list">',r=r.push();var w=n.memberLookup(o,"apps",e.autoesc);if(w)for(var x=0;x<w.length;x++){var L=w[x];r.set("app",L),i+='<li class="app-list-app">',i+=n.suppressValue(u(L,n.makeKeywordArgs({src:n.memberLookup(o,"src",e.autoesc)})),e.autoesc),i+="</li>"}r=r.pop(),i+="</ul>\n</div>\n</section>"}return i+="</div>",r=r.pop(),new n.SafeString(i)});t.addExport("collection_landing"),t.setVariable("collection_landing",b),s+=" ";var k=n.makeMacro(["shelf","landing"],[],function(o,a,i){r=r.push(),i=i||{},r.set("shelf",o),r.set("landing",a);var s="";return s+=" ",o=n.memberLookup(n.contextOrFrameLookup(t,r,"feed"),"transformer",e.autoesc)(o),r.set("shelf",o,!0),r.parent||(t.setVariable("shelf",o),t.addExport("shelf")),s+='<section class="feed-item shelf ',s+=n.suppressValue(a?"shelf-landing":"",e.autoesc),s+=' deferred-background"\nstyle="background-image: url(',s+=n.suppressValue(n.contextOrFrameLookup(t,r,"PLACEHOLDER_ICON"),e.autoesc),s+=')"\ndata-src="',s+=n.suppressValue(a?n.memberLookup(o,"background_image_landing",e.autoesc):n.memberLookup(o,"background_image",e.autoesc),e.autoesc),s+='"\ndata-carrier="',s+=n.suppressValue(n.memberLookup(o,"carrier",e.autoesc),e.autoesc),s+='" data-region="',s+=n.suppressValue(n.memberLookup(o,"region",e.autoesc),e.autoesc),s+='">\n<div class="feed-item-curve"></div>\n<div class="info">\n<h1 class="feed-item-name">',s+=n.suppressValue(e.getFilter("safe").call(t,e.getFilter("translate").call(t,n.memberLookup(o,"name",e.autoesc),o)),e.autoesc),s+="</h1>\n</div>\n</section>",r=r.pop(),new n.SafeString(s)});t.addExport("shelf"),t.setVariable("shelf",k),s+=" ";var y=n.makeMacro(["obj"],[],function(o,a){r=r.push(),a=a||{},r.set("obj",o);var i="";i+=" ";var s;return s=n.memberLookup(n.contextOrFrameLookup(t,r,"feed"),"transformer",e.autoesc)(n.memberLookup(o,n.memberLookup(o,"item_type",e.autoesc),e.autoesc)),r.set("feed_item",s,!0),r.parent||(t.setVariable("feed_item",s),t.addExport("feed_item")),i+=" ",n.memberLookup(n.contextOrFrameLookup(t,r,"feed_item"),"isApp",e.autoesc)?(i+=" ",i+=n.suppressValue(p(n.contextOrFrameLookup(t,r,"feed_item")),e.autoesc),i+=" "):n.memberLookup(n.contextOrFrameLookup(t,r,"feed_item"),"isBrand",e.autoesc)?(i+=" ",i+=n.suppressValue(f(n.contextOrFrameLookup(t,r,"feed_item")),e.autoesc),i+=" "):n.memberLookup(n.contextOrFrameLookup(t,r,"feed_item"),"isCollection",e.autoesc)?(i+=" ",i+=n.suppressValue(m(n.contextOrFrameLookup(t,r,"feed_item")),e.autoesc),i+=" "):(i+='<a href="',i+=n.suppressValue(n.memberLookup(n.contextOrFrameLookup(t,r,"feed_item"),"landingUrl",e.autoesc),e.autoesc),i+='"\nclass="op-shelf" data-tracking="',i+=n.suppressValue(n.memberLookup(n.memberLookup(o,"shelf",e.autoesc),"slug",e.autoesc),e.autoesc),i+='">',i+=n.suppressValue(k(n.contextOrFrameLookup(t,r,"feed_item")),e.autoesc),i+="</a>"),i+=" ",r=r.pop(),new n.SafeString(i)});t.addExport("feed_item"),t.setVariable("feed_item",y),s+=" ",o(null,s)})})})})}catch(u){o(n.handleError(u,a,i))}}return{root:e}}(),e["_macros/feed_websites.html"]=function(){function e(e,t,r,n,o){var a=null,i=null,s="";try{e.getTemplate("_macros/app_tile.html",function(a,i){return a?void o(a):void i.getExported(function(a,i){if(a)return void o(a);if(!i.hasOwnProperty("deferred_icon"))return void o(new Error("cannot import 'deferred_icon'"));var u=i.deferred_icon;t.setVariable("deferred_icon",u),s+=" ",e.getTemplate("_macros/market_button.html",function(a,i){return a?void o(a):void i.getExported(function(a,i){if(a)return void o(a);if(!i.hasOwnProperty("market_button"))return void o(new Error("cannot import 'market_button'"));var l=i.market_button;t.setVariable("market_button",l),s+=" ";var c=n.makeMacro(["websites"],[],function(o,a){r=r.push(),a=a||{},r.set("websites",o);var i="";if(i+=" ",o){i+='<section class="feed-item-item feed-item-website feed-item-website-tabs">\n<ol>',r=r.push();var s=o;if(s)for(var l=0;l<s.length;l++){var c=s[l];r.set("website",c),i+=" ",c=n.memberLookup(n.contextOrFrameLookup(t,r,"apps"),"transform",e.autoesc)(c),r.set("website",c,!0),r.parent||(t.setVariable("website",c),t.addExport("website")),i+=" ";var p;p=e.getFilter("translate").call(t,n.memberLookup(c,"name",e.autoesc),c),r.set("name",p,!0),r.parent||(t.setVariable("name",p),t.addExport("name")),i+='<li class="mkt-tile">\n<button class="feed-item-website-tabs-tab">',i+=n.suppressValue(u(n.memberLookup(n.memberLookup(c,"icons",e.autoesc),"64",e.autoesc),n.contextOrFrameLookup(t,r,"name")),e.autoesc),i+='</button>\n<a href="',i+=n.suppressValue(n.memberLookup(c,"url",e.autoesc),e.autoesc),i+='" class="feed-item-website-tabs-content mkt-website-link" data-product="',i+=n.suppressValue(e.getFilter("json").call(t,c),e.autoesc),i+='">\n<h1>',i+=n.suppressValue(n.contextOrFrameLookup(t,r,"name"),e.autoesc),i+="</h1>\n<p>",i+=t.lookup("_")("Visit this top site!"),i+="</p>\n</a>\n</li>"}r=r.pop(),i+="</ol>\n</section>"}return i+=" ",r=r.pop(),new n.SafeString(i)});t.addExport("website_tabs"),t.setVariable("website_tabs",c),s+=" ";var p=n.makeMacro(["websites"],[],function(o,a){r=r.push(),a=a||{},r.set("websites",o);var i="";if(i+=" ",o){i+='<div class="feed-item-item feed-item-website feed-item-website-carousel">\n<ol>',r=r.push();var s=o;if(s)for(var c=0;c<s.length;c++){var p=s[c];r.set("website",p),i+=" ",p=n.memberLookup(n.contextOrFrameLookup(t,r,"apps"),"transform",e.autoesc)(p),r.set("website",p,!0),r.parent||(t.setVariable("website",p),t.addExport("website")),i+=" ";var d;d=e.getFilter("translate").call(t,n.memberLookup(p,"name",e.autoesc),p),r.set("name",d,!0),r.parent||(t.setVariable("name",d),t.addExport("name")),i+='<li>\n<a class="mkt-tile mkt-website-link" data-slug="',i+=n.suppressValue(n.memberLookup(p,"slug",e.autoesc),e.autoesc),i+='" data-id="',i+=n.suppressValue(n.memberLookup(p,"id",e.autoesc),e.autoesc),i+='" href="',i+=n.suppressValue(n.memberLookup(p,"url",e.autoesc),e.autoesc),i+='" data-content-type="',i+=n.suppressValue(n.memberLookup(p,"contentType",e.autoesc),e.autoesc),i+='" data-product="',i+=n.suppressValue(e.getFilter("json").call(t,p),e.autoesc),i+='">\n<span class="mkt-app-heading">',i+=n.suppressValue(u(n.memberLookup(n.memberLookup(p,"icons",e.autoesc),"64",e.autoesc),n.contextOrFrameLookup(t,r,"name")),e.autoesc),i+='<span class="info mkt-tile-info">\n<h3 class="mkt-app-name" title="',i+=n.suppressValue(n.contextOrFrameLookup(t,r,"name"),e.autoesc),i+='">',i+=n.suppressValue(n.contextOrFrameLookup(t,r,"name"),e.autoesc),i+="</h3>",i+=n.suppressValue(l(p,n.makeKeywordArgs({data_attrs:{manifest_url:n.memberLookup(p,"manifest_url",e.autoesc),source:n.contextOrFrameLookup(t,r,"src"),slug:n.memberLookup(p,"slug",e.autoesc)}})),e.autoesc),i+="</span>\n</span>\n</a>\n</li>"}r=r.pop(),i+='</ol>\n<a class="feed-item-website-carousel-next" href="#">\n<span>',i+=t.lookup("_")("Show me another site"),i+='</span>\n<span class="feed-item-website-carousel-counter"></span>\n</a>\n</div>'}return i+=" ",r=r.pop(),new n.SafeString(i)});t.addExport("website_carousel"),t.setVariable("website_carousel",p),s+=" ",o(null,s)})})})})}catch(u){o(n.handleError(u,a,i))}}return{root:e}}(),e["_macros/forms.html"]=function(){function e(e,t,r,n,o){var a=null,i=null,s="";try{var u=n.makeMacro([],[],function(e){r=r.push(),e=e||{};var t="";return t+='<input type="text" name="sprout" value="potato" class="potato-captcha">\n<input type="text" name="tuber" class="potato-captcha">',r=r.pop(),new n.SafeString(t)});t.addExport("potato_captcha"),t.setVariable("potato_captcha",u),s+=" ",o(null,s)}catch(l){o(n.handleError(l,a,i))}}return{root:e}}(),e["_macros/market_button.html"]=function(){function e(e,t,r,n,o){var a=null,i=null,s="";try{var u=n.makeMacro(["product","data_attrs"],["isGame"],function(o,a,i){r=r.push(),i=i||{},r.set("product",o),r.set("data_attrs",a),r.set("isGame",i.hasOwnProperty("isGame")?i.isGame:!1);var s="";s+=" ",o=n.memberLookup(n.contextOrFrameLookup(t,r,"buttons"),"transform",e.autoesc)(o),r.set("product",o,!0),r.parent||(t.setVariable("product",o),t.addExport("product")),s+=" ";var u;return u="mkt-app-button--install install",r.set("app_classes",u,!0),r.parent||(t.setVariable("app_classes",u),t.addExport("app_classes")),s+='<button class="button mkt-app-button ',s+=n.suppressValue(n.memberLookup(o,"isApp",e.autoesc)?n.contextOrFrameLookup(t,r,"app_classes"):"",e.autoesc),s+=" ",s+=n.suppressValue(n.memberLookup(o,"installed",e.autoesc)?"launch":"",e.autoesc),s+=" ",s+=n.suppressValue(n.memberLookup(o,"payment_required",e.autoesc)?"paid":"",e.autoesc),s+=" ",s+=n.suppressValue(n.memberLookup(o,"incompatible",e.autoesc)?"incompatible":"",e.autoesc),s+='" ',s+=n.suppressValue(e.getFilter("make_data_attrs").call(t,a),e.autoesc),s+=" ",s+=n.suppressValue(n.memberLookup(o,"disabled",e.autoesc)?"disabled":"",e.autoesc),s+=' data-product="',s+=n.suppressValue(e.getFilter("json").call(t,o),e.autoesc),s+='" ',n.contextOrFrameLookup(t,r,"isGame")&&(s+='data-is-game="true"'),s+=" ",n.memberLookup(o,"isWebsite",e.autoesc)&&(s+='href="',s+=n.suppressValue(n.memberLookup(o,"mobile_url",e.autoesc)||n.memberLookup(o,"url",e.autoesc),e.autoesc),s+='"'),s+=" ",n.memberLookup(o,"manifest_url",e.autoesc)&&(s+='data-manifest_url="',s+=n.suppressValue(n.memberLookup(o,"manifest_url",e.autoesc),e.autoesc),s+='"'),s+='>\n<em>\n<span class="mkt-app-button-text">',s+=n.suppressValue(n.memberLookup(n.contextOrFrameLookup(t,r,"buttons"),"getBtnText",e.autoesc)(o,n.contextOrFrameLookup(t,r,"isGame")),e.autoesc),s+='</span>\n<span class="mkt-app-button-spinner spin"></span>\n</em>\n</button>',r=r.pop(),new n.SafeString(s)});t.addExport("market_button"),t.setVariable("market_button",u),s+=" ",o(null,s)}catch(l){o(n.handleError(l,a,i))}}return{root:e}}(),e["_macros/more_button.html"]=function(){function e(e,t,r,n,o){var a=null,i=null,s="";try{var u=n.makeMacro(["next_page_url","li_classes","text"],[],function(o,a,i,s){r=r.push(),s=s||{},r.set("next_page_url",o),r.set("li_classes",a),r.set("text",i);var u="";return u+='<li class="loadmore ',u+=n.suppressValue(a,e.autoesc),u+='">\n<button class="button" data-url="',u+=n.suppressValue(e.getFilter("safe").call(t,n.contextOrFrameLookup(t,r,"apiHost")(o)+o),e.autoesc),u+='">',u+=n.suppressValue(i||t.lookup("_")("Load more"),e.autoesc),u+="</button>\n</li>",r=r.pop(),new n.SafeString(u)});t.addExport("more_button"),t.setVariable("more_button",u),s+=" ",o(null,s)}catch(l){o(n.handleError(l,a,i))}}return{root:e}}(),e["_macros/previews.html"]=function(){function e(e,t,r,n,o){var a=null,i=null,s="";try{var u=n.makeMacro(["app","src","is_detail"],[],function(o,a,i,s){r=r.push(),s=s||{},r.set("app",o),r.set("src",a),r.set("is_detail",i);var u="";return u+=" ",u+=n.suppressValue(n.contextOrFrameLookup(t,r,"_preview_tray")(o,a,i,!1),e.autoesc),u+=" ",i&&(u+=" ",u+=n.suppressValue(n.contextOrFrameLookup(t,r,"_preview_tray")(o,a,i,!0),e.autoesc),u+=" "),u+=" ",r=r.pop(),new n.SafeString(u)});t.addExport("preview_tray"),t.setVariable("preview_tray",u),s+=" ";var l=n.makeMacro(["app","src","is_detail","is_desktop"],[],function(o,a,i,s,u){r=r.push(),u=u||{},r.set("app",o),r.set("src",a),r.set("is_detail",i),r.set("is_desktop",s);var l="";l+='<div class="previews-tray full" ',s&&(l+='data-previews-desktop="true"'),l+=" ",i&&(l+='data-previews-detail="true"'),l+='>\n<div class="previews-slider">\n<ul class="previews-content">',r=r.push();var c=n.memberLookup(o,"previews",e.autoesc);if(c)for(var p=0;p<c.length;p++){var d=c[p];r.set("preview",d),l+=" ","video/webm"==n.memberLookup(d,"filetype",e.autoesc)?(l+='<li itemscope itemtype="http://schema.org/VideoObject">\n<a class="previews-thumbnail">\n<video src="',l+=n.suppressValue(n.memberLookup(d,"image_url",e.autoesc),e.autoesc),l+='" controls\nitemprop="contentURL"\npreload="metadata">\n</video>\n</a>\n</li>'):(l+='<li itemscope itemtype="http://schema.org/ImageObject">\n<a class="previews-thumbnail" href="',l+=n.suppressValue(n.memberLookup(d,"image_url",e.autoesc),e.autoesc),l+='">',l+=n.suppressValue(n.contextOrFrameLookup(t,r,"deferred_preview")(s?n.memberLookup(d,"image_url",e.autoesc):n.memberLookup(d,"thumbnail_url",e.autoesc)),e.autoesc),l+="</a>\n</li>"),l+=" "}return r=r.pop(),l+='</ul>\n<div class="previews-bars"></div>\n</div>\n</div>',r=r.pop(),new n.SafeString(l)});t.setVariable("_preview_tray",l),s+=" ";var c=n.makeMacro(["src"],[],function(o,a){r=r.push(),a=a||{},r.set("src",o);var i="";return i+=" ",n.contextOrFrameLookup(t,r,"imgAlreadyDeferred")(o)?(i+='<img src="',i+=n.suppressValue(o,e.autoesc),i+='" alt="',i+=t.lookup("_")("{app_name} screenshot",n.makeKeywordArgs({app_name:n.memberLookup(n.contextOrFrameLookup(t,r,"app"),"name",e.autoesc)})),i+='"\ndraggable="false" itemprop="contentURL">'):(i+=" ",i+='<img class="deferred" src="',i+=n.suppressValue(n.contextOrFrameLookup(t,r,"PLACEHOLDER_PREVIEW"),e.autoesc),i+='"\ndata-src="',i+=n.suppressValue(o,e.autoesc),i+='" alt="',i+=t.lookup("_")("{app_name} screenshot",n.makeKeywordArgs({app_name:n.memberLookup(n.contextOrFrameLookup(t,r,"app"),"name",e.autoesc)})),i+='"\ndraggable="false" itemprop="contentURL">'),i+=" ",r=r.pop(),new n.SafeString(i)});t.addExport("deferred_preview"),t.setVariable("deferred_preview",c),s+=" ",o(null,s)}catch(p){o(n.handleError(p,a,i))}}return{root:e}}(),e["_macros/review.html"]=function(){function e(e,t,r,n,o){var a=null,i=null,s="";try{e.getTemplate("_macros/stars.html",function(a,i){return a?void o(a):void i.render(t.getVariables(),r.push(),function(a,i){if(a)return void o(a);s+=i,s+=" ";var u=n.makeMacro(["this"],["detailpage","slug","current_version"],function(o,a){r=r.push(),a=a||{},r.set("this",o),r.set("detailpage",a.hasOwnProperty("detailpage")?a.detailpage:!1),r.set("slug",a.hasOwnProperty("slug")?a.slug:n.contextOrFrameLookup(t,r,"slug")),r.set("current_version",a.hasOwnProperty("current_version")?a.current_version:n.contextOrFrameLookup(t,r,"None"));var i="";return i+='<li class="review c"\ndata-review-has-flagged="',i+=n.suppressValue(n.memberLookup(o,"has_flagged",e.autoesc),e.autoesc),i+='"\ndata-review-is-author="',i+=n.suppressValue(n.memberLookup(o,"is_author",e.autoesc),e.autoesc),i+='"\ndata-report-uri="',i+=n.suppressValue(n.memberLookup(o,"report_spam",e.autoesc),e.autoesc),i+='" data-rating="',i+=n.suppressValue(n.memberLookup(o,"rating",e.autoesc),e.autoesc),i+='"\nitemprop="review" itemscope itemtype="http://schema.org/Review">\n<span class="review-author" itemprop="author">',i+=n.suppressValue(n.memberLookup(n.memberLookup(o,"user",e.autoesc),"display_name",e.autoesc),e.autoesc),i+="</span>",i+=n.suppressValue(n.contextOrFrameLookup(t,r,"stars")(n.memberLookup(o,"rating",e.autoesc),n.makeKeywordArgs({detailpage:n.contextOrFrameLookup(t,r,"detailpage"),aggregate:!1})),e.autoesc),i+=" ",n.memberLookup(o,"version",e.autoesc)&&n.contextOrFrameLookup(t,r,"current_version")&&n.contextOrFrameLookup(t,r,"current_version")!=n.memberLookup(n.memberLookup(o,"version",e.autoesc),"version",e.autoesc)&&(i+='<p class="review-previous-version">',i+=t.lookup("_")("For previous version {version}",n.makeKeywordArgs({version:n.memberLookup(n.memberLookup(o,"version",e.autoesc),"version",e.autoesc)})),i+="</p>"),i+='<div class="review-body" itemprop="reviewBody">',i+=n.suppressValue(e.getFilter("nl2br").call(t,e.getFilter("escape").call(t,n.memberLookup(o,"body",e.autoesc))),e.autoesc),i+="</div>",n.contextOrFrameLookup(t,r,"detailpage")||(i+='<ul class="review-actions">',(n.memberLookup(o,"is_author",e.autoesc)||n.memberLookup(n.contextOrFrameLookup(t,r,"user"),"get_permission",e.autoesc)("reviewer"))&&(i+='<li>\n<a class="review-button" data-edit-review data-text="',i+=t.lookup("_")("Edit"),i+='"\nhref="',i+=n.suppressValue(e.getFilter("urlparams").call(t,n.contextOrFrameLookup(t,r,"url")("app/ratings/edit",[n.contextOrFrameLookup(t,r,"slug")]),n.makeKeywordArgs({review:n.contextOrFrameLookup(t,r,"getReviewId")(n.memberLookup(o,"resource_uri",e.autoesc))})),e.autoesc),i+='"\ndata-href="',i+=n.suppressValue(n.memberLookup(o,"resource_uri",e.autoesc),e.autoesc),i+='">',i+=t.lookup("_")("Edit"),i+='</a>\n</li>\n<li>\n<a class="delete post" data-action="delete" href="#"\ndata-app="',i+=n.suppressValue(n.contextOrFrameLookup(t,r,"slug"),e.autoesc),i+='" ',i+=' data-href="',i+=n.suppressValue(n.memberLookup(o,"resource_uri",e.autoesc),e.autoesc),i+='">',i+=t.lookup("_")("Delete"),i+="</a>\n</li>"),i+='<li class="review-flag">\n<a class="post" data-action="report" href="#">',i+=t.lookup("_")("Report"),i+='</a>\n</li>\n<li class="review-has-flagged">',i+=t.lookup("_")("Flagged for review"),i+='</li>\n</ul>\n<time itemprop="datePublished">',i+=n.suppressValue(e.getFilter("date").call(t,n.memberLookup(o,"created",e.autoesc)),e.autoesc),i+="</time>"),i+="</li>",r=r.pop(),new n.SafeString(i)});t.addExport("review"),t.setVariable("review",u),s+=" ",o(null,s)})})}catch(u){o(n.handleError(u,a,i))}}return{root:e}}(),e["_macros/stars.html"]=function(){function e(e,t,r,n,o){var a=null,i=null,s="";try{var u=n.makeMacro(["rating"],["detailpage","aggregate"],function(o,a){r=r.push(),a=a||{},r.set("rating",o),r.set("detailpage",a.hasOwnProperty("detailpage")?a.detailpage:!1),r.set("aggregate",a.hasOwnProperty("aggregate")?a.aggregate:!0);var i="";i+=" ",o=e.getFilter("round").call(t,o),r.set("rating",o,!0),r.parent||(t.setVariable("rating",o),t.addExport("rating")),i+=" ";var s;return s=n.contextOrFrameLookup(t,r,"aggregate")?"ratingValue":"reviewRating",r.set("rating_itemprop",s,!0),r.parent||(t.setVariable("rating_itemprop",s),t.addExport("rating_itemprop")),i+='<meta itemprop="worstRating" content="1">\n<span class="stars',i+=n.suppressValue(n.contextOrFrameLookup(t,r,"detailpage")?" large":"",e.autoesc),i+=" stars-",i+=n.suppressValue(o,e.autoesc),i+='" title="',i+=n.suppressValue(n.contextOrFrameLookup(t,r,"title"),e.autoesc),i+='">',i+=t.lookup("_")("Rated {stars} out of {maxstars} stars",n.makeKeywordArgs({stars:'<span itemprop="'+n.contextOrFrameLookup(t,r,"rating_itemprop")+'">'+o+"</span>",maxstars:'<span itemprop="bestRating">5</span>'})),i+="</span>",r=r.pop(),new n.SafeString(i)});t.addExport("stars"),t.setVariable("stars",u),s+=" ",o(null,s)}catch(l){o(n.handleError(l,a,i))}}return{root:e}}(),e["addon/index.html"]=function(){function e(e,t,r,n,o){var a=null,i=null,s="";try{s+="<!--Addon detail page.-->",e.getTemplate("_macros/addon_tile.html",function(a,i){return a?void o(a):void i.getExported(function(a,i){if(a)return void o(a);if(!i.hasOwnProperty("addon_tile"))return void o(new Error("cannot import 'addon_tile'"));var u=i.addon_tile;t.setVariable("addon_tile",u),s+=" ";var l;l=n.contextOrFrameLookup(t,r,"api")("addon",[n.contextOrFrameLookup(t,r,"slug")]),r.set("endpoint",l,!0),r.parent||(t.setVariable("endpoint",l),t.addExport("endpoint")),s+='<article class="container-detail" data-addon="',s+=n.suppressValue(n.contextOrFrameLookup(t,r,"key"),e.autoesc),s+='" itemscope\nitemtype="http://schema.org/SoftwareApplication">',s+=n.suppressValue(e.getExtension("defer").run(t,n.makeKeywordArgs({url:n.contextOrFrameLookup(t,r,"endpoint"),key:n.contextOrFrameLookup(t,r,"slug"),id:"addon-data",as:"addon"}),function(o){o||(o=function(e){if(e)throw e});var a="";a+=" ";var i;return i=n.memberLookup(n.contextOrFrameLookup(t,r,"apps"),"transform",e.autoesc)(n.contextOrFrameLookup(t,r,"this")),r.set("addon",i,!0),r.parent||(t.setVariable("addon",i),t.addExport("addon")),a+='<header class="addon-header">',a+=n.suppressValue(u(n.contextOrFrameLookup(t,r,"addon"),n.makeKeywordArgs({is_detail:!0,src:n.memberLookup(n.memberLookup(n.contextOrFrameLookup(t,r,"trackingEvents"),"SRCS",e.autoesc),"detail",e.autoesc)})),e.autoesc),a+="</header>",n.memberLookup(n.contextOrFrameLookup(t,r,"addon"),"description",e.autoesc)&&(a+='<section class="prose segment">\n<h3>',a+=t.lookup("_")("Description"),a+='</h3>\n<div class="description-wrapper truncated-wrapper truncated">\n<p class="description" itemprop="description">',a+=n.suppressValue(e.getFilter("nl2br").call(t,e.getFilter("translate").call(t,n.memberLookup(n.contextOrFrameLookup(t,r,"addon"),"description",e.autoesc),n.contextOrFrameLookup(t,r,"addon"))),e.autoesc),a+='</p>\n</div>\n<a href="#" class="truncate-toggle view-all-tab">',a+=t.lookup("_")("View All"),a+="</a>\n</section>"),a+='<section class="addon-meta segment">\n<p>',a+=n.suppressValue(e.getFilter("format").call(t,t.lookup("_")("version: {version}"),n.makeKeywordArgs({version:n.memberLookup(n.memberLookup(n.contextOrFrameLookup(t,r,"addon"),"latest_public_version",e.autoesc),"version",e.autoesc)})),e.autoesc),a+="</p>\n<p>",a+=n.suppressValue(e.getFilter("format").call(t,t.lookup("_")("size: {size}"),n.makeKeywordArgs({size:e.getFilter("fileSize").call(t,n.memberLookup(n.memberLookup(n.contextOrFrameLookup(t,r,"addon"),"latest_public_version",e.autoesc),"size",e.autoesc))})),e.autoesc),a+="</p>",n.memberLookup(n.contextOrFrameLookup(t,r,"addon"),"last_updated",e.autoesc)&&(a+="<p>",a+=n.suppressValue(e.getFilter("format").call(t,t.lookup("_")("last updated: {date}"),n.makeKeywordArgs({date:e.getFilter("date").call(t,n.memberLookup(n.contextOrFrameLookup(t,r,"addon"),"last_updated",e.autoesc))})),e.autoesc),a+="</p>"),a+="</section>",o(null,a),a},function(o){o||(o=function(e){if(e)throw e});var a="";return a+='<header class="addon-header">',n.contextOrFrameLookup(t,r,"placeholder")&&(a+=" ",a+=n.suppressValue(u(n.contextOrFrameLookup(t,r,"placeholder"),n.makeKeywordArgs({is_detail:!0})),e.autoesc),a+=" "),a+="</header>",o(null,a),a},null,function(e){e||(e=function(e){if(e)throw e});var t="";return t+=" ",e(null,t),t}),!0&&e.autoesc),s+="</article>",o(null,s)})})}catch(u){o(n.handleError(u,a,i))}}return{root:e}}(),e["addon/list.html"]=function(){function e(e,t,r,n,o){var a=null,i=null,s="";try{e.getTemplate("_macros/addon_tile.html",function(a,i){return a?void o(a):void i.render(t.getVariables(),r.push(),function(a,i){return a?void o(a):(s+=i,s+=" ",void e.getTemplate("_macros/more_button.html",function(a,i){return a?void o(a):void i.render(t.getVariables(),r.push(),function(a,i){return a?void o(a):(s+=i,s+='<section class="addon-promo">\n<img src="',s+=t.lookup("media")("/fireplace/img/icons/addons.svg"),s+='" alt="">\n<h1>Add-ons</h1>\n<p>',s+=t.lookup("_")("Customize your device with powerful features."),s+='</p>\n</section>\n<section class="main full container-list">',s+=n.suppressValue(e.getExtension("defer").run(t,n.makeKeywordArgs({url:n.contextOrFrameLookup(t,r,"api")("addon_list"),pluck:"objects",as:"addon",key:"slug",paginate:".addon-list"}),function(o){o||(o=function(e){if(e)throw e});var a="";a+='<ul class="addon-list">',r=r.push();var i=n.contextOrFrameLookup(t,r,"this");if(i)for(var s=0;s<i.length;s++){var u=i[s];r.set("addon",u),a+="<li>",a+=n.suppressValue(n.contextOrFrameLookup(t,r,"addon_tile")(u),e.autoesc),a+="</li>"}return r=r.pop(),a+=" ",n.memberLookup(n.memberLookup(n.contextOrFrameLookup(t,r,"response"),"meta",e.autoesc),"next",e.autoesc)&&(a+=" ",a+=n.suppressValue(n.contextOrFrameLookup(t,r,"more_button")(n.memberLookup(n.memberLookup(n.contextOrFrameLookup(t,r,"response"),"meta",e.autoesc),"next",e.autoesc)),e.autoesc),a+=" "),a+="</ul>",o(null,a),a},function(e){e||(e=function(e){if(e)throw e});var t="";return t+='<p class="spinner padded alt"></p>',e(null,t),t},function(e){e||(e=function(e){if(e)throw e});var r="";return r+='<p class="no-results">',r+=t.lookup("_")("No Firefox OS add-ons found."),r+="</p>",e(null,r),r},function(e){e||(e=function(e){if(e)throw e});var o="";return o+='<p class="no-results">',400==n.contextOrFrameLookup(t,r,"error")||404==n.contextOrFrameLookup(t,r,"error")?(o+=" ",o+=t.lookup("_")("No Firefox OS add-ons found."),o+=" "):500==n.contextOrFrameLookup(t,r,"error")&&(o+=" ",o+=t.lookup("_")("An internal server error occurred. Please try again later."),o+=" "),o+="</p>",e(null,o),o}),!0&&e.autoesc),s+="</section>",void o(null,s))})}))})})}catch(u){o(n.handleError(u,a,i))}}return{root:e}}(),e["app/abuse.html"]=function(){function e(e,t,r,n,o){var a=null,i=null,s="";try{e.getTemplate("_macros/forms.html",function(a,i){return a?void o(a):void i.getExported(function(a,i){if(a)return void o(a);if(!i.hasOwnProperty("potato_captcha"))return void o(new Error("cannot import 'potato_captcha'"));var u=i.potato_captcha;t.setVariable("potato_captcha",u),s+=" ";var l=n.makeMacro(["slug","isModal"],[],function(o,a,i){r=r.push(),i=i||{},r.set("slug",o),r.set("isModal",a);var s="";return s+="<mkt-prompt ",a&&(s+='data-modal="abuse"'),s+='>\n<form class="abuse-form">',a&&(s+="<h3>",s+=t.lookup("_")("Need to report something?"),s+="</h3>"),s+="<p>",s+=t.lookup("_")('Let us know if this app is doing something that isn\'t allowed\n              in the <a href="{criteria_url}">review criteria</a> and should be removed from the Marketplace.',n.makeKeywordArgs({criteria_url:"https://developer.mozilla.org/Marketplace/Publishing/Marketplace_review_criteria"})),s+="</p>\n<p>",s+=t.lookup("_")("Examples of issues to report here are if the app is broken,\n              contains mature content, contains malware, etc. The app developer\n              will not see your comments."),s+='</p>\n<textarea name="text" placeholder="',s+=t.lookup("_")("Let us know..."),s+='"\nrequired></textarea>\n<input type="hidden" name="app" value="',s+=n.suppressValue(o,e.autoesc),s+='">',s+=n.suppressValue(u(),e.autoesc),s+="<div>\n<button>",s+=t.lookup("_")("Cancel"),s+="</button>\n<button>",s+=t.lookup("_")("Submit Report"),s+="</button>\n</div>\n</form>\n</mkt-prompt>",r=r.pop(),new n.SafeString(s)});t.addExport("abuse_prompt"),t.setVariable("abuse_prompt",l),s+='<div class="main abuse">',s+=n.suppressValue(l(n.contextOrFrameLookup(t,r,"slug")),e.autoesc),s+="</div>",o(null,s)})})}catch(u){o(n.handleError(u,a,i))}}return{root:e}}(),e["app/index.html"]=function(){function e(e,t,r,n,o){var a=null,i=null,s="";try{s+="<!--App detail page.-->",e.getTemplate("_macros/detail.html",function(a,i){return a?void o(a):void i.getExported(function(a,i){if(a)return void o(a);if(!i.hasOwnProperty("detail_header"))return void o(new Error("cannot import 'detail_header'"));var u=i.detail_header;t.setVariable("detail_header",u),s+=" ",e.getTemplate("_macros/emaillink.html",function(a,i){return a?void o(a):void i.getExported(function(a,i){if(a)return void o(a);if(!i.hasOwnProperty("emaillink"))return void o(new Error("cannot import 'emaillink'"));var l=i.emaillink;t.setVariable("emaillink",l),s+=" ",e.getTemplate("_macros/review.html",function(a,i){return a?void o(a):void i.getExported(function(a,i){if(a)return void o(a);if(!i.hasOwnProperty("review"))return void o(new Error("cannot import 'review'"));var c=i.review;t.setVariable("review",c),s+=" ",e.getTemplate("_macros/stars.html",function(a,i){return a?void o(a):void i.getExported(function(a,i){if(a)return void o(a);if(!i.hasOwnProperty("stars"))return void o(new Error("cannot import 'stars'"));var p=i.stars;t.setVariable("stars",p),s+=" ";var d;d=n.contextOrFrameLookup(t,r,"api")("app",[n.contextOrFrameLookup(t,r,"slug")]),r.set("endpoint",d,!0),r.parent||(t.setVariable("endpoint",d),t.addExport("endpoint")),s+=" ",s+=n.suppressValue(u(n.makeKeywordArgs({url:n.contextOrFrameLookup(t,r,"endpoint"),key:n.contextOrFrameLookup(t,r,"slug"),content_type:"app",placeholder:n.contextOrFrameLookup(t,r,"placeholder_app")})),e.autoesc),s+=" ",s+=n.suppressValue(e.getExtension("defer").run(t,n.makeKeywordArgs({url:n.contextOrFrameLookup(t,r,"endpoint"),as:"app",key:n.contextOrFrameLookup(t,r,"slug")}),function(o){o||(o=function(e){if(e)throw e});var a="";a+=" ",a+=" ";var i;return i=n.memberLookup(n.contextOrFrameLookup(t,r,"apps"),"transform",e.autoesc)(n.contextOrFrameLookup(t,r,"this")),r.set("app",i,!0),r.parent||(t.setVariable("app",i),t.addExport("app")),a+='<section class="main full app-info">\n<div class="detail-flex-wrap">\n<div class="detail-left-side">',n.memberLookup(n.contextOrFrameLookup(t,r,"app"),"banner_regions",e.autoesc)&&n.memberLookup(n.contextOrFrameLookup(t,r,"app"),"banner_message",e.autoesc)&&-1!=n.memberLookup(n.memberLookup(n.contextOrFrameLookup(t,r,"app"),"banner_regions",e.autoesc),"indexOf",e.autoesc)(n.memberLookup(n.contextOrFrameLookup(t,r,"user_helpers"),"region",e.autoesc)())&&(a+='<section class="region-banner">\n<div>',a+=n.suppressValue(e.getFilter("safe").call(t,e.getFilter("translate").call(t,n.memberLookup(n.contextOrFrameLookup(t,r,"app"),"banner_message",e.autoesc),n.contextOrFrameLookup(t,r,"app"))),e.autoesc),a+="</div>\n</section>"),a+=" ",n.memberLookup(n.contextOrFrameLookup(t,r,"app"),"description",e.autoesc)&&(a+='<section class="prose">\n<div>\n<h3>',a+=t.lookup("_")("Description"),a+='</h3>\n<div class="description-wrapper truncated-wrapper truncated">\n<p class="description" itemprop="description">',a+=n.suppressValue(e.getFilter("nl2br").call(t,e.getFilter("translate").call(t,n.memberLookup(n.contextOrFrameLookup(t,r,"app"),"description",e.autoesc),n.contextOrFrameLookup(t,r,"app"))),e.autoesc),a+='</p>\n</div>\n<a href="#" class="truncate-toggle view-all-tab">',a+=t.lookup("_")("View All"),a+="</a>\n</div>\n</section>"),a+='</div>\n<div class="detail-right-side">',n.memberLookup(n.contextOrFrameLookup(t,r,"app"),"release_notes",e.autoesc)&&(a+='<section class="prose release-notes">\n<div>\n<h3>',a+=t.lookup("_")("Updates"),a+='</h3>\n<div class="truncated-wrapper truncated">\n<p>',a+=n.suppressValue(e.getFilter("nl2br").call(t,e.getFilter("translate").call(t,n.memberLookup(n.contextOrFrameLookup(t,r,"app"),"release_notes",e.autoesc),n.contextOrFrameLookup(t,r,"app"))),e.autoesc),a+='</p>\n</div>\n<a href="#" class="truncate-toggle view-all-tab">',a+=t.lookup("_")("View All"),a+="</a>\n</div>\n</section>"),a+=" ",n.memberLookup(n.contextOrFrameLookup(t,r,"app"),"is_packaged",e.autoesc)&&n.memberLookup(n.contextOrFrameLookup(t,r,"app"),"last_updated",e.autoesc)&&(a+='<section class="prose package-last-updated">\n<h3>',a+=t.lookup("_")("Last updated"),a+="</h3>\n<p>",a+=n.suppressValue(e.getFilter("date").call(t,n.memberLookup(n.contextOrFrameLookup(t,r,"app"),"last_updated",e.autoesc)),e.autoesc),a+="</p>\n</section>"),a+='<section class="app-support">\n<ul>',n.memberLookup(n.contextOrFrameLookup(t,r,"app"),"support_email",e.autoesc)&&(a+='<li class="support-email" data-tracking="Support email">',a+=n.suppressValue(l(n.memberLookup(n.contextOrFrameLookup(t,r,"app"),"support_email",e.autoesc),t.lookup("_")("Email Support"),n.makeKeywordArgs({"class":"button"})),e.autoesc),a+="</li>"),a+=" ",n.memberLookup(n.contextOrFrameLookup(t,r,"app"),"support_url",e.autoesc)&&(a+='<li class="support-url" data-tracking="Support site">\n<a class="button" rel="external" ',a+=n.suppressValue(e.getFilter("external_href").call(t,n.memberLookup(n.contextOrFrameLookup(t,r,"app"),"support_url",e.autoesc)),e.autoesc),a+=">",a+=t.lookup("_")("Support Site"),a+="</a>\n</li>"),a+=" ",n.memberLookup(n.contextOrFrameLookup(t,r,"app"),"homepage",e.autoesc)&&(a+='<li class="homepage" data-tracking="Homepage">\n<a class="button" rel="external" ',a+=n.suppressValue(e.getFilter("external_href").call(t,n.memberLookup(n.contextOrFrameLookup(t,r,"app"),"homepage",e.autoesc)),e.autoesc),a+=">",a+=t.lookup("_")("Homepage"),a+="</a>\n</li>"),a+=" ",n.memberLookup(n.contextOrFrameLookup(t,r,"app"),"privacy_policy",e.autoesc)&&(a+='<li class="privacy-policy" data-tracking="Privacy policy">\n<a class="button" href="',a+=t.lookup("url")("app/privacy",[n.contextOrFrameLookup(t,r,"slug")]),a+='">',a+=t.lookup("_")("Privacy Policy"),a+="</a>\n</li>"),a+=" ",(n.memberLookup(n.contextOrFrameLookup(t,r,"app"),"public_stats",e.autoesc)||n.memberLookup(n.contextOrFrameLookup(t,r,"user"),"has_developed",e.autoesc)(n.memberLookup(n.contextOrFrameLookup(t,r,"app"),"id",e.autoesc))||n.memberLookup(n.contextOrFrameLookup(t,r,"user"),"get_permission",e.autoesc)("stats"))&&(a+='<li class="statistics" data-tracking="Statistics">\n<a class="button view-stats" rel="external" href="/statistics/app/',a+=n.suppressValue(n.contextOrFrameLookup(t,r,"slug"),e.autoesc),a+='">',a+=t.lookup("_")("Statistics"),a+="</a>\n</li>"),a+=" ",(n.memberLookup(n.contextOrFrameLookup(t,r,"user"),"has_developed",e.autoesc)(n.memberLookup(n.contextOrFrameLookup(t,r,"app"),"id",e.autoesc))||n.memberLookup(n.contextOrFrameLookup(t,r,"user"),"get_permission",e.autoesc)("reviewer"))&&(a+='<li>\n<a class="button action manage" href="/developers/app/',a+=n.suppressValue(n.contextOrFrameLookup(t,r,"slug"),e.autoesc),a+='/edit"\nrel="external">',a+=t.lookup("_")("Edit Listing"),a+="</a>\n</li>"),a+=" ",n.memberLookup(n.contextOrFrameLookup(t,r,"user"),"get_permission",e.autoesc)("reviewer")&&(a+='<li>\n<a class="button action reviewer" href="/reviewers/app/',a+=n.suppressValue(n.contextOrFrameLookup(t,r,"slug"),e.autoesc),a+='"\nrel="external">',a+=n.suppressValue(t.lookup("_")(2==n.memberLookup(n.contextOrFrameLookup(t,r,"app"),"status",e.autoesc)||13==n.memberLookup(n.contextOrFrameLookup(t,r,"this"),"status",e.autoesc)?"Approve / Reject":"Review History"),e.autoesc),a+="</a>\n</li>"),a+="</ul>\n</section>\n</div>\n</div>\n</section>",o(null,a),a
},null,null,function(e){e||(e=function(e){if(e)throw e});var t="";return t+=" ",e(null,t),t}),!0&&e.autoesc),s+="<!--Reviews (detail/reviews.styl).-->",s+=n.suppressValue(e.getExtension("defer").run(t,n.makeKeywordArgs({url:n.contextOrFrameLookup(t,r,"apiParams")("reviews",{app:n.contextOrFrameLookup(t,r,"slug")}),id:"ratings"}),function(o){o||(o=function(e){if(e)throw e});var a="";return a+='<section class="main full app-reviews">\n<div class="detail-flex-wrap">\n<div class="detail-left-side">\n<h3>',a+=t.lookup("_")("Reviews"),a+="</h3>",e.getTemplate("_includes/reviews_summary.html",function(i,s){return i?void o(i):void s.render(t.getVariables(),r.push(),function(i,s){if(i)return void o(i);if(a+=s,a+=" ",n.memberLookup(n.memberLookup(n.contextOrFrameLookup(t,r,"this"),"meta",e.autoesc),"total_count",e.autoesc)){a+='<ul class="reviews-wrapper">',r=r.push();var u=n.memberLookup(n.memberLookup(n.contextOrFrameLookup(t,r,"this"),"objects",e.autoesc),"slice",e.autoesc)(0,6);if(u)for(var l=0;l<u.length;l++){var p=u[l];r.set("_review",p),a+=" ",a+=n.suppressValue(c(p,n.makeKeywordArgs({detailpage:!0,current_version:n.memberLookup(n.memberLookup(n.contextOrFrameLookup(t,r,"this"),"info",e.autoesc),"current_version",e.autoesc)})),e.autoesc),a+=" "}r=r.pop(),a+="</ul>"}else a+='<p class="not-rated">',a+=t.lookup("_")("App not yet reviewed"),a+="</p>";a+='</div>\n<div class="detail-right-side" ',n.memberLookup(n.memberLookup(n.contextOrFrameLookup(t,r,"this"),"meta",e.autoesc),"total_count",e.autoesc)||(a+="data-not-reviewed"),a+=">",e.getTemplate("_includes/reviews_sidebar.html",function(e,n){return e?void o(e):void n.render(t.getVariables(),r.push(),function(e,t){return e?void o(e):(a+=t,a+="</div>\n</div>\n</section>",void o(null,a))})})})}),a},function(e){e||(e=function(e){if(e)throw e});var t="";return t+='<p class="spinner alt padded"></p>',e(null,t),t},null,function(e){e||(e=function(e){if(e)throw e});var t="";return t+=" ",e(null,t),t}),!0&&e.autoesc),s+=" ",s+=n.suppressValue(e.getExtension("defer").run(t,n.makeKeywordArgs({url:n.contextOrFrameLookup(t,r,"endpoint"),as:"app",key:n.contextOrFrameLookup(t,r,"slug")}),function(o){o||(o=function(e){if(e)throw e});var a="";return a+=" ",n.memberLookup(n.contextOrFrameLookup(t,r,"settings"),"payments_enabled",e.autoesc)&&n.memberLookup(n.contextOrFrameLookup(t,r,"settings"),"upsell_enabled",e.autoesc)&&n.memberLookup(n.contextOrFrameLookup(t,r,"this"),"upsell",e.autoesc)&&(a+='<section class="main full">\n<div>\n<h3>',a+=t.lookup("_")("Premium version available"),a+='</h3>\n<a class="upsell"\nhref="',a+=n.suppressValue(e.getFilter("urlparams").call(t,n.contextOrFrameLookup(t,r,"url")("app",[n.memberLookup(n.memberLookup(n.contextOrFrameLookup(t,r,"this"),"upsell",e.autoesc),"app_slug",e.autoesc)]),n.makeKeywordArgs({src:"mkt-detail-upsell"})),e.autoesc),a+='">\n<img class="icon" src="',a+=n.suppressValue(n.memberLookup(n.memberLookup(n.contextOrFrameLookup(t,r,"this"),"upsell",e.autoesc),"icon_url",e.autoesc),e.autoesc),a+='">\n<span>',a+=n.suppressValue(n.memberLookup(n.memberLookup(n.contextOrFrameLookup(t,r,"this"),"upsell",e.autoesc),"name",e.autoesc),e.autoesc),a+="</span>\n</a>\n</div>\n</section>"),a+=" ",o(null,a),a},null,null,function(e){e||(e=function(e){if(e)throw e});var t="";return t+=" ",e(null,t),t}),!0&&e.autoesc),s+="<!--More information (detail/more-info.styl).-->",s+=n.suppressValue(e.getExtension("defer").run(t,n.makeKeywordArgs({url:n.contextOrFrameLookup(t,r,"endpoint"),as:"app",key:n.contextOrFrameLookup(t,r,"slug")}),function(o){o||(o=function(e){if(e)throw e});var a="";a+='<section class="main full app-more-info">\n<div>\n<div class="detail-flex-wrap">\n<div class="detail-left-side">\n<h3>',a+=t.lookup("_")("More Information"),a+='</h3>\n<div class="app-more-metadata">\n<dl>\n<dt>',a+=t.lookup("_")("Developer"),a+='</dt>\n<dd><a href="',a+=n.suppressValue(e.getFilter("urlparams").call(t,n.contextOrFrameLookup(t,r,"url")("search"),n.makeKeywordArgs({author:n.memberLookup(n.contextOrFrameLookup(t,r,"this"),"author",e.autoesc)})),e.autoesc),a+='">',a+=n.suppressValue(n.memberLookup(n.contextOrFrameLookup(t,r,"this"),"author",e.autoesc),e.autoesc),a+="</a></dd>\n</dl>\n<dl>\n<dt>",a+=t.lookup("_")("Compatibility"),a+="</dt>",r=r.push();var i=n.memberLookup(n.contextOrFrameLookup(t,r,"this"),"device_types",e.autoesc);if(i)for(var s=0;s<i.length;s++){var u=i[s];r.set("device_type",u),a+=" ",a+='<dd data-delimiter="',a+=t.lookup("_")(","),a+='">',a+=n.suppressValue(n.memberLookup(n.contextOrFrameLookup(t,r,"DEVICE_CHOICES"),u,e.autoesc),e.autoesc),a+="</dd>"}r=r.pop(),a+='</dl>\n<dl class="app-metadata-categories">\n<dt>',a+=t.lookup("_")("Categories"),a+="</dt>",r=r.push();var l=n.memberLookup(n.contextOrFrameLookup(t,r,"this"),"categories",e.autoesc);if(l)for(var c=0;c<l.length;c++){var p=l[c];r.set("category",p),a+=" ",a+='<dd data-delimiter="',a+=t.lookup("_")(","),a+='">',a+=n.suppressValue(n.memberLookup(p,"name",e.autoesc),e.autoesc),a+="</dd>"}return r=r.pop(),a+="</dl>",n.memberLookup(n.contextOrFrameLookup(t,r,"this"),"is_packaged",e.autoesc)&&n.memberLookup(n.contextOrFrameLookup(t,r,"this"),"file_size",e.autoesc)&&(a+="<dl>\n<dt>",a+=t.lookup("_")("File Size"),a+="</dt>\n<dd>",a+=n.suppressValue(n.memberLookup(n.contextOrFrameLookup(t,r,"this"),"file_size",e.autoesc),e.autoesc),a+="</dd>\n</dl>"),a+="<dl>\n<dt>",a+=t.lookup("_")("Most Recent Version"),a+="</dt>\n<dd>",a+=n.suppressValue(n.memberLookup(n.contextOrFrameLookup(t,r,"this"),"current_version",e.autoesc),e.autoesc),a+='</dd>\n</dl>\n</div>\n</div>\n<div class="detail-right-side">',e.getTemplate("_includes/content_ratings.html",function(e,n){return e?void o(e):void n.render(t.getVariables(),r.push(),function(e,t){return e?void o(e):(a+=t,a+="</div>\n</div>\n</div>\n</section>",void o(null,a))})}),a},null,null,function(e){e||(e=function(e){if(e)throw e});var t="";return t+=" ",e(null,t),t}),!0&&e.autoesc),s+=" ",s+=n.suppressValue(e.getExtension("defer").run(t,n.makeKeywordArgs({url:n.contextOrFrameLookup(t,r,"endpoint"),as:"app",key:n.contextOrFrameLookup(t,r,"slug"),id:"app-data"}),function(e){e||(e=function(e){if(e)throw e});var r="";return r+='<section class="main full app-report-abuse">\n<div>\n<a class="button cancel abuse" data-tracking="Report abuse">',r+=t.lookup("_")("Report Abuse"),r+="</a>\n</div>\n</section>",e(null,r),r},null,null,function(e){e||(e=function(e){if(e)throw e});var t="";return t+=" ",e(null,t),t}),!0&&e.autoesc),s+="</div>",o(null,s)})})})})})})})})}catch(u){o(n.handleError(u,a,i))}}return{root:e}}(),e["app/privacy.html"]=function(){function e(e,t,r,n,o){var a=null,i=null,s="";try{s+='<section class="main">\n<div class="subheader">\n<h1>',s+=t.lookup("_")("Privacy Policy"),s+='</h1>\n</div>\n</section>\n<section class="app-privacy-policy main full prose">',s+=n.suppressValue(e.getExtension("defer").run(t,n.makeKeywordArgs({url:n.contextOrFrameLookup(t,r,"api")("app/privacy",[n.contextOrFrameLookup(t,r,"slug")])}),function(o){o||(o=function(e){if(e)throw e});var a="";return a+='<p><a href="',a+=t.lookup("url")("app",[n.contextOrFrameLookup(t,r,"slug")]),a+='" class="back-to-app">',a+=t.lookup("_")("Back to app"),a+="</a></p>",a+=n.suppressValue(e.getFilter("nl2br").call(t,n.memberLookup(n.contextOrFrameLookup(t,r,"this"),"privacy_policy",e.autoesc)),e.autoesc),a+=" ",o(null,a),a},function(e){e||(e=function(e){if(e)throw e});var r="";return r+=" ",r+=t.lookup("_")("Loading Privacy Policy..."),r+=" ",e(null,r),r},null,null),!0&&e.autoesc),s+="</section>",o(null,s)}catch(u){o(n.handleError(u,a,i))}}return{root:e}}(),e["app/receipt.html"]=function(){function e(e,t,r,n,o){var a=null,i=null,s="";try{s+='<section class="main">\n<div class="subheader">\n<h1>',s+=t.lookup("_")("Thank you for purchasing"),s+="</h1>\n</div>\n</section>",e.getTemplate("app/index.html",function(e,n){return e?void o(e):void n.render(t.getVariables(),r.push(),function(e,t){return e?void o(e):(s+=t,s+=" ",void o(null,s))})})}catch(u){o(n.handleError(u,a,i))}}return{root:e}}(),e["errors/404.html"]=function(){function e(e,t,r,n,o){var a=null,i=null,s="";try{s+='<section class="main">\n<div class="error-page">\n<h1 class="error-page-heading">',s+=t.lookup("_")("Content Not Found"),s+="</h1>\n<p>",s+=t.lookup("_")("Whoops! Something went wrong and you ended up here. Sorry!"),s+="</p>\n</div>\n</section>",o(null,s)}catch(u){o(n.handleError(u,a,i))}}return{root:e}}(),e["errors/date-error.html"]=function(){function e(e,t,r,n,o){var a=null,i=null,s="";try{s+='<div id="error-overlay" class="system-date">\n<div class="error-message">\n<h1>',s+=t.lookup("_")("System Date Incorrect"),s+="</h1>\n<p>",s+=t.lookup("_")("Sorry, your device clock appears to be set incorrectly."),s+="</p>\n<p>",s+=t.lookup("_")("Please set today's date and time in your device settings to access the Marketplace."),s+='</p>\n<button class="global button try-again">',s+=t.lookup("_")("Try again"),s+="</button>\n</div>\n</div>",o(null,s)}catch(u){o(n.handleError(u,a,i))}}return{root:e}}(),e["errors/fragment.html"]=function(){function e(e,t,r,n,o){var a=null,i=null,s="";try{s+='<span class="fragment-error">\n<b>',s+=t.lookup("_")("Oh no!"),s+="</b>",s+=t.lookup("_")("An error occurred."),s+="</span>",o(null,s)}catch(u){o(n.handleError(u,a,i))}}return{root:e}}(),e["errors/offline-error.html"]=function(){function e(e,t,r,n,o){var a=null,i=null,s="";try{s+='<div id="error-overlay" class="offline">\n<div class="error-message">\n<h1>',s+=t.lookup("_")("Currently Offline"),s+="</h1>\n<p>",s+=t.lookup("_")("Sorry, you need to be online to access the Marketplace."),s+='</p>\n<button class="global button try-again">',s+=t.lookup("_")("Try again"),s+="</button>\n</div>\n</div>",o(null,s)}catch(u){o(n.handleError(u,a,i))}}return{root:e}}(),e["errors/pagination.html"]=function(){function e(e,t,r,n,o){var a=null,i=null,s="";try{e.getTemplate("_macros/more_button.html",function(a,i){return a?void o(a):void i.getExported(function(a,i){if(a)return void o(a);if(!i.hasOwnProperty("more_button"))return void o(new Error("cannot import 'more_button'"));var u=i.more_button;t.setVariable("more_button",u),s+=" ",s+=n.suppressValue(u(n.contextOrFrameLookup(t,r,"more_url"),"loadmore",t.lookup("_")("Try Again")),e.autoesc),s+=" ",o(null,s)})})}catch(u){o(n.handleError(u,a,i))}}return{root:e}}(),e["feed/app.html"]=function(){function e(e,t,r,n,o){var a=null,i=null,s="";try{e.getTemplate("_macros/feed_item.html",function(a,i){return a?void o(a):void i.render(t.getVariables(),r.push(),function(a,i){return a?void o(a):(s+=i,s+=" ",s+=n.suppressValue(e.getExtension("defer").run(t,n.makeKeywordArgs({url:n.contextOrFrameLookup(t,r,"anonApi")("feed-app",[n.contextOrFrameLookup(t,r,"slug")]),id:"feed_app"}),function(o){o||(o=function(e){if(e)throw e});var a="";return a+='<section class="main feed feed-landing feed-app-landing">',a+=n.suppressValue(n.contextOrFrameLookup(t,r,"feed_app")(n.contextOrFrameLookup(t,r,"this")),e.autoesc),a+="</section>",o(null,a),a},function(e){e||(e=function(e){if(e)throw e});var t="";return t+='<p class="spinner alt spaced"></p>',e(null,t),t},null,function(e){e||(e=function(e){if(e)throw e});var r="";return r+='<div class="detailed-error">\n<h2>',r+=t.lookup("_")("Oh no!"),r+="</h2>\n<p>",r+=t.lookup("_")("We could not load that app. Please try again later."),r+="</p>\n</div>",e(null,r),r}),!0&&e.autoesc),s+=" ",void o(null,s))})})}catch(u){o(n.handleError(u,a,i))}}return{root:e}}(),e["feed/collection.html"]=function(){function e(e,t,r,n,o){var a=null,i=null,s="";try{e.getTemplate("_macros/feed_item.html",function(a,i){return a?void o(a):void i.getExported(function(a,i){if(a)return void o(a);if(!i.hasOwnProperty("collection_landing"))return void o(new Error("cannot import 'collection_landing'"));var u=i.collection_landing;t.setVariable("collection_landing",u),s+=" ",s+=n.suppressValue(e.getExtension("defer").run(t,n.makeKeywordArgs({url:n.contextOrFrameLookup(t,r,"anonApi")("feed-collection",[n.contextOrFrameLookup(t,r,"slug")]),pluck:"apps",as:"app",id:"feed-collection"}),function(o){o||(o=function(e){if(e)throw e});var a="";return a+=" ",a+=n.suppressValue(u(n.contextOrFrameLookup(t,r,"response")),e.autoesc),a+=" ",o(null,a),a},function(e){e||(e=function(e){if(e)throw e});var t="";return t+='<p class="spinner alt spaced"></p>',e(null,t),t},null,function(e){e||(e=function(e){if(e)throw e});var r="";return r+='<div class="detailed-error">\n<h2>',r+=t.lookup("_")("Oh no!"),r+="</h2>\n<p>",r+=t.lookup("_")("We could not load that collection. Please try again later."),r+="</p>\n</div>",e(null,r),r}),!0&&e.autoesc),s+=" ",o(null,s)})})}catch(u){o(n.handleError(u,a,i))}}return{root:e}}(),e["feed/editorial.html"]=function(){function e(e,t,r,n,o){var a=null,i=null,s="";try{e.getTemplate("_macros/feed_item.html",function(a,i){return a?void o(a):void i.render(t.getVariables(),r.push(),function(a,i){return a?void o(a):(s+=i,s+=" ",s+=n.suppressValue(e.getExtension("defer").run(t,n.makeKeywordArgs({url:n.contextOrFrameLookup(t,r,"anonApi")("feed-brand",[n.contextOrFrameLookup(t,r,"slug")]),pluck:"apps",as:"app",id:"brand"}),function(o){o||(o=function(e){if(e)throw e});var a="";return a+=" ",a+=n.suppressValue(n.contextOrFrameLookup(t,r,"collection_landing")(n.contextOrFrameLookup(t,r,"response")),e.autoesc),a+=" ",o(null,a),a},function(e){e||(e=function(e){if(e)throw e});var t="";return t+='<p class="spinner alt spaced"></p>',e(null,t),t},null,function(e){e||(e=function(e){if(e)throw e});var r="";return r+='<div class="detailed-error">\n<h2>',r+=t.lookup("_")("Oh no!"),r+="</h2>\n<p>",r+=t.lookup("_")("We could not load that editorial brand. Please try again later."),r+="</p>\n</div>",e(null,r),r}),!0&&e.autoesc),s+=" ",void o(null,s))})})}catch(u){o(n.handleError(u,a,i))}}return{root:e}}(),e["feed/feed_item.html"]=function(){function e(e,t,r,n,o){var a=null,i=null,s="";try{s+=" ",e.getTemplate("_macros/feed_item.html",function(a,i){return a?void o(a):void i.render(t.getVariables(),r.push(),function(a,i){return a?void o(a):(s+=i,s+='<div class="feed-item-item">',s+=n.suppressValue(n.contextOrFrameLookup(t,r,"feed_item")(n.contextOrFrameLookup(t,r,"item")),e.autoesc),s+="</div>",void o(null,s))})})}catch(u){o(n.handleError(u,a,i))}}return{root:e}}(),e["feed/shelf.html"]=function(){function e(e,t,r,n,o){var a=null,i=null,s="";try{e.getTemplate("_macros/feed_item.html",function(a,i){return a?void o(a):void i.getExported(function(a,i){if(a)return void o(a);if(!i.hasOwnProperty("collection_landing"))return void o(new Error("cannot import 'collection_landing'"));var u=i.collection_landing;t.setVariable("collection_landing",u),s+=" ",s+=n.suppressValue(e.getExtension("defer").run(t,n.makeKeywordArgs({url:n.contextOrFrameLookup(t,r,"anonApi")("feed-shelf",[n.contextOrFrameLookup(t,r,"slug")]),pluck:"apps",as:"app",id:"shelf"}),function(o){o||(o=function(e){if(e)throw e});var a="";return a+=" ",a+=n.suppressValue(u(n.contextOrFrameLookup(t,r,"response")),e.autoesc),a+=" ",o(null,a),a},function(e){e||(e=function(e){if(e)throw e});var t="";return t+='<p class="spinner alt spaced"></p>',e(null,t),t},null,function(e){e||(e=function(e){if(e)throw e});var r="";return r+='<div class="detailed-error">\n<h2>',r+=t.lookup("_")("Oh no!"),r+="</h2>\n<p>",r+=t.lookup("_")("We could not load that operator shelf. Please try again later."),r+="</p>\n</div>",e(null,r),r}),!0&&e.autoesc),s+=" ",o(null,s)})})}catch(u){o(n.handleError(u,a,i))}}return{root:e}}(),e["games/index.html"]=function(){function e(e,t,r,n,o){var a=null,i=null,s="";try{e.getTemplate("_macros/market_button.html",function(a,i){return a?void o(a):void i.getExported(function(a,i){if(a)return void o(a);if(!i.hasOwnProperty("market_button"))return void o(new Error("cannot import 'market_button'"));var u=i.market_button;t.setVariable("market_button",u),s+=" ";var l=n.makeMacro([],[],function(e){r=r.push(),e=e||{};var o="";return o+='<div class="games-title">\n<h1>',o+=t.lookup("_")("PLAY GREAT DESKTOP GAMES"),o+="</h1>\n</div>",r=r.pop(),new n.SafeString(o)});t.addExport("game_title"),t.setVariable("game_title",l),s+=" ";var c=n.makeMacro(["game","isHome"],[],function(o,a,i){r=r.push(),i=i||{},r.set("game",o),r.set("isHome",a);var s="";return s+=" ",o=n.memberLookup(n.contextOrFrameLookup(t,r,"apps"),"transform",e.autoesc)(o),r.set("game",o,!0),r.parent||(t.setVariable("game",o),t.addExport("game")),s+='<li class="game" style="background-image: url(',s+=n.suppressValue(n.memberLookup(n.memberLookup(o,"promo_imgs",e.autoesc),"640",e.autoesc),e.autoesc),s+=')">\n<a href="',s+=n.suppressValue(e.getFilter("urlparams").call(t,n.contextOrFrameLookup(t,r,"url")(n.memberLookup(o,"isApp",e.autoesc)&&"app"||"website",[n.memberLookup(o,"key",e.autoesc)]),n.makeKeywordArgs({src:a&&"games-home"||"games-listing"})),e.autoesc),s+='">\n<div class="game-gradient"></div>\n<h3 class="game-name">',s+=n.suppressValue(n.memberLookup(o,"name",e.autoesc),e.autoesc),s+='</h3>\n<div class="game-overlay">\n<p class="game-overlay-category">',s+=n.suppressValue(n.contextOrFrameLookup(t,r,"getGameCategory")(o),e.autoesc),s+='</p>\n<img class="game-overlay-icon" src="',s+=n.suppressValue(n.memberLookup(n.memberLookup(o,"icons",e.autoesc),"128",e.autoesc),e.autoesc),s+='">\n<div class="game-overlay-info-container">\n<p class="game-overlay-name">',s+=n.suppressValue(n.memberLookup(o,"name",e.autoesc),e.autoesc),s+="</p>",n.memberLookup(o,"author",e.autoesc)&&(s+='<p class="game-overlay-developer">',s+=n.suppressValue(e.getFilter("format").call(t,t.lookup("_")("<span>by</span> {author}"),n.makeKeywordArgs({author:n.memberLookup(o,"author",e.autoesc)})),e.autoesc),s+="</p>"),s+="</div>",s+=n.suppressValue(u(o,n.makeKeywordArgs({isGame:!0})),e.autoesc),s+="</div>\n</a>\n</li>",r=r.pop(),new n.SafeString(s)});t.addExport("game_tile"),t.setVariable("game_tile",c),s+=" ";var p=n.makeMacro(["game"],[],function(o,a){r=r.push(),a=a||{},r.set("game",o);var i="";return i+=" ",o=n.memberLookup(n.contextOrFrameLookup(t,r,"apps"),"transform",e.autoesc)(o),r.set("game",o,!0),r.parent||(t.setVariable("game",o),t.addExport("game")),i+='<div class="games-home-primary">\n<a href="',i+=n.suppressValue(e.getFilter("urlparams").call(t,n.contextOrFrameLookup(t,r,"url")(n.memberLookup(o,"isApp",e.autoesc)&&"app"||"website",[n.memberLookup(o,"key",e.autoesc)]),n.makeKeywordArgs({src:"games-home"})),e.autoesc),i+='"\nclass="games-home-primary-main" data-no-transparent\nstyle="background-image: url(',i+=n.suppressValue(n.memberLookup(n.memberLookup(o,"promo_imgs",e.autoesc),"1050",e.autoesc),e.autoesc),i+=')">\n<div class="game-gradient"></div>',i+=n.suppressValue(u(o,n.makeKeywordArgs({isGame:!0})),e.autoesc),i+='</div>\n<ul class="games-home-primary-metadata-container">\n<li class="games-home-primary-metadata">\n<dt>',i+=t.lookup("_")("Game"),i+="</dt>\n<dd>",i+=n.suppressValue(n.memberLookup(o,"name",e.autoesc),e.autoesc),i+="</dd>\n</li>",n.memberLookup(o,"author",e.autoesc)&&(i+='<li class="games-home-primary-metadata">\n<dt>',i+=t.lookup("_")("Developer"),i+="</dt>\n<dd>",i+=n.suppressValue(n.memberLookup(o,"author",e.autoesc),e.autoesc),i+="</dd>\n</li>"),i+='<li class="games-home-primary-metadata">\n<dt>',i+=t.lookup("_")("Category"),i+="</dt>\n<dd>",i+=n.suppressValue(n.contextOrFrameLookup(t,r,"getGameCategory")(o),e.autoesc),i+="</dd>\n</li>\n</ul>\n</a>",r=r.pop(),new n.SafeString(i)});t.addExport("primary_game"),t.setVariable("primary_game",p),s+=" ",s+=n.suppressValue(e.getExtension("defer").run(t,n.makeKeywordArgs({url:n.contextOrFrameLookup(t,r,"api")("games-daily"),pluck:"objects",as:n.contextOrFrameLookup(t,r,"appOrWebsite")}),function(o){o||(o=function(e){if(e)throw e});var a="";a+='<section class="games-home">',a+=n.suppressValue(l(),e.autoesc),a+=" ",a+=n.suppressValue(p(n.memberLookup(n.contextOrFrameLookup(t,r,"this"),0,e.autoesc)),e.autoesc),a+='<ul class="games-home-secondary-container">',r=r.push();var i=n.contextOrFrameLookup(t,r,"this");if(i)for(var s=0;s<i.length;s++){var u=i[s];r.set("game",u),r.set("loop.index0",s),a+=" ",0!=n.memberLookup(n.contextOrFrameLookup(t,r,"loop"),"index0",e.autoesc)&&(a+=" ",a+=n.suppressValue(c(u,n.makeKeywordArgs({isHome:!0})),e.autoesc),a+=" "),a+=" "}return r=r.pop(),a+='</ul>\n<div class="games-home-more">\n<a href="',a+=t.lookup("url")("games/listing",["all"]),a+='">',a+=t.lookup("_")("Find more great games"),a+="</a>\n</div>\n</section>",o(null,a),a},null,null,null),!0&&e.autoesc),s+=" ",o(null,s)})})}catch(u){o(n.handleError(u,a,i))}}return{root:e}}(),e["games/listing.html"]=function(){function e(e,t,r,n,o){var a=null,i=null,s="";try{e.getTemplate("_macros/more_button.html",function(a,i){return a?void o(a):void i.getExported(function(a,i){if(a)return void o(a);if(!i.hasOwnProperty("more_button"))return void o(new Error("cannot import 'more_button'"));var u=i.more_button;t.setVariable("more_button",u),s+=" ",e.getTemplate("games/index.html",function(a,i){return a?void o(a):void i.getExported(function(a,i){if(a)return void o(a);if(!i.hasOwnProperty("game_title"))return void o(new Error("cannot import 'game_title'"));var l=i.game_title;if(t.setVariable("game_title",l),!i.hasOwnProperty("game_tile"))return void o(new Error("cannot import 'game_tile'"));var c=i.game_tile;t.setVariable("game_tile",c),s+="<section>",s+=n.suppressValue(l(),e.autoesc),s+='<div class="web-games-are-awesome">\n<p>',s+=t.lookup("_")("Enjoy instant fun with our handpicked selection of desktop web games you can play right in your browser."),s+='</p>\n<a href="https://blog.mozilla.org/apps/2015/08/18/games-games-games/">',s+=t.lookup("_")("Learn more about why games and Mozilla go so well together."),s+='</a>\n</div>\n<div class="games-listing-container">\n<ul class="games-listing-nav">',r=r.push();var p=n.contextOrFrameLookup(t,r,"gameCategories");if(p)for(var d=0;d<p.length;d++){var f=p[d];r.set("gameCategory",f),s+='<li data-active="',s+=n.suppressValue(n.memberLookup(f,0,e.autoesc)==n.contextOrFrameLookup(t,r,"currentGameCategory"),e.autoesc),s+='">\n<a href="',s+=t.lookup("url")("games/listing",[n.memberLookup(f,0,e.autoesc)]),s+='">',s+=n.suppressValue(n.memberLookup(f,1,e.autoesc),e.autoesc),s+="</a>\n</li>"}r=r.pop(),s+="</ul>",s+=n.suppressValue(e.getExtension("defer").run(t,n.makeKeywordArgs({url:e.getFilter("urlparams").call(t,n.contextOrFrameLookup(t,r,"api")("games-listing"),n.makeKeywordArgs({tag:n.contextOrFrameLookup(t,r,"currentGameTag")})),paginate:".games-listing",pluck:"objects",as:n.contextOrFrameLookup(t,r,"appOrWebsite")}),function(o){o||(o=function(e){if(e)throw e});var a="";a+='<ul class="games-listing">',r=r.push();var i=n.contextOrFrameLookup(t,r,"this");if(i)for(var s=0;s<i.length;s++){var l=i[s];r.set("game",l),a+=" ",a+=n.suppressValue(c(l),e.autoesc),a+=" "}return r=r.pop(),a+=" ",n.memberLookup(n.memberLookup(n.contextOrFrameLookup(t,r,"response"),"meta",e.autoesc),"next",e.autoesc)&&(a+=" ",a+=n.suppressValue(u(n.memberLookup(n.memberLookup(n.contextOrFrameLookup(t,r,"response"),"meta",e.autoesc),"next",e.autoesc)),e.autoesc),a+=" "),a+="</ul>",o(null,a),a},null,null,null),!0&&e.autoesc),s+="</div>\n</section>",o(null,s)})})})})}catch(u){o(n.handleError(u,a,i))}}return{root:e}}(),e["ratings/add.html"]=function(){function e(e,t,r,n,o){var a=null,i=null,s="";try{var u=n.makeMacro(["slug","isModal","existingReview"],[],function(o,a,i,s){r=r.push(),s=s||{},r.set("slug",o),r.set("isModal",a),r.set("existingReview",i);var u="";u+=" ",u+="<mkt-prompt ",a&&(u+='data-modal="review"'),u+='>\n<form class="',u+=n.suppressValue(i&&"edit-review-form"||"add-review-form",e.autoesc),u+='" ',i&&(u+=' data-uri="',u+=n.suppressValue(n.memberLookup(i,"resource_uri",e.autoesc),e.autoesc),u+='" data-slug="',u+=n.suppressValue(o,e.autoesc),u+='" '),u+=">",a&&(u+="<h3>",u+=n.suppressValue(i&&t.lookup("_")("Edit Review")||t.lookup("_")("Leave a Review"),e.autoesc),u+='</h3>\n<p class="reviews--guideline">',u+=n.suppressValue(e.getFilter("format").call(t,t.lookup("_")('Please read the <a href="{url}" target="_blank">Review Guidelines</a> for more details about rating apps.\n                Reviews that do not meet these guidelines may be removed by our moderation team without notice.'),n.makeKeywordArgs({url:"https://developer.mozilla.org/Marketplace/User_Review_Guidelines"})),e.autoesc),u+="</p>"),u+='<p class="simple-field rating">\n<label for="review-rating">',u+=t.lookup("_")("Rate:"),u+='</label>\n<select id="review-rating" name="rating" required>',r=r.push();var l=n.contextOrFrameLookup(t,r,"range")(1,6);if(l)for(var c=0;c<l.length;c++){var p=l[c];r.set("i",p),u+='<option value="',u+=n.suppressValue(p,e.autoesc),u+='" ',u+=n.suppressValue(i&&p==n.memberLookup(i,"rating",e.autoesc)?"selected":"",e.autoesc),u+=">",u+=n.suppressValue(p,e.autoesc),u+="</option>"}return r=r.pop(),u+='</select>\n</p>\n<p class="rating-label">',u+=t.lookup("_")("Please select a star rating."),u+='</p>\n<textarea id="review-body" rows="2" cols="40" name="body"\nplaceholder="',u+=t.lookup("_")("Tell us what you like about this app. Write like youre telling a friend about your experience with the app. Give specific details, for example, What features did you like or dislike?"),u+='" \n required pattern="^[^\\s]+$" maxlength="150">',u+=n.suppressValue(n.memberLookup(i,"body",e.autoesc),e.autoesc),u+='</textarea>\n<div class="char-count" data-for="review-body"></div>\n<input type="hidden" name="app" value="',u+=n.suppressValue(o,e.autoesc),u+='" required>\n<footer class="form-footer only-logged-out c">\n<p>',u+=t.lookup("_")("Only users that are logged in may submit reviews."),u+="</p>\n</footer>\n<div>\n<button>",u+=t.lookup("_")("Cancel"),u+="</button>\n<button>",u+=n.suppressValue(i&&t.lookup("_")("Update Review")||t.lookup("_")("Submit Review"),e.autoesc),u+="</button>\n</div>\n</form>\n</mkt-prompt>",r=r.pop(),new n.SafeString(u)});t.addExport("review_prompt"),t.setVariable("review_prompt",u),s+='<div class="main add-review">',n.memberLookup(n.contextOrFrameLookup(t,r,"settings"),"meowEnabled",e.autoesc)||(s+='<header class="secondary-header">\n<h2>',s+=t.lookup("_")("Leave a Review"),s+="</h2>\n</header>"),s+=" ",s+=n.suppressValue(u(n.contextOrFrameLookup(t,r,"slug")),e.autoesc),s+="</div>",o(null,s)}catch(l){o(n.handleError(l,a,i))}}return{root:e}}(),e["ratings/edit.html"]=function(){function e(e,t,r,n,o){var a=null,i=null,s="";try{e.getTemplate("ratings/add.html",function(a,i){return a?void o(a):void i.getExported(function(a,i){if(a)return void o(a);if(!i.hasOwnProperty("review_prompt"))return void o(new Error("cannot import 'review_prompt'"));var u=i.review_prompt;t.setVariable("review_prompt",u),s+=" ",n.memberLookup(n.contextOrFrameLookup(t,r,"settings"),"meowEnabled",e.autoesc)||(s+='<header class="secondary-header">\n<h2>',s+=t.lookup("_")("Edit Review"),s+="</h2>\n</header>"),s+=" ",s+=n.suppressValue(e.getExtension("defer").run(t,n.makeKeywordArgs({url:n.contextOrFrameLookup(t,r,"endpoint"),id:"main"}),function(o){o||(o=function(e){if(e)throw e});var a="";return a+='<div class="main add-review">',a+=n.suppressValue(u(n.contextOrFrameLookup(t,r,"slug"),!1,n.contextOrFrameLookup(t,r,"normalize")(n.contextOrFrameLookup(t,r,"this"))),e.autoesc),a+="</div>",o(null,a),a},function(e){e||(e=function(e){if(e)throw e});var t="";return t+='<p class="spinner alt"></p>',e(null,t),t},null,null),!0&&e.autoesc),s+=" ",o(null,s)})})}catch(u){o(n.handleError(u,a,i))}}return{root:e}}(),e["ratings/flag.html"]=function(){function e(e,t,r,n,o){var a=null,i=null,s="";try{var u=n.makeMacro(["isModal"],[],function(e,o){r=r.push(),o=o||{},r.set("isModal",e);var a="";return a+="<mkt-prompt ",e&&(a+='data-modal="flag-review"'),a+='>\n<form class="flag-review-form">',e&&(a+="<h3>",a+=t.lookup("_")("Flag Review"),a+="</h3>"),a+="<p>",a+=t.lookup("_")("See an issue with this review? Select a reason below."),a+='</p>\n<ul class="reasons">\n<li><a class="button cancel" data-reason="review_flag_reason_spam">',a+=t.lookup("_")("Spam or otherwise non-review content"),a+='</a></li>\n<li><a class="button cancel" data-reason="review_flag_reason_language">',a+=t.lookup("_")("Inappropriate language/dialog"),a+='</a></li>\n<li><a class="button cancel" data-reason="review_flag_reason_bug_support">',a+=t.lookup("_")("Misplaced bug report or support request"),a+="</a></li>\n</ul>\n<div>\n<button>",a+=t.lookup("_")("Cancel"),a+='</button>\n<button class="hidden"></button>\n</div>\n</form>\n</mkt-prompt>',r=r.pop(),new n.SafeString(a)});t.addExport("flag_review_prompt"),t.setVariable("flag_review_prompt",u),s+='<div class="main report-spam">\n<header class="secondary-header">\n<h2>',s+=t.lookup("_")("Flag Review"),s+="</h2>",s+=n.suppressValue(u(),e.autoesc),s+="</header>\n</div>",o(null,s)}catch(l){o(n.handleError(l,a,i))}}return{root:e}}(),e["ratings/main.html"]=function(){function e(e,t,r,n,o){var a=null,i=null,s="";try{e.getTemplate("_macros/more_button.html",function(a,i){return a?void o(a):void i.render(t.getVariables(),r.push(),function(a,i){return a?void o(a):(s+=i,s+=" ",void e.getTemplate("_macros/stars.html",function(a,i){return a?void o(a):void i.getExported(function(a,i){if(a)return void o(a);if(!i.hasOwnProperty("stars"))return void o(new Error("cannot import 'stars'"));var u=i.stars;t.setVariable("stars",u),s+=" ",e.getTemplate("_macros/review.html",function(a,i){return a?void o(a):void i.getExported(function(a,i){if(a)return void o(a);if(!i.hasOwnProperty("review"))return void o(new Error("cannot import 'review'"));var u=i.review;t.setVariable("review",u),s+=" ";var l;l=n.contextOrFrameLookup(t,r,"api")("app",[n.contextOrFrameLookup(t,r,"slug")]),r.set("app_endpoint",l,!0),r.parent||(t.setVariable("app_endpoint",l),t.addExport("app_endpoint")),s+=" ",e.getTemplate("_includes/back_to_app.html",function(a,i){return a?void o(a):void i.render(t.getVariables(),r.push(),function(a,i){return a?void o(a):(s+=i,s+='<section class="main full detail app-reviews reviews-listing"\ndata-slug="',s+=n.suppressValue(n.contextOrFrameLookup(t,r,"slug"),e.autoesc),s+='">\n<div>',s+=n.suppressValue(e.getExtension("defer").run(t,n.makeKeywordArgs({url:n.contextOrFrameLookup(t,r,"apiParams")("reviews",{app:n.contextOrFrameLookup(t,r,"slug")}),pluck:"objects",id:"ratings",paginate:".reviews-wrapper"}),function(o){o||(o=function(e){if(e)throw e});var a="";return a+='<div class="detail-flex-wrap">\n<div class="detail-left-side">',n.memberLookup(n.contextOrFrameLookup(t,r,"settings"),"meowEnabled",e.autoesc)||(a+="<h3>",a+=t.lookup("_")("Reviews"),a+="</h3>"),a+=" ",e.getTemplate("_includes/reviews_summary.html",function(i,s){return i?void o(i):void s.render(t.getVariables(),r.push(),function(i,s){if(i)return void o(i);a+=s,a+='<ul class="reviews-wrapper">',r=r.push();var l=n.contextOrFrameLookup(t,r,"this");if(l)for(var c=0;c<l.length;c++){var p=l[c];r.set("_review",p),a+=" ",a+=n.suppressValue(u(p,n.makeKeywordArgs({slug:n.contextOrFrameLookup(t,r,"slug"),current_version:n.memberLookup(n.memberLookup(n.contextOrFrameLookup(t,r,"response"),"info",e.autoesc),"current_version",e.autoesc)})),e.autoesc),a+=" "}r=r.pop(),a+=" ",n.memberLookup(n.memberLookup(n.contextOrFrameLookup(t,r,"response"),"meta",e.autoesc),"next",e.autoesc)&&(a+=" ",a+=n.suppressValue(n.contextOrFrameLookup(t,r,"more_button")(n.memberLookup(n.memberLookup(n.contextOrFrameLookup(t,r,"response"),"meta",e.autoesc),"next",e.autoesc)),e.autoesc),a+=" "),a+='</ul>\n</div>\n<div class="detail-right-side">';var d;d=!0,r.set("is_review_listing",d,!0),r.parent||(t.setVariable("is_review_listing",d),t.addExport("is_review_listing")),a+=" ",e.getTemplate("_includes/reviews_sidebar.html",function(e,n){return e?void o(e):void n.render(t.getVariables(),r.push(),function(e,t){return e?void o(e):(a+=t,a+="</div>\n</div>",void o(null,a))})})})}),a},function(e){e||(e=function(e){if(e)throw e});var t="";return t+='<p class="spinner alt padded"></p>',e(null,t),t},function(e){e||(e=function(e){if(e)throw e
});var r="";return r+='<p class="no-results">',r+=t.lookup("_")("This app has no reviews."),r+="</p>",e(null,r),r},null),!0&&e.autoesc),s+="</div>\n</section>",void e.getTemplate("_includes/back_to_app.html",function(e,n){return e?void o(e):void n.render(t.getVariables(),r.push(),function(e,t){return e?void o(e):(s+=t,s+=" ",void o(null,s))})}))})})})})})}))})})}catch(u){o(n.handleError(u,a,i))}}return{root:e}}(),e["ratings/rating.html"]=function(){function e(e,t,r,n,o){var a=null,i=null,s="";try{e.getTemplate("_macros/review.html",function(a,i){return a?void o(a):void i.render(t.getVariables(),r.push(),function(a,i){return a?void o(a):(s+=i,s+='<section class="main c">\n<header class="secondary-header c">\n<h2>',s+=t.lookup("_")("App Review"),s+="</h2>\n</header>",s+=n.suppressValue(e.getExtension("defer").run(t,n.makeKeywordArgs({url:n.contextOrFrameLookup(t,r,"api")("review",[n.contextOrFrameLookup(t,r,"id")])}),function(o){o||(o=function(e){if(e)throw e});var a="";return a+='<div class="reviews reviews-listing single-review">\n<ul class="ratings-placeholder-inner">',a+=n.suppressValue(n.contextOrFrameLookup(t,r,"review")(n.contextOrFrameLookup(t,r,"this")),e.autoesc),a+="</ul>\n</div>",o(null,a),a},function(e){e||(e=function(e){if(e)throw e});var t="";return t+='<p class="spinner padded alt"></p>',e(null,t),t},null,function(e){e||(e=function(e){if(e)throw e});var r="";return r+='<p class="no-results">',r+=t.lookup("_")("The review you requested does not exist."),r+="</p>",e(null,r),r}),!0&&e.autoesc),s+="</section>",void o(null,s))})})}catch(u){o(n.handleError(u,a,i))}}return{root:e}}(),e["website/index.html"]=function(){function e(e,t,r,n,o){var a=null,i=null,s="";try{e.getTemplate("_macros/detail.html",function(a,i){return a?void o(a):void i.getExported(function(a,i){if(a)return void o(a);if(!i.hasOwnProperty("detail_header"))return void o(new Error("cannot import 'detail_header'"));var u=i.detail_header;t.setVariable("detail_header",u),s+=" ";var l;l=n.contextOrFrameLookup(t,r,"api")("website",[n.contextOrFrameLookup(t,r,"pk")]),r.set("endpoint",l,!0),r.parent||(t.setVariable("endpoint",l),t.addExport("endpoint")),s+=" ",s+=n.suppressValue(u(n.makeKeywordArgs({url:n.contextOrFrameLookup(t,r,"endpoint"),key:n.contextOrFrameLookup(t,r,"pk"),content_type:"website"})),e.autoesc),s+=" ",s+=n.suppressValue(e.getExtension("defer").run(t,n.makeKeywordArgs({url:n.contextOrFrameLookup(t,r,"endpoint"),as:"website",key:n.contextOrFrameLookup(t,r,"pk")}),function(o){o||(o=function(e){if(e)throw e});var a="";a+=" ",a+=" ";var i;if(i=n.memberLookup(n.contextOrFrameLookup(t,r,"apps"),"transform",e.autoesc)(n.contextOrFrameLookup(t,r,"this"),"website"),r.set("website",i,!0),r.parent||(t.setVariable("website",i),t.addExport("website")),a+='<section class="main full app-info website-detail">\n<div class="detail-flex-wrap">\n<div class="detail-left-side">',n.memberLookup(n.contextOrFrameLookup(t,r,"website"),"description",e.autoesc)&&(a+='<section class="prose">\n<div>\n<h3>',a+=t.lookup("_")("Description"),a+='</h3>\n<div class="description-wrapper truncated-wrapper truncated">\n<p class="description" itemprop="description">',a+=n.suppressValue(e.getFilter("nl2br").call(t,e.getFilter("translate").call(t,n.memberLookup(n.contextOrFrameLookup(t,r,"website"),"description",e.autoesc),n.contextOrFrameLookup(t,r,"website"))),e.autoesc),a+='</p>\n</div>\n<a href="#" class="truncate-toggle view-all-tab">',a+=t.lookup("_")("View All"),a+="</a>\n</div>\n</section>"),a+='</div>\n<div class="detail-right-side">',n.memberLookup(n.contextOrFrameLookup(t,r,"website"),"categories",e.autoesc)){a+='<section class="prose website-categories">\n<div>';var s;s='<a href="{url}" class="website-detail--category-link">{name}</a>',r.set("cat_link_format",s,!0),r.parent||(t.setVariable("cat_link_format",s),t.addExport("cat_link_format")),a+=" ";var u;u=n.memberLookup(n.contextOrFrameLookup(t,r,"website"),"categories",e.autoesc),r.set("categories",u,!0),r.parent||(t.setVariable("categories",u),t.addExport("categories")),a+=" ",2==n.memberLookup(n.contextOrFrameLookup(t,r,"categories"),"length",e.autoesc)?(a+=" ",a+=n.suppressValue(e.getFilter("format").call(t,t.lookup("_")("Explore more in {category_one} and {category_two}."),n.makeKeywordArgs({category_one:e.getFilter("format").call(t,n.contextOrFrameLookup(t,r,"cat_link_format"),n.makeKeywordArgs({url:n.memberLookup(n.memberLookup(n.contextOrFrameLookup(t,r,"categories"),0,e.autoesc),"url",e.autoesc),name:n.memberLookup(n.memberLookup(n.contextOrFrameLookup(t,r,"categories"),0,e.autoesc),"name",e.autoesc)})),category_two:e.getFilter("format").call(t,n.contextOrFrameLookup(t,r,"cat_link_format"),n.makeKeywordArgs({url:n.memberLookup(n.memberLookup(n.contextOrFrameLookup(t,r,"categories"),1,e.autoesc),"url",e.autoesc),name:n.memberLookup(n.memberLookup(n.contextOrFrameLookup(t,r,"categories"),1,e.autoesc),"name",e.autoesc)}))})),e.autoesc),a+=" "):(a+=" ",a+=n.suppressValue(e.getFilter("format").call(t,t.lookup("_")("Explore more in {category}."),n.makeKeywordArgs({category:e.getFilter("format").call(t,n.contextOrFrameLookup(t,r,"cat_link_format"),n.makeKeywordArgs({url:n.memberLookup(n.memberLookup(n.contextOrFrameLookup(t,r,"categories"),0,e.autoesc),"url",e.autoesc),name:n.memberLookup(n.memberLookup(n.contextOrFrameLookup(t,r,"categories"),0,e.autoesc),"name",e.autoesc)}))})),e.autoesc),a+=" "),a+="</div>\n</section>"}return a+='<section class="prose website-report-issue">\n<div>',a+=t.lookup("_")("Is there something wrong or out-of-date with this website listing?"),a+='</div>\n<a href="',a+=t.lookup("url")("website/issue",[n.contextOrFrameLookup(t,r,"pk")]),a+='">',a+=t.lookup("_")("Report an issue"),a+="</a>\n</section>\n</div>\n</div>\n</section>",o(null,a),a},null,null,function(e){e||(e=function(e){if(e)throw e});var t="";return t+=" ",e(null,t),t}),!0&&e.autoesc),s+=" ",o(null,s)})})}catch(u){o(n.handleError(u,a,i))}}return{root:e}}(),e["website/issue.html"]=function(){function e(e,t,r,n,o){var a=null,i=null,s="";try{e.getTemplate("_macros/forms.html",function(a,i){return a?void o(a):void i.getExported(function(a,i){if(a)return void o(a);if(!i.hasOwnProperty("potato_captcha"))return void o(new Error("cannot import 'potato_captcha'"));var u=i.potato_captcha;t.setVariable("potato_captcha",u),s+=" ";var l=n.makeMacro(["pk"],[],function(o,a){r=r.push(),a=a||{},r.set("pk",o);var i="";return i+='<mkt-prompt>\n<form class="issue-form">\n<p>',i+=t.lookup("_")("Let us know if something is missing from this website listing or its information should be updated."),i+="</p>\n<p>",i+=n.suppressValue(e.getFilter("format").call(t,t.lookup("_")('For information on show to report a copyright or trademark issue <a href="{url}" target="_blank">see here</a>.'),n.makeKeywordArgs({url:"https://www.mozilla.org/about/legal/report-abuse/"})),e.autoesc),i+='</p>\n<textarea name="text"\nplaceholder="',i+=t.lookup("_")("Describe the issue here. Please be specific."),i+='"\nrequired></textarea>\n<input type="hidden" name="website" value="',i+=n.suppressValue(o,e.autoesc),i+='">',i+=n.suppressValue(u(),e.autoesc),i+="<div>\n<button>",i+=t.lookup("_")("Cancel"),i+="</button>\n<button>",i+=t.lookup("_")("Report an issue"),i+="</button>\n</div>\n</form>\n</mkt-prompt>",r=r.pop(),new n.SafeString(i)});t.addExport("issue_prompt"),t.setVariable("issue_prompt",l),s+='<div class="main abuse">\n<header class="secondary-header">\n<h2>',s+=t.lookup("_")("Report an Issue"),s+="</h2>\n</header>",s+=n.suppressValue(l(n.contextOrFrameLookup(t,r,"pk")),e.autoesc),s+="</div>",o(null,s)})})}catch(u){o(n.handleError(u,a,i))}}return{root:e}}(),define("templates",["core/nunjucks","core/helpers"],function(t){return t.env=new t.Environment([],{autoescape:!0}),t.env.cache=t.templates=e,console.log("Templates loaded"),t})}(),function(e){define("document-register-element",[],function(){return function(){return function(e,t,r,n){function o(e,t){for(var r=0,n=e.length;n>r;r++)m(e[r],t)}function a(e){for(var t,r=0,n=e.length;n>r;r++)t=e[r],y(t,V[s(t)])}function i(e){return function(t){M.call(K,t)&&(m(t,e),o(t.querySelectorAll(T),e))}}function s(e){var t=e.getAttribute("is"),r=e.nodeName,n=P.call(C,t?A+t.toUpperCase():E+r);return t&&n>-1&&!u(r,t)?-1:n}function u(e,t){return-1<T.indexOf(e+'[is="'+t+'"]')}function l(e){var t=e.currentTarget,r=e.attrChange,n=e.prevValue,o=e.newValue;t.attributeChangedCallback&&"style"!==e.attrName&&t.attributeChangedCallback(e.attrName,r===e.ADDITION?null:n,r===e.REMOVAL?null:o)}function c(e){var t=i(e);return function(e){t(e.target)}}function p(e){tt&&(tt=!1,e.currentTarget.removeEventListener(L,p)),o((e.target||t).querySelectorAll(T),"attached")}function d(e,t){var r=this;J.call(r,e,t),g.call(r,{target:r})}function f(e,t){W(e,t),b?b.observe(e,Y):(et&&(e.setAttribute=d,e[_]=v(e),e.addEventListener(O,g)),e.addEventListener(x,l)),e.createdCallback&&(e.created=!0,e.createdCallback(),e.created=!1)}function m(e,t){var r,n=s(e),o="attached",a="detached";n>-1&&(k(e,V[n]),n=0,t!==o||e[o]?t!==a||e[a]||(e[o]=!1,e[a]=!0,n=1):(e[a]=!1,e[o]=!0,n=1),n&&(r=e[t+"Callback"])&&r.call(e))}if(!(n in t)){var g,h,v,b,k,y,_="__"+n+(1e5*Math.random()>>0),w="extends",x="DOMAttrModified",L="DOMContentLoaded",O="DOMSubtreeModified",E="<",A="=",F=/^[A-Z][A-Z0-9]*(?:-[A-Z0-9]+)+$/,S=["ANNOTATION-XML","COLOR-PROFILE","FONT-FACE","FONT-FACE-SRC","FONT-FACE-URI","FONT-FACE-FORMAT","FONT-FACE-NAME","MISSING-GLYPH"],C=[],V=[],T="",I=t.documentElement,P=C.indexOf||function(e){for(var t=this.length;t--&&this[t]!==e;);return t},N=r.prototype,R=N.hasOwnProperty,M=N.isPrototypeOf,z=r.defineProperty,D=r.getOwnPropertyDescriptor,j=r.getOwnPropertyNames,q=r.getPrototypeOf,U=r.setPrototypeOf,H=!!r.__proto__,B=r.create||function rt(e){return e?(rt.prototype=e,new rt):this},W=U||(H?function(e,t){return e.__proto__=t,e}:j&&D?function(){function e(e,t){for(var r,n=j(t),o=0,a=n.length;a>o;o++)r=n[o],R.call(e,r)||z(e,r,D(t,r))}return function(t,r){do e(t,r);while(r=q(r));return t}}():function(e,t){for(var r in t)e[r]=t[r];return e}),$=e.MutationObserver||e.WebKitMutationObserver,K=(e.HTMLElement||e.Element||e.Node).prototype,G=K.cloneNode,J=K.setAttribute,X=t.createElement,Y=$&&{attributes:!0,characterData:!0,attributeOldValue:!0},Q=$||function(){et=!1,I.removeEventListener(x,Q)},Z=!1,et=!0,tt=!0;U||H?(k=function(e,t){M.call(t,e)||f(e,t)},y=f):(k=function(e,t){e[_]||(e[_]=r(!0),f(e,t))},y=k),$||(I.addEventListener(x,Q),I.setAttribute(_,1),I.removeAttribute(_),et&&(g=function(e){var t,r,n,o=this;if(o===e.target){t=o[_],o[_]=r=v(o);for(n in r){if(!(n in t))return h(0,o,n,t[n],r[n],"ADDITION");if(r[n]!==t[n])return h(1,o,n,t[n],r[n],"MODIFICATION")}for(n in t)if(!(n in r))return h(2,o,n,t[n],r[n],"REMOVAL")}},h=function(e,t,r,n,o,a){var i={attrChange:e,currentTarget:t,attrName:r,prevValue:n,newValue:o};i[a]=e,l(i)},v=function(e){for(var t,r,n={},o=e.attributes,a=0,i=o.length;i>a;a++)t=o[a],r=t.name,"setAttribute"!==r&&(n[r]=t.value);return n})),t[n]=function(e,r){if(n=e.toUpperCase(),Z||(Z=!0,$?(b=function(e,t){function r(e,t){for(var r=0,n=e.length;n>r;t(e[r++]));}return new $(function(n){for(var o,a,i=0,s=n.length;s>i;i++)o=n[i],"childList"===o.type?(r(o.addedNodes,e),r(o.removedNodes,t)):(a=o.target,a.attributeChangedCallback&&"style"!==o.attributeName&&a.attributeChangedCallback(o.attributeName,o.oldValue,a.getAttribute(o.attributeName)))})}(i("attached"),i("detached")),b.observe(t,{childList:!0,subtree:!0})):(t.addEventListener("DOMNodeInserted",c("attached")),t.addEventListener("DOMNodeRemoved",c("detached"))),t.addEventListener(L,p),t.addEventListener("readystatechange",p),t.createElement=function(e,r){var n=X.apply(t,arguments),o=""+e,a=P.call(C,(r?A:E)+(r||o).toUpperCase()),i=a>-1;return r&&(n.setAttribute("is",r=r.toLowerCase()),i&&(i=u(o.toUpperCase(),r))),i&&y(n,V[a]),n},K.cloneNode=function(e){var t=G.call(this,!!e),r=s(t);return r>-1&&y(t,V[r]),e&&a(t.querySelectorAll(T)),t}),-2<P.call(C,A+n)+P.call(C,E+n))throw new Error("A "+e+" type is already registered");if(!F.test(n)||-1<P.call(S,n))throw new Error("The type "+e+" is invalid");var n,l=function(){return t.createElement(m,f&&n)},d=r||N,f=R.call(d,w),m=f?r[w].toUpperCase():n,g=C.push((f?A:E)+n)-1;return T=T.concat(T.length?",":"",f?m+'[is="'+e.toLowerCase()+'"]':m),l.prototype=V[g]=R.call(d,"prototype")?d.prototype:B(K),o(t.querySelectorAll(T),"attached"),l}}}(window,document,Object,"registerElement"),window.document.registerElement}.apply(e,arguments)})}(this),define("compat_filter",["core/capabilities","core/l10n","core/log","core/settings","core/storage","core/utils","core/views","core/z","underscore"],function(e,t,r,n,o,a,i,s,u){function l(e){return"all"!=e||L||(e=""),L==e}function c(e){var t={},r=L;return r&&-1===v.indexOf(e)?(r=r.split("-"),r.length>1?(t.dev=r[0],t.device=r[1]):"all"!=r[0]?(t.dev=r[0],t.device=""):(t.dev="",t.device="")):(t.dev=y,t.device=_),t.limit=m,"firefoxos"===y&&y===t.dev&&_===t.device&&u.indexOf(g,e)>=0&&(t.pro=h),t}function p(){return L}var d=r("compat_filter"),f=t.gettext_lazy,m=24,g=["category","feed","feed-app","feed-brand","feed-collection","feed-items","feed-shelf","installed","recommended","search"],h=a.getVars().pro||"7fffffffffff0.51.6",v=["feed-app","games-daily","games-listing"],b={"":f("All Platforms"),"android-mobile":f("Android Mobile"),"android-tablet":f("Android Tablet"),desktop:f("Desktop"),firefoxos:f("Firefox OS")},k=[["all",f("All Platforms")],["desktop",f("Desktop")],["firefoxos",f("Firefox OS")],["android-mobile",f("Android Mobile")],["android-tablet",f("Android Tablet")]],y=e.device_platform(),_=e.device_formfactor(),w="filter-device",x=o.getItem(w),L=x||e.device_type();s.body.attr("data-platform",y),s.body.on("change",".compat-filter",function(){void 0!==this.value&&(L=this.value,o.setItem(w,L),d.log("Filtering: "+L),i.reload())}),("mobile"==_||"firefoxos"==y)&&(m=10);var O;return k.forEach(function(e){e[0]==(L||"all")&&(O=e[1])}),{DEVICE_CHOICES:b,DEVICE_FILTER_CHOICES:k,apiArgs:c,featureProfile:h,getFilterDevice:p,initialDeviceText:O,isDeviceSelected:l,limit:m}}),define("content_filter",["core/capabilities","core/l10n","core/log","core/settings","core/storage","core/utils","core/views","core/z","underscore"],function(e,t,r,n,o,a,i,s){function u(e){return-1!==f.indexOf(e)?{}:{doc_type:n.meowEnabled?h:"webapp"}}function l(){return h}var c=r("content_filter"),p=t.gettext_lazy,d="desktop"===e.os.type,f=["feed","feed-app","feed-brand","feed-collection","feed-shelf","games-daily","games-listing"],m=[["all",p("all content")],["webapp",p("apps")],["website",p("websites")]],g="filter-content",h=o.getItem(g)||"all";return-1===["webapp","website"].indexOf(h)&&(h="all"),s.body.on("change",".content-filter",function(){void 0!==this.value&&(h=this.value,o.setItem(g,h),c.log("Filtering content: "+h),i.reload())}),{CONTENT_FILTER_CHOICES:m,apiArgs:u,get enabled(){return n.meowEnabled&&!d},getFilterContent:l}}),function(e,t){"function"==typeof define&&define.amd?define("regions",[],t):"object"==typeof exports?module.exports=t():e.returnExports=t()}(this,function(){return{MOBILE_CODES:{216:"hu",214:"es",212:"mc",213:"ad",218:"ba",219:"hr",653:"sz",626:"st",525:"sg",540:"sb",222:"it",289:"ge",288:"fo",405:"in",404:"in",340:"mq",547:"pf",401:"kz",545:"ki",280:"cy",548:"ck",282:"ge",348:"vg",284:"bg",286:"tr",402:"bt",716:"pe",714:"pa",712:"cr",330:"pr",366:"dm",260:"pl",266:"gi",268:"pt",736:"bo",422:"om",362:"cw",424:"ae",414:"mm",415:"lb",416:"jo",417:"sy",410:"pk",360:"vc",412:"af",530:"nz",441:"jp",370:"do",294:"mk",295:"li",418:"iq",374:"tt",290:"gl","null":"gs",605:"tn",708:"hn",704:"gt",311:"us",310:"us",316:"us",702:"bz",270:"lu",272:"ie",619:"sl",274:"is",276:"al",278:"mt",313:"us",204:"nl",537:"pg",344:"ag",429:"np",428:"mn",520:"th",368:"cu",613:"bf",421:"ye",420:"sa",364:"bs",365:"ai",425:"il",363:"aw",427:"qa",426:"bh",308:"pm",440:"jp",536:"nr",542:"fj",302:"ca",413:"lk",244:"ax",247:"lv",246:"lt",240:"se",242:"bv",607:"gm",248:"ee",372:"ht",292:"sm",293:"si",641:"ug",640:"tz",643:"mz",642:"bi",645:"zm",539:"to",647:"re",646:"mg",436:"tj",648:"zw",434:"uz",376:"tc",515:"ph",514:"tl",623:"cf",622:"td",621:"ng",620:"gh",627:"gq",338:"bm",625:"cv",624:"cm",450:"kr",334:"mx",452:"vn",628:"ga",454:"hk",455:"mo",456:"kh",457:"la",259:"md",250:"ru",257:"by",255:"ua",541:"vu",746:"sr",730:"cl",346:"ky",657:"er",654:"km",732:"co",652:"bw",734:"ve",650:"mw",651:"ls",738:"gy",505:"au",502:"my",706:"sv",546:"nc",630:"cd",631:"ao",632:"gw",633:"sc",634:"sd",635:"rw",636:"et",637:"so",638:"dj",609:"mr",466:"tw",460:"cn",608:"sn",528:"bn",228:"ch",226:"ro",225:"va",342:"bb",283:"am",220:"rs",549:"ws",659:"ss",629:"cg",724:"br",722:"ar",544:"as",297:"me",740:"ec",604:"eh",748:"uy",606:"ly",744:"py",603:"dz",602:"eg",555:"nu",400:"az",551:"mh",550:"fm",553:"tv",552:"pw",750:"fk",238:"dk",234:"im",235:"uk",230:"cz",231:"sk",232:"at",639:"ke",437:"kg",618:"lr",202:"gr",438:"tm",206:"be",612:"ci",208:"fr",610:"ml",611:"gn",616:"bj",617:"mu",614:"ne",419:"kw",649:"na",615:"tg",510:"id",655:"za",710:"ni",262:"de",472:"mv",356:"kn",470:"bd",354:"ms",352:"gd",350:"bm",358:"lc"},REGION_CHOICES_SLUG:{gw:"Guinea-Bissau",gu:"Guam",gt:"Guatemala",gs:"South Georgia and the South Sandwich Islands",gr:"Greece",gq:"Equatorial Guinea",gp:"Guadeloupe",gy:"Guyana",gg:"Guernsey",gf:"French Guiana",ge:"Georgia",gd:"Grenada",ga:"Gabon",gn:"Guinea-Conakry",gm:"Gambia",gl:"Greenland",gi:"Gibraltar",gh:"Ghana",tz:"Tanzania",lc:"Saint Lucia",la:"Lao People's Democratic Republic",tv:"Tuvalu",tw:"Taiwan",tt:"Trinidad and Tobago",tr:"Turkey",lk:"Sri Lanka",li:"Liechtenstein",lv:"Latvia",to:"Tonga",lt:"Lithuania",tm:"Turkmenistan",tj:"Tajikistan",ls:"Lesotho",th:"Thailand",tf:"French Southern Territories",tg:"Togo",td:"Chad",tc:"Turks and Caicos Islands",ly:"Libya","do":"Dominican Republic",dm:"Dominica",dj:"Djibouti",dk:"Denmark",de:"Germany",ye:"Yemen",me:"Montenegro",dz:"Algeria",uy:"Uruguay",yt:"Mayotte",qa:"Qatar",zm:"Zambia",eh:"Western Sahara",wf:"Wallis and Futuna",ee:"Estonia",eg:"Egypt",za:"South Africa",ec:"Ecuador",sj:"Svalbard and Jan Mayen",sg:"Singapore",us:"United States",et:"Ethiopia",zw:"Zimbabwe",es:"Spain",er:"Eritrea",ru:"Russia",rw:"Rwanda",rs:"Serbia",re:"Runion",it:"Italy",ro:"Romania",tk:"Tokelau",bd:"Bangladesh",be:"Belgium",bf:"Burkina Faso",bg:"Bulgaria",ms:"Montserrat",bb:"Barbados",bl:"Saint Barthlemy",bm:"Bermuda",bn:"Brunei Darussalam",bo:"Bolivia, Plurinational State of",bh:"Bahrain",bi:"Burundi",bj:"Benin",bt:"Bhutan",jm:"Jamaica",bv:"Bouvet Island",bw:"Botswana",ws:"Samoa",bq:"Bonaire, Sint Eustatius and Saba",br:"Brazil",bs:"Bahamas",je:"Jersey",by:"Belarus",bz:"Belize",tn:"Tunisia",om:"Oman",my:"Malaysia",ky:"Cayman Islands",lr:"Liberia",jo:"Jordan",ck:"Cook Islands",ci:"Cte d'Ivoire",ch:"Switzerland",co:"Colombia",cn:"China",cm:"Cameroon",cl:"Chile",cc:"Cocos (Keeling) Islands",ca:"Canada",cg:"Congo",cf:"Central African Republic",cd:"Congo, Democratic Republic of the",cz:"Czech Republic",cy:"Cyprus",cx:"Christmas Island",cr:"Costa Rica",cw:"Curaao",cv:"Cabo Verde",cu:"Cuba",ve:"Venezuela",pr:"Puerto Rico",ps:"Palestine, State of",pw:"Palau",pt:"Portugal",py:"Paraguay",tl:"Timor-Leste",mu:"Mauritius",iq:"Iraq",pa:"Panama",restofworld:"Rest of World",pg:"Papua New Guinea",pe:"Peru",pk:"Pakistan",ph:"Philippines",pn:"Pitcairn",pl:"Poland",pm:"Saint Pierre and Miquelon",hr:"Croatia",ht:"Haiti",hu:"Hungary",hk:"Hong Kong",lu:"Luxembourg",hn:"Honduras",vn:"Viet Nam",hm:"Heard Island and McDonald Islands",jp:"Japan",lb:"Lebanon",md:"Moldova, Republic of",mg:"Madagascar",mf:"Saint Martin (French part)",ma:"Morocco",mc:"Monaco",uz:"Uzbekistan",mm:"Myanmar",ml:"Mali",mo:"Macao",mn:"Mongolia",mh:"Marshall Islands",mk:"Macedonia, the former Yugoslav Republic of",um:"United States Minor Outlying Islands",mt:"Malta",mw:"Malawi",mv:"Maldives",mq:"Martinique",mp:"Northern Mariana Islands",uk:"United Kingdom",mr:"Mauritania",im:"Isle of Man",ug:"Uganda",ua:"Ukraine",mx:"Mexico",mz:"Mozambique",va:"Holy See",vc:"Saint Vincent and the Grenadines",ae:"United Arab Emirates",ad:"Andorra",ag:"Antigua and Barbuda",vg:"Virgin Islands, British",ai:"Anguilla",vi:"Virgin Islands, U.S.",is:"Iceland",am:"Armenia",al:"Albania",ao:"Angola",sv:"El Salvador",aq:"Antarctica",as:"American Samoa",ar:"Argentina",au:"Australia",vu:"Vanuatu",aw:"Aruba","in":"India",ax:"land Islands",az:"Azerbaijan",ie:"Ireland",id:"Indonesia",ni:"Nicaragua",nl:"Netherlands",no:"Norway",il:"Israel",na:"Namibia",nc:"New Caledonia",ne:"Niger",nf:"Norfolk Island",ng:"Nigeria",nz:"New Zealand",np:"Nepal",kw:"Kuwait",nr:"Nauru",nu:"Niue",fr:"France",io:"British Indian Ocean Territory",pf:"French Polynesia",af:"Afghanistan",ba:"Bosnia and Herzegovina",sb:"Solomon Islands",fi:"Finland",fj:"Fiji",fk:"Falkland Islands (Malvinas)",fm:"Micronesia, Federated States of",fo:"Faroe Islands",sz:"Swaziland",sy:"Syrian Arab Republic",sx:"Sint Maarten (Dutch part)",kg:"Kyrgyzstan",ke:"Kenya",ss:"South Sudan",sr:"Suriname",ki:"Kiribati",kh:"Cambodia",kn:"Saint Kitts and Nevis",km:"Comoros",st:"Sao Tome and Principe",sk:"Slovakia",kr:"Korea, Republic of",si:"Slovenia",sh:"Saint Helena, Ascension and Tristan da Cunha",so:"Somalia",sn:"Senegal",sm:"San Marino",sl:"Sierra Leone",sc:"Seychelles",kz:"Kazakhstan",sa:"Saudi Arabia",at:"Austria",se:"Sweden",sd:"Sudan"}}}),define("user_helpers",["regions","core/user","core/utils"],function(e,t,r){function n(e,r){return"region"in a?a.region:t.get_setting("region_override")||t.get_setting("region_sim")||i||!r&&t.get_setting("region_geoip")||e||""}function o(){return"carrier"in a?a.carrier:t.get_setting("carrier_override")||t.get_setting("carrier_sim")||""}var a=r.getVars(),i=null;return{carrier:o,region:n,set_region_geoip:function(e){i=e,t.update_settings({region_geoip:e})}}}),define("route_api_args",["compat_filter","content_filter","core/router","core/settings","user_helpers","underscore"],function(e,t,r,n,o,a){r.api.addProcessor(function(r){var i=e.apiArgs(r);return n.meowEnabled&&(i=a.extend(i,t.apiArgs(r))),i.region=o.region(void 0,!0),i.carrier=o.carrier(),i})}),define("rewriters",["core/log","core/settings","underscore","core/urls","core/utils","routes"],function(e,t,r,n,o){function a(e){return function(t,r,n){var a=o.baseurl(t);if(a===o.baseurl(e)){var s=o.querystring(t);if("offset"in s){delete s.offset,delete s._bust;var u=o.urlparams(a,s);return i.log("Attempting to rewrite",u),u in n?(n[u].meta.limit+=r.meta.limit,n[u].meta.next=r.meta.next,n[u].objects=n[u].objects.concat(r.objects),null):void i.error("Could not find cache entry to rewrite")}}}}var i=e("rewriters");if(!t.cache_rewriting_enabled)return[];var s=["feed","installed","recommended","reviews","search","langpacks"];return s.map(function(e){return a(n.api.base.url(e))})}),define("init",["core/init","routes","settings_app","templates","core/cache","document-register-element","route_api_args","rewriters"],function(e,t,r,n,o,a,i,s){return["every","forEach","map","filter","reduce","reduceRight","some"].forEach(function(e){NodeList.prototype[e]=HTMLCollection.prototype[e]=Array.prototype[e]}),s.forEach(function(e){o.addRewriter(e)}),e.ready}),define("categories",["core/l10n"],function(e){var t=e.gettext;return[{slug:"games",name:t("Games")},{slug:"books-comics",name:t("Books & Comics")},{slug:"business",name:t("Business")},{slug:"education",name:t("Education")},{slug:"entertainment",name:t("Entertainment")},{slug:"food-drink",name:t("Food & Drink")},{slug:"health-fitness",name:t("Health & Fitness")},{slug:"humor",name:t("Humor")},{slug:"internet",name:t("Internet")},{slug:"kids",name:t("Kids")},{slug:"lifestyle",name:t("Lifestyle")},{slug:"maps-navigation",name:t("Maps & Navigation")},{slug:"music",name:t("Music")},{slug:"news",name:t("News")},{slug:"personalization",name:t("Personalization")},{slug:"photo-video",name:t("Photo & Video")},{slug:"productivity",name:t("Productivity")},{slug:"reference",name:t("Reference")},{slug:"science-tech",name:t("Science & Tech")},{slug:"shopping",name:t("Shopping")},{slug:"social",name:t("Social")},{slug:"sports",name:t("Sports")},{slug:"travel",name:t("Travel")},{slug:"utilities",name:t("Utilities")},{slug:"weather",name:t("Weather")}]}),define("installer_direct",["core/defer","core/l10n","core/log","core/settings","core/z"],function(e,t,r,n,o){function a(t){t=t||{};var r=e.Deferred(),n=(t.navigator||window.navigator).mozApps,a=n.getInstalled();return a.onsuccess=function(){for(var e=[],t=0;t<a.result.length;t++)e.push(a.result[t].manifestURL);o.apps=e,r.resolve(e)},r.promise()}function i(t,r){r=r||{};var n=e.Deferred(),o=(r.navigator||window.navigator).mozApps,a=o.getInstalled();return a.onsuccess=function(){for(var e=0;e<a.result.length;e++)a.result[e].manifestURL==t&&n.resolve(a.result[e]);n.reject()},n.promise()}function s(e){var t=navigator.mozApps.getInstalled();t.onsuccess=function(){for(var r={},n=0;n<t.result.length;n++)r[t.result[n].manifestURL]=t.result[n];r[e].launch()}}function u(t,r){var n=e.Deferred();return f.log("Checking for update of "+t),i(t,r).done(function(e){if(e.downloading)return f.log("Checking for app update failed (APP_IS_DOWNLOADING) for "+t),void n.reject("APP_IS_DOWNLOADING");if(e.downloadAvailable)return f.log("Checking for app update succeeded immediately (downloadavailable) for "+t),void n.resolve(!0);e.ondownloadavailable=function(){f.log("Checking for app update succeeded (downloadavailable) for "+t),n.resolve(e.downloadAvailable)},e.ondownloadapplied=function(){f.log("Checking for app update succeeded (downloadaapplied) for "+t),n.resolve(e.downloadAvailable)};var r=e.checkForUpdate();r.onerror=function(){var e=this.error.name||this.error;f.log("Checking for app update failed ("+e+") for "+t),n.reject(e)}}).fail(function(){f.log("Checking for app update failed (NOT_INSTALLED) for "+t),n.reject("NOT_INSTALLED")}),n.promise()}function l(t,r){var n=e.Deferred();return f.log("Applying update of "+t),i(t,r).done(function(e){return e.ondownloadsuccess=function(){f.log("Applying app update succeeded (downloadsuccess) for "+t),n.resolve()},e.ondownloaderror=function(e){f.log("Applying app update failed (downloaderror) for "+t),n.reject(e.application.downloadError.name)},e.downloading?void n.reject("APP_IS_DOWNLOADING"):e.downloadAvailable?void e.download():void n.reject("NO_DOWNLOAD_AVAILABLE")}).fail(function(){n.reject("NOT_INSTALLED")}),n.promise()}function c(t,r){f.log("Using direct installer for "+t.manifest_url);var n=e.Deferred();r.data=r.data||{};var o;t.manifest_url&&(o=t.manifest_url);var a=(r.navigator||window.navigator).mozApps,i=t.is_packaged?"installPackage":"install";if(!a[i])return n.reject(d("Unable to install packaged apps")).promise();var s=a[i](o,r.data);return s.onsuccess=function(){f.log("App install request for "+t.name);var e,r=setInterval(function(){e=s.result.installState,"installed"==e&&(n.resolve(),clearInterval(r))},250);s.result.ondownloaderror=function(e){n.reject(e.application.downloadError.name),clearInterval(r)}},s.onerror=function(){n.reject(this.error.name||this.error)},n.promise()}function p(t,r){var n=e.Deferred();return c(t,r).done(function(){f.log("App installed: "+t.name),n.resolve({},t)}).fail(function(e){f.log("Install failed: "+e),"DENIED"==e?n.reject():n.reject("NETWORK_ERROR"==e?d("Sorry, we had trouble fetching this app's data. Please try again later."):d("App install error: {error}",{error:e}))}),n.promise()}var d=t.gettext,f=r("installer");return{applyUpdate:l,checkForUpdate:u,getInstalled:a,launch:s,install:p}}),define("installer_iframe",["core/defer","core/l10n","core/log","core/settings","core/utils","core/z"],function(e,t,r,n,o,a){function i(){var e="iframe-installer",t=a.body.data("build-id-js"),r=n.iframe_installer_src;t&&(r=o.urlparams(n.iframe_installer_src,{b:t,cache:31536e3})),document.getElementById(e)||(g=document.createElement("iframe"),g.id=e,g.src=r,g.height=0,g.width=0,g.style.borderWidth=0,g.style.position="fixed",document.body.appendChild(g))}function s(t,r){f.log("Using iframe installer for "+t.manifest_url);var o=e.Deferred();return g.contentWindow.postMessage({name:"install-package",data:{product:t,opt:r}},"*"),a.page.on("iframe-install-package",function(e,r){if(f.log("Received message from iframe installer (install-package)"),r&&"install-package"==r.name&&r.appId==t.id)if(r.error){if(f.log("iframe install failed: "+r.error.error),"DENIED"==r.error.error)return void o.reject();if("NETWORK_ERROR"==r.error.error)return void o.reject(n.offline_msg);o.reject(d("App install error: {error}",r.error))}else f.log("iframe install success"),o.resolve({},r.product)}),o.promise()}function u(t){f.log("Checking for update of "+t);var r=m["check-for-update"][t];return r?(f.log("We are already checking for update of "+t),r):(r=e.Deferred(),m["check-for-update"][t]=r,g.contentWindow.postMessage({name:"check-for-update",manifestURL:t},"*"),r.promise())}function l(t){f.log("Downloading update of "+t);var r=m["apply-update"][t];return r?(f.log("We are already downloading update of "+t),r):(r=e.Deferred(),m["apply-update"][t]=r,g.contentWindow.postMessage({name:"apply-update",manifestURL:t},"*"),r.promise())}function c(){f.log("Getting installed apps");var t=e.Deferred();return a.page.one("iframe-getInstalled",function(e,r){f.log("Received message from iframe installer (getInstalled)"),r&&"getInstalled"==r.name&&(f.log("Got installed apps: "+r.result),a.apps=r.result,t.resolve(r.result))}),g.contentWindow.postMessage({name:"getInstalled"},"*"),t.promise()}function p(e){g.contentWindow.postMessage({name:"launch-app",manifestURL:e},"*")}var d=t.gettext,f=r("installer"),m={"check-for-update":{},"apply-update":{}};window.addEventListener("message",function(e){if(0!==n.iframe_installer_src.indexOf(e.origin))return void("https://login.persona.org"!==e.origin&&f.log(e.origin+" origin not allowed"));switch(e.data.name){case"loaded":return a.page.trigger("iframe-install-loaded");case"install-package":return a.page.trigger("iframe-install-package",[e.data]);case"getInstalled":return a.page.trigger("iframe-getInstalled",[e.data]);case"check-for-update":return a.page.trigger("iframe-check-for-update",[e.data]);case"apply-update":return a.page.trigger("iframe-apply-update",[e.data])}});var g;return a.page.on("iframe-check-for-update iframe-apply-update",function(e,t){f.log("Received message from iframe installer ("+t.name+")");var r=t.manifestURL,n=t.name,o=m[n][r];o&&(t.error?o.reject(t):o.resolve(t))}),{applyUpdate:l,checkForUpdate:u,getInstalled:c,initialize_iframe:i,launch:p,install:s}}),define("installer_mock",["core/defer","core/l10n","core/log","core/settings","core/z"],function(e,t,r,n,o){var a=(t.gettext,r("installer-mock")),i=function(){this.manifests=[],this.availableDownloads={}};return i.prototype={applyUpdate:function(){var t=e.Deferred();return setTimeout(function(){t.resolve()},25),t},checkForUpdate:function(t){var r=e.Deferred(),n=!!this.availableDownloads[t];return setTimeout(function(){r.resolve(n)},25),r},getInstalled:function(){var t=e.Deferred(),r=this.manifests;return setTimeout(function(){o.apps=r,t.resolve(r)},25),t.promise()},launch:function(e){a.log("Launching "+e)},install:function(t){this.manifests.push(t.manifest_url);var r=e.Deferred();return setTimeout(function(){r.resolve({},t)},25),r.promise()},_clearInstalled:function(){this.manifests=[]},_populateInstalledApps:function(e){for(var t=0;(e||200)>t;t++)this.install({manifest_url:"http://randommanifest"+t+".com"})},_setDownloadAvailable:function(e,t){this.availableDownloads[e]=t}},i}),define("apps",["categories","core/capabilities","core/defer","installer_direct","installer_iframe","installer_mock","core/l10n","core/nunjucks","core/settings","underscore","core/urls","core/utils","core/z"],function(e,t,r,n,o,a,i,s,u,l,c,p,d){function f(e,t){var n=r.Deferred();return y.install(e,t).done(function(e,t){d.page.trigger("install-success",{slug:t.slug}),n.resolve(e,t),-1===d.apps.indexOf(t.manifest_url)&&d.apps.push(t.manifest_url)
}).fail(function(e,t){n.reject(e,t)}),n.promise()}function m(){return y.getInstalled()}function g(e){return y.launch(e)}function h(e){return y.checkForUpdate(e)}function v(e){return y.applyUpdate(e)}function b(e){if(!u.never_incompat){if(L&&x in e)return e[x];var r=[],n=t.device_type();return e.payment_required&&!e.price&&r.push(_("not available for your region")),(!e.isWebsite&&!t.webApps||!t.packagedWebApps&&e.is_packaged||!l.contains(e.device_types,n))&&r.push(_("not available for your platform")),e[x]=r.length?r:void 0,e[x]}}function k(t){return t.__transformed?t:(t.categories&&(t.categories=e.filter(function(e){return-1!==t.categories.indexOf(e.slug)}).map(function(e){return l.extend({url:c.reverse("category",[e.slug])},e)})),t.url?(t.isWebsite=!0,t.previews=[],t.contentType="website",t.key=t.id):(t.isApp=!0,t.contentType="app",t.short_name=t.name,t.key=t.slug),t.__transformed=!0,t)}var y,_=i.gettext,w=r.Deferred();"app:"===window.location.protocol?(y=o,y.initialize_iframe(),d.page.one("iframe-install-loaded",function(){w.resolve()})):t.phantom||u.mockWebApps?(y=new a,w.resolve()):(y=n,w.resolve());var x="__compat_reasons",L=!0;return{applyUpdate:v,checkForUpdate:h,getInstalled:m,incompat:b,install:f,launch:g,promise:w.promise(),installer:y,transform:k,_use_compat_cache:function(e){L=e}}}),function(e,t){"function"==typeof define&&define.amd?define("carriers",[],t):"object"==typeof exports?module.exports=t():e.returnExports=t()}(this,function(){return{CARRIER_SLUGS:["megafon","kddi","vimpelcom","deutsche_telekom","sprint","o2","tmn","america_movil","congstar","telenor","singtel","telefonica","orange","etisalat","grameenphone","china_unicom","mtn","qtel","telecom_italia_group","smart","hutchinson_three_group","kt"],MOBILE_CODES:{260:{2:"deutsche_telekom"},214:{5:"telefonica",7:"telefonica"},262:{1:{__default:"deutsche_telekom","congstar.de":"congstar",congstar:"congstar"},2:"deutsche_telekom",7:"o2"},541:{1:"orange"},297:{1:"telenor",2:"deutsche_telekom",4:"deutsche_telekom"},310:{160:"deutsche_telekom",26:"deutsche_telekom",260:"deutsche_telekom",490:"deutsche_telekom"},334:{2:"america_movil",3:"telefonica",20:"america_movil"},740:{1:"america_movil"},602:{1:"orange"},605:{1:"orange"},608:{1:"orange"},610:{2:"orange"},611:{1:"orange"},612:{3:"orange"},614:{4:"orange"},617:{1:"orange"},623:{3:"orange"},624:{2:"orange"},632:{3:"orange"},639:{7:"orange"},640:{2:"orange"},646:{2:"orange"},652:{2:"orange"},655:{10:"mtn"},416:{77:"orange"},440:{75:"kddi",70:"kddi",7:"kddi",8:"kddi",73:"kddi",74:"kddi",71:"kddi",76:"kddi",77:"kddi",78:"kddi",79:"kddi",72:"kddi",50:"kddi",51:"kddi",52:"kddi",53:"kddi",54:"kddi",55:"kddi",56:"kddi",88:"kddi",89:"kddi"},714:{2:"telefonica",3:"america_movil"},704:{3:"telefonica"},706:{4:"telefonica"},710:{3:"telefonica"},712:{4:"telefonica"},716:{10:"america_movil",6:"telefonica"},202:{5:"deutsche_telekom"},460:{1:"china_unicom"},722:{320:"america_movil",10:"telefonica",330:"america_movil",310:"america_movil",70:"telefonica"},724:{10:"telefonica",11:"telefonica",6:"telefonica",23:"telefonica"},470:{1:"grameenphone"},216:{1:"telenor",20:"telenor",70:"deutsche_telekom",30:"deutsche_telekom"},730:{2:"telefonica"},220:{1:"telenor",2:"telenor"},734:{4:"telefonica"},732:{123:"telefonica",102:"telefonica"},230:{1:"deutsche_telekom",2:"telefonica",10:"telefonica"},234:{2:"telefonica",11:"telefonica",10:"telefonica",30:"deutsche_telekom"},748:{10:"america_movil",7:"telefonica"}}}}),define("tracking",["core/log","core/settings","core/storage","core/utils","core/z","underscore"],function(e,t,r,n,o,a){function i(){var e=a.toArray(arguments);return p.push(e),window.ga?window.ga.apply(this,e):void c.error("window.ga not found")}function s(){window.GoogleAnalyticsObject="ga",window.ga=window.ga||function(){(window.ga.q=window.ga.q||[]).push(arguments)},window.ga.l=1*new Date;var e=document.createElement("script");e.type="text/javascript",e.async=!0,e.src="https://www.google-analytics.com/analytics.js",document.body.appendChild(e),i("create",t.ua_tracking_id,{storage:"none",clientId:f}),i("set","anonymizeIp",!0),i("set","checkProtocolTask",function(){}),i("send","pageview")}function u(){var e=a.toArray(arguments);if(t.potatolytics_enabled){if(e[0]===t.ua_tracking_id?b.unshift(e):b.push(e),v)for(var r;r=b.shift();)r.name="potatolytics-tracking",g.contentWindow.postMessage(r,h),p.push(r)}else i.apply(this,e);return e}function l(){return window.location.pathname+window.location.search}var c=e("tracking"),p=[],d={},f=r.getItem("clientID");f||r.setItem("clientID",f=(Date.now()+Math.random()).toString(36));var m,g,h=t.iframe_potatolytics_src,v=!1,b=[];return t.ua_tracking_id&&(t.potatolytics_enabled?(m=o.body.data("build-id-js"),m&&(h=n.urlparams(t.iframe_potatolytics_src,{b:m,cache:31536e3})),c.log("UA iframe init"),g=document.createElement("iframe"),g.id="iframe-potatolytics",g.src=h,g.height=0,g.width=0,g.style.borderWidth=0,document.body.appendChild(g),window.addEventListener("message",function(e){if(e.data.name)switch(e.data.name){case"potatolytics-tracking":break;case"potatolytics-loaded":c.log("UA iframe loaded"),v=!0,s()}})):(c.log("UA tracking init"),s())),o.win.on("navigating unload",function(){u("send","pageview",a.extend({page:l(),title:document.title},d)),d={}}),{pageVars:d,sendEvent:function(){var e=a.toArray(arguments);return u.apply(this,["send","event"].concat(e))},setPageVar:function(e,t){return d[e]=t,d},setSessionVar:function(e,t){return u.apply(this,["set",e,t])},trackLog:p}}),define("mobilenetwork",["carriers","core/l10n","core/log","regions","tracking","core/user","core/utils"],function(e,t,r,n,o,a,i){function s(e,t,r){c.tagged("getNetwork").log("Trying MCC = "+e+", MNC = "+t+", SPN = "+r),e=(+e||0)+"",t=(+t||0)+"",r=(r||"").toLowerCase(),"260"===e&&"2"===t[0]&&(t=2),"732"===e&&"1"===t[0]&&(t=123),"214"===e&&("5"===t[0]&&(t=5),"7"===t[0]&&(t="7"));var o=d[e];return"object"==typeof o&&(o=o[t],"object"==typeof o&&(o=o[r]||o.__default)),{region:n.MOBILE_CODES[e]||null,carrier:o||null}}function u(e,t){function r(e){var t=(e||"-").split("-");return t.length<2?null:{mcc:t[0],mnc:t[1],spn:t[2]}}var n=r(e.lastKnownHomeNetwork||e.lastKnownNetwork);return t.log("lastKnownNetwork: "+e.lastKnownNetwork+", lastKnownHomeNetwork: "+e.lastKnownHomeNetwork),n?(t.log("Using network: "+n),n):(t.log("Unknown network."),{mcc:void 0,mnc:void 0,spn:void 0})}function l(e,t){function r(){return b.mcc||b.mnc||b.spn?[{mcc:b.mcc,mnc:b.mnc,spn:b.spn}]:void 0}function n(){try{return JSON.parse(b.mccs)}catch(e){}}function o(){try{if(e.mozMobileConnections){y.log("navigator.mozMobileConnections available");for(var t=[],r=e.mozMobileConnections,n=0;n<r.length;n++)t.push(u(r[n],y));return t}}catch(o){y.warn("Error accessing navigator.mozMobileConnections:",o)}}function l(){try{if(e.mozMobileConnection)return y.log("navigator.mozMobileConnection available"),[u(e.mozMobileConnection,y)]}catch(t){y.warn("Error accessing navigator.mozMobileConnection:",t)}}function d(){return y.log("navigator.mozMobileConnection(s) unavailable and no GET parameter provided"),[]}var f,m,g,h,v,b=(t||i).getVars(),k=b.carrier||a.get_setting("carrier")||null,y=c.tagged("detectMobileNetwork"),_={};e=e||window.navigator,_.carrier_sim=null,_.region_sim=null;var w=[["GET mcc/mnc",r],["GET mccs",n],["dual SIM",o],["SIM",l],["None",d]];for(h=0;h<w.length&&!f;h++)g=w[h][0],f=w[h][1]();if(f.length)for(h=0;h<f.length;h++){v=f[h],y.log("mccs["+h+"]:",v);var x=s(v.mcc,v.mnc,v.spn);if(k!==x.carrier&&p.log("Carrier changed by "+g+":",k,"",x.carrier),x.region){m=_.region_sim=x.region,k=_.carrier_sim=x.carrier;break}}a.update_settings(_)}var c=r("mobilenetwork"),p=r.persistent("mobilenetwork","change"),d=(t.gettext,e.MOBILE_CODES);return l(navigator),{carriersRegions:d,carriers:e.CARRIER_SLUGS,detectMobileNetwork:l,getNetwork:s,regions:n.MOBILE_CODES}}),define("consumer_info",["core/defer","core/log","mobilenetwork","core/requests","core/settings","core/urls","core/user","user_helpers","core/z"],function(e,t,r,n,o,a,i,s,u){function l(e){d||s.set_region_geoip(e.region),i.logged_in()&&(void 0!==e.apps&&i.update_apps(e.apps),i.update_settings({enable_recommendations:e.enable_recommendations}))}function c(t){var r=e.Deferred();if(!d){var o=u.body.data("region");o&&(s.set_region_geoip(o),d=!0)}return t||!d||i.logged_in()?n.get(a.api.url("consumer_info")).then(l,function(){p.error("Failed to retrieve consumer info."),s.set_region_geoip("restofworld")}).always(function(){r.resolve()}):r.resolve(),r.promise()}var p=t("consumer_info"),d=!!s.region(void 0,!0);return{fetch:c,promise:c()}}),define("carrier",["consumer_info","core/defer","core/requests","core/storage","core/urls","core/user","underscore","user_helpers"],function(e,t,r,n,o,a,i,s){function u(e){return!a.has_installed(e.id)}function l(e){var r=t.Deferred();return setTimeout(function(){r.resolve()},e),r}function c(){return t.when(v,e.promise,l(20)).then(function(e){var t=i.some(e,u);return t||p(),t})}function p(){n.setItem(h,!0)}function d(){return n.getItem(h)}var f,m=s.carrier(),g=s.region(),h="late-customization-complete";f=m&&g&&!d()?r.get(o.api.url("late-customization",[],{carrier:m,region:g})):t.Deferred().reject();var v=f.then(function(e){return e.objects});return{hasInstallableApps:c,isLateCustomizationCompleted:d,completeLateCustomization:p}}),define("core/site_config",["core/defer","core/polyfill","core/requests","core/settings","core/utils","core/urls","core/z","underscore"],function(e,t,r,n,o,a,i,s){function u(){var t=e.Deferred(),o=i.body.data("settings"),u=i.body.data("waffle-switches");return o&&o.fxa_auth_url&&o.fxa_auth_state&&s.isArray(u)?(n.fxa_auth_url=o.fxa_auth_url,n.fxa_auth_state=o.fxa_auth_state,n.switches=u,t.resolve().promise()):(r.get(a.api.unsigned.url("site-config")).done(function(e){e.hasOwnProperty("fxa")&&(n.fxa_auth_url=l(e.fxa.fxa_auth_url),n.fxa_auth_state=e.fxa.fxa_auth_state),e.waffle&&e.waffle.switches&&s.isArray(e.waffle.switches)&&(n.switches=e.waffle.switches),t.resolve(e)}).always(function(){t.resolve()}),t.promise())}function l(e,t){var r=c(t);return r?o.urlparams(e,{client_id:r}):e}function c(e){return p[e||window.location.origin]}var p={"http://localhost:8675":"124ae9dff020ba79","http://localhost:8676":"31b549f7dfb4de69","http://localhost:8677":"cc389d4ccd6cd34d","http://localhost:8678":"47354b86fb361c7e","http://localhost:8679":"049d4b105daa1cb9"};return{fetch:u,fxa_client_id_for_origin:c,promise:u(),update_fxa_url_client_id:l}}),define("newsletter",["core/capabilities","jquery","core/notification","core/nunjucks","core/requests","core/urls","core/user","user_helpers","core/utils","core/z"],function(e,t,r,n,o,a,i,s,u,l){function c(){return{user_region:s.region("restofworld"),user_email:i.get_setting("email"),user_lang:u.lang()}}function p(){return n.env.render("newsletter.html",c())}function d(e){e.hasClass("expanded")||(e.addClass("expanding").removeClass("collapsed").one("transitionend",function(){e.addClass("expanded")}),setTimeout(function(){e.removeClass("expanding")},1))}return l.body.on("focus","#newsletter-footer .email",function(){d(t(this).siblings(".newsletter-details"))}).on("click",".newsletter-signup-button",function(){d(t(this).closest("form").find(".newsletter-details"))}).on("submit",".newsletter form",u._pd(function(){var n=t(this),i=n.siblings(".success"),s=n.siblings(".processing"),c=n.find(":invalid"),d=u.getVars(n.serialize());return n.addClass("submitted-once"),c.length?(n.find(".error-message-wrapper").remove(),void c.each(function(e,r){t(r).before(t('<div class="error-message-wrapper"/>').append(t('<div class="error-message"/>').append(t("<span/>").text(r.validationMessage))))})):(d.newsletter="marketplace-"+e.device_platform(),n.addClass("processing-hidden"),s.show(),void o.post(a.api.url("newsletter"),d).done(function(){n.remove(),s.remove(),i.show(),l.win.one("navigating",function(){t("#newsletter-footer").html(p())})}).fail(function(){s.remove(),n.removeClass("processing-hidden"),r.notification({message:gettext("There was an error submitting your newsletter sign up request")})}))})),{context:c}}),define("update_banner",["apps","core/capabilities","jquery","core/l10n","core/log","core/nunjucks","core/settings","core/utils","core/z"],function(e,t,r,n,o,a,i,s,u){function l(){e.promise.then(function(){t.webApps&&d&&(t.packaged||t.iframed)?e.checkForUpdate(d).done(function(e){e&&0===r(f).length?(c.log("Update found, inserting banner."),r(".banners").append(a.env.render("marketplace-update.html"))):c.log("No update found.")}):c.log("Skipping update check.")})}var c=o("update_banner"),p=n.gettext,d=i.manifest_url,f="#marketplace-update-banner";return u.body.on("click",f+" .download-button",s._pd(function(){var t=r(this);t.closest("mkt-banner").get(0).dismiss="",t.addClass("spin"),e.applyUpdate(d).done(function(){r(f+" span").text(p("The next time you start the Firefox Marketplace app, youll see the updated version!")),t.remove()})})),{showIfNeeded:l}}),function(e,t){"object"==typeof exports?module.exports=t():"function"==typeof define&&define.amd?define("salvattore",[],t):e.salvattore=t()}(this,function(){window.matchMedia||(window.matchMedia=function(){var e=window.styleMedia||window.media;if(!e){var t=document.createElement("style"),r=document.getElementsByTagName("script")[0],n=null;t.type="text/css",t.id="matchmediajs-test",r.parentNode.insertBefore(t,r),n="getComputedStyle"in window&&window.getComputedStyle(t,null)||t.currentStyle,e={matchMedium:function(e){var r="@media "+e+"{ #matchmediajs-test { width: 1px; } }";return t.styleSheet?t.styleSheet.cssText=r:t.textContent=r,"1px"===n.width}}}return function(t){return{matches:e.matchMedium(t||"all"),media:t||"all"}}}()),function(){if(window.matchMedia&&window.matchMedia("all").addListener)return!1;var e=window.matchMedia,t=e("only all").matches,r=!1,n=0,o=[],a=function(){clearTimeout(n),n=setTimeout(function(){for(var t=0,r=o.length;r>t;t++){var n=o[t].mql,a=o[t].listeners||[],i=e(n.media).matches;if(i!==n.matches){n.matches=i;for(var s=0,u=a.length;u>s;s++)a[s].call(window,n)}}},30)};window.matchMedia=function(n){var i=e(n),s=[],u=0;return i.addListener=function(e){t&&(r||(r=!0,window.addEventListener("resize",a,!0)),0===u&&(u=o.push({mql:i,listeners:s})),s.push(e))},i.removeListener=function(e){for(var t=0,r=s.length;r>t;t++)s[t]===e&&s.splice(t,1)},i}}(),function(){for(var e=0,t=["ms","moz","webkit","o"],r=0;r<t.length&&!window.requestAnimationFrame;++r)window.requestAnimationFrame=window[t[r]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[t[r]+"CancelAnimationFrame"]||window[t[r]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(t){var r=(new Date).getTime(),n=Math.max(0,16-(r-e)),o=window.setTimeout(function(){t(r+n)},n);return e=r+n,o}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(e){clearTimeout(e)})}();var e=function(e,t){var r={},n=[],o=function(e,t,r){e.dataset?e.dataset[t]=r:e.setAttribute("data-"+t,r)},a=function(e,t){return e.dataset?e.dataset[t]:e.setAttribute("data-"+t)};return r.obtain_grid_settings=function(t){var r,n,o=e.getComputedStyle(t,":before"),a=o.getPropertyValue("content").slice(1,-1),i=a.match(/^\s*(\d+)(?:\s?\.(.+))?\s*$/);return i?(r=i[1],n=i[2],n=n?n.split("."):["column"]):(i=a.match(/^\s*\.(.+)\s+(\d+)\s*$/),n=i[1],r=i[2],r&&(r=r.split("."))),{numberOfColumns:r,columnClasses:n}},r.add_columns=function(e,n){for(var a=r.obtain_grid_settings(e),i=a.numberOfColumns,s=a.columnClasses,u=(new Array(+i),t.createDocumentFragment()),l=i;0!==l--;){var c=t.createElement("div");c.className=s.join(" "),u.appendChild(c)}e.appendChild(u),r.append_elements(e,Array.prototype.slice.call(n.children)),o(e,"columns",i)},r.remove_columns=function(r){var n=t.createRange();n.selectNodeContents(r);var a=Array.prototype.filter.call(n.extractContents().childNodes,function(t){return t instanceof e.HTMLElement}),i=a.length,s=a[0].childNodes.length,u=new Array(s*i);Array.prototype.forEach.call(a,function(e,t){Array.prototype.forEach.call(e.children,function(e,r){u[r*i+t]=e})});var l=t.createElement("div");return o(l,"columns",0),u.filter(function(e){return!!e}).forEach(function(e){l.appendChild(e)}),l},r.recreate_columns=function(t){e.requestAnimationFrame(function(){r.add_columns(t,r.remove_columns(t))})},r.media_query_change=function(e){e.matches&&Array.prototype.forEach.call(n,r.recreate_columns)},r.get_css_rules=function(e){var t;try{t=e.sheet.cssRules||e.sheet.rules}catch(r){return[]}return t||[]},r.get_stylesheets=function(){return Array.prototype.concat.call(Array.prototype.slice.call(t.querySelectorAll("style[type='text/css']")),Array.prototype.slice.call(t.querySelectorAll("link[rel='stylesheet']")))},r.media_rule_has_columns_selector=function(e){for(var t,r=e.length;r--;)if(t=e[r],t.selectorText&&t.selectorText.match(/\[data-columns\](.*)::?before$/))return!0;return!1},r.scan_media_queries=function(){var t=[];e.matchMedia&&(r.get_stylesheets().forEach(function(n){Array.prototype.forEach.call(r.get_css_rules(n),function(n){n.media&&r.media_rule_has_columns_selector(n.cssRules)&&t.push(e.matchMedia(n.media.mediaText))})}),t.forEach(function(e){e.addListener(r.media_query_change)}))},r.next_element_column_index=function(e,t){var n,o,a,i,s=e.children,u=s.length,l=0,c=0,p=[],d=function(e){p[a]+=r.get_height_from_element(e)};for(a=0;u>a;a++)p[a]=r.get_height_from_element(s[a]),Array.prototype.forEach.call(t[a].childNodes,d);if(i=Math.min.apply(Math,p),i>0)return p.indexOf(i);for(a=0;u>a;a++)n=s[a],o=n.children.length+(t[a].children||t[a].childNodes).length,0===l&&(l=o),l>o&&(c=a,l=o);return c},r.create_list_of_fragments=function(e){for(var r=new Array(e),n=0;n!==e;)r[n]=t.createDocumentFragment(),n++;return r},r.append_elements=function(e,n){var o=e.children,a=o.length,i=r.create_list_of_fragments(a),s=t.createElement("div");s.className=r.obtain_grid_settings(e).columnClasses.join(" "),s.appendChild(r.create_fragment(n)),e.appendChild(s),r.save_elements_height(n),e.removeChild(s),n.forEach(function(t){var n=r.next_element_column_index(e,i);i[n].appendChild(t)}),Array.prototype.forEach.call(o,function(e,t){e.appendChild(i[t])})},r.prepend_elements=function(e,n){var o=e.children,a=o.length,i=r.create_list_of_fragments(a),s=a-1;n.forEach(function(e){var t=i[s];t.insertBefore(e,t.firstChild),0===s?s=a-1:s--}),Array.prototype.forEach.call(o,function(e,t){e.insertBefore(i[t],e.firstChild)});for(var u=t.createDocumentFragment(),l=n.length%a;0!==l--;)u.appendChild(e.lastChild);e.insertBefore(u,e.firstChild)},r.register_grid=function(a){if("none"!==e.getComputedStyle(a).display){var i=t.createRange();i.selectNodeContents(a);var s=t.createElement("div");s.appendChild(i.extractContents()),o(s,"columns",0),r.add_columns(a,s),n.push(a)}},r.recreate_columns=function(t){e.requestAnimationFrame(function(){r.add_columns(t,r.remove_columns(t))})},r.create_fragment=function(e){var r=t.createDocumentFragment();return Array.prototype.forEach.call(e,function(e){r.appendChild(e)}),r},r.get_height_from_element=function(e){var t=e.getBoundingClientRect().height;if(!t){var r=a(e,"salvatorreHeight");r&&(t=parseInt(r,10))}return t},r.save_elements_height=function(e){Array.prototype.forEach.call(e,function(e){o(e,"salvatorreHeight",e.getBoundingClientRect().height)})},r.init=function(){var e=t.createElement("style");e.innerHTML="[data-columns]::before{display:block;visibility:hidden;position:absolute;font-size:1px;}",t.head.appendChild(e);var n=t.querySelectorAll("[data-columns]");Array.prototype.forEach.call(n,r.register_grid),r.scan_media_queries()},r.init(),{append_elements:r.append_elements,prepend_elements:r.prepend_elements,register_grid:r.register_grid,recreate_columns:r.recreate_columns}}(window,window.document);return e}),define("utils_local",["core/defer","core/log","core/settings","core/urls","core/z","jquery","salvattore","underscore"],function(e,t,r,n,o,a,i,s){function u(e,t){o.onLine&&(v.log("Offline detected."),o.win.trigger("offline_detected"),o.onLine=!1),t&&c(t),e.reject()}function l(e,t){o.onLine||(v.log("Online detected."),o.win.trigger("online_detected"),o.onLine=!0),t&&c(t),e.resolve()}function c(e){e.onopen=null,e.onerror=null,e.close()}function p(){var t=e.Deferred();if(window.__mockOffLine===!0)return u(t),t.promise();if(r.allow_offline)return l(t),t.promise();try{if(null===navigator.mozTCPSocket)return d();v.log("Checking online state with socket");var o=new URL(n.cdn_url()).host,a=80,i=navigator.mozTCPSocket.open(o,a);i.onerror=function(){u(t,i)},i.onopen=function(){l(t,i)}}catch(s){return d()}return t.promise()}function d(){var t=e.Deferred(),r=new Image;return r.src="https://marketplace.cdn.mozilla.net/media/fireplace/img/online-status-beacon.gif?"+ +new Date,r.onload=function(){l(t)},r.onerror=function(){u(t)},t.promise()}function f(){h&&clearInterval(h),h=setInterval(p,1e4)}function m(e){e&&i.register_grid(e);var t=o.win.width();o.win.on("resize",s.debounce(function(){var r=o.win.width();r!==t&&(i.recreate_columns(e),t=r)},100))}function g(e){document.getElementById("site-header").setAttribute("header-title",e)}var h,v=t("utils_local"),b=function(e){var t={};return a('.localized[data-name="'+e+'"]').each(function(){t[this.getAttribute("data-lang")]=this.value}),t},k=function(e){for(var t=[],r=Object.keys(e),n=0;n<r.length;n++){var o=[];o.push(r[n]),o.push(e[r[n]]),t.push(o)}return t};return{build_localized_field:b,checkOnline:p,headerTitle:g,initSalvattore:m,items:k,pollOnlineState:f}}),define("addon",["core/log","core/models","core/notification","core/z"],function(e,t,r,n){var o=e("addon");n.body.on("click",".addon-install-btn",function(){var e=t("addon").lookup($(this).closest("[data-slug]").data("slug")),n=navigator.mozApps.installPackage(e.mini_manifest_url);o.log("Installing add-on",e.mini_manifest_url),n.onerror=function(){r.notification({message:"Error installing add-on"})},n.onsuccess=function(){r.notification({message:"Add-on successfully installed"})}})}),function(e){define("flipsnap",[],function(){return function(){return function(e,t,r){function n(e,t){return this instanceof n?this.init(e,t):new n(e,t)}function o(e,t){return m.touch?e.changedTouches[0][t]:e[t]}function a(e){return l(e,function(e){return p.style[e]!==r})}function i(e,t,n){var o=f[t];o?e[o]=n:e[t]!==r?(f[t]=t,e[t]=n):l(d,function(o){var a=u(o)+u(t);return e[a]!==r?(f[t]=a,e[a]=n,!0):void 0})}function s(e){if(p.style[e]!==r)return e;var t;return l(d,function(n){var o=u(n)+u(e);return p.style[o]!==r?(t="-"+n+"-"+e,!0):void 0}),t}function u(e){return e.charAt(0).toUpperCase()+e.substr(1)}function l(e,t){for(var r=0,n=e.length;n>r;r++)if(t(e[r],r))return!0;return!1}function c(e,r,n,o){var a=t.createEvent("Event");a.initEvent(r,n,o),e.dispatchEvent(a)}var p=t.createElement("div"),d=["webkit","moz","o","ms"],f={},m={};m.transform3d=a(["perspectiveProperty","WebkitPerspective","MozPerspective","OPerspective","msPerspective"]),m.transform=a(["transformProperty","WebkitTransform","MozTransform","OTransform","msTransform"]),m.transition=a(["transitionProperty","WebkitTransitionProperty","MozTransitionProperty","OTransitionProperty","msTransitionProperty"]),m.touch="ontouchstart"in e,m.cssAnimation=(m.transform3d||m.transform)&&m.transition;var g=m.touch?"touchstart":"mousedown",h=m.touch?"touchmove":"mousemove",v=m.touch?"touchend":"mouseup";n.prototype.init=function(e,n){var o=this;if(o.element=e,"string"==typeof e&&(o.element=t.querySelector(e)),!o.element)throw new Error("element not found");return n=n||{},o.distance=n.distance===r?null:n.distance,o.maxPoint=n.maxPoint===r?null:n.maxPoint,o.disableTouch=n.disableTouch===r?!1:n.disableTouch,o.disable3d=n.disable3d===r?!1:n.disable3d,o.currentPoint=0,o.currentX=0,o.animation=!1,o.use3d=m.transform3d,o.disable3d===!0&&(o.use3d=!1),o._setStyle(m.cssAnimation?{transitionProperty:s("transform"),transitionTimingFunction:"cubic-bezier(0,0,0.25,1)",transitionDuration:"0ms",transform:o._getTranslate(0)}:{position:"relative",left:"0px"}),o.refresh(),o.element.addEventListener(g,o,!1),o.element.addEventListener(h,o,!1),o.element.addEventListener(v,o,!1),o},n.prototype.handleEvent=function(e){var t=this;switch(e.type){case g:t._touchStart(e);break;case h:t._touchMove(e);break;case v:t._touchEnd(e);break;case"click":t._click(e)}},n.prototype.refresh=function(){var e=this;e._maxPoint=e.maxPoint||function(){for(var t,r=e.element.childNodes,n=0,o=0,a=r.length;a>o;o++)t=r[o],1===t.nodeType&&n++;return n>0&&n--,n}(),e._distance=e.distance||e.element.scrollWidth/(e._maxPoint+1),e._maxX=-e._distance*e._maxPoint,e.moveToPoint()},n.prototype.hasNext=function(){var e=this;return e.currentPoint<e._maxPoint},n.prototype.hasPrev=function(){var e=this;return e.currentPoint>0},n.prototype.toNext=function(){var e=this;e.hasNext()&&e.moveToPoint(e.currentPoint+1)},n.prototype.toPrev=function(){var e=this;e.hasPrev()&&e.moveToPoint(e.currentPoint-1)},n.prototype.moveToPoint=function(e){var t=this,n=t.currentPoint;e===r&&(e=t.currentPoint),t.currentPoint=0>e?0:e>t._maxPoint?t._maxPoint:parseInt(e,10),m.cssAnimation?t._setStyle({transitionDuration:"350ms"}):t.animation=!0,t._setX(-t.currentPoint*t._distance),n!==t.currentPoint&&c(t.element,"fsmoveend",!0,!1)},n.prototype._setX=function(e){var t=this;t.currentX=e,m.cssAnimation?t.element.style[f.transform]=t._getTranslate(e):t.animation?t._animate(e):t.element.style.left=e+"px"},n.prototype._touchStart=function(e){var t=this;t.disableTouch||(m.cssAnimation?t._setStyle({transitionDuration:"0ms"}):t.animation=!1,t.scrolling=!0,t.moveReady=!1,t.startPageX=o(e,"pageX"),t.startPageY=o(e,"pageY"),t.basePageX=t.startPageX,t.directionX=0,t.startTime=e.timeStamp)},n.prototype._touchMove=function(e){var t=this;if(t.scrolling){var r,n,a,i,s=o(e,"pageX"),u=o(e,"pageY");t.moveReady?(e.preventDefault(),e.stopPropagation(),r=s-t.basePageX,n=t.currentX+r,(n>=0||n<t._maxX)&&(n=Math.round(t.currentX+r/3)),t._setX(n),t.directionX=0===r?t.directionX:r>0?-1:1):(a=Math.abs(s-t.startPageX),i=Math.abs(u-t.startPageY),a>5?(e.preventDefault(),e.stopPropagation(),t.moveReady=!0,t.element.addEventListener("click",t,!0)):i>5&&(t.scrolling=!1)),t.basePageX=s}},n.prototype._touchEnd=function(){var e=this;if(e.scrolling){e.scrolling=!1;var t=-e.currentX/e._distance;t=e.directionX>0?Math.ceil(t):e.directionX<0?Math.floor(t):Math.round(t),e.moveToPoint(t),setTimeout(function(){e.element.removeEventListener("click",e,!0)},200)}},n.prototype._click=function(e){e.stopPropagation(),e.preventDefault()},n.prototype._setStyle=function(e){var t=this,r=t.element.style;for(var n in e)i(r,n,e[n])},n.prototype._animate=function(e){var t=this,r=t.element,n=+new Date,o=parseInt(r.style.left,10),a=e,i=350,s=function(e,t){return-(e/=t)*(e-2)},u=setInterval(function(){var e,t,l=new Date-n;l>i?(clearInterval(u),t=a):(e=s(l,i),t=e*(a-o)+o),r.style.left=t+"px"},10)},n.prototype.destroy=function(){var e=this;e.element.removeEventListener(g,e),e.element.removeEventListener(h,e),e.element.removeEventListener(v,e)},n.prototype._getTranslate=function(e){var t=this;return t.use3d?"translate3d("+e+"px, 0, 0)":"translate("+e+"px, 0)"},e.Flipsnap=n}(window,window.document),e.Flipsnap=Flipsnap}.apply(e,arguments)})}(this),define("previews-buttons",["core/capabilities","core/z"],function(e,t){function r(e,t,r){function o(){u.addClass("arrow-btn-disabled");var t=!1;e.hasNext()&&(e.currentPoint<e.numBars-1||a)&&(s.removeClass("arrow-btn-disabled"),t=!0),e.hasPrev()&&(i.removeClass("arrow-btn-disabled"),t=!0),a||u.toggle(t)}if(n){var a=r&&r.isLightbox;t.find(".arrow-btn-prev, .arrow-btn-next").remove();var i=$('<a class="arrow-btn arrow-btn-prev"></a>'),s=$('<a class="arrow-btn arrow-btn-next"></a>'),u=i.add(s);return e.element.addEventListener("fsmoveend",o),$(e.tray).on("previews--button-update",o),o(),t[0].slider=e,t.append(u),{prevBtn:i[0],nextBtn:s[0]}}}var n="desktop"===e.device_type();return t.body.on("click",".arrow-btn:not(.arrow-btn-disabled)",function(e){e.preventDefault();var t=this.parentNode.slider;this.classList.contains("arrow-btn-prev")?t.toPrev():t.toNext()}),{attach:r}}),define("keys",[],function(){return{SHIFT:16,CONTROL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESCAPE:27,ENTER:13,PAGE_UP:33,PAGE_DOWN:34,LEFT:37,UP:38,RIGHT:39,DOWN:40,HOME:36,END:35,COMMAND:91,WINDOWS_RIGHT:92,COMMAND_RIGHT:93,WINDOWS_LEFT_OPERA:219,WINDOWS_RIGHT_OPERA:220,APPLE:24}}),define("previews-lightbox",["core/log","core/models","core/navigation","core/utils","core/z","keys","previews-buttons","tracking","underscore"],function(e,t,r,n,o,a,i,s,u){function l(e){b.log("Opening lightbox"),o.body.trigger("lightbox-open");var n=$(e),a=n.closest("li").index(),i=n.closest(".previews-tray"),s=i.siblings(".mkt-tile");if(!s.length)return void b.log("[WARN] could not find .mkt-tile near .previews.");var u=t("app").lookup(s.data("slug")),l=u.id;l==g&&v||(g=l,h=u.previews,c()),r.modal("lightbox"),o.body.addClass("overlayed"),k.show(),setTimeout(function(){v.moveToPoint(a),p(),k.addClass("show")},0)}function c(){_.empty(),u.each(h,function(e){var t=$('<li class="loading"><span class="throbber">');if(_.append(t),"video/webm"==e.filetype){var r=$('<video src="'+e.image_url+'" controls></video>');t.removeClass("loading"),t.append(r)}else{var n=new Image;n.onload=function(){t.removeClass("loading"),t.append(n)},n.onerror=function(){t.removeClass("loading"),t.append('<b class="err">&#x26A0;</b>')},n.src=e.image_url}}),_.length&&(v=Flipsnap(_[0]),v.element.addEventListener("fsmoveend",d,!1),i.attach(v,y,{isLightbox:!0}))}function p(){v&&(v.distance=y.width(),v.refresh())}function d(){$("video").each(function(){this.pause()})}function f(){r.closeModal("lightbox"),m()}function m(){o.body.removeClass("overlayed"),d(),k.removeClass("show"),setTimeout(function(){k.hide()},500),v&&v.element&&(v.element.removeEventListener("fsmoveend",d),v.destroy(),v=null)}var g,h,v,b=e("previews-lightbox"),k=$(document.getElementById("lightbox")),y=k.find("section"),_=k.find(".content");return k.addClass("shots previews-slider"),k.attr("dir","ltr"),o.win.on("keydown.lightboxDismiss",function(e){switch(e.which){case a.ESCAPE:k.hasClass("show")&&(e.preventDefault(),f());break;case a.LEFT:v&&(e.preventDefault(),v.toPrev());break;case a.RIGHT:v&&(e.preventDefault(),v.toNext())}}),o.win.on("resize",u.debounce(p,200)),k.on("click",function(e){$(e.target).is("#lightbox li")&&(f(),e.preventDefault())}).on("dragstart",function(e){e.preventDefault()}).find(".close").on("click",n._pd(f)),o.win.on("closeModal",function(e,t){"lightbox"===t&&m()}),{close:m,show:l}}),define("previews",["core/capabilities","core/log","core/z","flipsnap","previews-buttons","previews-lightbox","underscore"],function(e,t,r,n,o,a,i){function s(){var e=this,t=$(e);if(!t.data("previews-initialized")){var r=t.find(".previews-content"),a=t.find(".previews-slider").attr("dir","ltr"),i=t.find(y).length,s=m(e);s&&d();var u=l(e),f=c(e),g=s?v.full+v.paddingFull:v.thumb;if(r.css({width:i*g-v.padding+"px"}),d(),t.attr("data-previews-initialized",!0),i>2){var b=n(r[0],{distance:g});b._maxPoint=u>1?u-1:0,b.tray=e,b.numBars=u,e.slider=b,h.push(b),p(f,b);{o.attach(b,a)}if("rtl"===document.documentElement.getAttribute("dir"))for(var k=0;u-1>k;k++)b.toNext(),t.trigger("previews--button-update")}}}function u(){g.log("Initializing trays"),$(".previews-expanded .previews-tray").each(s)}function l(e){var t=$(e),r=m(e),n=(t.data("previews-detail"),t.find(y).length),o=Math.max(t.width(),v.minWidth),a=r?v.full:v.thumb,i=Math.floor((o+2*v.padding)/a),s=n-i+1;return 1===s&&(s=0),s}function c(e){for(var t=(e.querySelectorAll(y).length,l(e)),r=e.querySelector(".previews-bars"),n=0;t>n;n++)r.appendChild(document.createElement("b"));return $(r.querySelectorAll("b"))}function p(e,t){function r(e,t){e.filter(".current").removeClass("current"),e.eq(t).addClass("current")}t.element.addEventListener("fsmoveend",function(){r(e,t.currentPoint)},!1),r(e,t.currentPoint)}function d(){var e=$(".previews-tray[data-previews-desktop]");
if(0!==e.length){e.css("width",r.win.width()+"px");var t=e.offset();"rtl"===document.documentElement.getAttribute("dir")?(k+=t.left,e.css("margin-right",k+"px")):(k+=-1*t.left,e.css("margin-left",k+"px"))}}function f(){return $('[data-page-type~="detail"]').length&&window.matchMedia(b).matches}function m(e){return e.getAttribute("data-previews-desktop")&&e.getAttribute("data-previews-detail")}var g=t("previews"),h=[],v={thumb:160,minWidth:300,full:520,breakpoint:1050,padding:10,paddingFull:30},b="(min-width:"+v.breakpoint+"px)",k=0,y=".previews-thumbnail",_=i.debounce(function(){h.forEach(function(e){for(var t=e.tray,r=t.querySelector(".previews-bars");r.firstChild;)r.removeChild(r.firstChild);e.moveToPoint(0),p(c(t),e),e.numBars=l(t),e._maxPoint=e.numBars>1?e.numBars-1:0,$(t).trigger("previews--button-update")})},250);return r.win.on("resize",i.debounce(function(){_(),$('[data-page-type~="detail"] [data-previews-desktop][data-previews-initialized]').length?d():($(".previews-tray").attr("style",""),k=0)})).on("unloading.tray",function(){h.forEach(function(e){e.destroy()}),h=[],k=0}),r.page.on("dragstart",".previews-tray",function(e){e.preventDefault()}).on("click",".previews-tray "+y,function(e){var t="VIDEO"===e.target.nodeName;(!t||!f()&&t)&&(e.preventDefault(),f()||a.show(this))}),{initialize:u,resizeDesktopDetailTray:d}}),define("app_list",["core/capabilities","core/storage","core/utils","core/z","previews"],function(e,t,r,n,o){function a(){$(".app-list").toggleClass("previews-expanded",i),$(".app-list-filters-expand-toggle").toggleClass("active",i).addClass("show"),t.setItem("expand-listings",!!i),i&&(o.initialize(),$(".mkt-tile img[data-src]:not([src])").each(function(){this.src=this.getAttribute("data-src")}))}var i=!!t.getItem("expand-listings");n.body.on("click",".app-list-filters-expand-toggle",r._pd(function(){i=!i,a(),n.doc.trigger("image-deferrer--load")})),n.page.on("loaded reloaded_chrome",function(){$(".main:not(.feed-landing-apps) .app-list").length&&a(),$(".app-list").addClass("show-app-list")}).on("loaded_more",function(){$(".loadmore").length||$(".app-list").removeClass("paginated")})}),define("core/login",["core/cache","core/capabilities","core/defer","core/log","core/notification","core/polyfill","core/requests","core/settings","core/site_config","core/storage","core/urls","core/user","core/utils","core/views","core/z","jquery","underscore"],function(e,t,r,n,o,a,i,s,u,l,c,p,d,f,m,g,h){function v(){T.log("Login cancelled"),m.page.trigger("login_cancel"),h.invoke(I,"reject"),I=[]}function b(){o.notification({message:gettext("You have been signed out.")})}function k(){o.notification({message:gettext("You have been signed in.")})}function y(){e.flush_signed();var t=!1;l.getItem("user")&&(t=!0),p.clear_token(),m.body.removeClass("logged-in"),m.page.trigger("reload_chrome").trigger("before_logout"),m.context.dont_reload_on_login?T.log("Reload on logout aborted by current view"):(m.page.trigger("logged_out"),t&&b(),f.reload())}function _(e){function t(){h.invoke(I,"resolve"),I=[]}var r=!p.logged_in();p.set_token(e.token,e.settings),p.update_permissions(e.permissions),p.update_apps(e.apps),T.log("Login succeeded, preparing the app"),m.body.addClass("logged-in"),g(".loading-submit").removeClass("loading-submit"),m.page.trigger("reload_chrome").trigger("logged_in"),r&&!m.context.dont_reload_on_login?f.reload().done(function(){t(),k()}):T.log("Reload on login aborted by current view")}function w(e){e=e||gettext("Sign in failed"),o.notification({message:e}),g(".loading-submit").removeClass("loading-submit"),m.page.trigger("login_fail"),h.invoke(I,"reject"),I=[]}function x(e){var n=r.Deferred();I.push(n);var o={register:!1};if(h.extend(o,e),t.yulelogFxA())window.top.postMessage({type:"fxa-request"},P);else if(t.fallbackFxA()){var a=S({register:o.register});if(o.popupWindow)T.log("Changing location of supplied window to",a),C=o.popupWindow,C.location=a,V=!0;else{T.log("Opening new login window"),C=d.openWindow({url:a}),V=!1;var i=setInterval(function(){(!C||C.closed)&&(g(".loading-submit").removeClass("loading-submit").trigger("blur"),clearInterval(i))},500)}}else T.log("Requesting login from Native FxA"),navigator.mozId.request({oncancel:v});return n.promise()}function L(e){T.log("Got assertion from FxA");var r;r=t.yulelogFxA()?P:window.location.origin;var n={assertion:e,audience:r};m.page.trigger("before_login"),i.post(c.api.url("login"),n).done(_).fail(function(e,t,r){T.warn("Assertion verification failed!",t,r);var n=e.responseText;200!=e.status&&(n=gettext("FxA login failed. A server error was encountered.")),w(n)})}function O(){var e=p.get_setting("email")||"";e?T.log("Detected user",e):T.log("No previous user detected"),T.log("Calling navigator.mozId.watch"),navigator.mozId.watch({wantIssuer:"firefox-accounts",loggedInUser:e,onready:function(){m.body.addClass("persona-loaded")},onlogin:L,onlogout:function(){m.body.removeClass("logged-in"),m.page.trigger("reload_chrome").trigger("logout")}})}function E(){window.addEventListener("message",function(e){var t=[s.api_url,window.location.origin];e.data&&e.data.auth_code&&-1!==t.indexOf(e.origin)&&F(e.data.auth_code)})}function A(){return l.getItem(N)}function F(e,t){var r={auth_response:e,state:t||s.fxa_auth_state},n=u.fxa_client_id_for_origin();n&&(r.client_id=n),m.page.trigger("before_login"),i.post(c.api.url("fxa-login"),r).done(_).fail(function(e,t,r){T.warn("FxA login failed",e,t,r),w()}).always(function(){C&&!V?(T.log("Closing login popup"),C.close()):C&&T.log("Keeping window around for re-use")})}function S(e){e=e||{};var t=e.register?"signup":"signin";return d.urlparams(s.fxa_auth_url,{action:t})}var C,V,T=n("login"),I=[],P="app://"+window.location.host;m.body.on("click",".persona",function(e){e.preventDefault();var t=g(this);g(".loading-submit").removeClass("loading-submit"),t.addClass("loading-submit"),x({register:t.hasClass("register")}).always(function(){t.removeClass("loading-submit").trigger("blur")})}).on("click",".logout",d._pd(function(){i.del(c.api.url("logout")),t.fallbackFxA()&&y()})),u.promise.done(function(){t.yulelogFxA()?(T.log("setting up yulelog-fxa"),window.addEventListener("message",function(e){e.data&&e.data.type&&e.origin===P&&(T.log("fxa message "+JSON.stringify(e.data)),"fxa-login"===e.data.type?L(e.data.assertion):"fxa-logout"===e.data.type?y():"fxa-cancel"===e.data.type&&v())}),window.top.postMessage({type:"fxa-watch",email:p.get_setting("email")||""},P)):t.fallbackFxA()?(m.body.addClass("persona-loaded"),E()):O()});var N="fxa_auth_url";return{login:x,fxa_redirect_url:S,get_fxa_auth_url:A,handle_fxa_login:F}}),!function(e,t){"function"==typeof define?define("fxpay",t):"object"==typeof exports?module.exports=t():e.fxpay=t()}(this,function(){var e,t,r;return function(n){function o(e,t){return y.call(e,t)}function a(e,t){var r,n,o,a,i,s,u,l,c,p,d,f=t&&t.split("/"),m=b.map,g=m&&m["*"]||{};if(e&&"."===e.charAt(0))if(t){for(e=e.split("/"),i=e.length-1,b.nodeIdCompat&&w.test(e[i])&&(e[i]=e[i].replace(w,"")),e=f.slice(0,f.length-1).concat(e),c=0;c<e.length;c+=1)if(d=e[c],"."===d)e.splice(c,1),c-=1;else if(".."===d){if(1===c&&(".."===e[2]||".."===e[0]))break;c>0&&(e.splice(c-1,2),c-=2)}e=e.join("/")}else 0===e.indexOf("./")&&(e=e.substring(2));if((f||g)&&m){for(r=e.split("/"),c=r.length;c>0;c-=1){if(n=r.slice(0,c).join("/"),f)for(p=f.length;p>0;p-=1)if(o=m[f.slice(0,p).join("/")],o&&(o=o[n])){a=o,s=c;break}if(a)break;!u&&g&&g[n]&&(u=g[n],l=c)}!a&&u&&(a=u,s=l),a&&(r.splice(0,s,a),e=r.join("/"))}return e}function i(e,t){return function(){var r=_.call(arguments,0);return"string"!=typeof r[0]&&1===r.length&&r.push(null),f.apply(n,r.concat([e,t]))}}function s(e){return function(t){return a(t,e)}}function u(e){return function(t){h[e]=t}}function l(e){if(o(v,e)){var t=v[e];delete v[e],k[e]=!0,d.apply(n,t)}if(!o(h,e)&&!o(k,e))throw new Error("No "+e);return h[e]}function c(e){var t,r=e?e.indexOf("!"):-1;return r>-1&&(t=e.substring(0,r),e=e.substring(r+1,e.length)),[t,e]}function p(e){return function(){return b&&b.config&&b.config[e]||{}}}var d,f,m,g,h={},v={},b={},k={},y=Object.prototype.hasOwnProperty,_=[].slice,w=/\.js$/;m=function(e,t){var r,n=c(e),o=n[0];return e=n[1],o&&(o=a(o,t),r=l(o)),o?e=r&&r.normalize?r.normalize(e,s(t)):a(e,t):(e=a(e,t),n=c(e),o=n[0],e=n[1],o&&(r=l(o))),{f:o?o+"!"+e:e,n:e,pr:o,p:r}},g={require:function(e){return i(e)},exports:function(e){var t=h[e];return"undefined"!=typeof t?t:h[e]={}},module:function(e){return{id:e,uri:"",exports:h[e],config:p(e)}}},d=function(e,t,r,a){var s,c,p,d,f,b,y=[],_=typeof r;if(a=a||e,"undefined"===_||"function"===_){for(t=!t.length&&r.length?["require","exports","module"]:t,f=0;f<t.length;f+=1)if(d=m(t[f],a),c=d.f,"require"===c)y[f]=g.require(e);else if("exports"===c)y[f]=g.exports(e),b=!0;else if("module"===c)s=y[f]=g.module(e);else if(o(h,c)||o(v,c)||o(k,c))y[f]=l(c);else{if(!d.p)throw new Error(e+" missing "+c);d.p.load(d.n,i(a,!0),u(c),{}),y[f]=h[c]}p=r?r.apply(h[e],y):void 0,e&&(s&&s.exports!==n&&s.exports!==h[e]?h[e]=s.exports:p===n&&b||(h[e]=p))}else e&&(h[e]=r)},e=t=f=function(e,t,r,o,a){if("string"==typeof e)return g[e]?g[e](t):l(m(e,t).f);if(!e.splice){if(b=e,b.deps&&f(b.deps,b.callback),!t)return;t.splice?(e=t,t=r,r=null):e=n}return t=t||function(){},"function"==typeof r&&(r=o,o=a),o?d(n,e,t,r):setTimeout(function(){d(n,e,t,r)},4),f},f.config=function(e){return f(e)},e._defined=h,r=function(e,t,r){if("string"!=typeof e)throw new Error("See almond README: incorrect module build, no module name");t.splice||(r=t,t=[]),o(h,e)||o(v,e)||(v[e]=[e,t,r])},r.amd={jQuery:!0}}(),r("api",["exports","errors","settings"],function(e,t,r){function n(e,t){t=t||{},this.baseUrl=e,this.log=r.log,this.timeoutMs=r.apiTimeoutMs||1e4,this.versionPrefix=r.apiVersionPrefix||void 0}function o(e){var t=[];for(var r in e)e.hasOwnProperty(r)&&t.push(encodeURIComponent(r)+"="+encodeURIComponent(e[r]));return t.join("&")}n.prototype.url=function(e,t){t=t||{},t.versioned="undefined"!=typeof t.versioned?t.versioned:!0;var r=this.baseUrl;return t.versioned&&(r+=this.versionPrefix||""),r+=e},n.prototype.request=function(e,n,a,i,s){s=s||{};var u=a?"application/x-www-form-urlencoded":null;s.contentType=s.contentType||u;var l={Accept:"application/json"};s.contentType&&(l["Content-Type"]=s.contentType),s.headers=s.headers||{};for(var c in l)c in s.headers||(s.headers[c]=l[c]);s.headers["x-fxpay-version"]=r.libVersion;var p,d=this.log,f=this;i||(i=function(e,t){if(e)throw e;d.info("default callback received data:",t)}),p=/^http(s)?:\/\/.*/.test(n)?n:this.url(n);var m=new XMLHttpRequest,g={abort:function(){i(t.ApiRequestAborted("XHR request aborted for path: "+n))},error:function(e){d.debug("XHR error event:",e),i(t.ApiRequestError("received XHR error for path: "+n))},load:function(){var e;if("2"!==this.status.toString().slice(0,1)){var r=t.BadApiResponse("Unexpected status: "+this.status+" for URL: "+p);return d.debug(r.toString(),"response:",this.responseText),i(r)}d.debug("XHR load: GOT response:",this.responseText);try{e=JSON.parse(this.responseText)}catch(n){var r=t.BadJsonResponse("Unparsable JSON for URL: "+p+"; exception: "+n);return d.debug(r.toString(),"response:",this.responseText),i(r)}i(null,e)},timeout:function(){i(t.ApiRequestTimeout("XHR request to "+p+" timed out after "+f.timeoutMs+"ms"))}};for(var h in g)m.addEventListener(h,g[h],!1);d.debug("opening",e,"to",p),m.open(e,p,!0),m.timeout=f.timeoutMs;for(var v in s.headers)m.setRequestHeader(v,s.headers[v]);"application/x-www-form-urlencoded"===s.contentType&&a&&(a=o(a)),m.send(a)},n.prototype.get=function(e,t,r){this.request("GET",e,null,t,r)},n.prototype.del=function(e,t,r){this.request("DELETE",e,null,t,r)},n.prototype.post=function(e,t,r,n){this.request("POST",e,t,r,n)},n.prototype.put=function(e,t,r,n){this.request("PUT",e,t,r,n)},e.API=n}),function(){function e(e){return"function"==typeof e||"object"==typeof e&&null!==e}function t(e){return"function"==typeof e}function n(e){return"object"==typeof e&&null!==e}function o(){}function a(){return function(){process.nextTick(l)}}function i(){var e=0,t=new z(l),r=document.createTextNode("");return t.observe(r,{characterData:!0}),function(){r.data=e=++e%2}}function s(){var e=new MessageChannel;return e.port1.onmessage=l,function(){e.port2.postMessage(0)}}function u(){return function(){setTimeout(l,1)}}function l(){for(var e=0;N>e;e+=2){var t=j[e],r=j[e+1];t(r),j[e]=void 0,j[e+1]=void 0}N=0}function c(){}function p(){return new TypeError("You cannot resolve a promise with itself")}function d(){return new TypeError("A promises callback cannot return that same promise.")}function f(e){try{return e.then}catch(t){return B.error=t,B}}function m(e,t,r,n){try{e.call(t,r,n)}catch(o){return o}}function g(e,t,r){R(function(e){var n=!1,o=m(r,t,function(r){n||(n=!0,t!==r?b(e,r):y(e,r))},function(t){n||(n=!0,_(e,t))},"Settle: "+(e._label||" unknown promise"));!n&&o&&(n=!0,_(e,o))},e)}function h(e,t){t._state===U?y(e,t._result):e._state===H?_(e,t._result):w(t,void 0,function(t){b(e,t)},function(t){_(e,t)})}function v(e,r){if(r.constructor===e.constructor)h(e,r);else{var n=f(r);n===B?_(e,B.error):void 0===n?y(e,r):t(n)?g(e,r,n):y(e,r)}}function b(t,r){t===r?_(t,p()):e(r)?v(t,r):y(t,r)}function k(e){e._onerror&&e._onerror(e._result),x(e)}function y(e,t){e._state===q&&(e._result=t,e._state=U,0===e._subscribers.length||R(x,e))}function _(e,t){e._state===q&&(e._state=H,e._result=t,R(k,e))}function w(e,t,r,n){var o=e._subscribers,a=o.length;e._onerror=null,o[a]=t,o[a+U]=r,o[a+H]=n,0===a&&e._state&&R(x,e)}function x(e){var t=e._subscribers,r=e._state;if(0!==t.length){for(var n,o,a=e._result,i=0;i<t.length;i+=3)n=t[i],o=t[i+r],n?E(r,n,o,a):o(a);e._subscribers.length=0}}function L(){this.error=null}function O(e,t){try{return e(t)}catch(r){return W.error=r,W}}function E(e,r,n,o){var a,i,s,u,l=t(n);if(l){if(a=O(n,o),a===W?(u=!0,i=a.error,a=null):s=!0,r===a)return void _(r,d())}else a=o,s=!0;r._state!==q||(l&&s?b(r,a):u?_(r,i):e===U?y(r,a):e===H&&_(r,a))}function A(e,t){try{t(function(t){b(e,t)},function(t){_(e,t)})}catch(r){_(e,r)}}function F(e,t,r,n){this._instanceConstructor=e,this.promise=new e(c,n),this._abortOnReject=r,this._validateInput(t)?(this._input=t,this.length=t.length,this._remaining=t.length,this._init(),0===this.length?y(this.promise,this._result):(this.length=this.length||0,this._enumerate(),0===this._remaining&&y(this.promise,this._result))):_(this.promise,this._validationError())}function S(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function C(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}function V(e){this._id=Y++,this._state=void 0,this._result=void 0,this._subscribers=[],c!==e&&(t(e)||S(),this instanceof V||C(),A(this,e))}var T;T=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)};var I,P=T,N=(Date.now||function(){return(new Date).getTime()},Object.create||function(e){if(arguments.length>1)throw new Error("Second argument not supported");if("object"!=typeof e)throw new TypeError("Argument must be an object");return o.prototype=e,new o},0),R=function(e,t){j[N]=e,j[N+1]=t,N+=2,2===N&&I()},M="undefined"!=typeof window?window:{},z=M.MutationObserver||M.WebKitMutationObserver,D="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,j=new Array(1e3);I="undefined"!=typeof process&&"[object process]"==={}.toString.call(process)?a():z?i():D?s():u();var q=void 0,U=1,H=2,B=new L,W=new L;F.prototype._validateInput=function(e){return P(e)},F.prototype._validationError=function(){return new Error("Array Methods must be provided an Array")},F.prototype._init=function(){this._result=new Array(this.length)};var $=F;F.prototype._enumerate=function(){for(var e=this.length,t=this.promise,r=this._input,n=0;t._state===q&&e>n;n++)this._eachEntry(r[n],n)},F.prototype._eachEntry=function(e,t){var r=this._instanceConstructor;n(e)?e.constructor===r&&e._state!==q?(e._onerror=null,this._settledAt(e._state,t,e._result)):this._willSettleAt(r.resolve(e),t):(this._remaining--,this._result[t]=this._makeResult(U,t,e))},F.prototype._settledAt=function(e,t,r){var n=this.promise;n._state===q&&(this._remaining--,this._abortOnReject&&e===H?_(n,r):this._result[t]=this._makeResult(e,t,r)),0===this._remaining&&y(n,this._result)},F.prototype._makeResult=function(e,t,r){return r},F.prototype._willSettleAt=function(e,t){var r=this;w(e,void 0,function(e){r._settledAt(U,t,e)},function(e){r._settledAt(H,t,e)})};var K=function(e,t){return new $(this,e,!0,t).promise},G=function(e,t){function r(e){b(a,e)}function n(e){_(a,e)}var o=this,a=new o(c,t);if(!P(e))return _(a,new TypeError("You must pass an array to race.")),a;for(var i=e.length,s=0;a._state===q&&i>s;s++)w(o.resolve(e[s]),void 0,r,n);return a},J=function(e,t){var r=this;if(e&&"object"==typeof e&&e.constructor===r)return e;var n=new r(c,t);return b(n,e),n},X=function(e,t){var r=this,n=new r(c,t);return _(n,e),n},Y=0,Q=V;V.all=K,V.race=G,V.resolve=J,V.reject=X,V.prototype={constructor:V,then:function(e,t){var r=this,n=r._state;if(n===U&&!e||n===H&&!t)return this;var o=new this.constructor(c),a=r._result;if(n){var i=arguments[n-1];R(function(){E(n,o,i,a)})}else w(r,o,e,t);return o},"catch":function(e){return this.then(null,e)}};var Z=function(){var e;e="undefined"!=typeof global?global:"undefined"!=typeof window&&window.document?window:self;var r="Promise"in e&&"resolve"in e.Promise&&"reject"in e.Promise&&"all"in e.Promise&&"race"in e.Promise&&function(){var r;return new e.Promise(function(e){r=e}),t(r)}();r||(e.Promise=Q)},et={Promise:Q,polyfill:Z};"function"==typeof r&&r.amd?r("promise",[],function(){return et}):"undefined"!=typeof module&&module.exports?module.exports=et:"undefined"!=typeof this&&(this.ES6Promise=et)}.call(this),r("utils",["exports","errors","settings"],function(e,t,r){e.defaults=function(e,t){return e=e||{},Object.keys(t).forEach(function(r){"undefined"==typeof e[r]&&(e[r]=t[r])}),e},e.getSelfOrigin=function(e){if(e=e||r,e.appSelf)return e.appSelf.origin;var t=e.window;return t.location.origin?t.location.origin:t.location.protocol+"//"+t.location.hostname},e.getUrlOrigin=function(e){var t=document.createElement("a");return t.href=e,t.origin||t.protocol+"//"+t.host},e.getCenteredCoordinates=function(e,t){var r=window.screenX+Math.max(0,Math.floor((window.innerWidth-e)/2)),n=window.screenY+Math.max(0,Math.floor((window.innerHeight-t)/2));return[r,n]},e.reCenterWindow=function(t,n,o){n=n||r.winWidth,o=o||r.winHeight;var a=e.getCenteredCoordinates(n,o);try{n+=t.outerWidth-t.innerWidth,o+=t.outerHeight-t.innerHeight,r.log.log("width: ",n,"height:",o),t.resizeTo(n,o),t.moveTo(a[0],a[1])}catch(i){r.log.log("We don't have permission to resize this window")}},e.openWindow=function(t){var n={url:"",title:"FxPay",w:r.winWidth,h:r.winHeight};t=e.defaults(t,n);var o=e.getCenteredCoordinates(t.w,t.h),a="toolbar=no,location=yes,directories=no,menubar=no,scrollbars=yes,resizable=no,copyhistory=no,width="+t.w+",height="+t.h+",top="+o[1]+",left="+o[0],i=r.window.open(t.url,t.title,a);return i||r.log.error("window.open() failed. URL:",t.url),i},e.getAppSelf=function(e){function n(e){if(null===e)throw new Error("cannot store a null appSelf");return r.appSelf=e,e}if(null!==r.appSelf)return e(null,r.appSelf);if(!r.mozApps)return r.log.info("web platform does not define mozApps, cannot get appSelf"),e(null,n(!1));var o=r.mozApps.getSelf();o.onsuccess=function(){var t=this.result;r.log.info("got appSelf from mozApps.getSelf()"),e(null,n(t||!1))},o.onerror=function(){var n=this.error.name;r.log.error("mozApps.getSelf() returned an error",n),e(t.InvalidApp("invalid application: "+n,{code:n}),r.appSelf)}},e.logDeprecation=function(e,t){r.log.warn(e+". This was deprecated in "+t+". More info: https://github.com/mozilla/fxpay/releases/tag/"+t)}}),r("receipts",["exports","api","errors","products","settings","utils"],function(e,t,r,n,o,a){function i(e,t){var n=o.appSelf.addReceipt(e);n.onsuccess=function(){o.log.info("item fully purchased and receipt installed"),t(null)},n.onerror=function(){var e=this.error.name;t(r.AddReceiptError("error calling app.addReceipt: "+e,{code:e}))}}function s(e,t){var r=o.localStorage.getItem(o.localStorageKey);r=r?JSON.parse(r):[],-1===r.indexOf(e)?r.push(e):o.log.info("not adding receipt",e.substring(0,5),"because it has already been added"),o.localStorage.setItem(o.localStorageKey,JSON.stringify(r)),t(null)}function u(e,t){var n=d(e);return n?void t(null,n):t(new r.InvalidReceipt("invalid JWT data"),{})}function l(t,n,a,i){o.log.debug("receipt data:",n);var s=m(n);o.log.info("about to post to verifier URL",n.verify),s.post(n.verify,t,function(n,s){return a.receiptInfo=e.ReceiptInfo(t,s),n?(o.log.error("Error verifying receipt:",n.toString()),i(n,a)):(o.log.info("verification result:",s),"ok"===s.status?(o.log.info("validated receipt for",a),i(null,a)):i(r.InvalidReceipt("receipt "+t.substring(0,50)+" is invalid; service returned: "+s.status+" "+s.reason),a))},{contentType:"text/plain"})}function c(e,t,n){if(!e.product)return n(r.InvalidReceipt("receipt is missing the product field"),t);if(!e.product.url)return n(r.InvalidReceipt("receipt is missing product.url"),t);if(!e.product.storedata)return n(r.InvalidReceipt("receipt is missing product.storedata"),t);if(e.product.storedataObject=f(e),!e.product.storedataObject)return n(r.InvalidReceipt("missing storedata"),t);var i="test-receipt"===e.typ;if(i&&!o.allowTestReceipts)return n(r.TestReceiptNotAllowed("cannot restore test receipts when allowTestReceipts is false"),t);var s=e.product.url;if(s&&!s.match(/^(http(s)?|app):\/\/.*$/g)&&(s="app://"+s),t.productUrl=s,!i){var u=a.getSelfOrigin();if(s!==u)return n(r.InvalidReceipt("app origin "+u+" does not match receipt product URL "+s),t)}n(null,t)}function p(e,t){for(var n=!1,a=e.verify||"",i=0;i<o.receiptCheckSites.length;i++){var s=o.receiptCheckSites[i];if(0===a.indexOf(s)){n=!0;break}}return n?void t(null,e):t(r.InvalidReceipt("Receipt check URL "+e.verify+" is not whitelisted. Valid choices: "+o.receiptCheckSites),e)}function d(e){var t;if("string"!=typeof e)return o.log.error("unexpected receipt type:",typeof e),null;var r=e.split("~");if(1===r.length)t=r[0];else{if(2!==r.length)return o.log.error("wrong number of tilde separated segments in receipt"),null;t=r[1]}var n=t.split(".");if(3!==n.length)return o.log.error("wrong number of JWT segments in receipt:",n.length),null;t=n[1];try{t=g(t)}catch(a){return o.log.error("error base64 decoding receipt:",a.name,a.message),null}try{t=JSON.parse(t)}catch(a){return o.log.error("error parsing receipt JSON:",a.name,a.message),null}return t}function f(e){if(!e.product)return null;if("string"!=typeof e.product.storedata)return o.log.error("unexpected storedata in receipt:",e.product.storedata),null;var t={};return e.product.storedata.split("&").forEach(function(e){var r=e.split("=");t[r[0]]=decodeURIComponent(r[1])}),t}function m(e){var r=e.iss;return o.log.info("derived base API URL from receipt:",r),new t.API(r)}function g(e){switch(e=e.replace(/-/g,"+"),e=e.replace(/_/g,"/"),e.length%4){case 0:break;case 1:e+="===";break;case 2:e+="==";break;case 3:e+="=";break;default:throw"Illegal base64url string!"}return atob(e)}function h(e,t){if(t=t||{},!(this instanceof h)){var r=Object.create(h.prototype);return h.apply(r,arguments)}return this.receipt=e,this.status=t.status,this.reason=t.reason,this}e.all=function(e){a.getAppSelf(function(t,r){if(t)return e(t);var n=0,a=[];r&&r.receipts&&(n=r.receipts.length,a=Array.prototype.slice.call(r.receipts));var i=0,s=o.localStorage.getItem(o.localStorageKey);if(s){s=JSON.parse(s);for(var u=0;u<s.length;u++)-1===a.indexOf(s[u])?(a.push(s[u]),i++):o.log.info("ignoring dupe receipt fetched from local storage",s[u].substring(0,5))}o.log.info("receipts fetched from mozApps:",n),o.log.info("receipts fetched from localStorage:",i),e(null,a)})},e.add=function(e,t){a.getAppSelf(function(n,a){return n?t(n):a&&a.addReceipt?(o.log.info("adding receipt to device with addReceipt"),i(e,t)):o.localStorage?(o.log.info("adding receipt to device with localStorage"),s(e,t)):t(r.PayPlatformUnavailable("no storage mechanism for adding receipts"))})},e.validateAppReceipt=function(t,n){e.verifyAppData(t,function(e,o,i){return e?n(e,i):void l(t,o,i,function(e,t){if(e)return n(e,t);var o=a.getSelfOrigin();return t.productUrl!==o?n(r.InvalidReceipt("valid receipt but wrong product; our origin: "+o+"; receipt product origin: "+t.productUrl),t):void n(null,t)})})},e.validateInAppProductReceipt=function(t,r,n){e.verifyInAppProductData(t,r,function(e,r,o){return e?n(e,o):void l(t,r,o,function(e,t){n(e,t)})})},e.verifyData=function(e,t,r){u(e,function(e,n){return e?r(e,n,{}):void c(n,t,function(e,t){return e?r(e,n,t):void p(n,function(e){return e?r(e,n,t):void r(null,n,t)})})})},e.verifyAppData=function(t,i){var s=new n.Product;e.verifyData(t,s,function(e,t,n){return e?i(e,t,n):void a.getAppSelf(function(e,a){if(e)return i(e,t,n);if(!a)return i(r.PayPlatformUnavailable("mozApps.getSelf() is needed to verify receipts"),t,n);var s,u=a.manifest;return s=u.installs_allowed_from?-1!==u.installs_allowed_from.indexOf("*"):!0,s&&o.log.warn('your paid app manifest specifies installs_allowed_from = ["*"] which means an attacker can provide a spoofed receipt validation service'),s||-1!==u.installs_allowed_from.indexOf(t.iss)?(n.productId=t.product.storedataObject.id,n.productId?void i(null,t,n):i(r.InvalidReceipt("Could not find app productId in storedata:"+t.product.storedata),t,n)):i(r.InvalidReceipt("receipt issuer "+t.iss+" is not an allowed issuer; allowed: "+u.installs_allowed_from),t,n)})})},e.verifyInAppProductData=function(t,n,o){e.verifyData(t,n,function(e,t,n){return e?o(e,t,n):(n.productId=t.product.storedataObject.inapp_id,n.productId?void o(null,t,n):o(r.InvalidReceipt("Could not find in-app productId in storedata: "+t.product.storedata),t,n))})},e.checkStoreData=function(e){var t=d(e);return t?f(t):null},e.ReceiptInfo=h}),r("products",["exports","api","errors","promise","receipts","settings","utils"],function(e,t,r,n,o,a,i){function s(e){e=e||{},this.pricePointId=e.pricePointId,this.productId=e.productId,this.name=e.name,this.smallImageUrl=e.smallImageUrl,this.receiptInfo=e.receiptInfo||{}}function u(){return new c(function(e,t){return a.productReceiptMap?e(a.productReceiptMap):(a.log.debug("building a product->receipt map"),void o.all(function(r,n){return r?t(r):(a.productReceiptMap={},n.forEach(function(e){var t=o.checkStoreData(e);return t?t.inapp_id?(a.log.debug("found receipt with inapp_id=",t.inapp_id),void(a.productReceiptMap[t.inapp_id]=e)):a.log.debug("ignoring receipt without inapp_id"):void a.log.debug("ignoring receipt with missing or unparsable storedata")}),void e(a.productReceiptMap))}))})}function l(e){return new s({pricePointId:e.price_id,productId:e.guid,name:e.name,smallImageUrl:e.logo_url})}var c=n.Promise;e.get=function(t,r){return u().then(function(){return new c(function(n,o){e.getById(t,function(e,r){return e?(a.log.error("no existing product with productId="+t+"; error: "+e),o(e)):void n(r)},r)})})},e.all=function(e){a.initialize();var n=u().then(function(){return new c(function(e,n){var o=[],s=new t.API(a.apiUrlBase),u=i.getSelfOrigin();if(!u)return n(r.InvalidApp("an origin is needed to get products"));u=encodeURIComponent(u);var c;a.fakeProducts?(a.log.warn("about to fetch fake products"),c="/payments/stub-in-app-products/"):(a.log.info("about to fetch real products for app",u),c="/payments/"+u+"/in-app/?active=1"),s.get(c,function(t,i){if(t)return n(t);if(!i||!i.objects)return a.log.debug("unexpected API response",i),n(r.BadApiResponse("received empty API response"));a.log.info("total products fetched:",i.objects.length);for(var s=0;s<i.objects.length;s++){var u=i.objects[s],c=l(u);o.push(c)}e(o)})})});return e&&(i.logDeprecation("getProducts(callback) is no longer supported; use the returned promise instead","0.0.15"),n.then(function(t){e(null,t)}).catch(function(t){e(t,[])})),n},e.getById=function(e,r,n){n=n||{},"undefined"==typeof n.fetchStubs&&(n.fetchStubs=!1),n.api||(n.api=new t.API(a.apiUrlBase));var o,s=encodeURIComponent(i.getSelfOrigin());o=n.fetchStubs?"/payments/stub-in-app-products/"+e.toString()+"/":"/payments/"+s+"/in-app/"+e.toString()+"/",a.log.info("fetching product info at URL",o,"fetching stubs?",n.fetchStubs),n.api.get(o,function(t,n){return t?(a.log.error("Error fetching product info",t.toString()),r(t,{productId:e})):void r(null,l(n))})},e.Product=s,s.prototype.getReceiptMap=function(){if(!a.productReceiptMap)throw r.IncorrectUsage("cannot proceed with this method; receipt map is empty");return a.productReceiptMap},s.prototype.hasReceipt=function(){return"undefined"!=typeof this.getReceiptMap()[this.productId]},s.prototype.validateReceipt=function(){var e=this.getReceiptMap(),t=this;return new c(function(n,i){var s=e[t.productId];return s?void o.validateInAppProductReceipt(s,t,function(e,t){return e?(a.log.error("receipt validation error: "+e),e.productInfo=t,i(e)):n(t)}):i(r.InvalidReceipt("could not find installed receipt for productId="+t.productId))})}}),r("adapter",["exports","api","errors","products","receipts","utils"],function(e,t,r,n,o,a){function i(){}i.prototype.toString=function(){return"<FxInappAdapter at "+(this.api&&this.api.baseUrl)+">"},i.prototype.configure=function(e){this.settings=e,this.api=new t.API(e.apiUrlBase),e.log.info("configuring Firefox Marketplace In-App adapter")},i.prototype.startTransaction=function(e,t){e=a.defaults(e,{productId:null});var r=this.settings;this.api.post(r.prepareJwtApiUrl,{inapp:e.productId},function(n,o){return n?t(n):(r.log.debug("requested JWT for ",e.productId,"from API; got:",o),t(null,{productJWT:o.webpayJWT,productId:e.productId,productData:o}))})},i.prototype.transactionStatus=function(e,t){var n=this,o=n.api.url(e.productData.contribStatusURL,{versioned:!1});n.api.get(o,function(a,i){return a?t(a):"complete"!==i.status?"incomplete"===i.status?t(null,!1):t(r.ConfigurationError("transaction status "+i.status+" from "+o+" was unexpected")):void n._finishTransaction(i,e.productId,function(e,r){return e?t(e):void t(null,!0,r)})})},i.prototype._finishTransaction=function(e,t,r){var a=this.settings;a.log.info("received completed transaction:",e),o.add(e.receipt,function(e){return e?r(e):void n.getById(t,function(e,t){return e?r(e,t):void r(null,t)},{fetchStubs:a.fakeProducts})})},e.FxInappAdapter=i}),r("settings",["exports","adapter","errors"],function(e,t,r){var n={version:"0.0.16"},o={allowTestReceipts:!1,apiUrlBase:"https://marketplace.firefox.com",apiVersionPrefix:"/api/v1",apiTimeoutMs:null,extraProviderUrls:null,fakeProducts:!1,log:window.console||{debug:function(){},error:function(){},info:function(){},log:function(){},warn:function(){}},receiptCheckSites:["https://receiptcheck.marketplace.firefox.com","https://marketplace.firefox.com"],adapter:null,appSelf:null,alreadyConfigured:!1,productReceiptMap:null,payProviderUrls:{"mozilla/payments/pay/v1":"https://marketplace.firefox.com/mozpay/?req={jwt}"},window:window,winWidth:276,winHeight:384,prepareJwtApiUrl:"/webpay/inapp/prepare/",onerror:function(e){throw e},oninit:function(){e.log.info("fxpay version:",e.libVersion),e.log.info("initialization ran successfully")},onrestore:function(t,r){t?e.log.error("error while restoring product:",r.productId,"message:",t):e.log.info("product",r.productId,"was restored from receipt")},localStorage:window.localStorage||null,localStorageKey:"fxpayReceipts",onBrokenWebRT:navigator.mozPay&&-1===navigator.userAgent.indexOf("Mobile"),mozPay:navigator.mozPay||null,mozApps:navigator.mozApps||null,libVersion:n.version};e.configure=function(n,a){if(a=a||{},e.alreadyConfigured||(a.reset=!0),a.reset)for(var i in o)e[i]=o[i];for(var s in n){if("undefined"==typeof e[s])return e.onerror(r.IncorrectUsage("configure() received an unknown setting: "+s));
e[s]=n[s]}if(e.extraProviderUrls){e.log.info("adding extra pay provider URLs",e.extraProviderUrls);for(var u in e.extraProviderUrls)e.payProviderUrls[u]=e.extraProviderUrls[u]}e.fakeProducts&&(e.allowTestReceipts=!0);var l=t.FxInappAdapter;return e.adapter||(e.log.info("creating default adapter"),e.adapter=new l),e.adapter.configure(e),e.log.info("using adapter:",e.adapter.toString()),e.log.info("(re)configuration completed; fxpay version:",e.libVersion),e.alreadyConfigured=!0,e},e.initialize=function(t){"object"==typeof t&&t?e.configure(t):e.alreadyConfigured||e.configure()}}),r("errors",["exports","settings"],function(e,t){function r(r,n){function o(e,r){if(r=r||{},!(this instanceof o)){var n=Object.create(o.prototype);return o.apply(n,arguments)}this.message=e,this.stack=(new Error).stack,r.code&&(this.code=r.code),this.productInfo=r.productInfo||{};var a=t.log||console;return a.error(this.toString()),this}n=n||{};var a=n.inherits||e.FxPayError||Error;return o.prototype=Object.create(a.prototype),o.prototype.name=r,n.code&&(o.prototype.code=n.code),o.prototype.toString=function(){var e=Error.prototype.toString.call(this);return this.code&&(e+=" {code: "+this.code+"}"),e},o}function n(t,n){t.forEach(function(t){var o=t[0],a=n||{};t[1]&&Object.keys(t[1]).forEach(function(e){a[e]=t[1][e]}),e[o]=r.call(this,o,a)})}e.createError=r,e.FxPayError=r("FxPayError"),n([["ConfigurationError"],["FailedWindowMessage"],["IncorrectUsage"],["InvalidApp"],["InvalidJwt"],["NotImplementedError"],["PayWindowClosedByUser",{code:"DIALOG_CLOSED_BY_USER"}],["UnknownMessageOrigin"]]),e.PaymentFailed=r("PaymentFailed"),n([["AppReceiptMissing"],["InvalidReceipt"],["PurchaseTimeout"],["TestReceiptNotAllowed"]],{inherits:e.PaymentFailed}),e.PlatformError=r("PlatformError"),n([["AddReceiptError"],["PayPlatformError"],["PayPlatformUnavailable"]],{inherits:e.PlatformError}),e.ApiError=r("ApiError"),n([["ApiRequestAborted"],["ApiRequestError"],["ApiRequestTimeout"],["BadApiResponse"],["BadJsonResponse"]],{inherits:e.ApiError})}),r("jwt",["exports","errors","settings"],function(e,t,r){e.decode=function(e,n){var o=e.split(".");if(3!==o.length)return r.log.debug("JWT: not enough segments:",e),n(t.InvalidJwt("JWT does not have 3 segments"));var a=o[1];a=a.replace("-","+","g").replace("_","/","g");var i;try{i=atob(a)}catch(s){return n(t.InvalidJwt("atob() error: "+s.toString()+" when decoding JWT "+a))}var u;try{u=JSON.parse(i)}catch(s){return n(t.InvalidJwt("JSON.parse() error: "+s.toString()+" when parsing "+i))}n(null,u)},e.getPayUrl=function(n,o){e.decode(n,function(e,a){if(e)return o(e);var i=r.payProviderUrls[a.typ];return i?-1===i.indexOf("{jwt}")?o(t.ConfigurationError("JWT type "+a.typ+" pay URL is formatted incorrectly: "+i)):(i=i.replace("{jwt}",n),r.log.info("JWT",a.typ,"resulted in pay URL:",i),void o(null,i)):o(t.InvalidJwt("JWT type "+a.typ+" does not map to any known payment providers"))})}}),r("pay",["exports","errors","jwt","settings","utils"],function(e,t,r,n,o){function a(a,i,s,u){r.getPayUrl(s,function(r,s){function l(r){function p(e){return e instanceof t.UnknownMessageOrigin?void 0:(c&&clearInterval(c),n.window.removeEventListener("message",l),i?a.close():n.log.info("payment window should be closed but client is managing it"),e?u(e):void u())}e.acceptPayMessage(r,o.getUrlOrigin(s),a,p)}if(r)return u(r);a.location=s;var c=setInterval(function(){return!a||a.closed?(clearInterval(c),u(t.PayWindowClosedByUser("polling detected a closed window"))):void 0},500);n.window.addEventListener("message",l)})}var i;e.processPayment=function(e,r,i){if(i=o.defaults(i,{managePaymentWindow:!0,paymentWindow:void 0}),!n.mozPay)return i.paymentWindow?(n.log.info("processing payment with web flow"),a(i.paymentWindow,i.managePaymentWindow,e,r)):r(t.IncorrectUsage("Cannot start a web payment without a reference to the payment window"));n.log.info("processing payment with mozPay using jwt",e);var s=n.mozPay([e]);s.onerror=function(){n.log.error("mozPay: received onerror():",this.error.name),n.onBrokenWebRT&&"USER_CANCELLED"===this.error.name?(n.log.warn("webRT: pretending the cancel message is actually a success!"),r()):r(t.PayPlatformError("mozPay error: "+this.error.name,{code:this.error.name}))},s.onsuccess=function(){n.log.debug("mozPay: received onsuccess()"),r()}},e.acceptPayMessage=function(e,r,o,a){if(n.log.debug("received",e.data,"from",e.origin),e.origin!==r)return a(t.UnknownMessageOrigin("ignoring message from foreign window at "+e.origin));var s=e.data||{};return"unloaded"!==s.status?"ok"===s.status?(n.log.info("received pay success message from window at",e.origin),a()):a("failed"===s.status?t.FailedWindowMessage("received pay fail message with status="+s.status+", code="+s.errorCode+" from window at "+e.origin,{code:s.errorCode}):t.FailedWindowMessage("received pay message with unknown status "+s.status+" from window at "+e.origin)):(i&&window.clearTimeout(i),void(i=window.setTimeout(function(){return o&&o.closed!==!0?void 0:a(t.PayWindowClosedByUser("Window closed by user"))},300)))}}),r("fxpay",["exports","errors","promise","pay","receipts","products","settings","utils"],function(e,t,r,n,o,a,i,s){function u(e,r,n){n=n||{},n.maxTries=n.maxTries||10,n.pollIntervalMs=n.pollIntervalMs||1e3,n._tries=n._tries||1;var o=i.log;return o.debug("Getting transaction state for",e,"tries=",n._tries),n._tries>n.maxTries?(o.error("Giving up on transaction for",e,"after",n._tries,"tries"),r(t.PurchaseTimeout("timeout while waiting for completed transaction"))):void i.adapter.transactionStatus(e,function(t,a,i){return t?r(t):a?r(null,i):(o.debug("Re-trying incomplete transaction in",n.pollIntervalMs,"ms"),void window.setTimeout(function(){u(e,r,{maxTries:n.maxTries,pollIntervalMs:n.pollIntervalMs,_tries:n._tries+1})},n.pollIntervalMs))})}var l=r.Promise;e.errors=t,e.settings=i,e.configure=function(){return i.configure.apply(i,arguments)},e.init=function(t){i.initialize(t),s.logDeprecation("fxpay.init() is no longer supported; use fxpay.getProducts()...product.validateReceipt() instead","0.0.15"),e.getProducts().then(function(e){e.forEach(function(e){e.hasReceipt()&&e.validateReceipt().then(function(e){i.onrestore(null,e)}).catch(function(e){i.onrestore(e,e.productInfo)})})}).then(i.oninit).catch(i.onerror)},e.validateAppReceipt=function(){return i.initialize(),new l(function(e,r){s.getAppSelf(function(n,a){if(n)return r(n);if(!a)return r(t.PayPlatformUnavailable("mozApps.getSelf() required for receipts"));var s=[];o.all(function(n,a){if(n)return r(n);a.forEach(function(e){var t=o.checkStoreData(e);return t?t.inapp_id?void i.log.info("ignoring in-app receipt with storedata",t):void s.push(e):void i.log.info("ignoring receipt with missing or unparsable storedata")}),i.log.info("app receipts found:",s.length);var u;return 0===s.length?r(t.AppReceiptMissing("no receipt found in getSelf()")):1===s.length?(u=s[0],i.log.info("Installed receipt:",u),o.validateAppReceipt(u,function(t,n){i.log.info("got verification result for",n),t?(t.productInfo=n,r(t)):e(n)})):r(t.NotImplementedError("multiple app receipts were found which is not yet supported"))})})})},e.purchase=function(e){i.initialize();var t,r;"function"==typeof arguments[1]?(t=arguments[1],r=arguments[2]):r=arguments[1],r=s.defaults(r,{maxTries:void 0,managePaymentWindow:void 0,paymentWindow:void 0,pollIntervalMs:void 0}),i.initialize();var o=new l(function(t,o){function l(){r.paymentWindow&&!r.paymentWindow.closed&&(r.managePaymentWindow?r.paymentWindow.close():i.log.info("payment window should be closed but client is managing it"))}"undefined"==typeof r.managePaymentWindow&&(r.managePaymentWindow=!r.paymentWindow);var c=new a.Product({productId:e});i.log.debug("starting purchase for product",e),i.mozPay||(r.paymentWindow?(i.log.info("web flow will use client provided payment window"),s.reCenterWindow(r.paymentWindow,i.winWidth,i.winHeight)):r.paymentWindow=s.openWindow()),i.adapter.startTransaction({productId:e},function(e,a){return e?(l(),e.productInfo=c,o(e)):void n.processPayment(a.productJWT,function(e){return e?(l(),e.productInfo=c,o(e)):void u(a,function(e,r){e?(e.productInfo=c,o(e)):t(r)},{maxTries:r.maxTries,pollIntervalMs:r.pollIntervalMs})},{managePaymentWindow:r.managePaymentWindow,paymentWindow:r.paymentWindow})})});return t&&(s.logDeprecation("purchase(id, callback) is no longer supported; use the returned promise instead","0.0.15"),o.then(function(e){t(null,e)}).catch(function(e){t(e,e.productInfo||new a.Product)})),o},e.getProduct=function(){return i.initialize(),a.get.apply(a,arguments)},e.getProducts=function(){return i.initialize(),a.all.apply(a,arguments)}}),t("fxpay")}),define("payments",["core/capabilities","core/defer","fxpay","core/l10n","core/log","core/notification","core/requests","core/settings","underscore","core/urls","core/z"],function(e,t,r,n,o,a,i,s,u,l){function c(){}function p(e,n){n=u.defaults({},n,{fxpaySettings:null});var o=t.Deferred();return e&&e.payment_required?(d.log("Initiating transaction"),n.fxpaySettings&&r.configure(n.fxpaySettings),r.purchase(e.slug,{paymentWindow:n.paymentWindow}).then(function(t){d.log("payment completed successfully for",t.productId),o.resolve(e)}).catch(function(t){var r;d.error("fxpay error:",t.toString());var n=t.code||t;if("APP_ALREADY_PURCHASED"===n)return o.resolve(e);switch(n){case"USER_CANCELLED":case"DIALOG_CLOSED_BY_USER":r=m("Payment cancelled.");break;case"MKT_SERVER_ERROR":r=m("Error while communicating with server. Try again later.");break;default:r=m("Payment failed. Try again later.")}f({classes:"error",message:r,timeout:5e3}),o.reject(null,e,"MKT_CANCELLED")}).catch(function(t){d.error("uncaught exception:",t.toString()),o.reject(null,e,"MKT_CANCELLED")}),o.promise()):o.resolve(e).promise()}var d=o("payments"),f=a.notification,m=n.gettext,g=o("fxpay");c.prototype.configure=function(){d.log("configuring Firefox Marketplace app adapter")},c.prototype.toString=function(){return"[MarketplaceAdapter from payments.js]"},c.prototype.startTransaction=function(e,t){e=u.defaults({},e,{productId:null}),d.log("adapter: starting transaction for product",e.productId),i.post(l.api.url("prepare_nav_pay"),{app:e.productId}).done(function(r){d.log("Calling fxpay with JWT: ",r.webpayJWT),t(null,{productJWT:r.webpayJWT,productId:e.productId,productData:r})}).fail(function(e,r,n){return 409===n?(d.warn("App already purchased (409 from API)"),t("APP_ALREADY_PURCHASED")):(d.error("Error fetching JWT from API: ",r,n),void t("MKT_SERVER_ERROR"))})},c.prototype.transactionStatus=function(e,t){var r={productId:e.productId};d.log("Fetching payment status of "+e.productId+" from API...");var n=l.api.sign(e.productData.contribStatusURL);i.get(s.api_url+n,!0).done(function(n){d.log("Got payment status: ",e.productId,":",n.status),"complete"==n.status?(d.log("Payment complete."),t(null,!0,r)):t(null,!1)}).fail(function(r,n,o){d.error("Error fetching payment status: ",e.productId,n,o),t("MKT_SERVER_ERROR")})};var h={};return s.dev_pay_providers&&(h=s.dev_pay_providers),h=u.defaults(h,s.local_pay_providers||{}),r.configure({adapter:new c,log:{error:g.error,log:g.log,warn:g.warn,info:g.log,debug:g.log},extraProviderUrls:h}),{purchase:p,utils:r.utils}}),define("tracking_events",["compat_filter","consumer_info","core/capabilities","core/log","core/navigation","core/settings","core/user","core/utils","core/z","jquery","tracking","user_helpers"],function(e,t,r,n,o,a,i,s,u,l,c,p){function d(e){var t=e.data("product");return t.name+":"+t.id}function f(e,t){t=t||{};var r={},n=e.data("product");if(r[L.appName]=n.name,r[L.appId]=n.id+"",t.isWebsite?r[L.contentType]="website":(r[L.appDeveloper]=n.author,r[L.appPremiumType]=n.payment_required?"paid":"free",r[L.contentType]="webapp"),l('[data-page-type~="detail"]').length){var o=s.getVars().src||"direct";r[L.appViewSource]=o}r[L.installAttribution]=e.data("source");var a=e.closest("[data-tracking]");if(a.length&&(r[L.installAttributionSlug]=a.data("tracking")),t.installing||t.viewing){var i=m();if(i){var u=t.installing?L.searchQueryAppInstall:L.searchQueryAppView;r[u]=i}}return r}function m(){for(var e=o.stack(),t=0;t<e.length;t++)if(e[t].params&&e[t].params.search_query)return _.log("Search query:",e[t].params.search_query),e[t].params.search_query}function g(e){if(e=e||l(".install"),e.length){var t=f(e,{viewing:!0});Object.keys(t).forEach(function(e){c.setPageVar(e,t[e])})}}function h(e){var t=e.data("product");w("Launch app",t.payment_required?"paid":"free",t.slug,f(e))}function v(e){var t=e.data("product");w("Click to install app",t.receipt_required?"paid":"free",t.name+":"+t.id,f(e,{installing:!0}))}function b(e){var t=e.data("product");w("Successful app install",t.receipt_required?"paid":"free",t.name+":"+t.id,f(e,{installing:!0}))}function k(e){var t=e.data("product");w("App failed to install",t.receipt_required?"paid":"free",t.name+":"+t.id,f(e,{installing:!0}))}function y(e){c.setPageVar(L.categoryName,e)}var _=n("tracking_events"),w=c.sendEvent,x=(c.setPageVar,c.setSessionVar),L={isLoggedIn:"dimension1",platformFilter:"dimension2",siteSection:"dimension3",platform:"dimension4",categoryName:"dimension5",appName:"dimension6",appId:"dimension7",appDeveloper:"dimension8",appViewSource:"dimension9",appPremiumType:"dimension10",region:"dimension11",searchQueryAppView:"dimension12",searchQueryAppInstall:"dimension13",isPackaged:"dimension15",installAttribution:"dimension16",installAttributionSlug:"dimension17",contentType:"dimension18"},O={categoryNew:"{0}-new",categoryPopular:"{0}-popular",detail:"detail","new":"new",popular:"popular",purchases:"myapps",recommended:"reco",search:"search",featuredApp:"featured-app",brand:"branded-editorial-element",collection:"collection-element",shelf:"operator-shelf-element",desktopPromo:"desktop-promo"},E={};E[O.desktopPromo]=!0,x(L.isLoggedIn,i.logged_in()),u.page.on("logged_in logged_out",function(){x(L.isLoggedIn,i.logged_in())}),x(L.siteSection,"Consumer"),x(L.platformFilter,e.getFilterDevice()),x(L.platform,r.device_type()),t.promise.done(function(){x(L.region,p.region())});var A=a.package_version;return A?x(L.isPackaged,A):x(L.isPackaged,0),u.doc.on("submit",".add-review-form",s._pd(function(){var e=this.elements.app.value,t=this.elements.rating.value;w("App view interactions","click","Successful review"),w("Write a Review","click",e,t)})),u.body.on("click","mkt-nav a",function(){w("Nav Click","click",l(this).closest("li").data("mkt-nav--item"))}).on("click","mkt-header a",function(){var e=l(this).closest("li");w("Nav Click","click",e.data("mkt-header-nav--item")||e.data("mkt-header-child--item"))}).on("click",".app-list-filters-expand-toggle:not(.active)",function(){w("View type interactions","click","Expanded view")}).on("click",".app-list-filters-expand-toggle.active",function(){w("View type interactions","click","List view")}).on("lightbox-open",function(){-1!==u.context.type.split(" ").indexOf("detail")?w("App view interactions","click","Screenshot view"):w("Category view interactions","click","Screenshot view")}).on("change","#compat-filter, .compat-filter",function(){var e=this.value;x(L.platformFilter,e),w("Change platform filter","click",e)}).on("change",".content-filter",function(){var e=this.value;x(L.contentType,e),w("Change content filter","click",e)}),u.page.on("click",".feed-collection .view-all-tab",function(){w("View Collection","click",l(this).closest(".feed-collection").data("tracking"))}).on("click",".feed-collection .mkt-tile",function(){w("View App from Collection Element","click",l(this).closest(".feed-collection").data("tracking"))}).on("click",".featured-app",function(){w("View App from Featured App Element","click",l(this).data("tracking"))}).on("click",".brand-header, .feed-brand .view-all-tab",function(){w("View Branded Editorial Element","click",l(this).closest(".feed-brand").data("tracking"))}).on("click",".feed-brand .mkt-tile",function(){w("View App from Branded Editorial Element","click",l(this).closest(".feed-brand").data("tracking"))}).on("click",".op-shelf",function(){w("View Operator Shelf Element","click",l(this).data("tracking"))}).on("click","[data-shelf-landing-carrier] .mkt-tile",function(){w("View App from Operator Shelf Element","click",l("[data-tracking]").data("tracking"))}).on("click",".description-wrapper + .truncate-toggle",function(){w("App view interactions","click","Toggle description")}).on("click",".app-support .button, .app-report-abuse .button",function(){w("App view interaction","click",this.getAttribute("data-tracking")||this.parentNode.getAttribute("data-tracking"))}).on("click",".desktop-promo-item",function(){w("View Desktop Promo Item","click",this.getAttribute("data-tracking"))}).on("click",'[data-content-type="website"] + .mkt-app-button, .mkt-website-link',function(){var e=this;w("View Website","click",d(l(e)),f(l(e),{isWebsite:!0}))}),{DIMENSIONS:L,PERSISTENT_SRCS:E,SRCS:O,track_search_term:function(e){for(var t=require("core/navigation"),r=t.stack(),n=0;n<r.length;n++){var o=r[n];if(o.params&&o.params.search_query)return _.log("Found search in nav stack, tracking search term:",o.params.search_query),void c[e?"setPageVar":"setSessionVar"](L.searchQueryAppInstall,o.params.search_query)}_.log("No associated search term to track.")},trackAppHit:g,trackAppLaunch:h,trackAppInstallBegin:v,trackAppInstallSuccess:b,trackAppInstallFail:k,trackCategoryHit:y}}),define("buttons",["apps","core/cache","core/capabilities","core/defer","core/format","core/l10n","core/log","core/login","core/models","core/notification","payments","core/requests","core/settings","tracking_events","core/urls","core/user","core/utils","core/views","core/z"],function(e,t,r,n,o,a,i,s,u,l,c,p,d,f,m,g,h,v,b){function k(e,t){y(e),e.addClass(t)}function y(e){e.removeClass("purchasing installing error spinning"),e.find("em").text(V(x(e),e.data("isGame")))}function w(e){e.data("old-text",e.find("em").text()).addClass("spinning")}function x(e){return P.lookup(e.closest("[data-slug]").data("slug"))||e.data("product")}function L(e){return function(t){t.preventDefault(),t.stopPropagation(),e.call(this,x($(this)))}}function O(o,a,i){function u(){if(f.trackAppInstallBegin(a),w(a),o.is_packaged||o.payment_required||(_=setTimeout(function(){a.hasClass("spinning")&&(T.log("Spinner timeout for ",o.name),y(a),l.notification({message:I("Sorry, we had trouble fetching this app's data. Please try again later.")}))},25e3)),o.id&&g.has_installed(o.id)&&!o.receipt_required)return T.log("Receipt not required (skipping record step) for",o.name),d();var e=m.api.url("record_"+(o.receipt_required?"paid":"free")),t={app:o.id,chromeless:+r.chromeless};return o.receipt_required?void p.post(e,t).done(function(e){return e.error?(T.log("Server returned error: "+e.error),void b.reject()):void d({data:{receipts:[e.receipt]}})}).fail(function(){l.notification({message:I("Install failed. Please try again later.")}),console.error("Could not generate receipt or record install for",o.name),b.reject()}):void d().done(function(){"langpack"!==o.role&&p.post(e,t)})}function d(r){return e.install(o,r||{}).done(function(e){o.id&&(g.update_install(o.id),t.bust(m.api.url("installed"))),b.resolve(e,o,a)}).fail(function(e){e&&l.notification({message:e}),T.log("App install deferred was rejected for ",o.name),b.reject()})}if(T.log("Install requested for",o.name),o.receipt_required="free"!==o.premium_type&&"free-inapp"!==o.premium_type,o.receipt_required&&!g.logged_in())return T.log("Purchase suspended; user needs to log in"),i=r.navPay?void 0:h.openWindow(),s.login({popupWindow:i}).done(function(){var e=E(o.manifest_url);O(o,e,i)}).fail(function(){T.log("Purchase cancelled; login aborted"),l.notification({message:I("Payment cancelled.")}),i&&i.close()});o.user||(console.warn("User data not available for",o.name),o.user={purchased:!1,installed:!1,developed:!1});var b=n.Deferred();a=a||$(this);var _;if(o.id&&g.has_purchased(o.id)&&(o.payment_required=!1),o.payment_required){T.log("Starting payment flow for",o.name),a.data("old-text",a.find("em").text()),k(a,"purchasing");var x={paymentWindow:i};c.purchase(o,x).then(function(){T.log("Purchase flow completed for",o.name),g.update_purchased(o.id),k(a,"purchased"),a.data("old-text",a.find("em").text()),t.bust(m.api.url("installed")),t.attemptRewrite(function(e){return e===m.api.params("reviews",{app:o.slug})},function(e){return e.user.can_rate=!0,e}),b.always(function(){v.reload()}),u()},function(){l.notification({message:I("Payment cancelled.")}),T.log("Purchase flow rejected for",o.name),b.reject()}).always(function(){i&&(T.log("Closing the popup window"),i.close())})}else i&&(T.log("Closing the popup"),i.close()),T.log("Starting app installation for",o.name),u();return b.then(function(){_&&clearTimeout(_);var e=$(".post-install-message").show(),t=e.find(".post-install-message-"+r.os.slug);t.length&&(e.show(),t.show()),setTimeout(function(){A(o.manifest_url)}),f.trackAppInstallSuccess(a),T.log("Successful install for",o.name)},function(){y(a),f.trackAppInstallFail(a),T.log("Unsuccessful install for",o.name)}),b.promise()}function E(e){return $('.mkt-app-button[data-manifest_url="'+e.replace(/"/,'\\"')+'"]')}function A(e,t){t=t||E(e);var r=x(t);"langpack"==r.role?t.attr("disabled",!0).find("em").text(I("Installed")):k(t,"launch install")}function F(){r.webApps&&e.getInstalled().done(function(e){var t={};e.forEach(function(e){t[e.replace(/"/,'\\"')]=!0}),setTimeout(function(){for(var e=document.querySelectorAll(".install"),r=0;r<e.length;r++)t[e[r].dataset.manifest_url]&&A(null,$(e[r]))})})}function S(){r.webApps&&e.getInstalled().done(function(){$(".install").each(function(e,t){var r=$(t);-1===b.apps.indexOf(r.data("manifest_url"))&&(r.hasClass("launch")&&y(r),r.removeClass("launch"))})})}function C(t){if(t.isWebsite)return t;var r="langpack"==t.role,n=e.incompat(t),o=-1!==b.apps.indexOf(t.manifest_url);if(r)return _.extend(t,{disabled:n||o,isLangpack:!0});var a=I(d.meowEnabled?"free":"Free"),i=!(t.price&&"0.00"!=t.price),s=i?a:t.price_locale;return t.payment_required&&!t.price&&(s=I("Unavailable")),_.extend(t,{disabled:n,isLangpack:r,incompatible:n,installed:o,installedBefore:g.has_installed(t.id)||g.has_purchased(t.id),isFree:i,priceText:s})}function V(e,t){return e=C(e),e.isLangpack?I(e.installed?"Installed":"Install"):d.meowEnabled?e.isWebsite?I(t?"Play now!":"Open website"):e.installed?I(t?"Play now!":"Open app"):e.isFree?I(t?"Install now!":"Install for free"):g.has_purchased(e.id)?I(t?"Install now!":"Install"):o.format(I("Install for {price}"),{price:e.priceText}):e.installed?I("Open"):g.has_installed(e.id)?I("Install"):e.priceText}var T=i("buttons"),I=a.gettext,P=u("app");b.page.one("iframe-install-loaded",function(){F()}).on("loaded loaded_more",function(){F()}),b.doc.on("visibilitychange",function(){S()});var N=L(function(t){e.launch(t.manifest_url),f.trackAppLaunch(t)});return b.page.on("click",".mkt-app-button.launch",N).on("click",".mkt-app-button--install:not(.launch):not(.incompatible)",L(O)).on("click",".mkt-app-button--install[disabled]",function(e){e.preventDefault(),e.stopPropagation()}).on("click",".mkt-app-button[href], .mkt-website-link[href]",function(e){e.preventDefault(),e.stopPropagation(),window.open(this.getAttribute("href"),"_blank")}),{getBtnText:V,install:O,markBtnsAsInstalled:F,markBtnsAsUninstalled:S,revertButton:y,spinButton:w,transform:C}}),define("content-ratings",["core/format","core/l10n","core/urls","core/utils","core/z","routes","settings_app"],function(e,t,r,n,o){function a(e){return n.urlparams(r.media("fireplace/img/icons/ratings/"+e),{build:o.body.data("build-id-js")||"0"})}e=e.format;var i=t.gettext,s={classind:{0:a("CLASSIND_L.png"),10:a("CLASSIND_10.png"),12:a("CLASSIND_12.png"),14:a("CLASSIND_14.png"),16:a("CLASSIND_16.png"),18:a("CLASSIND_18.png")},esrb:{0:a("ESRB_e.png"),10:a("ESRB_e10.png"),13:a("ESRB_t.png"),17:a("ESRB_m.png"),18:a("ESRB_ao.png")},generic:{3:a("generic_3.png"),7:a("generic_7.png"),12:a("generic_12.png"),16:a("generic_16.png"),18:a("generic_18.png"),pending:a("generic_rp.png")},pegi:{3:a("pegi_3.png"),7:a("pegi_7.png"),12:a("pegi_12.png"),16:a("pegi_16.png"),18:a("pegi_18.png")},usk:{0:a("USK_0.png"),6:a("USK_6.png"),12:a("USK_12.png"),16:a("USK_16.png"),18:a("USK_18.png"),"rating-refused":a("USK_RR.png")}},u={pegi:{has_pegi_discrimination:a("descriptors/pegi_discrimination.png"),has_pegi_drugs:a("descriptors/pegi_drugs.png"),has_pegi_gambling:a("descriptors/pegi_gambling.png"),has_pegi_horror:a("descriptors/pegi_fear.png"),has_pegi_lang:a("descriptors/pegi_language.png"),has_pegi_nudity:a("descriptors/pegi_nudity.png"),has_pegi_online:a("descriptors/pegi_online.png"),has_pegi_scary:a("descriptors/pegi_fear.png"),has_pegi_sex_content:a("descriptors/pegi_sex.png"),has_pegi_violence:a("descriptors/pegi_violence.png"),has_pegi_digital_purchases:a("descriptors/pegi_inapp_purchase_option.png"),has_pegi_shares_info:a("descriptors/pegi_personal_data_sharing.png"),has_pegi_shares_location:a("descriptors/pegi_location_data_sharing.png"),has_pegi_users_interact:a("descriptors/pegi_social_interaction_functionality.png")}},l={esrb:{has_digital_purchases:a("interactives/ESRB_digital-purchases.png"),has_shares_info:a("interactives/ESRB_shares-info.png"),has_shares_location:a("interactives/ESRB_shares-location.png"),has_users_interact:a("interactives/ESRB_users-interact.png")},classind:{}},c={classind:"http://www.culturadigital.br/classind",esrb:"http://www.esrb.org/ratings/ratings_guide.jsp",generic:"https://www.globalratings.com/ratings_guide.aspx",pegi:"http://www.pegi.info/en/index/id/33/",usk:"http://www.usk.de/iarc0/"},p=i("For ages {0}+"),d={bodies:{classind:"CLASSIND",esrb:"ESRB",generic:i("Generic"),pegi:"PEGI",usk:"USK"},ratings:{generic:{0:i("For all ages"),3:e(p,3),6:e(p,6),7:e(p,7),10:e(p,10),12:e(p,12),14:e(p,14),16:e(p,16),18:e(p,18),pending:i("Rating Pending"),"rating-refused":i("Rating Refused")},esrb:{0:i("Everyone"),10:i("Everyone 10+"),13:i("Teen"),17:i("Mature 17+"),18:i("Adults Only 18+")}}};return d.ratings.classind=d.ratings.generic,d.ratings.pegi=d.ratings.generic,d.ratings.usk=d.ratings.generic,"es"==n.lang()&&(s.esrb={0:a("esrb_e_spa.png"),10:a("esrb_e10_spa.png"),13:a("esrb_t_spa.png"),17:a("esrb_m_spa.png"),18:a("esrb_ao_spa.png")},delete l.esrb),{descriptor_icons:u,detail_links:c,names:d,interactive_icons:l,rating_icons:s}}),define("core/forms",["core/z"],function(e){function t(e){e&&$(e).filter(":not([novalidate])").find("button[type=submit]").attr("disabled",!e.checkValidity())}function r(e,r){e.find("textarea, button, input").prop("disabled",!r),e.find(".ratingwidget").toggleClass("disabled",!r),r&&t(e[0])}return e.body.on("change input","input, textarea",function(e){t(e.target.form)}).on("change","select",function(e){t(e.target.form)}).on("loaded decloak",function(){$("form:not([novalidate])").each(function(){t(this)}),$("form[novalidate] button[type=submit]").removeAttr("disabled")}),{toggleSubmitFormState:r}}),define("core/element_utils",["core/polyfill"],function(){function e(e,t){for(var r=0;e&&r<e.length;r++)t(e[r],r)}function t(e,t){return new CustomEvent(e,{bubbles:!0,cancelable:!0,detail:t})}function r(e,t,r){return void 0!==r?r?e.classList.add(t):e.classList.remove(t):e.classList.toggle(t),e}function n(t,r,n){var o=t.querySelectorAll("a."+r);e(o,function(e){e.classList.remove(r)});var a=t.querySelectorAll('a[href="'+(n||window.location.pathname)+'"]');return e(a,function(e){e.hasAttribute("data-nav-no-active-node")||e.classList.add(r)}),t}function o(e,t,r,n){t.forEach(function(t){Object.getOwnPropertyDescriptor(e,t)||Object.defineProperty(e,t,{get:function(){return this[n][t]}})}),r.forEach(function(t){Object.defineProperty(e,t,{value:function(){return this[n][t].call(arguments)}})})}return{each:e,MktEvent:t,toggleClass:r,proxyInterface:o,updateActiveNode:n}}),define("elements/categories",["categories","core/element_utils","core/format","core/nunjucks","core/urls","core/z","document-register-element","jquery","underscore"],function(e,t,r,n,o,a){var i={},s={LINK:"mkt-category-link",LINK_ACTIVE:"mkt-category-link--active"};return i.MktCategoryListElement=document.registerElement("mkt-category-list",{prototype:Object.create(HTMLUListElement.prototype,{createdCallback:{value:function(){var t=this,n=(document.createElement("div"),'<mkt-category-item  data-mkt-category-name="{name}" data-mkt-category-slug="{slug}"></mkt-category-item>');t.innerHTML=e.map(function(e){return r.format(n,{name:e.name,slug:e.slug})}).join("")}},updateActiveNode:{value:function(e){return t.updateActiveNode(this,s.LINK_ACTIVE,e)}}})}),i.MktCategoryItemElement=document.registerElement("mkt-category-item",{prototype:Object.create(HTMLLIElement.prototype,{createdCallback:{value:function(){var e=this,t=e.getAttribute("data-mkt-category-name"),r=e.getAttribute("data-mkt-category-slug");e.setAttribute("data-mkt-category-item",r);var n=document.createElement("a");n.classList.add(s.LINK),n.setAttribute("href",o.reverse("category",[r])),n.setAttribute("title",t),n.textContent=t,e.appendChild(n)}}})}),a.page.on("loaded navigate",function(){var e=document.querySelectorAll("mkt-category-list");t.each(e,function(e){e.updateActiveNode&&e.updateActiveNode()})}),{classes:s,elements:i}}),define("elements/header",["core/element_utils","core/z","document-register-element","underscore"],function(e,t){var r={},n={CHILD_VISIBLE:"mkt-header-child--visible",CHILD_INPUT:"data-header-child--input",LINK_ACTIVE:"mkt-header-nav--link-active",SHOWING_CHILD:"mkt-header--showing-child"};return r.MktHeaderElement=document.registerElement("mkt-header",{prototype:Object.create(HTMLElement.prototype,{createdCallback:{value:function(){var t=this;e.each(t.querySelectorAll("mkt-header-child"),function(e){t.nextSibling?t.parentNode.insertBefore(e,t.nextSibling):t.parentNode.appendChild(e)})}},attributeChangedCallback:{value:function(e){"header-title"===e&&this.setTitle()}},headerChildren:{get:function(){return this.parentNode.querySelectorAll("mkt-header-child")}},setTitle:{value:function(){var e=this.getAttribute("header-title"),t=this.querySelector(".mkt-header--title");t.textContent=e,t.setAttribute("title",e)}},statusElement:{get:function(){return this.parentNode}},toggleChildren:{value:function(t,r){var o=this,a=!1;e.each(o.headerChildren,function(e){e.id===t?(e.toggle(r),a=e.visible):e.toggle(!1)}),o.statusElement.classList.toggle(n.SHOWING_CHILD,a)}}})}),r.MktHeaderChildElement=document.registerElement("mkt-header-child",{prototype:Object.create(HTMLElement.prototype,{createdCallback:{value:function(){var e=this.input,t=this.querySelector("label");if(this.isInput&&t){var r=function(){e.style.width=e.value?null:t.clientWidth+"px"};r(),e.addEventListener("input",r),document.addEventListener("saferesize",r)}}},toggle:{value:function(t){var r=this;e.toggleClass(r,n.CHILD_VISIBLE,t);var o=document.querySelector('mkt-header-child-toggle[for="'+r.id+'"]');return o&&o.toggle(r.visible),r.visible&&r.isInput&&r.input.focus(),r}},visible:{get:function(){return this.classList.contains(n.CHILD_VISIBLE)}},input:{get:function(){var e=this;return e.isInput?e.querySelector("input"):void 0}},isInput:{get:function(){return this.hasAttribute(n.CHILD_INPUT)}}})}),r.MktHeaderChildToggleElement=document.registerElement("mkt-header-child-toggle",{prototype:Object.create(HTMLElement.prototype,{createdCallback:{value:function(){var e=this;e.addEventListener("click",function(t){t.preventDefault();var r=e.getAttribute("for");document.querySelector("mkt-header").toggleChildren(r)})}},toggle:{value:function(t){return e.toggleClass(this,n.CHILD_VISIBLE,t)}}})}),r.MktHeaderNavElement=document.registerElement("mkt-header-nav",{prototype:Object.create(HTMLUListElement.prototype,{updateActiveNode:{value:function(t){return e.updateActiveNode(this,n.LINK_ACTIVE,t)}}})}),t.page.on("navigate logged_out",function(){var t=document.querySelector("mkt-header");if(t)try{setTimeout(function(){t.toggleChildren(!1)},50)}catch(r){}e.each(document.querySelectorAll("[data-header-child--input] input"),function(t){setTimeout(function(){t.value="",t.dispatchEvent(e.MktEvent("input"))
},50)})}).on("navigate loaded",function(){var e=document.querySelector("mkt-header-nav");e&&e.updateActiveNode&&e.updateActiveNode()}),{classes:n,elements:r}}),define("elements/nav",["core/element_utils","core/log","core/navigation","core/settings","core/z","document-register-element","jquery","underscore"],function(e,t,r,n,o,a,i,s){function u(){var e=document.querySelector("main"),t=window.innerHeight-60;e&&(e.style.minHeight=window.matchMedia("(min-width: 800px)").matches?null:t+"px")}var l=t("nav"),c={},p={ACTIVE:"mkt-nav--active",VISIBLE:"mkt-nav--visible",SHOWING_CHILD:"mkt-nav--subnav-visible"};return c.MktNavElement=document.registerElement("mkt-nav",{prototype:Object.create(HTMLElement.prototype,{statusElement:{value:document.body},root:{get:function(){return this.querySelectorAll("mkt-nav-root")}},navChildren:{get:function(){return this.querySelectorAll("mkt-nav-child")}},toggle:{value:function(t){return e.toggleClass(this.statusElement,p.VISIBLE,t)}},toggleChildren:{value:function(t){var r=this,n=!1;e.each(r.navChildren,function(e){e.id===t?(e.toggle(),n=e.visible):e.toggle(!1)}),r.statusElement.classList.toggle(p.SHOWING_CHILD,n)}},updateActiveNode:{value:function(t){return e.updateActiveNode(this,p.ACTIVE,t)}}})}),c.MktNavRootElement=document.registerElement("mkt-nav-root",{prototype:Object.create(HTMLUListElement.prototype,{})}),c.MktNavChildElement=document.registerElement("mkt-nav-child",{prototype:Object.create(c.MktNavRootElement.prototype,{toggle:{value:function(t){return e.toggleClass(this,p.VISIBLE,t)}},visible:{get:function(){return this.classList.contains(p.VISIBLE)}}})}),c.MktNavToggleElement=document.registerElement("mkt-nav-toggle",{prototype:Object.create(HTMLElement.prototype,{createdCallback:{value:function(){var e=this;e.addEventListener("click",function(e){if(e.stopPropagation(),this.isLeafPage)l.log("hambacker button pressed (back)"),r.back();else if(this.isCategoryPage){l.log("hambacker button pressed (cats)");var t=document.getElementById("categories");t.parentNode.toggle(),t.visible||t.parentNode.toggleChildren(t.id)}else l.log("hambacker button pressed (menu)"),document.querySelector("mkt-nav").toggle()})}},isCategoryPage:{get:function(){return-1!==this.pageTypes.indexOf("category")}},isLeafPage:{get:function(){return-1!==this.pageTypes.indexOf("leaf")}},pageTypes:{get:function(){var e=o.body.attr("data-page-type")||"";return e.split(" ")}}})}),c.MktNavChildToggleElement=document.registerElement("mkt-nav-child-toggle",{prototype:Object.create(HTMLElement.prototype,{createdCallback:{value:function(){var e=this;e.addEventListener("click",function(t){t.preventDefault();var r=e.navChild;return r?void r.parentNode.toggleChildren(r.id):document.querySelector("mkt-nav").toggleChildren(!1)})}},navChild:{get:function(){return document.getElementById(this.getAttribute("for"))}}})}),o.doc.on("click","."+p.VISIBLE,function(e){if(0===i(e.target).parents("mkt-nav").length){var t=document.querySelector("mkt-nav");t&&t.toggle&&t.toggle()}}),o.page.on("navigate",function(){var e=document.querySelector("mkt-nav");if(e)try{e.updateActiveNode(),e.toggle(!1),setTimeout(function(){e.toggleChildren(!1)},250)}catch(t){}}),o.win.on("resize",s.debounce(u,250)),u(),{classes:p,elements:c}}),define("elements/select",["core/element_utils","core/z","document-register-element","jquery","underscore"],function(e,t,r,n,o){function a(e,t){for(var r=0;r<t.attributes.length;r++){var n=t.attributes[r];"id"!==n&&e.setAttribute(n.name,n.value)}return e}var i={},s={VISIBLE:"mkt-select--visible"},u=!1;return i.MktSelectElement=document.registerElement("mkt-select",{prototype:Object.create(HTMLSelectElement.prototype,{createdCallback:{value:function(){var t=this,r=document.createElement("select");r.style.display="none",t.select=r;var n=document.createElement("mkt-optgroup"),o=t.querySelector("optgroup");e.each(t.querySelectorAll("option"),function(e){var r=document.createElement("mkt-option");r.option=e,r.mktSelect=t,n.appendChild(r)}),t.appendChild(n),n.optGroup=o,r.appendChild(o),t.appendChild(r),t.updateOptionIndices(),t.updateSelectedText(),t.alignOptions()>0&&t.setAttribute("data-mkt-select--aligned",!0),t.addEventListener("click",function(){t.toggle()})}},select:{get:function(){return this._select},set:function(e){a(e,this),this._select=e}},toggle:{value:function(t){var r=this;return r.getAttribute("data-mkt-select--aligned")||r.alignOptions()>0&&r.setAttribute("data-mkt-select--aligned",!0),e.toggleClass(r,s.VISIBLE,t)}},value:{get:function(){return this.select.value},set:function(t){var r=this,o=r.select;o.value=t;var a;e.each(o.querySelectorAll("option"),function(e){e.value===t?(e.setAttribute("selected",""),a=e):e.removeAttribute("selected")}),r.updateSelectedText(a),e.each(r.querySelectorAll("mkt-option"),function(e){e.update()}),this.updateOptionIndices(),n(r).trigger("change")}},alignOptions:{value:function(){if(!this.hasAttribute("noalign")){var e,t="(min-width: 799px)",r=document.documentElement.getAttribute("dir"),o="rtl"==r?"padding-right":"padding-left";if(window.matchMedia(t).matches){var a=n("mkt-selected-text",this);e=a.position().left,"rtl"===r&&(e+=a.width(),e>0&&(e=document.body.clientWidth-e)),n("mkt-option",this).css(o,e).removeClass("mkt-option--center")}else n("mkt-option",this).css(o,0).addClass("mkt-option--center");return e}}},updateSelectedText:{value:function(e){var t=this;e=e||t.querySelector("mkt-option[selected]"),t.querySelector("mkt-selected-text").innerHTML=e.innerHTML,t.alignOptions()}},updateOptionIndices:{value:function(){var t=0;e.each(this.querySelectorAll("mkt-option"),function(e){e.hasAttribute("selected")?e.removeAttribute("data-mkt-option--index"):e.setAttribute("data-mkt-option--index",t++)})}}})}),i.MktOptionElement=document.registerElement("mkt-option",{prototype:Object.create(HTMLOptionElement.prototype,{createdCallback:{value:function(){var e=this;e.addEventListener("click",function(){e.mktSelect.value=e.getAttribute("value")})}},mktSelect:{get:function(){return this._mktSelect},set:function(e){this._mktSelect=e}},option:{get:function(){return this._option},set:function(e){this.innerHTML=e.innerHTML,this._option=e,this.update()}},update:{value:function(){this.removeAttribute("selected"),a(this,this._option)}}})}),i.MktOptGroupElement=document.registerElement("mkt-optgroup",{prototype:Object.create(HTMLOptGroupElement.prototype,{optGroup:{value:null,writable:!0}})}),i.MktSelectedElement=document.registerElement("mkt-selected",{prototype:Object.create(HTMLElement.prototype,{})}),i.MktSelectedTextElement=document.registerElement("mkt-selected-text",{prototype:Object.create(HTMLElement.prototype,{})}),e.proxyInterface(i.MktSelectElement.prototype,["autofocus","disabled","form","labels","length","multiple","name","onchange","options","required","selectedIndex","size","type","validationMessage","validity","willValidate"],["add","blur","checkValidity","focus","item","namedItem","remove","setCustomValidity"],"select"),e.proxyInterface(i.MktOptGroupElement.prototype,["disabled"],[],"optGroup"),e.proxyInterface(i.MktOptionElement.prototype,["defaultSelected","disabled","form","index","label","selected","text","value"],[],"option"),t.win.on("resize",o.debounce(function(){e.each(document.querySelectorAll("mkt-select"),function(e){e.alignOptions&&(null===e.offsetParent?u=!0:e.alignOptions())})},100)),t.page.on("navigate",function(){e.each(document.querySelectorAll("mkt-select"),function(e){e.toggle&&e.toggle(!1)}),u&&e.each(document.querySelectorAll("mkt-select"),function(e){null!==e.offsetParent&&(e.alignOptions(),u=!1)})}),{classes:s,elements:i}}),define("header_footer",["compat_filter","core/nunjucks","core/z","newsletter"],function(e,t,r,n){function o(){document.querySelector("mkt-header")||($("#site-header, main #site-nav").remove(),$('<div id="mkt-nav--site-header" class="mkt-nav--wrapper"></div>').append(t.env.render("header.html")).append(t.env.render("nav.html")).insertBefore("main"),r.body.attr("data-mkt-nav--enabled",!0))}function a(){$("#site-footer").html(t.env.render("footer.html",n.context()))}function i(){document.querySelector("mkt-select.compat-filter")||$(t.env.render("_includes/platform_selector.html")).insertBefore("#page")}function s(){var e=$(".banners");e.length||(e='<div class="banners"></div>'),window.matchMedia("(min-width: 800px)").matches?$("#mkt-nav--site-header").before(e):$("#page").before(e)}return r.page.on("reload_chrome",function(){o(),a(),i(),s()}),{renderHeader:o,renderFooter:a,renderPlatformSelector:i}}),function(e,t){"function"==typeof define&&define.amd?define("collection_colors",[],t):"object"==typeof exports?module.exports=t():e.returnExports=t()}(this,function(){return{COLLECTION_COLORS:{amber:"#cc440d",topaz:"#ffb300",amethyst:"#7a3675",sapphire:"#2d457e",emerald:"#1b8215",aquamarine:"#197b99",garnet:"#cc3388",ruby:"#c93333"}}}),define("edbrands",["core/l10n"],function(e){function t(e,t){arguments.length||(e=null,t=1);var n={"apps-for-albania":r("App for Albania","Apps for Albania",{n:t}),"apps-for-argentina":r("App for Argentina","Apps for Argentina",{n:t}),"apps-for-bangladesh":r("App for Bangladesh","Apps for Bangladesh",{n:t}),"apps-for-brazil":r("App for Brazil","Apps for Brazil",{n:t}),"apps-for-bulgaria":r("App for Bulgaria","Apps for Bulgaria",{n:t}),"apps-for-chile":r("App for Chile","Apps for Chile",{n:t}),"apps-for-china":r("App for China","Apps for China",{n:t}),"apps-for-colombia":r("App for Colombia","Apps for Colombia",{n:t}),"apps-for-costa-rica":r("App for Costa Rica","Apps for Costa Rica",{n:t}),"apps-for-croatia":r("App for Croatia","Apps for Croatia",{n:t}),"apps-for-czech-republic":r("App for Czech Republic","Apps for Czech Republic",{n:t}),"apps-for-ecuador":r("App for Ecuador","Apps for Ecuador",{n:t}),"apps-for-el-salvador":r("App for El Salvador","Apps for El Salvador",{n:t}),"apps-for-france":r("App for France","Apps for France",{n:t}),"apps-for-germany":r("App for Germany","Apps for Germany",{n:t}),"apps-for-greece":r("App for Greece","Apps for Greece",{n:t}),"apps-for-hungary":r("App for Hungary","Apps for Hungary",{n:t}),"apps-for-india":r("App for India","Apps for India",{n:t}),"apps-for-italy":r("App for Italy","Apps for Italy",{n:t}),"apps-for-japan":r("App for Japan","Apps for Japan",{n:t}),"apps-for-macedonia":r("App for Macedonia","Apps for Macedonia",{n:t}),"apps-for-mexico":r("App for Mexico","Apps for Mexico",{n:t}),"apps-for-montenegro":r("App for Montenegro","Apps for Montenegro",{n:t}),"apps-for-nicaragua":r("App for Nicaragua","Apps for Nicaragua",{n:t}),"apps-for-panama":r("App for Panama","Apps for Panama",{n:t}),"apps-for-peru":r("App for Peru","Apps for Peru",{n:t}),"apps-for-poland":r("App for Poland","Apps for Poland",{n:t}),"apps-for-russia":r("App for Russia","Apps for Russia",{n:t}),"apps-for-serbia":r("App for Serbia","Apps for Serbia",{n:t}),"apps-for-south-africa":r("App for South Africa","Apps for South Africa",{n:t}),"apps-for-spain":r("App for Spain","Apps for Spain",{n:t}),"apps-for-uruguay":r("App for Uruguay","Apps for Uruguay",{n:t}),"apps-for-venezuela":r("App for Venezuela","Apps for Venezuela",{n:t}),"arts-entertainment":r("Arts & Entertainment App","Arts & Entertainment Apps",{n:t}),book:r("Featured Book App","Featured Book Apps",{n:t}),creativity:r("Featured Creativity App","Featured Creativity Apps",{n:t}),education:r("Featured Education App","Featured Education Apps",{n:t}),games:r("Featured Game","Featured Games",{n:t}),groundbreaking:r("Groundbreaking App","Groundbreaking Apps",{n:t}),"health-fitness":r("Health & Fitness App","Health & Fitness Apps",{n:t}),"hidden-gem":r("Hidden Gem","Hidden Gems",{n:t}),lifestyle:r("Featured Lifestyle App","Featured Lifestyle Apps",{n:t}),"local-favorite":r("Local Favorite App","Local Favorite Apps",{n:t}),"maps-navigation":r("Maps & Navigation App","Maps & Navigation Apps",{n:t}),music:r("Featured Music App","Featured Music Apps",{n:t}),"mystery-app":r("Mystery App!","Mystery Apps!",{n:t}),"news-weather":r("News & Weather App","News & Weather Apps",{n:t}),"photo-video":r("Photo & Video App","Photo & Video Apps",{n:t}),shopping:r("Featured Shopping App","Featured Shopping Apps",{n:t}),social:r("Featured Social App","Featured Social Apps",{n:t}),sports:r("Featured Sports App","Featured Sports Apps",{n:t}),"tools-time-savers":r("Tool & Time Saver","Tools & Time Savers",{n:t}),travel:r("Featured Travel App","Featured Travel Apps",{n:t}),"work-business":r("Work & Business App","Work & Business Apps",{n:t})};return e?n[e]:Object.keys(n)}var r=e.ngettext;return{BRAND_TYPES:t(),get_brand_type:t}}),define("feed_websites",["core/l10n","core/nunjucks","core/urls","core/utils","core/z"],function(e,t,r,n,o){var a=e.gettext,i={activeClass:"feed-item-website-tabs-active",element:null,init:function(){var e=document.getElementsByClassName("feed-item-website-tabs")[0];e&&(this.element=e,e.getElementsByTagName("li")[0].classList.add(this.activeClass),o.doc.trigger("image-deferrer--load"))},change:function(e){e.preventDefault(),document.getElementsByClassName(this.activeClass).forEach(function(e){e.classList.remove(this.activeClass)}.bind(this)),e.target.parentNode.classList.add(this.activeClass)}},s={activeClass:"feed-item-website-carousel-active",counterClass:"feed-item-website-carousel-counter",activeIndex:null,carousel:null,counter:null,count:null,init:function(){var e=document.getElementsByClassName("feed-item-website-carousel")[0];e&&(this.carousel=e,this.slides=this.carousel.getElementsByTagName("li"),this.count=this.slides.length,this.counter=this.carousel.getElementsByClassName(this.counterClass)[0],this.activate(0))},change:function(e){e.preventDefault();var t=this.activeIndex+1;t==this.count&&(t=0),this.activate(t)},activate:function(e){document.getElementsByClassName(this.activeClass).forEach(function(e){e.classList.remove(this.activeClass)}.bind(this)),this.slides[e].classList.add(this.activeClass),this.activeIndex=e,this.counter.textContent=a("{current} of {count}",{current:this.activeIndex+1,count:this.count}),o.doc.trigger("image-deferrer--load")}};return{carousel:s,tabs:i}}),define("feed",["collection_colors","edbrands","core/l10n","core/nunjucks","core/settings","core/urls","core/utils","core/z","feed_websites","tracking_events","underscore","utils_local"],function(e,t,r,n,o,a,i,s,u,l){function c(r){switch(r.app?(r.isApp=!0,r.itemType="app"):r.layout?(r.isBrand=!0,r.itemType="brand",r.itemTypeSlug="editorial"):r.carrier?(r.isShelf=!0,r.itemType="shelf"):(r.isCollection=!0,r.itemType="collection"),r.itemType){case"app":switch(r.type){case"icon":r.isIcon=!0;break;case"image":r.isImage=!0;break;case"description":r.isDescription=!0;break;case"quote":r.isQuote=!0;break;case"preview":r.isPreview=!0}r.src=l.SRCS.featuredApp;break;case"brand":r.name=t.get_brand_type(r.type,r.apps.length),r.src=l.SRCS.brand,r.isGridLayout="grid"==r.layout,r.isListLayout="listing"==r.layout,r.maxApps=r.isGridLayout?6:4,r.color=p(r);break;case"collection":"promo"==r.type?r.isCollPromo=!0:r.isCollListing=!0,r.src=l.SRCS.collection,r.maxApps=4;break;case"shelf":r.src=l.SRCS.shelf}return i.getVars().src in l.PERSISTENT_SRCS&&(r.src=i.getVars().src),r.landingUrl=r.isApp?a.reverse("app",[r.app.slug]):a.reverse("feed_landing",[r.itemTypeSlug||r.itemType,r.slug]),r.landingUrl=i.urlparams(r.landingUrl,{src:r.src}),r.color=r.color||"sapphire",r.inline_color=e.COLLECTION_COLORS[r.color],r.isApp&&r.preview&&(r.preview.thumbnail_url=r.preview.thumbnail_url.replace(/\/thumbs\//,"/full/")),r}function p(t){function r(e){for(var t=e.type,r=0;4>r&&r<e.apps.length-1;)t+="_"+e.apps[r].slug,r++;return t}function n(e){for(var t=0,r=0,n=e.length;n>r;r++)t+=e.charCodeAt(r);return t}function o(e){var t=1e4*Math.sin(e++);return t-Math.floor(t)}var a=r(t),i=n(a),s=o(i),u=Object.keys(e.COLLECTION_COLORS);return u[Math.floor(s*u.length)]}function d(e){if(!e||!e[0].group)return e;for(var t=[],r={name:e[0].group,apps:[]},n=0;n<e.length;n++)e[n].group!=r.name&&(t.push(r),r={name:e[n].group,apps:[]}),r.apps.push(e[n]);return t.push(r),t}r.gettext;return o.meowEnabled&&o.homepageWebsitesEnabled&&s.page.on("loaded reloaded_chrome",function(e){u.tabs.init(e),u.carousel.init(e)}).on("click",".feed-item-website-tabs button",function(e){u.tabs.change(e)}).on("click",".feed-item-website-carousel-next",function(e){u.carousel.change(e)}),{group_apps:d,transformer:c}}),define("helpers_local",["apps","buttons","categories","content_filter","compat_filter","content-ratings","core/format","core/helpers","core/models","core/nunjucks","core/settings","core/urls","core/utils","core/z","feed","regions","tracking_events","user_helpers","utils_local"],function(e,t,r,n,o,a,i,s,u,l,c,p,d,f,m,g,h,v,b){function k(e){return 10>e?"0"+e:e}function y(e,t){return e.indexOf(t)}function _(t){var r=[];t.is_offline&&r.push([gettext("works offline"),"positive"]);var n=e.incompat(t)||[];return n.forEach(function(e){r.push([e,"negative"])}),r}function w(e){return e.match(/(\d+)\/$/)[1]}function x(){return document.documentElement.dir}function L(e){var t=e.tags||e.keywords;if(t)for(var r=0;r<t.length;r++)if(t[r]in S)return S[t[r]]}var O,E=l.require("filters"),A=l.require("globals");if("undefined"!=typeof Intl&&"undefined"!=typeof Intl.DateTimeFormat){var F=Intl.DateTimeFormat(d.lang(),{year:"numeric",month:"long",day:"numeric"});O=F.format.bind(F)}else O=function(e){return[e.getFullYear(),k(e.getMonth()+1),k(e.getDate())].join("-")};E.date=function(e){return O(new Date(e))},E.json=JSON.stringify,l.env&&l.env.addFilter("json",JSON.stringify),E.items=b.items,E.sliceArray=function(e,t,r){return"undefined"==typeof t?e.slice():"undefined"==typeof r?e.slice(t):e.slice(t,r)},E.fileSize=function(e){var t=parseInt(e,10);return 0===t?"0":t<Math.pow(1024,2)?+(t/1024).toFixed(2)+" KB":t<Math.pow(1024,3)?+(t/Math.pow(1024,2)).toFixed(2)+" MB":+(t/Math.pow(1024,3)).toFixed(2)+" GB"},E.rewriteCdnUrls=function(e){var t=[{name:"Privacy Policy",pattern:/\/media\/docs\/privacy\/.+\.html/g,replacement:"/privacy-policy"},{name:"Terms of Use",pattern:/\/media\/docs\/terms\/.+\.html/g,replacement:"/terms-of-use"}];return t.forEach(function(t){e=e.replace(t.pattern,t.replacement)}),e},A.buttons=t,A.CATEGORIES=r,A.DEVICE_CHOICES=o.DEVICE_CHOICES,A.feed=m,A.iarc_names=a.names,A.NEWSLETTER_LANGUAGES=c.NEWSLETTER_LANGUAGES,A.user_helpers=v,A.PLACEHOLDER_ICON=p.media("fireplace/img/icons/placeholder.svg"),A.PLACEHOLDER_PREVIEW=p.media("fireplace/img/icons/placeholder_preview.svg"),A.compat_filter=o,A.trackingEvents=h;var S={"featured-game-adventure":gettext("Adventure Game"),"featured-game-action":gettext("Action Game"),"featured-game-puzzle":gettext("Puzzle Game"),"featured-game-strategy":gettext("Strategy Game")},C={apps:e,app_notices:_,appOrWebsite:function(e){return e.manifest_url?"app":"website"},contentFilter:n,cast_app:u("app").cast,fileSize:E.fileSize,getGameCategory:L,htmldir:x,format:i.format,getReviewId:w,numberfmt:l.require("filters").numberfmt,indexOf:y,settings:c};for(var V in C)C.hasOwnProperty(V)&&(A[V]=C[V]);return C}),define("image-deferrer",["core/urls","core/z","underscore"],function(e,t,r){function n(e){if(!e)return{x:0,y:0};var t={x:e.offsetLeft,y:e.offsetTop},r=n(e.offsetParent);for(var o in r)t[o]+=r[o];return t}function o(e){if(e=e||window,null!==e.pageXOffset)return{x:e.pageXOffset,y:e.pageYOffset};var t=e.document;return"CSS1Compat"==document.compatMode?{x:t.documentElement.scrollLeft,y:t.documentElement.scrollTop}:{x:t.body.scrollLeft,y:t.body.scrollTop}}function a(e,a){function i(){var e=o().y,r=t.win.height(),a=e-.5*r;a=0>a?0:a;var i=e+1.5*r,u=0,p=0,d=[];s.each(function(e,r){var o=n(r).y;if(o>a&&i>o)if(u++,l.push(r),r.classList.contains("deferred-background")){r.classList.remove("deferred-background");var s=r.getAttribute("data-src");r.style.backgroundImage="url("+s+")",c.push(s),++p==u&&t.page.trigger("images_loaded")}else{var f=r.cloneNode(!1);f.classList.remove("deferred"),f.onload=function(){null!==r.parentNode&&(r.parentNode.replaceChild(f,r),setTimeout(function(){f.style.opacity=1},50),c.push(f.src),++p==u&&t.page.trigger("images_loaded"))},f.src=f.getAttribute("data-src"),f.style.opacity=.5}else d.push(r)}),0===u&&t.page.trigger("images_loaded"),s=$(d)}var s,u,l=[],c=[],p=function(){s&&i()};p=a?r.debounce(p,a||200):r.throttle(p,e||100),t.win.on("scroll resize image-deferrer--load",p);var d=function(e){u=e.selector,s=l.length?e.filter(function(e){return-1===l.indexOf(s[e])}):e,p()},f=function(){d($(u))},m=function(){l=[],f()};t.win.on("unloading",m);var g=function(){return c};return{clear:m,refresh:f,setImages:d,getSrcsAlreadyLoaded:g}}return{Deferrer:a}}),define("image-deferrer-mkt",["image-deferrer","core/nunjucks","core/z"],function(e,t,r){var n=e.Deferrer(100,null),o=e.Deferrer(null,200);r.page.one("loaded",function(){n.setImages($(".icon.deferred")),o.setImages($(".previews-thumbnail .deferred, .deferred-background, .deferred.feed-landing-bg-image"))}).on("loaded loaded_more navigate fragment_loaded",function(){n.refresh(),o.refresh()}),t.require("globals").imgAlreadyDeferred=function(e){var t=n.getSrcsAlreadyLoaded(),r=o.getSrcsAlreadyLoaded(),a=t.concat(r);return-1!==a.indexOf(e)}}),function(e){define("marketplace-elements",["document-register-element"],function(){return function(){return function(){function e(e){return{getItem:function(t){return JSON.parse(e.getItem(t))},setItem:function(t,r){e.setItem(t,JSON.stringify(r))}}}function t(e,t){return Array.prototype.forEach.call(e,t)}function r(e,t){for(var r=0,n=e.length;n>r;r++)if(t(e[r]))return e[r]}function n(e,t){return Array.prototype.map.call(e,t)}function o(e,t){return Array.prototype.filter.call(e,t)}function a(e){var r={};return t(e.elements,function(e){!e.disabled&&e.name&&(r[e.name]=e.value)}),r}var i,s;!function(){i=function(e,t){t=t||{};var r=document.createEvent("CustomEvent");return r.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),r},i.prototype=window.Event.prototype,s=function(e,t){return i(e,{bubbles:!0,cancelable:!0,detail:t})}}();var u=window.gettext||function(e){return e},l=function(){};l.prototype=Object.create(HTMLElement.prototype,{attributeChangedCallback:{value:function(e,t,r){if(this.attributeClasses.hasOwnProperty(e)){var n=this.attributeClasses[e];null===r?this.classList.remove(n):this.classList.add(n)}}},attributeClasses:{value:{}},createdCallback:{value:function(){var e=this;t(Object.keys(this.attributeClasses),function(t){var r=e.attributeClasses[t];e.hasAttribute(t)&&r&&e.classList.add(r),e.__defineGetter__(t,function(){return e.getAttribute(t)||e.hasAttribute(t)}),e.__defineSetter__(t,function(r){null===r||r===!1?e.removeAttribute(t):e.setAttribute(t,r||!0)})})}}}),document.registerElement("mkt-banner",{prototype:Object.create(l.prototype,{attributeClasses:{value:{dismiss:null}},createdCallback:{value:function(){l.prototype.createdCallback.call(this),this.classList.add("mkt-banner"),document.addEventListener("saferesize",function(){this.setMinHeight()}.bind(this)),this.hasAttribute("theme")||this.setAttribute("theme","success"),this.rememberDismissal&&this.dismissed&&this.dismissBanner({immediate:!0}),this.html(this.innerHTML)}},html:{value:function(e){var t=document.createElement("div");if(t.classList.add("mkt-banner-content"),t.innerHTML=e,!this.undismissable){var r=document.createElement("div");r.classList.add("mkt-banner-close"),r.href="#",r.innerHTML="&times;",r.title=u("Close"),r.addEventListener("click",function(e){e.preventDefault(),this.dismissBanner()}.bind(this)),t.appendChild(r)}this.innerHTML="",this.appendChild(t),setTimeout(function(){this.setMinHeight()}.bind(this),20)}},dismissed:{get:function(){return this.storage.getItem(this.storageKey)}},dismissBanner:{value:function(e){e=e||{},this.rememberDismissal&&this.storage.setItem(this.storageKey,!0);var t=function(){this.parentNode&&this.parentNode.removeChild(this)}.bind(this);this.dispatchEvent(new s("dismiss-banner")),e.immediate?t():(setTimeout(t,500),this.addEventListener("transitionend",t),this.style.maxHeight=0)}},rememberDismissal:{get:function(){return"remember"===this.dismiss||"session"===this.dismiss}},setMinHeight:{value:function(){this.style.maxHeight=null,this.style.maxHeight=this.clientHeight+"px"}},storage:{get:function(){return"remember"===this.dismiss?e(localStorage):"session"===this.dismiss?e(sessionStorage):void 0}},storageKey:{get:function(){return this.hasAttribute("name")?"mkt-banner-hide-"+this.getAttribute("name"):"hide_"+this.id.replace(/-/g,"_")}},undismissable:{get:function(){return"off"===this.dismiss}}})}),document.registerElement("mkt-login",{prototype:Object.create(l.prototype,{createdCallback:{value:function(){if(this.isLink){var e=document.createElement("a");e.href="#",e.classList.add("persona"),e.textContent=this.textContent,this.innerHTML="",this.appendChild(e)}}},isLink:{get:function(){return this.hasAttribute("link")}}})}),document.registerElement("mkt-segmented",{prototype:Object.create(l.prototype,{createdCallback:{value:function(){function e(){o!=this&&(o&&o.removeAttribute("selected"),this.setAttribute("selected",""),o=this,r.selectedIndex=this.index,t.dispatchEvent(new Event("change",{bubbles:!0})))}var t=this,r=this.querySelector("select");this.select=r,r.classList.add("mkt-segmented-select"),this.classList.add("mkt-segmented");var o,a=n(r.options,function(t,r){var n=document.createElement("button");return n.index=r,n.classList.add("mkt-segmented-button"),n.textContent=t.textContent,n.addEventListener("click",e),n});e.call(a[r.selectedIndex]),a.forEach(function(e){t.appendChild(e)})}},value:{get:function(){return this.select.value}}})}),document.registerElement("mkt-tab-control",{prototype:Object.create(l.prototype,{createdCallback:{value:function(){function e(){o!=this&&(o&&o.removeAttribute("selected"),this.setAttribute("selected",""),o=this,r.selectedIndex=this.index,t.dispatchEvent(new Event("change",{bubbles:!0})))}var t=this,r=this.querySelector("select");this.select=r,r.classList.add("mkt-tab-control-select"),this.classList.add("mkt-tab-control");var o,a=n(r.options,function(t,r){var n=document.createElement("button");return n.index=r,n.classList.add("mkt-tab-control-button"),n.textContent=t.textContent,n.addEventListener("click",e),n});e.call(a[r.selectedIndex]);var i,s=t.getAttribute("control");s&&(i=document.getElementById(s),i.controller=t.id,i.setAttribute("current",t.value),t.addEventListener("change",function(){i.setAttribute("current",t.value)})),a.forEach(function(e){t.appendChild(e)})}},value:{get:function(){return this.select.value}}})}),document.registerElement("mkt-tabs",{prototype:Object.create(l.prototype,{createdCallback:{value:function(){var e=this,r=o(e.querySelectorAll("section"),function(t){return t.parentNode===e});e.tabs=r;var n=e.getAttribute("current");e.classList.add("mkt-tabs"),t(r,function(e){e.classList.add("mkt-tab"),e.getAttribute("name")==n&&e.classList.add("mkt-tab-active")})}},attributeChangedCallback:{value:function(e,t,n){function o(e){return r(a.tabs,function(t){return t.getAttribute("name")==e})}var a=this;"current"==e&&(t&&o(t).classList.remove("mkt-tab-active"),n&&(o(n).classList.add("mkt-tab-active"),a.dispatchEvent(new Event("change"))))}}})}),document.registerElement("mkt-prompt",{prototype:Object.create(l.prototype,{createdCallback:{value:function(){var e=this;this.isModal=this.hasAttribute("data-modal"),this.classList.add("mkt-prompt");var r=document.createElement("section");if(r.className="mkt-prompt-content",t(this.children,function(e){r.appendChild(e)}),this.appendChild(r),this.querySelector("form > div:last-child").classList.add("mkt-prompt-btn-wrap"),t(this.querySelectorAll(".mkt-prompt-btn-wrap button"),function(e,t){0!==t||e.hasAttribute("type")?1!==t||e.hasAttribute("type")||e.setAttribute("type","submit"):e.setAttribute("data-type","cancel")}),this.isModal){this.addEventListener("click",function(t){t.target===e&&e.dismissModal()});var n=this.querySelector('button[data-type="cancel"]');n.addEventListener("click",function(t){t.preventDefault(),this.dispatchEvent(s("mkt-prompt-cancel")),e.dismissModal()})}var o=(this.querySelector('button[type="submit"]'),this.querySelector("form"));o.addEventListener("submit",function(t){if(t.preventDefault(),e.validate()){var r=a(e.querySelector("form"));e.dispatchEvent(s("mkt-prompt-submit",r)),e.dismissModal()}},!0)}},dismissModal:{value:function(){this.isModal&&this.parentNode.removeChild(this)}},validate:{value:function(){return this.querySelector("form").checkValidity()}}})})}(),window.document.registerElement}.apply(e,arguments)})}(this),define("overlay",["keys","core/l10n","core/utils","core/z"],function(e,t,r,n){function o(){a.is(".show")&&($(".modal").removeClass("show"),a.attr("class","cloak").trigger("overlay_dismissed"))}var a=(t.gettext,$(".cloak"));a.on("touchmove",function(e){e.preventDefault(),e.stopPropagation()}).on("click",function(e){$(e.target).parent("body").length&&o()}).on("dismiss",function(){o()}),n.body.on("click",function(){$("#notification").removeClass("show")}).on("keydown.overlayDismiss",function(t){r.fieldFocused(t)||t.which!=e.ESCAPE||(t.preventDefault(),o())}).on("overlay_dismissed",function(){n.body.removeClass("overlayed")}).on("decloak",function(){n.body.addClass("overlayed"),a.addClass("show")}).on("click",".modal .btn-cancel, .modal .cancel",r._pd(o)),n.win.on("navigating",o)}),define("perf_events",["core/z"],function(e){e.page.one("reloaded_chrome",function(){e.win.trigger("moz-chrome-interactive")}).one("loaded",function(){e.win.trigger("moz-content-interactive")}).one("splash_removed",function(){e.win.trigger("moz-chrome-dom-loaded"),e.win.trigger("moz-app-visually-complete")}).one("images_loaded",function(){e.win.trigger("moz-app-loaded")})}),define("perf_helper",[],function(){function e(e){if(window.mozPerfHasListener){var t=window.performance.now();setTimeout(function(){var r={name:e,timestamp:t},n=new CustomEvent("x-moz-perf",{detail:r});window.dispatchEvent(n)})}}["moz-chrome-dom-loaded","moz-chrome-interactive","moz-app-visually-complete","moz-content-interactive","moz-app-loaded"].forEach(function(t){window.addEventListener(t,function(){e(t)},!1)}),window.PerformanceTestingHelper={dispatch:e}}),define("ratingwidget",["core/format","jquery"],function(e,t){t.fn.ratingwidget=function(r){return this.each(function(n,o){function a(e){c.removeClass("stars-0 stars-1 stars-2 stars-3 stars-4 stars-5").addClass("stars-"+e)}function i(t){if(s!=t){var r=c.find(e.format('[value="{0}"]',t));r.trigger("click"),a(t),s=t}}r||(r="");var s,u=t(o),l="ratingwidget stars stars-0 "+r,c=t('<span class="'+l+'"></span>');if(t("option[selected]",u).length){var p=u.val();i(p),s=parseInt(p,10)}for(var d="",f=1;5>=f;f++){var m=s===f?" checked":"";d+=e.format('<label data-stars="{0}">{1}<input required type="radio" name="rating"{2} value="{3}"></label>',[f,ngettext("{n} star","{n} stars",{n:f}),m,f])}c.html(d),u.before(c).detach(),c.on("click",function(e){var r=t(e.target);r.is("input[type=radio]")&&(a(s=r.attr("value")),r.val()||r.attr("checked",!0))}).on("mouseover",function(e){var t=e.target,r=t.getAttribute("data-stars");r&&a(r)}).on("mouseout",function(){a(s||0)}).on("touchmove",function(e){var t=c.width(),r=c[0],n=r.getBoundingClientRect().left+window.pageXOffset-document.body.clientLeft,o=(e.originalEvent.touches[0].clientX-n)/t*5+1;o=0|Math.min(Math.max(o,1),5),i(o)}).on("touchstart","label",function(e){i(e.currentTarget.getAttribute("data-stars"))})}),this}}),define("reviews",["compat_filter","core/cache","core/capabilities","core/forms","jquery","core/l10n","core/login","core/models","core/notification","core/nunjucks","ratingwidget","core/requests","core/settings","underscore","core/utils","core/urls","core/user","core/z"],function(e,t,r,n,o,a,i,s,u,l,c,p,d,f,m,g,h,v){function b(e,r){var n=g.api.base.url("reviews");t.attemptRewrite(function(t){if(m.baseurl(t)===n){var r=m.querystring(t);return"app"in r&&r.app===e?!0:void 0}},r)}function k(e){v.page.append(l.env.render("_includes/flag_review_modal.html")),$modal=o('mkt-prompt[data-modal="flag-review"]'),$modal.one("click",".reasons a",m._pd(function(r){var n=e.find(".review-actions .review-flag");
$modal[0].dismissModal(),n.text(L("Flagging review..."));var a=d.api_url+g.api.sign(e.data("report-uri"));p.post(a,{flag:o(r.target).data("reason")}).done(function(){e.attr("data-review-has-flagged",!0),O({message:L("This review has been successfully flagged. Thanks!")});var r=g.api.params("reviews",{app:o("[data-slug]").data("slug")}),n=o(".review").index(e),a=t.get(r);a.objects[n].has_flagged=!0,t.set(r,a)}).fail(function(){O({message:L("Sorry, there was an issue flagging the review. Please try again later.")})})}))}function y(e,r,n){e.addClass("deleting"),p.del(d.api_url+g.api.sign(r)).done(function(){O({message:L("This review has been successfully deleted")}),e.remove(),b(n,function(e){return e.objects=e.objects.filter(function(e){return e.resource_uri!==r}),e.meta.total_count-=1,e.user||(e.user={}),e.user.has_rated=!1,e});var a=s("app").lookup(n);a&&(a.ratings.count-=1,a.ratings.count||(a.ratings.average=0)),t.bust(g.api.params("reviews",{app:n,user:"mine"})),o(".review-buttons [data-edit-review]").removeAttr("data-edit-review").text(L("Write a Review"))}).fail(function(){O({message:L("Sorry, there was a problem deleting the review")})})}function _(){function e(){if(v.body.hasClass("logged-in")){var e=document.querySelector(".review-buttons .review-button");e&&(r.widescreen()?w.apply(e):v.page.trigger("navigate",e.getAttribute("href")))}}i.login(),v.page.one("loaded",e)}function w(e){if(!h.logged_in())return e&&(e.preventDefault(),e.stopPropagation()),_();if(r.widescreen())if(e&&(e.preventDefault(),e.stopPropagation()),this.hasAttribute("data-edit-review")){var t=this.getAttribute("data-href");t=t?g.api.host(t)+t:g.api.params("reviews",{app:o("[data-app]").data("app"),user:"mine"}),this.innerHTML=L("Loading...");var n=this;p.get(t).done(function(e){e.objects&&(e=e.objects[0]),x(e),n.innerHTML=n.getAttribute("data-text")})}else x()}function x(e){o('mkt-prompt[data-modal="review"]').length||(v.body.append(l.env.render("_includes/review_modal.html",{existingReview:e,slug:o("[data-app]").data("app")})),o('mkt-prompt[data-modal="review"]').find('select[name="rating"]').ratingwidget("large"),m.initCharCount())}var L=a.gettext,O=u.notification;return v.page.on("click",".review-actions a",m._pd(function(e){var t=o(this),r=t.data("action");if(r){var n=t.closest(".review");switch(r){case"delete":y(n,t.data("href"),t.data("app"));break;case"report":k(n);break;default:return}e.stopPropagation()}})).on("click",".review-button",w).on("loaded",function(){o('select[name="rating"]').ratingwidget(),m.initCharCount()}),v.doc.on("submit",".add-review-form",m._pd(function(){var e=o(this),r=m.getVars(e.serialize()),a=r.app;n.toggleSubmitFormState(e),p.post(g.api.url("reviews"),r).done(function(e){b(a,function(t){return t.objects.unshift(e),t.meta.total_count+=1,t.user||(t.user={}),t.user.has_rated=!0,t});var n=parseInt(r.rating,10),o=s("app").lookup(a);if(o){var i=o.ratings.count;o.ratings.average=i?(o.ratings.average*i+n)/(i+1):n,o.ratings.count+=1}t.set(g.api.params("reviews",{app:a,user:"mine"}),{meta:{limit:20,next:null,offset:0,total_count:1},info:{average:n,slug:a},objects:[e]}),O({message:L("Your review was successfully posted. Thanks!")}),v.page.trigger("navigate",g.reverse("app",[a]))}).fail(function(){n.toggleSubmitFormState(e,!0),O({message:L("Sorry, there was an error posting your review. Please try again later.")})})})),v.doc.on("submit",".edit-review-form",m._pd(function(){var e=o(this),r=e.data("uri"),a=d.api_url+g.api.sign(r),i=m.getVars(e.serialize()),s=i.app;n.toggleSubmitFormState(e),p.put(a,i).done(function(e){t.set(d.api_url+e.resource_uri,e),b(s,function(e){return e.objects.forEach(function(t,n){e.objects[n].resource_uri===r&&(e.objects[n].body=i.body,e.objects[n].rating=i.rating)}),e}),O({message:L("Your review was successfully edited")}),v.page.trigger("navigate",g.reverse("app",[s]))}).fail(function(){n.toggleSubmitFormState(e,!0),O({message:L("Sorry, there was an issue editing your review. Please try again later")})})})),{_rewriter:b}}),define("startup_errors",["core/log","core/nunjucks","core/utils","core/z","utils_local"],function(e,t,r,n,o){var a=e("startup_errors");r.isSystemDateRecent()?o.checkOnline().fail(function(){a.log("Offline message"),n.body.addClass("error-overlaid").append(t.env.render("errors/offline-error.html")).on("click",".offline .try-again",function(){a.log("Re-checking online status"),o.checkOnline().done(function(){window.location.reload()}).fail(function(){a.log("Still offline")})})}):n.body.addClass("error-overlaid").append(t.env.render("errors/date-error.html")).on("click",".system-date .try-again",function(){r.isSystemDateRecent()&&window.location.reload()})}),define("linefit",["jquery"],function(e){e.fn.linefit=function(t){var r=7;return t=t||1,this.each(function(){this.innerHTML='<span class="linefitted">'+this.innerHTML+"</span>";for(var n=e(this).find("span"),o=n.get(0),a=parseFloat(n.css("font-size").replace("px","")),i=o.getClientRects().length;i>t&&a>r;)a-=.5,n.css("font-size",a),i=o.getClientRects().length})}}),define("views/feedback",["core/capabilities","compat_filter","core/forms","core/l10n","linefit","core/notification","core/requests","templates","core/urls","core/utils","core/z"],function(e,t,r,n,o,a,i,s,u,l,c){function p(){e.widescreen()&&u.reverse("feedback")!==window.location.pathname&&($(".main.feedback").length||$("mkt-prompt.feedback").length||c.page.append(s.env.render("_includes/feedback_modal.html")))}var d=n.gettext,f=a.notification;return c.doc.on("submit",".feedback-form",l._pd(function(){var n=$(this),o=$.extend(l.getVars(n.serialize()),{chromeless:e.chromeless?"Yes":"No",feedback:n.find('[name="feedback"]').val(),from_url:window.location.pathname,profile:t.featureProfile});r.toggleSubmitFormState(n),i.post(u.api.url("feedback"),o).done(function(){n.find("textarea").val(""),r.toggleSubmitFormState(n,!0),f({message:d("Feedback submitted. Thanks!")})}).fail(function(){r.toggleSubmitFormState(n,!0),f({message:d("There was a problem submitting your feedback. Try again soon.")})})})),c.body.on("click",".submit-feedback",function(e){e.preventDefault(),p()}),function(e){e.z("type","root settings feedback"),e.z("title",d("Feedback")),e.z("parent",u.reverse("homepage")),e.start("feedback.html").done(function(){p();var e=$(".linefit");e.length&&$(".linefit").linefit(2)})}}),define("views/search",["core/l10n","core/navigation","core/settings","core/urls","core/utils","core/z","previews","tracking","utils_local"],function(e,t,r,n,o,a,i,s,u){function l(e,t){return"string"==typeof e&&""!==e?e+","+t:t}function c(e){return e=e||{q:""},e.full_q=e.q||"",e.q=[],e.full_q.split(" ").forEach(function(t){t&&(":"===t[0]?(t=t.slice(1),"hosted"===t||"packaged"===t||"privileged"===t?e.app_type=l(e.app_type,t):"free"===t||"free-inapp"===t?e.premium_types=l(e.premium_types,t):"premium"===t||"paid"===t?e.premium_types=l(e.premium_types,"premium"):"premium-inapp"===t||"paid-inapp"===t?e.premium_types=l(e.premium_types,"premium-inapp"):"premium-other"===t||"paid-other"===t?e.premium_types=l(e.premium_types,"premium-other"):0===t.indexOf("cat=")?e.cat=t.split("=")[1]:"desktop"===t||"firefoxos"===t?e.dev=l(e.dev,t):"tablet"===t||"mobile"===t?(e.dev=l(e.dev,"android"),e.device=l(e.device,t)):0===t.indexOf("sort=")?e.sort=l(e.sort,t.split("=")[1]):"popular"===t?e.sort="downloads":"new"===t?e.sort="reviewed":0===t.indexOf("manifest=")||0===t.indexOf("manifest_url=")?e.manifest_url=t.split("=")[1]:0===t.indexOf("pro=")?e.pro=t.split("=")[1]:0===t.indexOf("languages=")||0===t.indexOf("language=")||0===t.indexOf("langs=")||0===t.indexOf("lang=")?e.languages=l(e.languages,t.split("=")[1]):0===t.indexOf("region=")?e.region=t.split("=")[1]:0===t.indexOf("offline")?e.offline="True":0===t.indexOf("online")?e.offline="False":0===t.indexOf("tarako")&&(e.tag="tarako")):e.q.push(t))}),e.q=e.q.join(" "),e.q===e.full_q&&delete e.full_q,e}function p(e){return e=e?e.toLowerCase():"",function(e){return e}}var d=o._pd,f=e.gettext;return a.body.on("submit",".header--search-form",function(e){e.preventDefault(),e.stopPropagation();var t={":categories":"categories",":debug":"debug",":debug_features":"debug_features",":feedback":"feedback",":homepage":"homepage",":new_apps":"new",":newsletter":"newsletter_signup",":popular_apps":"popular",":privacy":"privacy",":recommended":"recommended",":settings":"settings",":terms":"terms"},r=$("#search-q"),o=r.val();return Object.keys(t).indexOf(o)>-1?(a.page.trigger("navigate",n.reverse(t[o])),void r.val("")):":"===o||":help"===o?(window.open("https://github.com/mozilla/fireplace/wiki/QuickSearch-(PotatoSearch)"),void r.val("")):(r.trigger("blur"),void a.page.trigger("search",{q:o}))}),a.body.on("keydown","#search-q",function(e){if(13==e.keyCode){var t={":categories":"categories",":debug":"debug",":debug_features":"debug_features",":feedback":"feedback",":homepage":"homepage",":new_apps":"new",":newsletter":"newsletter_signup",":popular_apps":"popular",":privacy":"privacy",":recommended":"recommended",":settings":"settings",":terms":"terms"},r=$("#search-q"),o=r.val();return Object.keys(t).indexOf(o)>-1?(a.page.trigger("navigate",n.reverse(t[o])),void r.val("")):":"===o||":help"===o?(window.open("https://github.com/mozilla/fireplace/wiki/QuickSearch-(PotatoSearch)"),void r.val("")):(r.trigger("blur"),void a.page.trigger("search",{q:o}))}}),a.page.on("loaded_more",function(){i.initialize(),a.page.find(".total-results").text(a.page.find(".item.app").length)}).on("search",d(function(e,t){return a.page.trigger("navigate",[o.urlparams(n.reverse("search"),t),{search_query:t.q}])})),function(e,t,o){o=c(o),"sort"in o&&"relevancy"===o.sort&&delete o.sort;for(var i,l,d=["full_q","q","author"],m=f("Search Results"),g="search app-list",h=0;h<d.length&&(i=d[h],!(l=o[i]));h++);l&&"author"===i?(g+=" leaf",u.headerTitle(f("Developer Listing"))):r.meowEnabled||(g+=" leaf"),e.z("type",g),e.z("search",l),e.z("title",l||m),e.start("search.html",{endpoint_name:"search",params:o,processor:p(l),raw_query:l||document.querySelector('[name="q"]').value}).done(function(){var t=e.results.searchresults;o.manifest_url&&1===t.objects.length&&a.page.trigger("divert",[n.reverse("app",[t.objects[0].slug])+"?src="+o.src]),t.objects.length||s.sendEvent("No results found","Search",l)})}}),define("webactivities",["apps","buttons","core/capabilities","core/defer","core/log","core/login","core/requests","core/urls","core/utils","core/z"],function(e,t,r,n,o,a,i,s,u,l){function c(r,n,o){p.log('Handled "'+r+'" activity: '+JSON.stringify(n));var c,d,f,m="activity-"+r,g=n.src&&u.slugify(n.src)||m;switch(r){case"marketplace-app":if("login"===n.type){a.handle_fxa_login(n.auth_code,n.state);break}f=n.slug,d=n.manifest_url||n.manifest,f?(c=s.reverse("app",[f]),l.page.trigger("navigate",[u.urlparams(c,{src:g})])):d&&l.page.trigger("search",{q:":manifest="+d,src:g});break;case"marketplace-app-rating":c=s.reverse("app/ratings/add",[n.slug]),l.page.trigger("navigate",[u.urlparams(c,{src:g})]);break;case"marketplace-category":c="langpacks"==n.slug?s.reverse("langpacks",[n.fxos_version]):s.reverse("category",[n.slug]),l.page.trigger("navigate",[u.urlparams(c,{src:g})]);break;case"marketplace-search":if("firefox-os-app-stats"===n.type){l.page.trigger("navigate",s.reverse("usage"));break}l.page.trigger("search",{q:n.query,src:g});break;case"marketplace-openmobile-acl":p.log("Handling openmobile-acl",n.acl_version);var h=(n.acl_version||"").split(";");if(h[4]){p.log("ACL already installed",h[4]),o.reject("ACL_APP_ALREADY_INSTALLED");break}var v=h[1];switch(p.log("Parsed openmobile-acl product",v),v){case"P172R12":f="acl-sp7715-zte_open_c2";break;case"MTK6572":f=null;break;case"QC8210":f=null;break;default:p.error("Unknown chipset",v)}if(f){var b=".install[data-slug="+f+"]";l.page.on("loaded",function(){u.getVars().activity_src===m&&t.spinButton($(b))}),l.page.trigger("navigate",[u.urlparams(s.reverse("app",[f]),{src:g,activity_src:m})]),i.get(s.api.url("app",[f])).done(function(r){e.install(r,{}).then(function(){e.launch(r.manifest_url),t.markBtnsAsInstalled(),o.resolve("SUCCESS")}).fail(function(){t.revertButton($(b)),o.reject("COULD_NOT_INSTALL_APP")})})}else o.reject("NO_ACL_APP_FOUND_FOR_THIS_CHIPSET")}}var p=o("webactivities");return r.webactivities&&navigator.mozSetMessageHandler("activity",function(e){var t=n.Deferred();t.promise().done(e.postResult).fail(e.postError),c(e.source.name,e.source.data,t)}),window.addEventListener("message",function(e){if(e.data&&e.data.name&&e.data.data){var t=n.Deferred();p.log("Received post message from "+e.origin+": "+JSON.stringify(e.data)),e.data.id&&e.origin&&t.promise().done(function(t){var r={type:"activity-result",id:e.data.id,name:e.data.name,result:t};p.log("Posting back result for "+e.data.name),window.top.postMessage(r,e.origin)}).fail(function(t){var r={type:"activity-error",id:e.data.id,name:e.data.name,result:t};p.log("Posting back error for "+e.data.name),window.top.postMessage(r,e.origin)});try{c(e.data.name,e.data.data,t)}catch(r){}}},!1),r.iframed&&(p.log("postMessaging to *: loaded"),window.top.postMessage("loaded","*")),{handleActivity:c}}),console.log("Mozilla(R) FP-MKT (R) 2.0"),console.log("64K High Memory Area is available."),define("main",["init"],function(e){var t=performance.now();e.done(function(){require(["apps","carrier","categories","core/cache","core/capabilities","core/format","core/log","core/navigation","core/nunjucks","core/requests","core/settings","core/site_config","core/l10n","core/urls","core/utils","core/user","core/z","consumer_info","jquery","newsletter","regions","underscore","update_banner","user_helpers","utils_local","addon","app_list","buttons","content-ratings","core/forms","elements/categories","elements/header","elements/nav","elements/select","flipsnap","header_footer","helpers_local","image-deferrer-mkt","core/login","core/models","marketplace-elements","overlay","perf_events","perf_helper","previews","reviews","startup_errors","tracking_events","views/feedback","views/search","webactivities"],function(e,r,n,o,a,i,s,u,l,c,p,d,f,m,g,h,v,b,k,y,_,w,x){var L=s("mkt");L.log("Package version: "+(p.package_version||"N/A")),"desktop"===a.device_type()&&v.body.addClass("desktop"),p.body_classes&&v.body.addClass(p.body_classes),v.page.one("loaded",function(){if(v.context.hide_splash!==!1){L.log("Hiding splash screen ("+((performance.now()-t)/1e3).toFixed(6)+"s)");{k("#splash-overlay").addClass("hide")}v.body.removeClass("overlayed").addClass("loaded"),setTimeout(function(){v.page.trigger("splash_removed")},1500)}else L.log("Retaining the splash screen for this view")}),a.chromeless&&window.addEventListener("keydown",function(e){82==e.keyCode&&e.metaKey&&window.location.reload()}),a.webApps&&document.addEventListener("visibilitychange",function(){document.hidden||h.logged_in()&&b.fetch(!0)},!1),v.page.on("reload_chrome",function(){L.log("Reloading chrome"),a.webApps||navigator.userAgent.match(/googlebot/i)?a.osXInstallIssues&&0===k('mkt-banner[name="mac-banner"]').length&&k(".banners").append(l.env.render("_includes/os_x_banner.html")):document.getElementById("incompatibility-banner")||(L.log("Adding incompatibility banner"),k(".banners").append(l.env.render("incompatible.html"))),x.showIfNeeded(),h.logged_in()||v.body.removeClass("show-recommendations"),d.promise.then(function(){(a.nativeFxA()||a.yulelogFxA())&&v.body.addClass("native-fxa")}),b.promise.then(function(){h.logged_in()&&h.get_setting("enable_recommendations")&&v.body.addClass("show-recommendations")}),v.body.toggleClass("logged-in",h.logged_in()),v.page.trigger("reloaded_chrome")}).on("install-success reload_chrome",function(){r.hasInstallableApps().then(function(e){var t=k('mkt-banner[name="carrier-apps-banner"]');e?0===t.length&&k(".banners").append(l.env.render("_includes/carrier_apps_banner.html")):t&&t.each(function(e,t){t.dismissBanner()})})}).trigger("reload_chrome"),v.body.on("dismiss-banner",'[name="carrier-apps-banner"]',function(){r.completeLateCustomization()}),v.page.on("before_login before_logout",function(){o.purge()}).on("logged_in logged_out",function(){var e=document.querySelector("mkt-nav");e&&setTimeout(function(){e.toggle(!1)},50)}),window.addEventListener("resize",w.debounce(function(){document.dispatchEvent(new CustomEvent("saferesize"))},200),!1),b.promise.done(function(){if(L.log("Initial navigation"),v.spaceheater)v.page.trigger("loaded");else{var e=[window.location.pathname+window.location.search],t=g.getVars().q;window.location.pathname==m.reverse("search")&&t&&e.push({search_query:t}),v.page.trigger("navigate",e)}}),c.on("deprecated",function(){throw v.page.trigger("divert",[m.reverse("deprecated")]),new Error("Cancel navigation; deprecated client")}),v.body.attr("data-meow--enabled",p.meowEnabled||!1),L.log("Done")})})}),define("truncator",["core/utils","core/z","jquery"],function(e,t,r){return{init:function(){t.page.on("click",".truncate-toggle",e._pd(function(){var e=r(this);e.prev(".truncated-wrapper").toggleClass("truncated"),e.remove()})),this.init=function(){}},removeUntruncated:function(){r(".truncated-wrapper").each(function(){var e=r(this);e.prop("scrollHeight")<=e.prop("offsetHeight")&&e.removeClass("truncated").next(".truncate-toggle").hide()})}}}),define("views/addon",["core/capabilities","core/l10n","core/settings","core/utils","truncator","utils_local"],function(e,t,r,n,o,a){var i=t.gettext;return function(e,t){e.z("type","leaf detail"),e.z("title",i("Loading...")),o.init();var r=decodeURIComponent(t[0]);e.start("addon/index.html",{placeholder_addon:{loading:!0,name:i("Loading..."),slug:"loading",version:i("Loading...")},slug:r}),e.onload("addon-data",function(t){var r=n.translate(t.name);e.z("title",r),a.headerTitle(r),o.removeUntruncated()})}}),define("views/addons",["core/capabilities","core/l10n","core/settings","utils_local"],function(e,t,r,n){var o=t.gettext;return function(e){e.z("type","leaf"),e.z("title",o("Firefox OS Add-ons")),n.headerTitle(o("Firefox OS Add-ons")),e.start("addon/list.html")}}),define("views/app/abuse",["core/capabilities","core/forms","core/l10n","core/notification","core/nunjucks","core/requests","core/urls","core/utils","core/z","utils_local"],function(e,t,r,n,o,a,i,s,u,l){var c=r.gettext,p=n.notification;return u.doc.on("submit",".abuse-form",s._pd(function(){var r=$(this),n=r.find("input[name=app]").val(),o=s.getVars(r.serialize());t.toggleSubmitFormState(r),a.post(i.api.url("app_abuse"),o).done(function(){p({message:c("Report submitted. Thanks!")}),e.widescreen()||u.page.trigger("navigate",i.reverse("app",[n]))}).fail(function(){t.toggleSubmitFormState(r,!0),p({message:c("There was an issue submitting your report. Please try again later.")})})})),u.body.on("click",".app-report-abuse .button",function(t){var r=$(this).closest(".detail").data("slug");e.widescreen()?(t.preventDefault(),t.stopPropagation(),$("mkt-prompt.abuse").length||u.body.append(o.env.render("_includes/abuse_modal.html",{slug:r}))):u.page.trigger("navigate",[i.reverse("app/abuse",[r])])}),function(e,t){e.z("type","leaf"),e.z("parent",i.reverse("app",[t[0]]));var r=c("Report Abuse");e.z("title",r),l.headerTitle(r),e.start("app/abuse.html",{slug:t[0]})}}),define("views/app/privacy",["core/l10n","core/urls","utils_local"],function(e,t,r){var n=e.gettext;return function(e,o){e.z("type","leaf"),e.z("parent",t.reverse("app",[o[0]]));var a=n("Privacy Policy");e.z("title",a),r.headerTitle(a),e.start("app/privacy.html",{slug:o[0]})}}),define("views/app/ratings/add",["core/capabilities","core/login","core/l10n","core/urls","core/user","core/z","utils_local"],function(e,t,r,n,o,a,i){var s=r.gettext;return a.page.on("click touchend",".add-review .rating",function(){var e=document.querySelector(".add-review textarea:invalid");e&&e.focus()}),function(e,t){var r=decodeURIComponent(t[0]);return e.z("type","leaf"),e.z("title",s("Leave a Review")),i.headerTitle(s("Write a Review")),o.logged_in()?void e.start("ratings/add.html",{slug:r}):void a.page.trigger("navigate",n.reverse("app",[r]))}}),define("views/app/ratings/edit",["core/l10n","core/urls","core/user","core/utils","core/z","utils_local"],function(e,t,r,n,o,a){function i(e){return e.objects?e.objects[0]:e}var s=e.gettext;return function(e,u){var l=decodeURIComponent(u[0]),c=s("Edit Review");if(e.z("type","leaf"),e.z("title",c),a.headerTitle(c),!r.logged_in())return void o.page.trigger("divert",t.reverse("app",[l]));var p,d=n.getVars().review;p=d&&r.get_permission("reviewer")?t.api.url("review",[d]):t.api.params("reviews",{app:l,user:"mine"}),e.start("ratings/edit.html",{slug:l,endpoint:p,normalize:i}),e.onload("main",function(e){e.meta&&0===e.meta.total_count&&o.page.trigger("divert",t.reverse("app/ratings/add",[l]))})}}),define("views/app/ratings/rating",["core/l10n","core/urls"],function(e,t){var r=e.gettext;return function(e,n){var o=decodeURIComponent(n[0]),a=n[1];e.start("ratings/rating.html",{slug:o,id:a}),e.z("type","leaf"),e.z("parent",t.reverse("app/ratings",[o])),e.z("title",r("App Review"))}}),define("views/app/ratings",["core/l10n","core/urls","utils_local"],function(e,t,r){var n=e.gettext;return function(e,o){var a=decodeURIComponent(o[0]);e.z("type","leaf"),e.z("parent",t.reverse("app",[a])),e.z("title",n("Reviews")),r.headerTitle(n("Read All Reviews")),e.start("ratings/main.html",{slug:a})}}),define("views/app/receipt",["core/capabilities","core/l10n","core/login","core/notification","templates","core/urls","core/user","core/z"],function(e,t,r,n,o,a,i,s){var u=t.gettext,l=n.notification;return function(e,t){var r=decodeURIComponent(t[0]);return i.logged_in()?(e.z("type","leaf detail"),e.z("parent",a.reverse("app",[t[0]])),e.z("title",u("Receipt")),void e.start("app/receipt.html",{slug:t[0]})):(l({message:u("Please sign in to view the receipt")}),void s.page.trigger("divert",a.reverse("app",[r])))}}),define("views/app",["content-ratings","core/capabilities","core/l10n","core/log","core/settings","core/utils","core/z","previews","tracking_events","truncator","utils_local","views/app/abuse"],function(e,t,r,n,o,a,i,s,u,l,c){{var p=r.gettext;n("app")}return function(t,r){l.init(),t.z("type","leaf detail"),t.z("title",p("Loading...")),c.headerTitle(p("App Detail"));var n=decodeURIComponent(r[0]);t.start("app/index.html",{iarc:e,placeholder_app:{loading:!0,author:p("Loading..."),name:p("Loading..."),previews:[{image_url:"",thumbnail_url:""}],price:p("Loading..."),price_locale:p("Loading..."),ratings:{average:0,count:0},slug:"loading"},slug:n}),s.resizeDesktopDetailTray(),i.page.one("fragment_load_failed",function(e,r){"app-data"===r.signature.id&&t.z("title",p("Oh no!"))}),t.onload("app-data",function(e){t.z("title",a.translate(e.name)),s.initialize(),s.resizeDesktopDetailTray(),l.removeUntruncated(),u.trackAppHit()})}}),define("views/carrier",["core/l10n","core/urls","user_helpers"],function(e,t,r){var n=e.gettext;return function(e){var o=t.api.url("late-customization",[],{carrier:r.carrier(),region:r.region()});e.z("type","root carrier-apps"),e.z("title",n("Free Carrier Apps")),e.start("carrier.html",{carrier_url:o})}}),define("views/games/listing",["core/l10n"],function(e){var t=e.gettext;return function(e,r,n){n=n||{},e.z("title",t("Games")),e.z("type","root games"),e.start("games/listing.html",{currentGameCategory:r[0],currentGameTag:"all"===r[0]?"featured-game":"featured-game-"+r[0],gameCategories:[["all",t("All games")],["action",t("Action")],["puzzle",t("Puzzle")],["strategy",t("Strategy")],["adventure",t("Adventure")]]})}}),define("views/category",["categories","core/capabilities","core/format","core/settings","core/urls","core/utils","core/z","underscore","tracking_events","views/games/listing"],function(e,t,r,n,o,a,i,s,u){return function(t,i,l){l=l||{};var c=decodeURIComponent(i[0]),p=s.findWhere(e,{slug:c}),d=p?p.name:"";d&&t.z("title",d),t.z("type","root category app-list"),t.z("show_cats",!0),t.z("cat",c),"src"in l&&delete l.src;var f=r.format(u.SRCS.categoryPopular,c),m=r.format(u.SRCS.categoryNew,c);t.start("category.html",{category:c,category_name:d,endpoint:o.api.unsigned.url("category",[c],l),popularUrl:a.urlparams(o.reverse("category",[c]),{src:f}),newUrl:a.urlparams(o.reverse("category",[c]),{sort:"reviewed",src:m}),showPersonalizationSubmenu:"personalization"===c&&n.addonsEnabled,sort:l.sort,source:l.sort?m:f}),u.trackCategoryHit(c)}}),define("views/debug",["core/cache","core/capabilities","carriers","compat_filter","core/log","core/models","core/notification","core/requests","core/settings","core/storage","core/user","core/utils","core/z","regions","utils_local","underscore"],function(e,t,r,n,o,a,i,s,u,l,p,d,f,m,g,h){function v(e){return"function"==typeof e?e():e}{var b=o.persistent("debug","change"),k=o.persistent("mobilenetwork","change");$(document.getElementById("debug-status"))}return f.page.on("click","#clear-localstorage",function(){l.clear(),i.notification({message:"localStorage cleared",timeout:1e3})}).on("click","#enable-gametime",function(){u.gametimeEnabled=!0,f.page.trigger("navigate","/")}).on("click","#enable-addons",function(){u.addonsEnabled=!0,f.page.trigger("navigate","/addons")}).on("click","#enable-offline-cache",function(){l.removeItem("offline_cache_disabled"),b.log("Offline cache enabled:",new Date),require("views").reload(),i.notification({message:"Offline cache enabled",timeout:1e3})}).on("click","#disable-offline-cache",function(){l.setItem("offline_cache_disabled",1),b.log("Offline cache disabled:",new Date),require("views").reload(),i.notification({message:"Offline cache disabled",timeout:1e3})}).on("click","#clear-offline-cache",function(){e.flush(),a("app").flush(),b.log("Offline cache cleared:",new Date),i.notification({message:"Offline cache cleared",timeout:1e3}),window.location.reload()}).on("click","#clear-cookies",function(){for(var e=document.cookie.split(";"),t=0;t<e.length;t++){var r=e[t].indexOf("="),n=r>-1?e[t].substr(0,r):c[t];document.cookie=n+"=;expires=Thu, 01 Jan 1970 00:00:00 GMT"}i.notification({message:"Cookies cleared",timeout:1e3})}).on("click",".cache-menu a",function(t){t.preventDefault();var r=e.get($(this).data("url"));r=JSON.stringify(r,null,"  "),$("#cache-inspector").html(d.escape_(r))}).on("click","#submit-debug",function(e){e.preventDefault();var r={body:JSON.stringify({app:u.app_name,origin:window.location.protocol+"//"+window.location.host,logs:o.all,persistent_logs:o.persistent.all,capabilities:t,settings:u,report_version:1,profile:n.featureProfile})},a="https://ashes.paas.allizom.org/post_report";s.post(a,r).done(function(e){i.notification({message:"Logs uploaded: "+e.id,timeout:3e4})})}).on("change","#debug-region",function(){var e=$(this).val(),t=p.get_setting("region_override");t!==e&&k.log("Manual region override change:",t,"",e),p.update_settings({region_override:e}),f.page.trigger("reload_chrome"),i.notification({message:"Region updated to "+(m.REGION_CHOICES_SLUG[e]||"---")})}).on("change","#debug-carrier",function(){var e=$(this).val(),t=p.get_setting("carrier_override");t!==e&&k.log("Manual carrier override change:",t,"",e),p.update_settings({carrier_override:e}),f.page.trigger("reload_chrome"),i.notification({message:"Carrier updated to "+e})}),function(a){a.z("type","leaf debug"),a.start("debug.html",{cache:e.raw,callIfFunction:v,capabilities:t,carriers:r.CARRIER_SLUGS.sort(),filter:o.filter,persistent_logs:o.persistent.all,profile:n.featureProfile,regions:h.sortBy(g.items(m.REGION_CHOICES_SLUG),function(e){return e[1]}),recent_logs:o.get_recent(100),request_cache:l.getItem("request_cache")||{}})}}),define("views/debug_features",["compat_filter","core/settings","core/urls"],function(e,t,r){return function(t,n,o){o=o||{},o.pro=e.featureProfile,t.start("debug_features.html",{endpoint:r.api.unsigned.url("features",[],o),profile:o.pro})}}),define("views/feed_landing",["edbrands","core/l10n","core/utils","utils_local"],function(e,t,r,n){var o=t.gettext;return function(t,a){function i(e){t.z("title",r.translate(e.name))}var s=a[0],u=decodeURIComponent(a[1]);t.z("type","leaf "+s+"-landing"),t.z("title",o("Loading...")),n.headerTitle(o("Collection Detail")),t.start("feed/"+s+".html",{landing:!0,slug:u}),"editorial"==s?t.onload("brand",function(r){t.z("title",e.get_brand_type(r.type,r.apps.length))}):"collection"==s?t.onload("feed-collection",i):"shelf"==s&&t.onload("shelf",i)}}),define("views/games/index",["core/l10n"],function(e){e.gettext;return function(e,t,r){r=r||{},e.z("title",""),e.z("type","root games"),e.start("games/index.html")}}),define("desktop_promo",["core/capabilities","core/l10n","core/urls","core/utils","tracking_events"],function(e,t,r,n,o){var a=t.gettext;return{isDesktop:function(){return"desktop"===e.device_type()},promoItems:[{name:"chess-1",url:r.reverse("app",["chess-1"]),text:a("Play 45 creative variations of chess.")},{name:"basecamp",url:r.reverse("app",["basecamp"]),text:a("Manage projects easily with Basecamp.")},{name:"productivity",url:r.reverse("feed_landing",["collection","productivity-appsdesktop"]),text:a("Productivity AppsDesktop Essentials")},{name:"games",url:r.reverse("feed_landing",["collection","games-ent-appsdesktop"]),text:a("Games & Entertainment AppsDesktop Essentials")},{name:"goldnuggets",url:r.reverse("app",["goldnuggets"]),text:a("Play GoldNuggets now!")}].map(function(e){return e.url=n.urlparams(e.url,{src:o.SRCS.desktopPromo}),e})}}),define("mkt-carousel",["core/defer"],function(e){function t(){function t(e,t){e.style["-webkit-order"]=t,e.style.order=t}function r(){g.forEach(function(e,r){t(e,r),0===r?e.setAttribute("data-navigate","prev"):2===r?e.setAttribute("data-navigate","next"):e.removeAttribute("data-navigate")})}function n(e,r){e.classList.add("desktop-promo-placeholder-item-shown");var n="right"===r?g.length:-1;t(e,n)}function o(e){e.classList.remove("desktop-promo-placeholder-item-shown")}function a(e){m.setAttribute("data-action",e)}function i(t){-1===["left","center"].indexOf(t)&&console.error("animating non animated promo offset"),v=!0;var r=e.Deferred();return a(t),s(function(){v=!1,r.resolve()}),r.promise()}function s(e){m.addEventListener("transitionend",function t(){e(),m.removeEventListener("transitionend",t)})}function u(e){requestAnimationFrame(function(){requestAnimationFrame(e)})}function l(e){var t=e.pop();return e.unshift(t),t}function c(e){var t=e.shift();return e.push(t),t}function p(){var e=(l(g),l(h));r(),n(e,"right"),a("right"),u(function(){i("center").then(function(){o(e),a("start")})})}function d(){var e=(c(g),c(h));r(),n(e,"left"),i("left").then(function(){a("start"),o(e)})}var f=document.querySelector(".desktop-promo"),m=f.querySelector(".desktop-promo-items"),g=Array.prototype.slice.call(m.children),h=g.map(function(e){var t=e.cloneNode(!0);return t.classList.add("desktop-promo-placeholder-item"),m.appendChild(t),t}),v=!1;return l(g),l(h),f.addEventListener("click",function(e){v||("prev"===e.target.getAttribute("data-navigate")?(e.preventDefault(),e.stopPropagation(),p()):"next"===e.target.getAttribute("data-navigate")&&(e.preventDefault(),e.stopPropagation(),d()))}),r(),{shiftLeft:d,shiftRight:p,transitioning:v}}return{initialize:t}}),define("views/homepage",["core/capabilities","core/format","core/l10n","core/log","core/nunjucks","core/requests","core/settings","core/z","desktop_promo","jquery","mkt-carousel","salvattore","core/urls","core/utils","utils_local","views/games/index"],function(e,t,r,n,o,a,i,s,u,l,c,p,d,f,m,g){n("homepage"),r.gettext;return s.page.on("click",".loadmore.feed-item-item button",function(){var e=l(this),t=e.parent(),r=t.clone();t.addClass("loading"),a.get(e.data("url")).done(function(e){t.remove();var n=e.objects.map(function(e){return l(o.env.render("feed/feed_item.html",{item:e}))[0]}),a=document.querySelector(".feed-home");a&&p.append_elements(a,n),e.meta.next&&(r.find("button").attr("data-url",d.api.base.host(e.meta.next)+e.meta.next),a&&a.parentNode.insertBefore(r[0],a.nextSibling)),s.page.trigger("fragment_loaded")})}),function(t,r,n){if("desktop"===e.os.type&&i.gametimeEnabled)return g(t,r,n);
var o=u.isDesktop();n=n||{},t.z("title",""),t.z("type","root homepage"),"src"in n&&delete n.src,t.start("homepage.html",{showPromo:o,promoItems:u.promoItems}),o&&c.initialize(),t.onload("feed-items",function(){m.initSalvattore(document.querySelector(".feed-home"))})}}),define("views/langpacks",["core/l10n","core/log","core/models","core/urls","core/z"],function(e,t){function r(e){return e.isApp=!0,e.is_packaged=!0,e.premium_type="free",e.receipt_required=!1,e.payment_required=!1,e.role="langpack",e.slug="langpack-"+e.uuid,e.device_types=["firefoxos"],e}{var n=e.gettext;t("langpacks")}return function(e,t,o){var a=n("Language Packs"),i=t[0];o.fxos_version=i,e.z("type","leaf app-list langpacks"),e.z("title",a),e.start("langpacks.html",{endpoint_name:"langpacks",params:o,source:"langpacks",subtitle:n("Firefox OS {version}",{version:i}),transform_to_app:r,title:a})}}),define("views/new",["core/format","core/l10n","core/urls","core/utils"],function(e,t){var r=t.gettext;return function(e){var t=r("New");e.z("type","root app-list new"),e.z("title",t),e.start("app_list.html",{appListType:"new",endpoint_name:"search",sort:"reviewed",title:t})}}),define("views/newsletter_signup",["core/l10n","core/settings","core/user","newsletter","underscore","user_helpers","utils_local"],function(e,t,r,n,o,a,i){var s=e.gettext;return function(e){var r=(t.meowEnabled?"leaf":"root")+" settings",o=s("Newsletter Signup"),a={standalone_newsletter_signup:!0};_.extend(a,n.context()),e.start("newsletter.html",a),e.z("type",r),e.z("title",o),i.headerTitle(o),window.scrollTo(0,1),window.scrollTo(0,0)}}),define("views/popular",["core/l10n","core/log","core/urls","core/utils"],function(e,t){{var r=e.gettext;t("popular")}return function(e){var t=r("Popular");e.z("type","root app-list popular"),e.z("title",t),e.start("app_list.html",{appListType:"popular",endpoint_name:"search",source:"popular",title:t})}}),define("views/privacy",["core/l10n","utils_local"],function(e,t){var r=e.gettext;return function(e){var n=r("Privacy Policy");e.start("privacy.html"),e.z("type","leaf"),e.z("title",n),t.headerTitle(n)}}),define("views/purchases",["core/l10n","core/urls"],function(e,t){var r=e.gettext;return function(e){e.z("type","root settings purchases"),e.z("title",r("My Apps")),e.z("parent",t.reverse("homepage")),e.start("purchases.html",{endpoint_name:"installed"})}}),define("views/recommended",["core/l10n","core/urls","core/z"],function(e,t,r){var n=e.gettext;return r.page.on("before_logout",function(){window.location.pathname===t.reverse("recommended")&&r.page.trigger("navigate",[t.reverse("homepage")])}),function(e){var t=n("Recommended");e.z("type","root app-list recommended"),e.z("title",t),e.start("app_list.html",{appListType:"recommended",endpoint_name:"recommended",require_user:!0,title:t})}}),define("views/settings",["core/cache","jquery","core/l10n","core/notification","core/requests","core/urls","core/user","user_helpers","core/utils","core/z"],function(e,t,r,n,o,a,i,s,u,l){function c(){var e=t(".account-settings");e.length&&(e.find("[name=display_name]").val(i.get_setting("display_name")),e.find("[name=email]").val(i.get_setting("email")),e.find("input#enable_recommendations").prop("checked",i.get_setting("enable_recommendations",!0)),l.page.trigger("reload_chrome"))}var p=u._pd,d=r.gettext,f=n.notification;return l.page.on("submit","form.account-settings",p(function(r){if(r.stopPropagation(),i.logged_in()){var n=t(this),s={display_name:n.find("#display_name").val(),enable_recommendations:n.find("#enable_recommendations").prop("checked")};i.update_settings(s),o.patch(a.api.url("settings"),s).done(function(){l.body.toggleClass("show-recommendations",s.enable_recommendations),c(),f({message:d("Your settings have been successfully saved")}),e.bust(a.api.url("settings")),e.bust(a.api.url("consumer_info"))}).fail(function(){f({message:d("Settings could not be saved")})})}})).on("logged_in",c),function(e){e.z("type","root settings"),e.z("title",d("Settings")),e.z("parent",a.reverse("homepage")),e.start("settings.html")}}),define("views/terms",["core/l10n","utils_local"],function(e,t){var r=e.gettext;return function(e){e.start("terms.html"),e.z("type","leaf");var n=r("Terms of Use");e.z("title",n),t.headerTitle(n)}}),define("views/usage",["core/l10n"],function(e){var t=e.gettext;return function(e){e.z("type","leaf"),e.z("title",t("App Statistics")),e.start("usage.html")}}),define("views/website/issue",["core/forms","core/l10n","core/notification","core/requests","core/urls","core/utils","core/z","utils_local"],function(e,t,r,n,o,a,i,s){var u=t.gettext,l=r.notification;return i.page.on("submit",".issue-form",function(t){t.preventDefault();var r=$(this),s=a.getVars(r.serialize());e.toggleSubmitFormState(r),n.post(o.api.url("website_issue"),s).done(function(){l({message:u("Report submitted. Thanks!")}),i.page.trigger("navigate",o.reverse("website",[s.website]))}).fail(function(){e.toggleSubmitFormState(r,!0),l({message:u("There was an issue submitting your report. Please try again later.")})})}),function(e,t){e.z("type","leaf"),e.z("parent",o.reverse("website",[t[0]]));var r=u("Report an Issue");e.z("title",r),s.headerTitle(r),e.start("website/issue.html",{pk:t[0]})}}),define("views/website",["core/utils","truncator","utils_local"],function(e,t,r){return function(n,o){t.init(),n.z("type","leaf detail website"),n.z("title",gettext("Loading...")),r.headerTitle(gettext("Website Detail"));var a=o[0];n.start("website/index.html",{placeholder_website:{title:gettext("Loading..."),short_title:gettext("Loading..."),description:gettext("Loading...")},pk:a}),n.onload("website-data",function(r){t.removeUntruncated(),n.z("title",e.translate(r.name))})}}),define("core/views/fxa_authorize",["core/capabilities","core/log","core/login","core/utils","core/z"],function(e,t,r,n,o){var a=t("view","fxa-login");return function(){var t,i=window.location.href;try{window.opener.location.protocol==window.location.protocol&&window.opener.location.host==window.location.host&&(t=!0)}catch(s){t=!1}if(t){window.opener.postMessage({auth_code:i},window.location.origin);var u="app://packaged."+window.location.host;a.log("Sending OAuth code to parent window "+u),o.context.hide_splash=!1,window.opener.postMessage({auth_code:i},u)}else{var l=n.getVars().state;e.firefoxOS?(a.log("Starting login webactivity"),new MozActivity({name:"marketplace-app",data:{type:"login",auth_code:i,state:l}}),window.close()):(r.handle_fxa_login(i,l),a.log("Reusing window as Marketplace app"),o.page.trigger("navigate","/"))}}}),require(["main"]);